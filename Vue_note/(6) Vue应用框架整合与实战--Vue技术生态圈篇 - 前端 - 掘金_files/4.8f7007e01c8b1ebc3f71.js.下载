webpackJsonp([4],{1043:function(t,e,n){function i(t){n(1044)}var s=n(9)(n(1045),n(1057),i,"data-v-fb64097a",null);t.exports=s.exports},1044:function(t,e){},1045:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(988),s=n.n(i),o={welcome:n(1049),timelineIndex:n(1050),columnIndex:n(1051),collectionIndex:n(1052),exploreIndex:n(1053),entryPublic:n(1054),entryDetail:n(1055),column:n(1056)};e.default={components:{SidebarBlock:s.a},props:["closeable"],data:function(){return{visible:!1}},methods:{close:function(){window.localStorage.setItem("HIDE_APP_DOWNLOAD_SIDEBAR_BLOCK",!0),this.visible=!1}},computed:{qrImageUrl:function(){return o[this.$route.name]}},mounted:function(){this.closeable?this.visible=!window.localStorage.getItem("HIDE_APP_DOWNLOAD_SIDEBAR_BLOCK"):this.visible=!0}}},1046:function(t,e){},1047:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["title","pure"]}},1048:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidebar-block",class:{pure:t.pure,shadow:!t.pure}},[t.pure?[t._t("default")]:[t.title?n("div",{staticClass:"block-title"},[t._v(t._s(t.title))]):t._e(),n("div",{staticClass:"block-body"},[t._t("default")],2)]],2)},staticRenderFns:[]}},1049:function(t,e,n){t.exports=n.p+"static/img/welcome.6f27533.png"},1050:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFDElEQVR4Xu2c23LbMAxEnT/vn7uTphq7qsSzC4AW7UFfQQLgLm6knH7d7/f7rf8tg8DXNyFfv17vz/3J5pH9Z/neO8Vf0r/XmbVXhWAT8hfJJqQz5DCpOkM6Q34QcGu8W6Oz+rP7XX+39acZMqqprjFq2kqTHjXhiH4C3JG7eIyGlCbkdrtlCW1ChJLnRPjbEXJFSclGXXZ/llCyf6ZfKlmzCSHnI/bdnuOuJ8LoTE0I3HuaEOO5pjNEaJrRlNz2OWN1BSHkb2dIMkOyhFbujwTMx/WQSkApeyJjMelsQnYIVRL6cRkSOZBb852IHT1tHPXAiP9LZ0jkQE0IhdigJMyowU1IE/IPAh99U++S9eBaessyk+O/5ZGS5X7jrlzvNvVKfJoQAU0KKEHFcMmz/iZEQHMJQgQ/U0uoKZKcjNP+rJzsR+Vv8asTitAr5FHAaV8TEvymTsBG5U1IE/ITO7NrOOmnCM7uJ/1n8j8ZEt1ctS/SA8h2FlDnNZh8ceRNyAlaTcgOmMoIjzzNXEpItcOKvizgThm4Yq37lLP5GJ6yogY3w1lCsvb3JGX9Genby0YB24T8RasJMX+4VhWBZ+XrowhRekZ1HV+9ZEVLYslrL90jnBqqEucSQhng6nMBJ/vY1J2xrwmpe3noDDlo6pGMpgwguZUhkR6hOqCWKFpH9rLyrH3afzkhDkBKxFaW2FcE4Nn5pZI1w8Em5BFm9jf1JoQLDgWYOpVNyxA+greCDjxb7nnLq4cli7d7K2gMzmYceUP2I/tpD8nVHjflewgB0oSc09eEHGATCZjSDFEcoBpNDmXlWftqyfj2U8HDPY/6NCM/v2cBGU0Z7j0jAphDiOKPcx4iTxp71TGNjJ3J1YjZ9mcDogkBppoQ82IYjfxZ+2ZmSMVU6GQgfsKN1EwC3s2Aan1ZgCgAHP0Ovodjb6RpOk0uot8l2AEskiGO/iZk91NVyr7lCIlELB2yWu5mSNY+lays/rP98j1k9hhMB7ySEKfk0DlojG9CThCcHQD2Bypi+tUpPRug2UOJWmHCGUKEvbt8dsCVfg/JTiWR/S7BBKgztipDj6NvdJbQ83sEUAcgBQAiyLFHuhR/mhDjrYwCaDlC3AigAyr61CZHYEXllEFRvUdjrTI2b/7ITT2TkkSg4nD1FNSE7BDNjrGV+yMZTRnk+tcZkvz7lI8mJBKhbgQSgNXyaEkMjb3VzlOPIXmkB9EZnJ5J/jnyJiTwlqUEAGVI6U2dosuVOxEUHStdny7NkEgNdw84+95BEen6S/pITvbKX3vJIMndpkwAZCPaDRjyJ3pvki+GBLArb0IeiIV+KOcCTuubkIUJqehhVEJI/sqShb/LoimHop3kpD8rrxhDnZrv2lPWb2ukv6AiwEmeBZz2KwfOZEj2fIp/TQignJ3a3B5pERKp8RSRWTlFrdsTXH3uejrvUoTQ4SIB0YTsEKCIyJYEIrEJaUKGMUIBunTJqihRq2WImtHS2BsBiCIiOoVsB8voV8bQrH8qAfvzNCHCfzWuEOgScJbBTUgT8hMbVHIo4rL7Sf9VPWiJDHGfRl5RQkaEKPajPagJEVPFBdhdv9TY2xnyiIplM+SqGi4mDC6bmiFoHRZQBij3HLeJz15PmDhPQ8+6pAwh4yRvQgghs2Tp6o5XNiE6gkv86kQpWfqR1lyp9pS3JUQ94Bk91GOiPeDbHlWE0T2mCQkASDmYIeQ37vz1cP7VtusAAAAASUVORK5CYII="},1051:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFM0lEQVR4Xu2d0XYaMQxE4c/75+SkOUvIBvvOSDJsQH2VLVsz0sh2t/R8uVwup/5zGATOn4Sc/z1+P5fEmsp+b/3fG++sr6xXhWATIiDZhABICkBdIUKm3Q5xJGPvugkxwVaGzwhRAFfWmI1xEuIR+9n2OuwhzoYJHLepKgBkCXXic/dPeMwqvgkR0GtChCPxW1eIIiH7RMuccpT1yD8lfqVkKftV8ZEkq3LBbWMOIAQuSQrZV/gnn6OEakIIudPpRIRWJmwT0oR8IUA9wJG0bIYSJ29XIRRwBLBZEyV/yssAJRStcege0oR803eIHtKE/AFCHMlReogrMTSe7C8nWQ4hKzSfACd7E3KDAElgRUU1IcL71vUJ+85YF0AaT/a3qhAlw9W3oxFwBDjZlxJCzslOEkLzlR5BPpyLprJext/Mv3TspWDJ3oTMEbrFpwmhbBIeFwUX0yESIdlFaD5pMNnJP9nJP9nJf9R+iO+ySNKOaI8CTvOaEEGSIqc6An5kb0KakK/cII0mO2Xgs+fT/qYVEp38qHmKZDj3gmp/lTj8l6xKhyt8VQNY7a8y5iZkgKZTceWEVGeM4m8fRKXmE0DK/hxCKv3Jp6zqDbqEEGHV+3uWvyakQLK6QuDvO95CslyJIVBcfyRZ7no0fiZZSkWQ/1H80mtv9i3J3Rytt/e3EqB7e1+5XhMS6CFNyO6ppSuk4KMBt2eQzK3uKav9L33LipQwBezYV1SMs74SP/nbYih5OlE25FYIBbD6FOSsr8RP/poQ0EQCkOxuAv4gpJJh0v7N7gYUDVDdz+pxaryhpxOFwBmAFPyKe0j2bUoFdBSbKrFNyB0EKSGqEzL0GdDKDFFOSWqGRTLUXf8QhJDMuHaXYHd8tWS68Tnrhyoku6FsU34kIUrFOIATdk0IIbSzKxLlHBpmhMtN3YwBh7sZ745flcEVPeqQhCBjuwErCak4VTkVMqu4kud3RXMJUCcgl0waT4TQfNc+W68JET4ldQGn8U0IIPQSFZI9xlbPd5q4cmpy/FVI9uZDkqzKBTdf2Zs3yYLrv7LHUcWlm3oT8vNrfUqGJuQOQi9dIYrmUslTVmXnO5qvxLO6x43wkHoIlWCFpGUJydxjKuJzCRzF24QE7iFKhVGCNSETzXy5ClEyhnpI1l4tWZX7IcKl53cnQGdBNdDMKUld43oZM35pSPXtSNatT6mH0CaakN8INSGJLF8huS9NyArAqOqz9hQh2cWz8yOSRwFn97S6h478l3zbmw2+CflGsAkZZNNTK+QZGr1acrJVS/sjO61v39TJYdaeDch5TFTe2qreoka4qPeqP/MZECVAVmKakJt7Q4VkNiGUsmCvlizajrsejSe7W3HXZ5zRf07sZByBkT3WRvxHAdnmOfFTfEoP29YrecuKAEYZlgWkCZmwQhlE9gjhL01IpOk6FaD4V4+NRN7R7ZJkKYC5GekCnBkf2f9q4uyLIWU4bZjmZwB2muTn2CbE/BlYF2B3fBPShJCADO2H7CHhaAYTj3CKIwm3LoaRkqcNOPeMLEFNSFKysgS4PYbWUxLSScCZvz8hWQog7rF7Nl4hNLveKAneghAFYEdCXQmk8faHcisyNAsAyUzlPSdLaBMS+I3GbIJkEuBwFeJkEFXGZqcm6/aAR/mTeogKwrBRBX5EM5NxisQ8khDCz64Qckj2SAU0ITtUHU1tQn4j4OAnVQiBnLWTJmcqJHIqpHhov878maQe9jMgJ8NW9wwCW1lfTbAmJPBvDIkg6pkzAj8A1j4S+q7p9BcAAAAASUVORK5CYII="},1052:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAE+ElEQVR4Xu2d61bjMAyEy5vvm3cPu+TQExJ/M5LspkX8lS3JM7rFCfBxv9/vt/65DAIfn4R8/Fnvz/3B5pH9R/neuwp/R/pn2FMRbkIEpCoCQDDzb0kTIiDVhNxuty5ZQqRULqEeUmnrSBfZJ/ks/05LltP0yDlq2pGSQIA5/kf8c/Q7+DQhn430YMqsJLwJgR6kjLWXJmR2SYnop6jby90hwSEk4v+ZfqlkVRrcgHJqcMR+E7JDwIkwivYmZFeDI4A0IeMw+/Ula1TCslNWZcC+bA/J9iAngyOEURl+uwxpQojyxU29CZlISKQGuz3BXZ8taQTXpUvWCkL6wdB4I9iEfOfTJaasJuQXEvJWPYQaFMkjc3x1zXfuttzbYDo/yR/xkUoWKSR5EzJGqAkpfl9CAUlyiRBSkpXPnvPJv2fbP/PvJT4Dypa8GfuJ8Ki8CQm+U48CTvuakCbkf4zMruGknyI1u5/0D3tIdHPVvkiNJ9tZQJ3bZPLFkf8rWc6GGWubkG9Um5CTCHtqhkQu99yrjdHVRcT+jEyt1BnFJzxlRQ1uh55Z4yMEZ/0ZBdxeNvKvCflCqwmBF1hUPrIZOruERv0ryZBnlIjogc+Irs6QKOGHU5YCsHuAmQAqNZr8zfrn6MceohwoyvhRE4/YyzZNB7CIf47+JsS8qnlJQqjprpZnI5T203my+zf9cg9xDWbW0+HpqiW7X+mhlSX8xxtDJUUzACsHdK4qmhChBldGTDbCs/uVAKo8byhD6JCz5ZShs+XV5zvzV+4hWYcq53zyZUZJI5skV0tyE3KAZKRkNSEDBF4+Q2ZEhBMxin3qEY49Wqv4QzqiNwvy5WK2B0Qd3PatJER5DHDOQ+SFvlxsQsawqk37SEsTQiG7kyslbDkh2QchwoBKEskd/UpJcu05hNi3va7DBMbV9dFURvKK8286pM+AVjjkRFg1wXQ+kjchQo13CCbASV5OiNK0yOjKKUzJEPKX5G4PIX2qXH4OIYXvTMiMABheLnaG/Ay36gBTp9TOkJPUfytCqjOuQh+VXDWCXT1n6633IZGaSU2Q5NWAkL3sFDbyN0Na+DnEBZAAcvXRocleE2J+y0uAvjUhFTU6C2B1hmQJo/0kd4eCbb08ZVWnuHMg90lZCbDqAHJ6yug8TcjJr0VTwJC8M+QBoc6QXbgogFCEkdyNQNJXLY+WRGnsrXY28pyTrdHuGbI9kwhJPRi6h3HXRzJqdoY0ISaLb01IJEJN/H4sp5R29a/Wl7U3/fo9A+DsnhLRT4CTPNrz5OcQF3BaX11ysjXfvSloQoDhJoRSwACwoodRxJJ8ZYbgd1nuXZHLBemPEOKWvAwhdF46n9PDLvt3ewmEJoQQGsgpgjpDvsGTMiQL2AxC3PhwS5arn9ar9i9BCB0mEhBukyYfsvImZIegCkgW+LP9qv3OkFkMBAPikoRUlKirlSyV95chJDPmEhg0dDjPEWSLSloTIvyp8SYE/uG8AlD2bsvNyGhmbPs2e5fIEKVnrAboWT3osoRkIzwbsSNCshmavlxUItiNKJrLm5Dg3ExTw6ecphiSU7RHAoZ0doYUB4QLePX6aM+TekjWWcqAiJx8opLolliy52TUSFcT8oWOSyAR5PTAR11NyKsQQhGQlVNEkjxrf/V+tadc4jOgSA9RD1gxBbrk0XlGzzFNiDCWryTkL6qe53BInY0bAAAAAElFTkSuQmCC"},1053:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAE3klEQVR4Xu2c63bjIAyEkzffN8+eXnI29Rq+GQlsGqt/BUjMSCMgSe+Px+Nxq79lELh/EHL/c3w8j4RPJd7e+nvz3fGzECtCvpEtQqpCdousKqQq5AuB2RKRXf91vtKzRvWUZoVkmu42uBlN9Mj43Phdcl7XL0JutxsBTnaXgF7CFiG/kZCIhpIGz9Z4xz9VQMROVdOKT6qQowmhzbg9KgJollDaQxGyQSgLOM0vQg4G/K0JIUmhbJstqRTfSP9L9BDacBGyuUmPzIAnuFTyzsXv7PhG+q8KGXAPuQQhW5nK3lt665FkRuwks0sfe5UMcyRshXtKEdJBIJLhTo9TEkqt0GV7iCNZlI1FiHBKowxUM4rIaNnJf9ZOcaV6CC1OdspQmq/0BHcNpyeNjv/XPb8TuBHNzkhgEQKMXJIQytKsfbZGU3xn+2/Ft8S3TkgSVrQT4VF7ERJ8OokCTvOKkCLkK0dmazitT5manU/rd3tIdPJR85RT1czHx6P2+eHnU7KOdBjxVYREUJs453KEZDc84mkjq9lnStZI/ORTVvbthwqICHHs5GskgJ+6L/y0QsWvCGmwpwJYhAj3hstVSOQpg0AiO0kWzXfto3sS+X/62z32RgAfXeLbDZwF0B6QSs8gAlr7K0ICPaQIOeAncKtUZOiUpWTIbM3/7et337JmAOwC5vYId3xU01vH2sz+engvUyEuwO74IuTl9upWoPIUU4QkAFYIGZ3B7nqzx6sSd8rze4SgbEVk70kqoC1i1fiLkB0EIxdjqrAiZIPQW1eIIjnZEu9d1BT/zkVPOURQBZB9aoUogBAhaoDPjdJ6GUBorrtfWq+XAKEe4gZImqxkaBHSobkI+R8cp0dhhVAGKwS4ZbqSZI3Yv0NI6OnElQganw3Yme8mBxHirkfje/6G/aStCCEa/tmLEMDqLStEz4/9kU6FKT3N7VEUvyOZRHC6h1CwCkC0RnbDzkUwAlg2Pkq4Z/xSDyEwi5CfCEUIL0I6b10EaCRBh1bIiAqgTWQlIStZTnwz8ZAkSwmAMsCxEzjZDHafapTxvYSgeF/tRUjgq6kzE7QIeVdCSGZcO0mc0zPIt5LxtMahknWkhj59XYmQV3wlySpC3PrwfmVchGzwPVuy3pIQP4fnziDJbd27Qh/hjt4KndPJ3+wMj/gvQgg10559OShCTMBp+KmEzCh5Z8Nn+M/GRxUQXV/+OQI5cO3ZDWUuhkoCUHxkd+KT3rJcgN3x7oZo/azEjLppt+JUP8GsCmkgSAlD9stXiFNBZ0vW9M/UCQy6ZygAuZIycnx2f9v56a8BUUBkL0J+IlSECP9S0NF8J+P3kjVNyAxJcZtiVoKoilexS8/vswkhMCKSlyWcYsraW/EVIVlkg/OLkCBws6YVIbOQHbzuW0gWYUI9KDLfPWSoPa0IITYC/+SSEiB9U1/9lEWYEkCR+ZeqkEgCuAA5F0ElHlWSkPyPfzVOGaQE5AKiPkc/13U3nFkfQdv5P70Zf9LnIS4ARUibRifhl2zqzgZaMGQy9vIVEpFEAs2tcBpP9oxC2JJFmyd7JOMzAGzjUQgnf2R3Dgm9+CTJIsDJXoT0EaoK2cGHKoDs0yuEsj5rdzdI/kav5/YEJ76QZJGDrN0F8Myv+bh7JYkuQpISdSQhfwGuCyT6n1NJAAAAAABJRU5ErkJggg=="},1054:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAEx0lEQVR4Xu2c7XbbMAxD0zffm2cna7NlbuwLkJJjN+hfUiQF8ENS0nxcr9frJX+HQeDjRsjHr/3juT74fOb/Ub6MTomX7C9tdv2NQjCEfCEZQlIhT4sqFZIK+UTA7fFuj+7a7653473rr1bIVk91ndHQVob01hAm+xQvrSc52Sf5o/0QcrlcCHCSE+AkDyELhAhwkhPgJLcJmd1SKvZpk26Lc/W7M2ZtvdSyKoBRwM6Mqvh3AXb1aX+UMCEE7j0hxHiuSYUMuCdQSe/dsqiFpEKaFdJ9e+omBCUcJcCPmyEhhChfyCmDRmboMjRl5oz0r/hTW+Ihjr2VDakbVPPIrThKOPJ76Ja1ByEEYAgx7wXVjLuvCyHGB1CpkH/p9jYz5EdVCLULktNrKcmVU5RzaqJ49/Znv/a6G3A3FELMlhVCviMwsiKlCumSQOudnl4Z+l37tJ72V5Wf4lsn1NJeIa8CTutCSPEzdQK2Kg8hIeQzd6hHk5wykNZ35eS/Kv9TIdXFo9ZVZgD5HnkKIl8j5SFkJJoDbIWQASCONFEe6u5z9TJo6uEjN/nMVjd+iq9q/7SEVDd8B7K7PoQsEOgC2l0fQkLIdg6cfQbsHb/q7+kpS3nMUx0869mK/dEtwW1Ro/en2gshg55OCHCS3xMwhLwrIdSCunLKQJLP9q/aH1IhS2fKjCCAOj2fNj/77ayz/xDyxR4lCJHsrl/TDyEh5BOBURmlHqvJH8mpQlz5rhXiBuf2XLJPM6KyntaQXP18ZkrLouC6hwCyH0IIIZCnQv4BNKRCFECXnLg929Xf8kf5U9kP2VSP8UM+MaxswAXY1e8QMrulbtkPIZTaK08rswgPIWckhE4tZ29ZI/anHmtv/G/hJVUIBaz0XHWoPbvoURK78bnxdu0r/u46IaT4/O5URAhZPM10K2z3CtljBhAorrx7DCZ/s+2v+R/yvSzKoArhrwbMnXkUr3oxDiErSIYQM8Vmt5QQYhIyW31Pwr/90+fszbn2R8wcAtQ5tirxOPa28JDuIS6gXX0FAPIRQgghQ/72hCgAUMapxzqDl6mq7n7cYNxDwV1fPva6G3D1XULdDbv2XQK27CtPJyFk8O91hZCNXzWd0YLdinEr+O0rxAXY1a+27EMce+ktzAVDqRCy6dwrKH5HHkIKb1nOkL7phhDjV7PXKuWlFTKixKkFuMdOtwe7+hQv2SN51b58DyEHrrybgc4xU2kxeybMVjwhRJghzgyotMBvr72vbllUXUp8Myvu7QhRACfSqKeTfM+Whd/LogwgMEhO9iuEVG/Ca8fQ0TPJje/uX/plawKc5CHkf4RSIc1/oesmnHPKkyqk21JmVAiB5M4E156rr86wQxDibm5GgrgxuPohZIGYCogLtKqv+k+FqIg29X4UIZUWdbQZovJ5igqpHAq6N/fqPUIFfi1hQojweYVzbA0hBUAVgN+6QiozQh2S1Yx91Qw6RMs6GyEzKyyEiCXktjBX33pcnJHB3ZbTXS/y8FfNBdjVPz0hLqB7608lpLuZ7j1iRoXOHtrOPegxFmmGhBAfgRDSfEwcPZOGE+LnhLeCACC55+312upMOcTXgLozRrkXuDOjmuE3P7SfrXhDSAFAqrcOIb8BQLPhcIRSNNMAAAAASUVORK5CYII="},1055:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAFL0lEQVR4Xu2c23riMAyE0zffN2e/3ZKWpon/GUtODKi3snWY0cE20I/b7XZb6m8aBD7+EfLx53x/bg829+w/yrfe9fh7tr1eRIuQO3LZCVCEAAJVIZMBVIQECekt+aN9T09Iq6e6YI0Y2pn+UTyu/6SvdUg5HOqZAbsBKaeoTP8IQNd/0leEuAht1k9HiJKx25hH92zS3/JHudeQfpJTDhztl1rW2YRkAFaEbBCgDHJmALUMJWHci5/jv2Jf7SBVIcuy9BBOhFXLIgQCFdxDGLnz1DOEgstsGastqgCSk89FSFXINwJU8pRNJK8KIYSWZaGSzj71CC79WOL4RwmVmRBTnrJ6AHCO0Rn3HCKUEuSpZkgRsvMR7qgM2DvFZGcsZWe2vbdsWS7IL/10EgWDWhDpp/1KhmYfIiIzq1Wh0lAnwEhOgEb3FyGE4EZehLQBe8TnKb4GRIQqFaK+tqpPJ2ZOystflhA6JUblMsLmwiKk8/ndxFleXoQUIZ/JcnXLuNr+Ucn8rxC5ngYtzBjaBLBzURwUpqS2CJFgOm9REXIe1pIleahHWkJGS6JoIv6RbvKf9pO862IYCdgNaPRFjwDayl3/I/qnqBAFAAqSEibyGFiEdPzE7u0IoQyNvBVlVEjEP9rb00JJZ/MeQiXZ49CZLWIG/3oJWPeteEmfh8wQsPsBEwGUnTBkj+RFSMecWkHtSdAwIaSA5DRk3ZlD9l5FvntTVzKAACd5i5CeIU/2SO4S6rZQdX0R4jJxX68CvB3ae+Z+3dRnyEg3QLflPVWFKC3KBaAz8YZtyyZklKNdTyfRiurZHwXArUB3fdS/rxOc+t+Aog5G90cDdu2766P+FSEPCNJLxZkVfVrLunoGuRl/1cyRnk6oHM84FEQBGv1UkqW/CKFsO/iakHOxJRPSJ4YO41UhP7/WRAS0ZpI8Q1wjtN5tQe76qP2oPXdm2acsJ0Baq5xanApV9LmHil5AVzvufnx+d0HNBjBbXxFiMOreA0i1MtOoJbkZ7gz5VrxpM4QCJBCjAbn63fXZ8R3ZlwlxWoiSoQRINEPdFuX4QxUdib8IISbucqoQkotmliJERIoAJ7lopo+QSEmqjmUFuHcM7fE/2x97hozs4cq9wQXAmXGufWW9O7OO4ut6y4pmmBJgEbJBqSrkuLkqCUkJFaoQxQF1Nqg9nQKK3ltc/dnxhWYInbuVFuQAqOhzZgb5f0XCHeEhzRAKSAGwCGnXGD4uUklHZ0xmhlM7oYSqChF+p04gzy6nhG62rKuDUzLUDTAa08gKxtfeqPPR/UXI90fA0/5O3b35RpPizEMHVoiSoSMDVuxf2bIyDgWq//Jr70hCXN0EEOnLSAAV4L2LcOuaUIQcsEeAk9xpgdL3sijLonLnFKNcPB19VSE77LkXy0hGKgS4h4hR/khPJ9FqcHt+9vooIRR/pr9FiDBDihD4X/TuTHm5CokGRCU9Qj9l9dlydeZILWsEYKqDR8BF919JSNc9JBow7Sc5ARbdT/qz5eqpsiokG/mOQ4J0MYxmIO0nOeEU3U/6s+Wqv9NWCAUQvZlH94+6SBYhQikohxongVr6ipAi5BOBaEZF97stR+AtZckUFRKNJOPiOQvBRcg9G4qQwP88HPGWVYQ8EKKcYtyeTwC7bdLV565f/ZFaluv8iAxuEUL+RQlX4nET5sjnIiT41HEEbFVIo0xeokKoDUTlvRm02lVfT3v9HK3fblm9gaj7XEKufHtSY/oazIFPPKf4XpbSUt6FkL8o4gd/yMSHfwAAAABJRU5ErkJggg=="},1056:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAE/ElEQVR4Xu2d23LbMAxE5T/vn7vTTjVVZJFnFyBlyUZeQRLALm6kneTxfD6fS/1cBoHHH0Iev86355nQOcJeR/8IfSrCRYiAVBECII0AqDJkB7IDyJ6fIkRIa3dJj5ARgJM9TkCcYc9qb7OHOAaT80cOZQkZad9o++m8XsYXIQJ6bkAJR/5Ysj2/CBHQuxwhkRq6LSmuQ4o+53zSP0NOPLfslzJEAWhvgAMYGU/yGYA69o/EpwhZlmUGoRRElSGde1ARsiyLUxIo2mYA6tj3cSWLAM0SQvtJTvYVITsECTACnOR0fhFShFAMvcpH12D3qYX0k0e0n+TR8y8x9iopn3m7Us7P3KNGnl+ENEKZMoDklSEdBEZG8KqmCNl8Bh8BmCL2ViXLdab33n8UYe75EUJG96DMeT18pB7iAlaEeIhd/vMQcucrM4RAycqpKZL87vpb9l/ie1mRpwkibLY8GxBFyA6BLGFFyGBAi5DBgFKEZgGn/aQ/Kv/bQ6Kbz9qnTFWZx8ez/FD0FCEKSieuKUJOBFtRJY+9zlOBUmLctyNyJlOyaOwm3Yq/Kn63IYSarOrwEbhFyAEqDuBZAEe/tVWGHPw63NdlyOiaT3V5tj4nI5WMcv1p+Sf3kCxABAA55DbtzHm0VylRdEYR0nkpcMErQnZfPR1RQkb3HJfUt2dI1uBsyXT1Z0usq29df3hTd8dKWk9yMt7dP6KkECEkjwZQEdKIBgKc5EXIBoHbZ4jiwKyIoHLVkrv2RPWM2qfaK99D1ANXB868N7gBRSBTz1L09UpWb0osQg7YKUIoZAfcQ5x7xy0IETD7scQtcXR+9rwsIWQfydUSLo+9oxQe9RilJp9JSOQlwCEce0jEgGjTKkJeQ/vlu71FSD//3QymaoIZoih0lWRLTPSmq9xblAB07XdKVg9v6dcRIoSpTUwl2nFYPXNdR1OVex6t7+krQoS/dUIAu/IiBBD7ugyJlLxsD3lnySSC0z3EbYLKekrzLKDufmriTg8rQg7YLUI6fzo8UrJcQGdfVC+VIQqgWQCphLny0fZQSXPta60fNvY6EUTGKwHgZEREX5ZQIrAlL0IC9xAlYIqQwf/+4qMzhMbA2WNypGTRHpJPzRBSTnKXkCucRzaQ3CFke5bUQ0g5yYuQV4RaJbEIaTR1CjKS3zpDRkwtBNDZ8hQhZxsbaeLZqcf10blXUUkm+UsPcY0dvd7NkAihrs1FCCD2VRmiRKgbYbSeamzvaeQMe8k+kkf9l79KSgpcuesQrc+WGDcAyJ7eeb2SW4Q0IokAJ3kRYrxlKSWPACf51xNCJTMDII2tIwhe7b/ETd11KDL2Zgghsokwxd7VviJE6CFFyAEC2XvIR2WIUlKuMjZSNF9dLpWs2YQ4NfYIUKrhEftnEzf9M/VMhhQh/xGoDJmdCsLQsM3gIuRNhLTUfgQhhCn1mMj+TIlOf9k60hRpzHTHWOfxMNuTlP1FiPFWpQDqEKwEpBOAH5EhVFbciI0+/rXsIEJU+2/TQ1SH1nUzS6Lbk2j9LaesIiT5b+oohd0ILkJOJERpmhlClPOdAJp5ntRDXDDcKcepsUpTVfS7QwAR5gwJPfuKkH/oEOAkL0J2CGR7EgFO8umEZMsU7ScHSe6WHLKH5K49DkHS2EsGZuXkoCOf3TNcX6knhnqIa4S73gE846AyBLjnk6/uedv1vwG8KQb6n7pdUgAAAABJRU5ErkJggg=="},1057:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("sidebar-block",{staticClass:"app-download-sidebar-block"},[n("a",{directives:[{name:"link",rawName:"v-link.blank",value:"https://juejin.im/app",expression:"'https://juejin.im/app'",modifiers:{blank:!0}}],staticClass:"app-link"},[n("img",{staticClass:"qr-img",attrs:{src:t.qrImageUrl}}),n("div",{staticClass:"content-box"},[n("div",{staticClass:"headline"},[t._v("下载掘金客户端")]),n("div",{staticClass:"desc"},[t._v("一个帮助开发者成长的社区")])]),t.closeable?n("div",{staticClass:"close-btn ion-close-round",attrs:{title:"关闭"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.close(e)}}}):t._e()])]):t._e()},staticRenderFns:[]}},1058:function(t,e){},1059:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["title","content","confirmText","cancelText"],methods:{cancel:function(){this.$emit("cancel")},confirm:function(){this.$emit("confirm")}}}},1060:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"confirm-dialog-box"},[n("div",{staticClass:"confirm-dialog"},[n("div",{staticClass:"dialog-header"},[n("div",{staticClass:"dialog-title"},[t._v(t._s(t.title))]),n("button",{staticClass:"close-btn ion-close-round",attrs:{title:"关闭"},on:{click:t.cancel}})]),n("div",{staticClass:"dialog-body"},[n("div",{staticClass:"content"},[t._v(t._s(t.content))])]),n("div",{staticClass:"dialog-footer"},[n("button",{staticClass:"ctrl-btn cancel-btn",on:{click:t.cancel}},[t._v(t._s(t.cancelText||"取消"))]),n("button",{staticClass:"ctrl-btn confirm-btn",on:{click:t.confirm}},[t._v(t._s(t.confirmText||"确定"))])])])])},staticRenderFns:[]}},1068:function(t,e,n){function i(t){n(1069)}var s=n(9)(n(1070),n(1075),i,"data-v-1f85cb5f",null);t.exports=s.exports},1069:function(t,e){},1070:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(159),s=n.n(i),o=n(95),r=n.n(o),a=n(10),c=n(58),l=n(1071),u=n.n(l);e.default={data:function(){return{curBooks:[],books:[],view:"prev",playIndex:0,direction:"next"}},components:{BookItemPrev:u.a,BookItemNext:u.a},computed:r()({},Object(c.mapGetters)({logined:a.LOGINED}),{canPlay:function(){return this.books.length>1},directionClass:function(){return"prev"===this.direction?"transition--prev":"transition--next"}}),methods:{loopComponent:function(){var t=this.view;this.view="prev"===t?"next":"prev"},prev:function(){if(this.canPlay){var t=this.books;if(this.direction="prev",this.loopComponent(),this.playIndex<1){var e=t.length-1;this.playIndex=e,this.curBooks=t[e]}else this.playIndex-=1,this.curBooks=t[this.playIndex]}},next:function(){if(this.canPlay){var t=this.books;this.direction="next",this.loopComponent(),this.playIndex<t.length-1?(this.playIndex+=1,this.curBooks=t[this.playIndex]):(this.playIndex=0,this.curBooks=t[this.playIndex])}},getBooks:function(){return this.$getBean("xiaoceBusiness").getListByLastTime({pageNum:1})},init:function(){var t=this;this.getBooks().then(function(e){t.randomBook(e),e.length>0&&(t.curBooks=t.books[t.playIndex])})},randomBook:function(t){function e(t,e){return Math.random()>.5?-1:1}var n=t.sort(e);n=n.length%2>0?[].concat(s()(n),s()(n)):[].concat(s()(n));for(var i=[],o=0;o<n.length;o++)o%2==0&&i.push([n[o],n[o+1]]);this.books=i},getNewuserTicketStatistic:function(){this.$getBean("xiaoceBusiness").getNewuserTicketStatistic("clickCount")},visibleNewUserTicket:function(){this.getNewuserTicketStatistic();var t=this.$getBean("eventBus");t.emit(t.eventType.BOOK_NEW_USER_TICKET)}},mounted:function(){this.init()}}},1071:function(t,e,n){function i(t){n(1072)}var s=n(9)(n(1073),n(1074),i,"data-v-133abdc5",null);t.exports=s.exports},1072:function(t,e){},1073:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(977),s=n(974),o=n.n(s);e.default={props:["list"],components:{Thumb:o.a},data:function(){return{}},filters:{f_salePrice:function(t){return Object(i.a)(t,5)}},methods:{},mounted:function(){}}},1074:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"slide-book-list"},t._l(t.list,function(e,i){return n("router-link",{key:i,staticClass:"item",attrs:{to:t.$bookInfo(e.id)}},[n("div",{staticClass:"poster"},[n("thumb",{staticClass:"poster-img",attrs:{alt:"小册封面图",url:e.img,quality:95,width:104,height:144}})],1),n("div",{staticClass:"content-text"},[n("div",{staticClass:"title"},[t._v(t._s(e.title))]),n("div",{staticClass:"price"},[n("div",{staticClass:"new"},[t._v("新人价 ￥"+t._s(t._f("f_salePrice")(e.price)))]),n("div",{staticClass:"delete"},[t._v("￥"+t._s(e.price))])])])])}))},staticRenderFns:[]}},1075:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"index-book-collect"},[i("div",{staticClass:"header"},[i("div",{staticClass:"title"},[t._v("掘金小册")]),i("div",{staticClass:"controllers"},[i("div",{staticClass:"arrow icon ion-chevron-left",on:{click:t.prev}}),i("div",{staticClass:"arrow icon ion-chevron-right",on:{click:t.next}})])]),i("div",{staticClass:"slide-book",class:t.directionClass},[i("transition",{attrs:{name:"fade"}},[t.books?i("book-item-"+t.view,{tag:"component",staticClass:"item",attrs:{list:t.curBooks}}):t._e()],1)],1),i("div",{staticClass:"book-newuser"},[t._m(0),i("div",{staticClass:"giftbag",on:{click:t.visibleNewUserTicket}},[i("img",{attrs:{src:n(1076)}}),t._m(1)])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"newuser-title"},[n("span",[t._v("新人专享好礼")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-text"},[n("div",{staticClass:"title"},[t._v("送你"),n("span",{staticClass:"highlight"},[t._v("45元")]),t._v("买小册")]),n("div",{staticClass:"btn-box"},[n("div",{staticClass:"btn-giftbag"},[t._v("立即领取")])])])}]}},1076:function(t,e,n){t.exports=n.p+"static/img/45.b99ea03.svg"},1077:function(t,e,n){function i(t){n(1078)}var s=n(9)(n(1079),n(1084),i,"data-v-efcd2e56",null);t.exports=s.exports},1078:function(t,e){},1079:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),s=n.n(i),o=n(10),r=n(996),a=n.n(r),c=n(222),l=n.n(c),u=n(1080),d=n.n(u);e.default={components:{Avatar:l.a,ImageUploader:d.a},props:["user","entry","vote","placeholder","type"],data:function(){return{content:"",isActionBoxVisible:!1,submitting:!1,metaKey:!1,ctrlKey:!1,enterKey:!1}},computed:{submitAction:function(){switch(this.type){case"book":return o.SUBMIT_BOOK_COMMENT;case"repo":return o.SUBMIT_REPO_COMMENT;default:return o.SUBMIT_COMMENT}},displayedPlaceholder:function(){return this.placeholder||"说说你的看法"}},watch:{content:function(t){t&&!this.user&&this.$requestRegister()}},methods:{focus:function(){this.user&&this.$refs.input.focus()},blur:function(){this.content||(this.isActionBoxVisible=!1)},submit:function(){var t=this,e=this.entry,n=this.content.trim();return this.user?n?(this.submitting=!0,void this.uploadImage().then(function(i){return t.$store.dispatch(t.submitAction,{entry:e,content:n,imageUrl:i})}).then(function(){t.$barrage(t.content),t.$refs.imageUploader.cleanFile(),t.content="",t.submitting=!1,t.$nextTick(function(){a.a.update(t.$refs.input)}),t.$emit("submitted")}).catch(function(e){t.submitting=!1,t.$error(e)})):void this.$alert("评论不能为空"):void this.$requestRegister()},uploadImage:function(){return this.$refs.imageUploader.file?this.$refs.imageUploader.upload():s.a.resolve()},listenerKeykown:function(t){var e={17:"ctrlKey",91:"metaKey",93:"metaKey",224:"metaKey",13:"enterKey"},n=e[t.keyCode];n&&(this[n]=!0)},listenerKeyup:function(t){this.ctrlKey=!1,this.metaKey=!1,this.enterKey=!1},quickSubmit:function(t){(this.metaKey||this.ctrlKey)&&this.enterKey&&this.submit()}},mounted:function(){a()(this.$refs.input)}}},1080:function(t,e,n){function i(t){n(1081)}var s=n(9)(n(1082),n(1083),i,"data-v-54e3f196",null);t.exports=s.exports},1081:function(t,e){},1082:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(114),s=["jpg","png"];e.default={data:function(){return{file:null,url:null}},methods:{showFileDialog:function(){this.$refs.input.click()},changeFile:function(t){this.file=t,window.URL.revokeObjectURL(this.url),this.url=t?window.URL.createObjectURL(t):null},cleanFile:function(){this.changeFile(null)},onActionBoxClick:function(){this.url?this.cleanFile():this.showFileDialog()},onFileSelected:function(t){var e=this;if(this.$refs.input.value=null,t)return this.isWithVaildSize(t)?void Object(i.a)(t,s).then(function(n){n?e.changeFile(t):e.$alert("不支持此格式的图片上传")}):void this.$alert("文件过大")},isWithVaildSize:function(t){return t.size<=1048576},upload:function(){return this.$getBean("uploadBusiness").uploadFile(this.file)}}}},1083:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image-uploader"},[n("input",{ref:"input",staticClass:"input",attrs:{type:"file"},on:{change:function(e){t.onFileSelected(e.target.files[0])}}}),t.url?n("div",{staticClass:"preview-box"},[n("img",{staticClass:"preview",attrs:{src:t.url}}),n("button",{staticClass:"clean-btn",attrs:{title:"移除图片"},on:{click:t.cleanFile}},[n("i",{staticClass:"ion-close-circled"})])]):n("button",{staticClass:"upload-btn",on:{click:t.showFileDialog}},[n("i",{staticClass:"icon ion-image"}),n("span",[t._v("上传图片")])])])},staticRenderFns:[]}},1084:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-form",class:{unauthorized:!t.user},on:{click:function(t){t.stopPropagation()},keyup:function(e){e.stopPropagation(),t.listenerKeyup(e)},keydown:t.listenerKeykown}},[t.user?[n("avatar",{staticClass:"avatar",attrs:{user:t.user,decorative:!0}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],ref:"input",staticClass:"content-input",attrs:{placeholder:t.displayedPlaceholder},domProps:{value:t.content},on:{focus:function(e){t.isActionBoxVisible=!0},keyup:t.quickSubmit,input:function(e){e.target.composing||(t.content=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible||t.vote,expression:"isActionBoxVisible || vote"}],staticClass:"action-box"},[n("image-uploader",{directives:[{name:"show",rawName:"v-show",value:t.vote,expression:"vote"}],ref:"imageUploader",staticClass:"image-uploader"}),n("div",{staticClass:"submit-box"},[n("span",{staticClass:"submit-text"},[t._v("Ctrl or ⌘ + Enter")]),n("button",{staticClass:"submit-btn",on:{click:t.submit}},[t._v("评论")])])],1),t.submitting?n("div",{staticClass:"submitting-mask"},[t._v("提交中...")]):t._e()]:[n("div",{staticClass:"unauthorized-panel"},[n("button",{staticClass:"authorize-btn",on:{click:function(e){t.$requestLogin()}}},[t._v("登录")]),n("div",{staticClass:"placeholder"},[t._v(t._s(t.displayedPlaceholder))])])]],2)},staticRenderFns:[]}},1085:function(t,e,n){function i(t){n(1086)}var s=n(9)(n(1087),n(1096),i,"data-v-746db1b2",null);t.exports=s.exports},1086:function(t,e){},1087:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),s=n.n(i),o=n(5),r=n.n(o),a=n(10),c=n(223),l=n(31),u=n(34),d=n(1088),m=n.n(d),h=n(1092),f=n.n(h),p=n(996),v=n.n(p),g=(n(29),function(){return{page:1,total:0,list:[],fetchLock:Object(c.a)(),replyLock:Object(c.a)(),replyForm:{content:"",comment:null},metaKey:!1,ctrlKey:!1,enterKey:!1}});e.default={components:{SubComment:m.a,Pagination:f.a},props:["parent","entry","type","removable","autoUnfold"],data:g,computed:{isMobile:function(){return Object(u.d)()},pageSize:function(){return this.isMobile?20:5},replyPlaceholder:function(){var t=((this.replyForm.comment||{}).user||{}).username,e="book"===this.type?"评论审核通过后显示":"输入评论";return t?"回复 "+t+" ：":e},shouldCancelReply:function(){return this.replyForm.comment&&!this.replyForm.content},canReply:function(){return!!this.replyForm.content.trim()},replyBtnTitle:function(){return this.shouldCancelReply?"取消":"评论"},totalPage:function(){return Math.max(Math.ceil(this.total/5),1)},startTime:function(){return this.list.length?this.list[this.list.length-1].createdAt:null},fetching:function(){return this.fetchLock.busy},empty:function(){return!this.list.length&&!this.fetching},commentBusiness:function(){switch(this.type){case"book":return this.$getBean("xiaoceCommentBusiness");case"repo":return this.$getBean("repoCommentBusiness");default:return this.$getBean("commentBusiness")}},replyAction:function(){switch(this.type){case"book":return a.REPLY_BOOK_COMMENT;case"repo":return a.REPLY_REPO_COMMENT;default:return a.REPLY_COMMENT}}},methods:{close:function(){this.$emit("close")},getTarUser:function(t){return t.replyCommentId!==this.parent.id?t.replyUser:null},prepareReply:function(t){this.$refs.replyInput.focus(),this.replyForm.content="",this.replyForm.comment=t},cancelReply:function(){this.replyForm.content="",this.replyForm.comment=null},listenerKeyup:function(t){this.ctrlKey=!1,this.metaKey=!1,this.enterKey=!1},listenerKeykown:function(t){var e={17:"ctrlKey",91:"metaKey",93:"metaKey",224:"metaKey",13:"enterKey"},n=e[t.keyCode];n&&(this[n]=!0)},reply:function(){var t=this,e={entry:this.entry,parent:this.parent,tar:this.replyForm.comment||this.parent,content:this.replyForm.content.trim()};this.replyLock.do(function(){return t.$ensureAuthorized().then(function(){return t.$store.dispatch(t.replyAction,e).then(function(){t.$barrage(t.replyForm.content),t.reset(),t.fetch(),t.$nextTick(function(){v.a.update(t.$refs.replyInput)})}).catch(function(e){t.$error(e)})}).catch(function(){})})},onReplyBtnClick:function(){this.shouldCancelReply?this.cancelReply():this.canReply&&this.reply()},remove:function(t){var e=this;this.$store.dispatch(a.DELETE_COMMENT,{parent:this.parent,entry:this.entry,comment:t}).then(function(){e.$alert("回复删除成功"),e.fetch()}).catch(function(t){e.$error(t)})},quickSubmit:function(){(this.metaKey||this.ctrlKey)&&this.enterKey&&this.reply()},fetch:function(){var t=this,e={commentId:this.parent.id,entryId:this.entry.id,page:this.page,pageSize:this.pageSize};if(!this.autoUnfold||"book"!==this.type)return this.fetchLock.do(function(){return t.commentBusiness.getSubCommentList(e).then(function(e){t.list=e.list,t.total=e.total})}).catch(function(e){t.$error(e)});this.$emit("update:auto-unfold",!1),this.list=this.commentBusiness.fromDescriptorSubComment(this.parent.topComment),this.total=this.parent.subCount},gotoPage:function(t){var e=this;this.page=t,this.fetch().then(function(){Object(l.k)(e.$refs.subCommentBox,-110)})},fetchMore:function(){var t=this;this.fetchLock.do(function(){return t.commentBusiness.getSubCommentList({commentId:t.parent.id,entryId:t.entry.id,page:t.page+1,pageSize:t.pageSize}).then(function(e){t.page=t.page+1,t.list=t.list.concat(e.list),t.total=e.total}).then(function(){return new r.a(function(t){return window.setTimeout(t,500)})})}).catch(function(e){t.$error(e)})},reset:function(){s()(this,g())}},mounted:function(){var t=this;if(v()(this.$refs.replyInput),Object(l.h)(this.$refs.subCommentBoxInner,function(e){e<50&&t.fetchMore()}),this.autoUnfold||this.$refs.replyInput.focus(),this.isMobile){var e=this.$getBean("eventBus");e.emit(e.eventType.LOCK_ROOT_CONTAINER_SCROLL)}this.fetch()},beforeDestroy:function(){if(this.isMobile){var t=this.$getBean("eventBus");t.emit(t.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)}}}},1088:function(t,e,n){function i(t){n(1089)}var s=n(9)(n(1090),n(1091),i,"data-v-6fdfc18a",null);t.exports=s.exports},1089:function(t,e){},1090:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(19),s=n(222),o=n.n(s),r=n(975),a=n.n(r),c=n(987),l=n.n(c);e.default={components:{Avatar:o.a,UserPopover:a.a,ConfirmDialog:l.a},props:["comment","tarUser","removable"],data:function(){return{isShowAll:!1,isRemoveDialogVisible:!1}},computed:{date:function(){return Object(i.d)(this.comment.createdAt)},limitedContent:function(){return this.$getBean("commentBusiness").limitCommentContent(this.comment.content)},collapsed:function(){return this.limitedContent.length<this.comment.content.length&&!this.isShowAll}},methods:{reply:function(){this.$emit("reply")},remove:function(){this.isRemoveDialogVisible=!1,this.$emit("remove")}}}},1091:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-comment"},[n("user-popover",{staticClass:"user-popover--avatar",attrs:{userId:t.comment.user.id}},[n("avatar",{staticClass:"avatar",attrs:{user:t.comment.user,decorative:!0}})],1),n("div",{staticClass:"content-box"},[n("div",{staticClass:"header"},[n("div",{staticClass:"user-info"},[n("user-popover",{staticClass:"user-popover--info",attrs:{userId:t.comment.user.id}},[n("app-link",{staticClass:"username",attrs:{to:t.$userRoute(t.comment.user),blank:!0}},[t._v(t._s(t.comment.user.username))])],1),n("div",{staticClass:"position"},[t._v(t._s(t.$userPosition(t.comment.user)))])],1)]),n("div",{staticClass:"content"},[t.tarUser?n("span",{staticClass:"text-reply"},[t._v("回复"),n("app-link",{attrs:{to:t.$userRoute(t.tarUser),blank:!0}},[n("span",{staticClass:"username"},[t._v(t._s(t.tarUser.username))])]),t._v("：")],1):t._e(),t.collapsed?n("span",{staticClass:"content-html collapsed"},[t._v(t._s(t.limitedContent))]):n("span",{directives:[{name:"parse-url",rawName:"v-parse-url",value:t.comment.content,expression:"comment.content"}],staticClass:"content-html"}),t.collapsed?n("span",{staticClass:"show-all",on:{click:function(e){t.isShowAll=!0}}},[t._v("展开全部")]):t._e()]),n("div",{staticClass:"footer"},[n("span",{staticClass:"date"},[t._v(t._s(t.date))]),n("a",{staticClass:"reply-btn",on:{click:t.reply}},[t._v("回复")]),t.removable?n("button",{staticClass:"remove-btn hidden",on:{click:function(e){t.isRemoveDialogVisible=!0}}},[t._v("删除")]):t._e()])]),t.isRemoveDialogVisible?n("confirm-dialog",{attrs:{title:"确认要删除这条回复吗？",content:""},on:{confirm:t.remove,cancel:function(e){t.isRemoveDialogVisible=!1}}}):t._e()],1)},staticRenderFns:[]}},1092:function(t,e,n){function i(t){n(1093)}var s=n(9)(n(1094),n(1095),i,"data-v-2c38f2aa",null);t.exports=s.exports},1093:function(t,e){},1094:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(159),s=n.n(i),o=n(75);e.default={props:["current","total"],computed:{canPrev:function(){return this.current>1},canNext:function(){return this.current<this.total},list:function(){var t=this.current,e=this.total;return e<=6?Object(o.a)(1,e):t<=4?[].concat(s()(Object(o.a)(1,4)),[!1,e]):t>=e-4?[1,!1].concat(s()(Object(o.a)(e-4,e))):[1,!1,t,t+1,!1,e]}},methods:{prev:function(){this.update(this.current-1)},next:function(){this.update(this.current+1)},update:function(t){this.$emit("update",t)},onItemClick:function(t){t&&this.update(t)}}}},1095:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"pagination"},[t.canPrev?n("li",{staticClass:"item",on:{click:t.prev}},[t._v("上一页")]):t._e(),t._l(t.list,function(e){return n("li",{staticClass:"item",class:{ellipsis:!e,current:e==t.current},on:{click:function(n){t.onItemClick(e)}}},[t._v(t._s(e||"..."))])}),t.canNext?n("li",{staticClass:"item",on:{click:t.next}},[t._v("下一页")]):t._e()],2)},staticRenderFns:[]}},1096:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"subCommentBox",staticClass:"sub-comment-box",class:{"sub-comment-box__m":t.isMobile}},[n("div",{staticClass:"sub-comment-box__top"},[n("div",{staticClass:"icon-close",on:{click:t.close}}),n("h3",[t._v("评论")])]),n("div",{ref:"subCommentBoxInner",staticClass:"sub-comment-box__inner"},[t.empty?n("div",{staticClass:"empty-comment"},[t._m(0)]):n("div",[n("ul",{staticClass:"sub-comment-list"},t._l(t.list,function(e){return n("li",{key:e.id,staticClass:"item"},[n("sub-comment",{staticClass:"sub-comment",class:{"sub-comment__m":t.isMobile},attrs:{comment:e,tarUser:t.getTarUser(e),removable:t.removable},on:{reply:function(n){t.prepareReply(e)},remove:function(n){t.remove(e)}}})],1)})),t.totalPage>1?n("pagination",{staticClass:"pagination",attrs:{total:t.totalPage,current:t.page},on:{update:t.gotoPage}}):t._e()],1),n("form",{staticClass:"reply-form",on:{submit:function(t){t.preventDefault()},keyup:function(e){e.stopPropagation(),t.listenerKeyup(e)},keydown:t.listenerKeykown}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyForm.content,expression:"replyForm.content"}],ref:"replyInput",attrs:{rows:"1",maxlength:"1024",placeholder:t.replyPlaceholder},domProps:{value:t.replyForm.content},on:{keyup:t.quickSubmit,input:function(e){e.target.composing||t.$set(t.replyForm,"content",e.target.value)}}}),n("button",{staticClass:"reply-btn",on:{click:t.onReplyBtnClick}},[t._v(t._s(t.replyBtnTitle))])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("dl",[i("dt",[i("img",{attrs:{src:n(1097)}})]),i("dd",[t._v("暂无评论")])])}]}},1097:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+MTEyODdEMEYtNDY1MS00ODkzLUI5MTUtNDY0OTYyRDMwRDk5PC90aXRsZT48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0wIDBoNjB2NjBIMHoiLz48cGF0aCBkPSJNMTEgMzl2NS41bDcuMDcxLTUuNWgyMC45MjJBMyAzIDAgMCAwIDQyIDM2LjAwNlYxMi45OTRBMyAzIDAgMCAwIDM4Ljk5MyAxMEg5LjAwN0EzIDMgMCAwIDAgNiAxMi45OTR2MjMuMDEyQTMgMyAwIDAgMCA5LjAwNyAzOUgxMXoiIGZpbGw9IiNGMkY0RjUiLz48cGF0aCBkPSJNNTAgNDV2NS41TDQyLjkyOSA0NUgyMi4wMDdBMyAzIDAgMCAxIDE5IDQyLjAwNlYxOC45OTRBMyAzIDAgMCAxIDIyLjAwNyAxNmgyOS45ODZBMyAzIDAgMCAxIDU1IDE4Ljk5NHYyMy4wMTJBMyAzIDAgMCAxIDUxLjk5MyA0NUg1MHoiIGZpbGw9IiNEQ0RERTAiLz48cGF0aCBkPSJNNDYuNDkxIDI4SDI3LjUxQTEuNTA0IDEuNTA0IDAgMCAxIDI2IDI2LjVjMC0uODI5LjY3NS0xLjUgMS41MDktMS41SDQ2LjQ5Yy44MzQgMCAxLjUwOS42NzEgMS41MDkgMS41cy0uNjc1IDEuNS0xLjUwOSAxLjVNMjcuNTA5IDM2QTEuNTA0IDEuNTA0IDAgMCAxIDI2IDM0LjVjMC0uODI5LjY3NS0xLjUgMS41MDktMS41SDQwLjQ5Yy44MzQgMCAxLjUwOS42NzEgMS41MDkgMS41cy0uNjc1IDEuNS0xLjUwOSAxLjVIMjcuNTF6IiBmaWxsPSIjRjJGNEY2Ii8+PC9nPjwvc3ZnPg=="},1102:function(t,e,n){function i(t){n(1103)}var s=n(9)(n(1104),n(1109),i,"data-v-17a8ac96",null);t.exports=s.exports},1103:function(t,e){},1104:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1105),s=n.n(i),o=n(1068),r=n.n(o);e.default={data:function(){return{newUserTicket:{}}},props:["place","category"],components:{BooksDefault:s.a,BooksNewUser:r.a},computed:{canVisibleNewuser:function(){var t=null;return this.$isServer||(t=window.sessionStorage.getItem("LOGIN_OBTAIN_NEWUSER_TICKET")),!t&&this.newUserTicket.isNewUser},componentName:function(){return this.canVisibleNewuser?"books-new-user":"books-default"}},methods:{getNewUserTicket:function(){var t=this;this.$getBean("xiaoceBusiness").getNewUserTicketDetail().then(function(e){t.newUserTicket=e})}},mounted:function(){this.getNewUserTicket()}}},1105:function(t,e,n){function i(t){n(1106)}var s=n(9)(n(1107),n(1108),i,"data-v-3b78d59f",null);t.exports=s.exports},1106:function(t,e){},1107:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(117),s=n(974),o=n.n(s),r=n(988),a=n.n(r),c=n(977);e.default={components:{Thumb:o.a,SidebarBlock:a.a},props:["place","category"],data:function(){return{disabledBookId:c.c,fetched:!1,recommendData:{category:"",data:[]}}},computed:{categoryTitle:function(){var t="你可能感兴趣的小册";if("timeline"!==this.place){var e=i.a[this.recommendData.category];t=e&&"阅读"!==e?e+"系列小册推荐":t}return t}},watch:{category:function(t){var e=t;this.getBooks(e)}},methods:{toBookInfo:function(t){this.$router.push({name:"bookInfo",params:{id:t}})},tryRead:function(t){this.$router.push({name:"bookSection",params:{id:t}})},getBooks:function(t){var e=this;this.fetched||(this.fetched=!0,this.$getBean("xiaoceBusiness").getRecommendBooks({category:t}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data,i=t.category;e.recommendData={data:n.filter(function(t){return t._id!==c.c}),category:i}}))}},mounted:function(){this.category&&this.getBooks(this.category)},beforeDestroy:function(){}}},1108:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.recommendData.data.length?n("sidebar-block",{staticClass:"recommend recommend-index",attrs:{title:t.categoryTitle}},[n("div",{staticClass:"book-list"},t._l(t.recommendData.data,function(e){return n("div",{staticClass:"book",on:{click:function(n){t.toBookInfo(e._id)}}},[n("div",{staticClass:"poster"},[n("thumb",{staticClass:"poster-img",attrs:{alt:"小册封面图",url:e.img,quality:95,width:200,height:280}})],1),n("div",{staticClass:"info"},[n("div",{staticClass:"title"},[t._v(t._s(e.title))]),n("div",{staticClass:"bought"},[n("span",{staticClass:"num"},[t._v(t._s(e.buyCount)+"人已购买")]),n("span",{staticClass:"try-read",on:{click:function(n){n.stopPropagation(),n.preventDefault(),t.tryRead(e._id)}}},[t._v("试读")])])])])}))]):t._e()},staticRenderFns:[]}},1109:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.componentName,{tag:"component",attrs:{place:t.place,category:t.category}})},staticRenderFns:[]}},1110:function(t,e,n){/**
 * juejin-lazyload v0.1.5
 * (c) 2017 WEBuster <webuster@xitu.io>
 * @license MIT
 */
!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.addEventListener(e,n,i),function(){t.removeEventListener(e,n,i)}}!function(){function t(t){this.value=t}function e(e){function n(s,o){try{var r=e[s](o),a=r.value;a instanceof t?Promise.resolve(a.value).then(function(t){n("next",t)},function(t){n("throw",t)}):i(r.done?"return":"normal",r.value)}catch(t){i("throw",t)}}function i(t,e){switch(t){case"return":s.resolve({value:e,done:!0});break;case"throw":s.reject(e);break;default:s.resolve({value:e,done:!1})}(s=s.next)?n(s.key,s.arg):o=null}var s,o;this._invoke=function(t,e){return new Promise(function(i,r){var a={key:t,arg:e,resolve:i,reject:r,next:null};o?o=o.next=a:(s=o=a,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}();var e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},s={threshold:0,interval:200,debounce:!1,reactive:!0,eagerShowing:!1,infoGetter:null,visibleAreaGetter:null,onStateChange:null},o="__JUEJIN_LAZYLOAD";return function(){function r(t,n){e(this,r),this.setOptions(n),this.addOrUpdateElement(t),this.initEventListener()}return n(r,[{key:"setOptions",value:function(t){this.options=i({},s,t)}},{key:"initEventListener",value:function(){var e=this;if(this.options.reactive){var n=this.options.debounce?function(t,e){var n=0;return function(){for(var i=this,s=arguments.length,o=Array(s),r=0;r<s;r++)o[r]=arguments[r];clearTimeout(n),n=setTimeout(function(){return t.apply(i,o)},e)}}(function(){return e.updateState()},this.options.interval):function(t,e){var n=0;return e/=2,function(){for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];Date.now()-n>=e&&(n=Date.now(),setTimeout(function(){t.apply(null,s)},e))}}(function(){return e.updateState()},this.options.interval);this.removeScrollEventListener=t(window,"scroll",n),this.removeResizeEventListener=t(window,"resize",n)}}},{key:"removeEventListener",value:function(){this.removeScrollEventListener&&this.removeScrollEventListener(),this.removeResizeEventListener&&this.removeResizeEventListener()}},{key:"addOrUpdateElement",value:function(t){var e=this.getElementList(t),n=e.filter(function(t){return!t[o]});this.elementList=(this.elementList||[]).concat(n),e.forEach(this.initElement.bind(this)),this.updateState()}},{key:"removeElement",value:function(t){var e=this.getElementList(t);this.elementList=this.elementList.filter(function(t){return-1===e.indexOf(t)}),e.forEach(this.removeInfo.bind(this))}},{key:"clean",value:function(){this.elementList.forEach(this.removeInfo.bind(this)),this.elementList=[]}},{key:"getElementList",value:function(t){return t?"string"==typeof t?[].slice.call(document.querySelectorAll(t)):"number"==typeof t.length?[].slice.call(t):[t]:[]}},{key:"initElement",value:function(t){this.attachInfo(t),this.setPlaceholder(t),this.updateElementClassByState("inited",t),this.invokeStateHook("inited",t)}},{key:"attachInfo",value:function(t){var e=this.options.infoGetter&&this.options.infoGetter(t),n=i({},e,{loading:!1});t[o]=n}},{key:"setPlaceholder",value:function(t){var e=t[o];"IMG"===t.nodeName&&e.width&&e.height&&(t.src=function(t,e){return["data:image/svg+xml;utf8,",'<?xml version="1.0"?>','<svg xmlns="http://www.w3.org/2000/svg" version="1.1" ','width="'+t+'" height="'+e+'"',"></svg>"].join("")}(e.width,e.height))}},{key:"removeInfo",value:function(t){t[o]&&(t[o]=null)}},{key:"updateState",value:function(){var t=this;if(this.elementList.length){var e=this.getActiveArea();this.elementList.forEach(function(n){var i=n[o].loading,s=n.getBoundingClientRect(),r=function(t,e){return!(e.bottom<t.top||e.top>t.bottom||e.right<t.left||e.left>t.right)}(e,s);!i&&r&&t.loadIamge(n)})}}},{key:"getActiveArea",value:function(){var t=this.getVisibleArea(),e=this.options.threshold||0;return{top:t.top-e,left:t.left-e,right:t.right+e,bottom:t.bottom+e}}},{key:"getVisibleArea",value:function(){if(this.options.visibleAreaGetter)return this.options.visibleAreaGetter();var t=function(){var t=document.documentElement;return{width:Math.max(t.clientWidth,window.innerWidth||0),height:Math.max(t.clientHeight,window.innerHeight||0)}}();return{top:0,left:0,right:t.width,bottom:t.height}}},{key:"loadIamge",value:function(t){var e=this,n=t[o],i=n.url;n.loading=!0,this.updateElementClassByState("loading",t),this.invokeStateHook("loading",t),function(t,e){var n=e.onStart,i=e.onLoaded,s=e.onError,o=new Image;o.onload=function(){i&&i(t,o)},o.onerror=function(){s&&s(t,o)},o.src=t,n&&n(t,o)}(i,{onStart:function(n,i){e.options.eagerShowing&&e.onMetaLoaded(i,function(){t.removeAttribute("src"),t.setAttribute("src",n)})},onLoaded:function(){e.setElementWithImageUrl(i,t),e.updateElementClassByState("loaded",t),e.invokeStateHook("loaded",t),e.removeElement(t)},onError:function(){e.updateElementClassByState("error",t),e.invokeStateHook("error",t),e.removeElement(t)}})}},{key:"updateElementClassByState",value:function(t,e){switch(t){case"inited":e.classList.add("inited"),e.classList.remove("loading"),e.classList.remove("loaded"),e.classList.remove("error");break;case"loading":e.classList.add("loading");break;case"loaded":e.classList.remove("loading"),e.classList.add("loaded");break;case"error":e.classList.remove("loading"),e.classList.add("error")}}},{key:"invokeStateHook",value:function(t,e){if(this.options.onStateChange){var n=e[o].url;this.options.onStateChange(t,n,e,this)}}},{key:"setElementWithImageUrl",value:function(t,e){"IMG"===e.nodeName?e.src=t:e.style.backgroundImage="url("+t+")"}},{key:"onMetaLoaded",value:function(e,n){var i=setInterval(function(){e.naturalWidth&&(s(),n())},300),s=function(){return clearInterval(i)};t(e,"load",s),t(e,"error",s)}},{key:"destroy",value:function(){this.removeEventListener(),this.clean(),this.setOptions({})}}]),r}()})},1111:function(t,e,n){function i(t){n(1112)}var s=n(9)(n(1113),n(1118),i,"data-v-51163f89",null);t.exports=s.exports},1112:function(t,e){},1113:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(95),s=n.n(i),o=n(10),r=n(58),a=n(31),c=n(1114),l=n.n(c);e.default={components:{Comment:l.a},props:["list","entry","type","loading","manual"],computed:s()({},Object(r.mapGetters)({user:o.USER}),{removable:function(){return(!this.type||"entry"===this.type)&&this.user&&this.entry&&this.entry.user&&this.user.id===this.entry.user.id}}),methods:{fetchMoreIfConditionIsSatisfied:function(){if(!this.manual){Object(a.b)(this.$refs.list)>-200&&this.fetchMore()}},fetchMore:function(){return this.$emit("should-fetch-more")},remove:function(t){var e=this;this.$store.dispatch(o.DELETE_COMMENT,{entry:this.entry,comment:t}).then(function(){e.$alert("评论删除成功")}).catch(function(t){e.$error(t)})}},mounted:function(){var t=this,e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.ROOT_CONTAINER_SCROLL,function(){t.fetchMoreIfConditionIsSatisfied()}),Object(a.f)(this.$refs.list,function(){t.fetchMoreIfConditionIsSatisfied()})}}},1114:function(t,e,n){function i(t){n(1115)}var s=n(9)(n(1116),n(1117),i,"data-v-7f6a837b",null);t.exports=s.exports},1115:function(t,e){},1116:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),s=(n(58),n(19)),o=n(118),r=n(223),a=n(34),c=n(222),l=n.n(c),u=n(975),d=n.n(u),m=n(1085),h=n.n(m),f=n(987),p=n.n(f);e.default={components:{Avatar:l.a,UserPopover:d.a,SubCommentBox:h.a,ConfirmDialog:p.a},props:["comment","entry","type","removable"],data:function(){return{isShowAll:!1,isSubCommentBoxActive:!1,autoUnfold:!1,isRemoveDialogVisible:!1,likeLock:Object(r.a)()}},computed:{isMobile:function(){return Object(a.d)()},date:function(){return Object(s.d)(this.comment.createdAt)},displayedLikeCount:function(){return Object(o.a)(this.comment.likesCount)},replyPlaceholder:function(){return"对 "+this.comment.user.username+" 的回复"},toggleSubCommentBtnTitle:function(){var t=this.comment.subCount;return this.isSubCommentBoxActive?"收起评论":t?this.comment.subCount+"条评论":"评论"},limitedContent:function(){return this.$getBean("commentBusiness").limitCommentContent(this.comment.content)},collapsed:function(){return this.limitedContent.length<this.comment.content.length&&!this.isShowAll},toggleLikeAction:function(){switch(this.type){case"book":return i.TOGGLE_LIKE_BOOK_COMMENT;case"repo":return i.TOGGLE_LIKE_REPO_COMMENT;default:return i.TOGGLE_LIKE_COMMENT}}},methods:{updateAutoUnfold:function(t){this.autoUnfold=t},toggleLike:function(){var t=this;this.likeLock.do(function(){return t.$ensureAuthorized().then(function(){return t.$store.dispatch(t.toggleLikeAction,{comment:t.comment,entry:t.entry}).catch(function(e){t.$error(e)})}).catch(function(){})})},toggleSubCommentBox:function(){this.isSubCommentBoxActive=!this.isSubCommentBoxActive},remove:function(){this.isRemoveDialogVisible=!1,this.$emit("remove")}},mounted:function(){"book"===this.type&&this.comment.subCount>0&&!this.isMobile&&(this.autoUnfold=!0,this.isSubCommentBoxActive=!0),this.comment.createdAt=this.comment.createdAt}}},1117:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("user-popover",{attrs:{userId:t.comment.user.id}},[n("app-link",{attrs:{to:t.$userRoute(t.comment.user),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:t.comment.user,decorative:!0}})],1)],1),n("div",{staticClass:"content-box"},[n("div",{staticClass:"header"},[n("div",{staticClass:"user-info"},[n("user-popover",{attrs:{userId:t.comment.user.id}},[n("app-link",{staticClass:"username",attrs:{to:t.$userRoute(t.comment.user),blank:!0}},[t._v(t._s(t.comment.user.username))])],1),n("div",{staticClass:"position"},[t._v(t._s(t.$userPosition(t.comment.user)))])],1)]),n("div",{staticClass:"content"},[t.comment.reply?n("span",[t._v("回复"),n("router-link",{attrs:{to:t.$userRoute(t.comment.reply.user)}},[n("span",{staticClass:"username"},[t._v(t._s(t.comment.reply.user.username))])]),t._v("：")],1):t._e(),t.collapsed?n("span",{staticClass:"content-html collapsed"},[t._v(t._s(t.limitedContent))]):n("span",{directives:[{name:"parse-url",rawName:"v-parse-url",value:t.comment.content,expression:"comment.content"}],staticClass:"content-html"}),t.collapsed?n("span",{staticClass:"show-all",on:{click:function(e){t.isShowAll=!0}}},[t._v("展开全部")]):t._e()]),n("div",{staticClass:"footer"},[n("button",{staticClass:"like-btn",class:{liked:t.comment.liked},on:{click:t.toggleLike}},[n("i",{staticClass:"collection-arrow-ion ion-arrow-up-b"}),n("span",[t._v(t._s(t.displayedLikeCount))])]),n("span",{staticClass:"sub-comment-btn text-pointer",on:{click:t.toggleSubCommentBox}},[n("span",{staticClass:"title"},[t._v(t._s(t.toggleSubCommentBtnTitle))]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isSubCommentBoxActive,expression:"isSubCommentBoxActive"}],staticClass:"sub-comment--arrow"})]),n("span",{staticClass:"date"},[t._v(t._s(t.date))]),t.removable?n("button",{staticClass:"remove-btn hidden",on:{click:function(e){t.isRemoveDialogVisible=!0}}},[t._v("删除")]):t._e()]),t.isSubCommentBoxActive?n("sub-comment-box",{staticClass:"sub-comment-box",attrs:{parent:t.comment,entry:t.entry,type:t.type,removable:t.removable,"auto-unfold":t.autoUnfold},on:{"update:auto-unfold":t.updateAutoUnfold,close:function(e){t.isSubCommentBoxActive=!1}}}):t._e()],1),t.isRemoveDialogVisible?n("confirm-dialog",{attrs:{title:"你确定要删除这条评论吗？",content:"删除评论后，评论下的所有回复都会被删除"},on:{confirm:t.remove,cancel:function(e){t.isRemoveDialogVisible=!1}}}):t._e()],1)},staticRenderFns:[]}},1118:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{ref:"list",staticClass:"comment-list",attrs:{"st:block":"commentList"}},[t._l(t.list,function(e){return n("li",{key:e.id,staticClass:"item"},[n("comment",{attrs:{comment:e,entry:t.entry,type:t.type,removable:t.removable},on:{remove:function(n){t.remove(e)}}})],1)}),t.manual?n("li",{staticClass:"more"},[n("div",{staticClass:"more-btn",class:{loading:t.loading},on:{click:t.fetchMore}},[t._v(t._s(t.loading?"加载中...":"展开全部"))])]):t._e()],2)},staticRenderFns:[]}},1119:function(t,e,n){function i(t){n(1120)}var s=n(9)(n(1121),n(1141),i,"data-v-4f97d566",null);t.exports=s.exports},1120:function(t,e){},1121:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(n(31),n(997)),s=n.n(i),o=n(1125),r=n.n(o);n(34);e.default={components:{CommentForm:s.a,CommentList:r.a},props:{entry:Object,list:Array,loading:Boolean,expanded:Boolean,sticky:Boolean,canFetchMore:Boolean,isFromActivity:Boolean},data:function(){return{}},computed:{fetchMoreTitle:function(){return this.loading?"加载中...":"查看更多 >"},renderingList:function(){var t=this.list;return this.isFromActivity&&t.length>6?t.slice(0,6):t}},methods:{onSubmitted:function(){this.$emit("submitted")},fetchMore:function(){this.$emit("should-fetch-more")}}}},1122:function(t,e){},1123:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),s=n.n(i),o=n(10),r=(n(31),n(228)),a=n(229),c=n.n(a),l=n(222),u=n.n(l),d=n(116),m=(n.n(d),n(115)),h=n(162),f=n(114),p=["jpg","png","gif"];e.default={components:{Avatar:u.a,Emoji:c.a},props:["entry","comment","parent","autoFocus","placeholder"],data:function(){return{emojis:r.a,active:!1,focused:!1,submitting:!1,content:"",imageFile:null,imagePreviewUrl:"",emoji:""}},computed:{me:function(){return this.$store.getters.USER},empty:function(){return!this.content.length},canSubmit:function(){return this.content.length&&!this.submitting},isActionBoxVisible:function(){return(this.focused||!this.empty||this.imageFile)&&this.me},submitButtonTitle:function(){return this.submitting?"提交中...":"评论"},commentAction:function(){switch(this.type){case"book":return o.SUBMIT_BOOK_COMMENT;case"repo":return o.SUBMIT_REPO_COMMENT;default:return o.SUBMIT_COMMENT}},replyAction:function(){switch(this.type){case"book":return o.REPLY_BOOK_COMMENT;case"repo":return o.REPLY_REPO_COMMENT;default:return o.REPLY_COMMENT}}},watch:{focused:function(t){t&&!this.me&&this.$requestLogin(),t||!this.empty||this.imageFile||this.$emit("emptyBlur")},imageFile:function(){Object(m.d)(this.$refs.richInput)}},methods:{onFocus:function(){this.focused=!0},onOuterClick:function(){this.empty&&(this.focused=!1)},onFormBoxClick:function(t){var e=t.target,n=this.$refs.richInput;n.focus(),n.contains(e)||Object(m.d)(n)},onInput:function(){this.focused=!0,this.content=this.emojiToText(this.$refs.richInput.innerHTML),this.content=Object(m.a)(this.content)},onPaste:function(t){Object(m.b)(t)},onKeydown:function(t){var e=this;if(this.content.length&&!this.submitting)return Object(h.a)(t,function(){return e.submit()})},cleanContent:function(){this.$refs.richInput.innerHTML="<br/>",this.content=""},updateEmoji:function(t){this.emoji=t;var e=this.$refs.richInput;t=Object(d.emojiToImage)(t);var n=document.queryCommandSupported("InsertHTML");this.content.length||e.focus(),n&&document.execCommand("insertHTML",!1,t),this.onInput()},showFileDialog:function(){this.$refs.input.click()},changeFile:function(t){this.imageFile=t,window.URL.revokeObjectURL(this.imagePreviewUrl),this.imagePreviewUrl=t?window.URL.createObjectURL(t):""},cleanFile:function(){this.changeFile(null)},onFileSelected:function(t){var e=this;if(this.$refs.input.value=null,t)return this.isWithVaildSize(t)?void Object(f.a)(t,p).then(function(n){n?e.changeFile(t):e.$error("不支持此格式的图片")}):void this.$error("文件过大")},isWithVaildSize:function(t){return t.size<=5242880},uploadFile:function(){return this.imageFile?this.$getBean("uploadBusiness").uploadFile(this.imageFile):s.a.resolve()},submit:function(){var t=this;return this.submitting=!0,this.uploadFile().then(function(e){return t.createSubmitTask(e)}).then(function(){t.submitting=!1,t.$barrage(t.content.trim()),t.$emit("submitted"),t.reset()}).catch(function(e){t.submitting=!1,t.$error(e)})},createSubmitTask:function(t){var e=this.entry,n=this.content.trim();return this.comment?this.$store.dispatch(this.replyAction,{entry:e,parent:this.parent||this.comment,tar:this.comment||this.parent,content:n,imageUrl:t}):this.$store.dispatch(this.commentAction,{entry:e,content:n,imageUrl:t})},reset:function(){this.cleanFile(),this.cleanContent()},emojiToText:function(t){return t.replace(/<img.*?alt=".*?/g,"").replace(/".?src=.*?>/g,"")}},mounted:function(){var t=this;this.autoFocus&&this.$nextTick(function(){t.$refs.richInput.focus()})}}},1124:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"outer-click",rawName:"v-outer-click",value:function(){return t.onOuterClick()},expression:"() => onOuterClick()"}],staticClass:"comment-form",class:{focused:t.focused,reply:!!t.comment,"sub-reply":!!t.parent}},[n("div",{staticClass:"avatar-box"},[n("avatar",{staticClass:"avatar",attrs:{user:t.me}})],1),n("div",{staticClass:"form-box",class:{disabled:t.submitting},on:{click:t.onFormBoxClick}},[n("div",{staticClass:"input-box"},[n("div",{ref:"richInput",staticClass:"rich-input",class:{empty:t.empty},attrs:{contenteditable:"true",spellcheck:"false",placeholder:t.placeholder||"输入评论..."},on:{focus:t.onFocus,input:t.onInput,paste:t.onPaste,keydown:t.onKeydown}},[n("br")]),t.imagePreviewUrl?n("div",{staticClass:"image-preview-box"},[n("div",{staticClass:"image-preview",style:{backgroundImage:"url("+t.imagePreviewUrl+")"}}),n("div",{staticClass:"clean-btn",on:{click:t.cleanFile}},[n("svg",{staticClass:"icon close-icon",attrs:{"aria-hidden":"true",width:"14",height:"14",viewBox:"0 0 21 21"}},[n("g",{attrs:{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)"}},[n("circle",{attrs:{cx:"9.5",cy:"9.5",r:"9.5",fill:"#000",stroke:"#FFF",opacity:".5"}}),t._v(" "),n("path",{attrs:{fill:"#FFF",d:"M13.743 5.964L10.207 9.5l3.536 3.536-.707.707L9.5 10.207l-3.536 3.536-.707-.707L8.793 9.5 5.257 5.964l.707-.707L9.5 8.793l3.536-3.536z"}})])])])]):t._e()]),t.isActionBoxVisible?n("div",{staticClass:"action-box"},[n("emoji",{staticClass:"emoji-btn",attrs:{emoji:t.emojis},on:{selectEmoji:t.updateEmoji}}),n("div",{staticClass:"submit"},[n("span",[t._v("Ctrl or ⌘ + Enter")]),n("button",{staticClass:"submit-btn",attrs:{disabled:!t.canSubmit},on:{click:t.submit}},[t._v(t._s(t.submitButtonTitle))])])],1):t._e()]),n("input",{ref:"input",staticClass:"hidden",attrs:{type:"file"},on:{change:function(e){t.onFileSelected(e.target.files[0])}}})])},staticRenderFns:[]}},1125:function(t,e,n){function i(t){n(1126)}var s=n(9)(n(1127),n(1140),i,"data-v-8ac22788",null);t.exports=s.exports},1126:function(t,e){},1127:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(225),s=n.n(i),o=n(1128),r=n.n(o);e.default={components:{ImageViewer:s.a,Comment:r.a},props:["list","entry","expanded"],methods:{initImageViewer:function(){this.$refs.imageViewer.attachContainer(this.$el)},refetch:function(){this.$emit("refetch")}},mounted:function(){this.initImageViewer()}}},1128:function(t,e,n){function i(t){n(1129)}var s=n(9)(n(1130),n(1139),i,"data-v-66979eae",null);t.exports=s.exports},1129:function(t,e){},1130:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(95),s=n.n(i),o=n(10),r=n(58),a=n(223),c=n(160),l=n(222),u=n.n(l),d=n(974),m=n.n(d),h=n(997),f=n.n(h),p=n(1131),v=n.n(p),g=n(975),C=n.n(g),b=n(34),y=n(987),k=n.n(y);e.default={components:{Avatar:u.a,Thumb:m.a,CommentForm:f.a,SubCommentList:v.a,UserPopover:C.a,ConfirmDialog:k.a},props:["comment","entry","expanded"],data:function(){return{likeLock:Object(a.a)(),isReplyFormVisible:!1,isShowAll:!1,isRemoveDialogVisible:!1}},computed:s()({},Object(r.mapGetters)({user:o.USER}),{removable:function(){return(!this.type||"entry"===this.type)&&this.user&&this.entry&&this.entry.user&&this.user.id===this.entry.user.id},hasAuthorBadge:function(){return this.entry.user.id===this.comment.user.id},visible:function(){return this.removable},mobile:function(){return Object(b.d)()&&this.visible},position:function(){return this.$userPosition(this.comment.user)},imageUrl:function(){return this.comment.imageUrlList[0]},limitedContent:function(){return Object(c.a)(this.comment.content,{maxLineCount:this.maxLineCount,perLineLength:this.perLineLength})},collapsed:function(){return this.limitedContent.length<this.comment.content.length&&!this.isShowAll&&this.comment.content.length-this.limitedContent.length>this.perLineLength},perLineLength:function(){return Object(b.d)()?30:40},maxLineCount:function(){return Object(b.d)()?4:6},replyPlaceholder:function(){return"回复"+this.comment.user.username+"..."},toggleLikeAction:function(){switch(this.type){case"pin":return o.TOGGLE_LIKE_PIN_COMMENT;case"book":return o.TOGGLE_LIKE_BOOK_COMMENT;case"repo":return o.TOGGLE_LIKE_REPO_COMMENT;default:return o.TOGGLE_LIKE_COMMENT}}}),methods:{toggleLike:function(){var t=this;this.likeLock.do(function(){return t.$ensureAuthorized("login").then(function(){return t.$store.dispatch(t.toggleLikeAction,{comment:t.comment,entry:t.entry}).catch(function(e){t.$error(e)})}).catch(function(){})})},onReplyFormEmptyBlur:function(){var t=this;window.setTimeout(function(){t.isReplyFormVisible=!1})},onSubmitted:function(){this.isReplyFormVisible=!1,this.$refs.subCommentList.onSubmitted()},refetch:function(){this.$emit("refetch")},deleteComment:function(){var t=this;this.isRemoveDialogVisible=!1,this.$ensureAuthorized("login").then(function(){t.$store.dispatch(o.DELETE_COMMENT,{entry:t.entry,comment:t.comment}).then(function(){t.$alert("评论删除成功")}).catch(function(e){t.$error(e)})})}}}},1131:function(t,e,n){function i(t){n(1132)}var s=n(9)(n(1133),n(1138),i,"data-v-f1d03d04",null);t.exports=s.exports},1132:function(t,e){},1133:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(159),s=n.n(i),o=n(1134),r=n.n(o);e.default={components:{SubComment:r.a},props:["entry","parent","expanded","removable"],data:function(){return{list:[],page:1,pageSize:10,total:0,canNext:!0,loading:!1}},computed:{fetchMoreTitle:function(){return this.loading?"加载中...":"加载更多"},canFetchMore:function(){this.parent.subCommentCount;return!!this.list.length&&(this.expanded?1===this.page?this.parent.replyCount>this.list.length:this.canNext:this.list.length&&this.parent.replyCount>this.list.length)}},watch:{parent:function(t){this.list=t.topSubCommentList}},methods:{getRepository:function(){return this.$getBean("commentRepository")},onSubmitted:function(){var t=this;this.getRepository().getSubCommentList({commentId:this.parent.id,entryId:this.entry.id,page:1,pageSize:this.pageSize}).then(function(e){var n=e.list,i=e.total;t.list=n,t.total=i}).catch(function(t){console.error(t)})},fetchMore:function(){var t=this;!this.loading&&this.canNext&&(this.loading=!0,this.getRepository().getSubCommentList({commentId:this.parent.id,entryId:this.entry.id,page:this.page,pageSize:this.pageSize}).then(function(e){var n=e.list,i=e.total;t.loading=!1,t.mergeList(n),t.total=i,t.canNext=i>t.list.length&&n.length>0,t.page++}).catch(function(e){t.loading=!1,console.error(e)}))},mergeList:function(t){var e,n=this.list.reduce(function(t,e){return t[e.id]=!0,t},{}),i=t.filter(function(t){return!n[t.id]});(e=this.list).push.apply(e,s()(i))}},mounted:function(){var t=this.parent.subCommentCount;this.expanded&&t<=this.pageSize&&t>2&&this.fetchMore(),this.list=this.parent.topSubCommentList}}},1134:function(t,e,n){function i(t){n(1135)}var s=n(9)(n(1136),n(1137),i,"data-v-2c9572fe",null);t.exports=s.exports},1135:function(t,e){},1136:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),s=n(974),o=n.n(s),r=n(223),a=n(160),c=n(975),l=n.n(c),u=n(997),d=n.n(u),m=n(222),h=n.n(m),f=n(981),p=n.n(f),v=n(34),g=n(987),C=n.n(g);e.default={components:{CommentForm:d.a,UserPopover:l.a,Avatar:h.a,Triangle:p.a,Thumb:o.a,ConfirmDialog:C.a},props:["entry","parent","comment","removable"],data:function(){return{likeLock:Object(r.a)(),isReplyFormVisible:!1,isShowAll:!1,isRemoveDialogVisible:!1}},computed:{hasAuthorBadge:function(){return this.entry.user.id===this.comment.user.id},hasReplyAuthorBadge:function(){return this.entry.user.id===this.comment.replyUser.id},visible:function(){return this.removable},isVisibleMobile:function(){return this.visible&&Object(v.d)()},position:function(){return this.$userPosition(this.comment.user)},imageUrl:function(){return this.comment.imageUrlList[0]},limitedContent:function(){return Object(a.a)(this.comment.content,{maxLineCount:this.maxLineCount,perLineLength:this.perLineLength})},collapsed:function(){return this.limitedContent.length<this.comment.content.length&&!this.isShowAll&&this.comment.content.length-this.limitedContent.length>this.perLineLength},replyPlaceholder:function(){return"回复"+this.comment.user.username+"..."},perLineLength:function(){return Object(v.d)()?30:40},maxLineCount:function(){return Object(v.d)()?4:6}},methods:{toggleLike:function(){var t=this;this.likeLock.do(function(){return t.$ensureAuthorized("login").then(function(){return t.$store.dispatch(i.TOGGLE_LIKE_COMMENT,{comment:t.comment,entry:t.entry}).catch(function(e){t.$error(e)})}).catch(function(){})})},onReplyFormEmptyBlur:function(){var t=this;window.setTimeout(function(){t.isReplyFormVisible=!1})},onSubmitted:function(){this.isReplyFormVisible=!1,this.$alert("评论成功"),this.$emit("submitted")},deleteSubComment:function(t){var e=this;this.isRemoveDialogVisible=!1,this.$ensureAuthorized("login").then(function(){e.$store.dispatch(i.DELETE_COMMENT,{parent:e.parent,entry:e.entry,comment:t}).then(function(){e.$alert("回复删除成功"),e.$emit("submitted")}).catch(function(t){e.$error(t)})})}}}},1137:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-comment"},[n("div",{staticClass:"sub-comment-content-row"},[n("div",{staticClass:"sub-comment-content-box"},[n("user-popover",{staticClass:"popover",attrs:{userId:t.comment.user.id}},[n("app-link",{staticClass:"username",attrs:{to:t.$userRoute(t.comment.user),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:t.comment.user,size:100}})],1)],1),n("div",{staticClass:"user-content-box"},[n("div",{staticClass:"profie"},[n("user-popover",{attrs:{userId:t.comment.user.id}},[n("app-link",{staticClass:"username",attrs:{to:t.$userRoute(t.comment.user),blank:!0}},[t._v(t._s(t.comment.user.username)),t.hasAuthorBadge?n("span",{staticClass:"author-badge-text"},[t._v("(作者)")]):t._e()])],1),n("div",{staticClass:"position"},[t._v(t._s(t.position))])],1),n("div",{staticClass:"content-box"},[t.comment.firstComment!==t.comment.replyCommentId?[n("span",[t._v(" 回复 ")]),n("user-popover",{attrs:{userId:t.comment.replyUser.id}},[n("app-link",{staticClass:"username be-replied",attrs:{to:t.$userRoute(t.comment.replyUser),blank:!0}},[t._v(t._s(t.comment.replyUser.username))])],1),t.hasReplyAuthorBadge?n("span",{staticClass:"author-badge-text"},[t._v("(作者)")]):t._e(),n("span",[t._v(": ")])]:t._e(),t.collapsed?n("span",{directives:[{name:"parse-url-emoji",rawName:"v-parse-url-emoji",value:t.limitedContent,expression:"limitedContent"}],staticClass:"content"}):n("span",{directives:[{name:"parse-url-emoji",rawName:"v-parse-url-emoji",value:t.comment.content,expression:"comment.content"}],staticClass:"content"})],2),t.collapsed?n("span",{staticClass:"limit-btn",on:{click:function(e){t.isShowAll=!0}}},[t._v("展开")]):t._e(),t.imageUrl&&!t.collapsed?n("span",{staticClass:"image viewable",attrs:{"data-src":t.imageUrl}},[t._v("[图片]"),n("a",{staticClass:"image-preview"},[t.imageUrl&&!t.collapsed?n("thumb",{staticClass:"image viewable",attrs:{"data-src":t.imageUrl,url:t.imageUrl,width:400,height:340,format:"jpg"}}):t._e(),n("triangle",{staticClass:"triangle-top"})],1)]):t._e(),n("div",{staticClass:"limit-all-box"},[t.isShowAll?n("span",{staticClass:"limit-btn all",on:{click:function(e){t.isShowAll=!1}}},[t._v("收起")]):t._e()]),n("div",{staticClass:"sub-comment-stat-box"},[n("time",{staticClass:"time",attrs:{datetime:t._f("iso")(t.comment.createdAt),title:t.comment.createdAt}},[t._v(t._s(t._f("relative")(t.comment.createdAt)))]),n("div",{staticClass:"delete",class:{visible:t.visible},on:{click:function(e){t.isRemoveDialogVisible=!0}}},[t._v("  · 删除")]),n("div",{staticClass:"sub-comment-action-box"},[n("div",{staticClass:"like-action action",class:{active:t.comment.liked},on:{click:t.toggleLike}},[t.comment.liked?[n("svg",{staticClass:"icon like-icon",attrs:{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 20 20"}},[n("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M0 0h20v20H0z"}}),t._v(" "),n("path",{attrs:{fill:"#37C700",stroke:"#37C700","stroke-linejoin":"round","stroke-width":".964",d:"M5.344 8.833V17H4.072C3.482 17 3 16.424 3 15.716V10.22c0-.739.502-1.387 1.072-1.387h1.272zM10.6 4.166c.106-.693.692-1.179 1.335-1.166.918.018 1.465.777 1.655 1.153.346.686.356 1.816.118 2.542-.215.657-.713 1.52-.713 1.52h3.732c.395 0 .762.193 1.006.526.248.341.33.784.218 1.187l-1.69 6.08c-.153.584-.662.992-1.236.992H7.219V8.504c1.686-.361 3.191-3.086 3.381-4.338z"}})])])]:[n("svg",{staticClass:"icon like-icon",attrs:{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 20 20"}},[n("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M0 0h20v20H0z"}}),t._v(" "),n("path",{attrs:{stroke:"#8A93A0","stroke-linejoin":"round",d:"M4.58 8.25V17h-1.4C2.53 17 2 16.382 2 15.624V9.735c0-.79.552-1.485 1.18-1.485h1.4zM11.322 2c1.011.019 1.614.833 1.823 1.235.382.735.392 1.946.13 2.724-.236.704-.785 1.629-.785 1.629h4.11c.434 0 .838.206 1.107.563.273.365.363.84.24 1.272l-1.86 6.513A1.425 1.425 0 0 1 14.724 17H6.645V7.898C8.502 7.51 9.643 4.59 9.852 3.249A1.47 1.47 0 0 1 11.322 2z"}})])])],t.comment.likesCount?n("span",{staticClass:"action-title"},[t._v(t._s(t.comment.likesCount))]):t._e()],2),n("div",{staticClass:"comment-action action",on:{click:function(e){t.isReplyFormVisible=!t.isReplyFormVisible}}},[n("svg",{staticClass:"icon comment-icon",attrs:{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 20 20"}},[n("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M0 0h20v20H0z"}}),t._v(" "),n("path",{attrs:{stroke:"#8A93A0","stroke-linejoin":"round",d:"M10 17c-4.142 0-7.5-2.91-7.5-6.5S5.858 4 10 4c4.142 0 7.5 2.91 7.5 6.5 0 1.416-.522 2.726-1.41 3.794-.129.156.41 3.206.41 3.206l-3.265-1.134c-.998.369-2.077.634-3.235.634z"}})])]),t._v(" "),n("span",[t._v("回复")])])])]),t.isReplyFormVisible?n("comment-form",{staticClass:"reply-form",attrs:{entry:t.entry,parent:t.parent,comment:t.comment,autoFocus:!0,placeholder:t.replyPlaceholder},on:{emptyBlur:t.onReplyFormEmptyBlur,submitted:t.onSubmitted}}):t._e()],1)],1)]),t.isRemoveDialogVisible?n("confirm-dialog",{attrs:{title:"确认要删除这条回复吗？",content:""},on:{confirm:function(e){t.deleteSubComment(t.comment)},cancel:function(e){t.isRemoveDialogVisible=!1}}}):t._e()],1)},staticRenderFns:[]}},1138:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sub-comment-list"},[t._l(t.list,function(e){return n("div",{key:e.id,staticClass:"item"},[n("sub-comment",{staticClass:"sub-comment",attrs:{entry:t.entry,parent:t.parent,comment:e,removable:t.removable},on:{submitted:t.onSubmitted}})],1)}),t.canFetchMore?n("div",{staticClass:"item fetch-more"},[n("div",{staticClass:"fetch-more-comment",on:{click:t.fetchMore}},[t._v(t._s(t.fetchMoreTitle))])]):t._e()],2)},staticRenderFns:[]}},1139:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("user-popover",{staticClass:"popover",attrs:{userId:t.comment.user.id}},[n("app-link",{staticClass:"user-link",attrs:{to:t.$userRoute(t.comment.user),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:t.comment.user,size:100}})],1)],1),n("div",{staticClass:"content-box comment-divider-line"},[n("div",{staticClass:"meta-box"},[n("user-popover",{attrs:{userId:t.comment.user.id}},[n("app-link",{staticClass:"username ellipsis",attrs:{to:t.$userRoute(t.comment.user),blank:!0}},[t._v(t._s(t.comment.user.username)),t.hasAuthorBadge?n("span",{staticClass:"author-badge-text"},[t._v("(作者)")]):t._e()])],1),n("div",{staticClass:"position"},[t._v(t._s(t.position))])],1),t.collapsed?n("div",{directives:[{name:"parse-url-emoji",rawName:"v-parse-url-emoji",value:t.limitedContent,expression:"limitedContent"}],staticClass:"content"}):n("div",{directives:[{name:"parse-url-emoji",rawName:"v-parse-url-emoji",value:t.comment.content,expression:"comment.content"}],staticClass:"content"}),n("div",{staticClass:"limit-ctl-box"},[t.collapsed?n("div",{staticClass:"limit-btn",on:{click:function(e){t.isShowAll=!0}}},[t._v("展开")]):t._e(),t.isShowAll?n("div",{staticClass:"limit-btn",on:{click:function(e){t.isShowAll=!1}}},[t._v("收起")]):t._e()]),t.imageUrl&&!t.collapsed?n("thumb",{staticClass:"image viewable",attrs:{"data-src":t.imageUrl,url:t.imageUrl,width:160,height:160,format:"jpg"}}):t._e(),n("div",{staticClass:"reply-stat"},[n("time",{staticClass:"time",attrs:{datetime:t._f("iso")(t.comment.createdAt),title:t.comment.createdAt}},[t._v(t._s(t._f("relative")(t.comment.createdAt)))]),n("div",{staticClass:"delete",class:{visible:t.visible,mobile:t.mobile},on:{click:function(e){t.isRemoveDialogVisible=!0}}},[t._v("  · 删除")]),n("div",{staticClass:"action-box"},[n("div",{staticClass:"like-action action",class:{active:t.comment.liked},on:{click:t.toggleLike}},[t.comment.liked?[n("svg",{staticClass:"icon like-icon",attrs:{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 20 20"}},[n("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M0 0h20v20H0z"}}),t._v(" "),n("path",{attrs:{fill:"#37C700",stroke:"#37C700","stroke-linejoin":"round","stroke-width":".964",d:"M5.344 8.833V17H4.072C3.482 17 3 16.424 3 15.716V10.22c0-.739.502-1.387 1.072-1.387h1.272zM10.6 4.166c.106-.693.692-1.179 1.335-1.166.918.018 1.465.777 1.655 1.153.346.686.356 1.816.118 2.542-.215.657-.713 1.52-.713 1.52h3.732c.395 0 .762.193 1.006.526.248.341.33.784.218 1.187l-1.69 6.08c-.153.584-.662.992-1.236.992H7.219V8.504c1.686-.361 3.191-3.086 3.381-4.338z"}})])])]:[n("svg",{staticClass:"icon like-icon",attrs:{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 20 20"}},[n("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M0 0h20v20H0z"}}),t._v(" "),n("path",{attrs:{stroke:"#8A93A0","stroke-linejoin":"round",d:"M4.58 8.25V17h-1.4C2.53 17 2 16.382 2 15.624V9.735c0-.79.552-1.485 1.18-1.485h1.4zM11.322 2c1.011.019 1.614.833 1.823 1.235.382.735.392 1.946.13 2.724-.236.704-.785 1.629-.785 1.629h4.11c.434 0 .838.206 1.107.563.273.365.363.84.24 1.272l-1.86 6.513A1.425 1.425 0 0 1 14.724 17H6.645V7.898C8.502 7.51 9.643 4.59 9.852 3.249A1.47 1.47 0 0 1 11.322 2z"}})])])],t.comment.likesCount?n("span",{staticClass:"action-title"},[t._v(t._s(t.comment.likesCount))]):t._e()],2),n("div",{staticClass:"comment-action action",on:{click:function(e){t.isReplyFormVisible=!t.isReplyFormVisible}}},[n("svg",{staticClass:"icon comment-icon",attrs:{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 20 20"}},[n("g",{attrs:{fill:"none","fill-rule":"evenodd"}},[n("path",{attrs:{d:"M0 0h20v20H0z"}}),t._v(" "),n("path",{attrs:{stroke:"#8A93A0","stroke-linejoin":"round",d:"M10 17c-4.142 0-7.5-2.91-7.5-6.5S5.858 4 10 4c4.142 0 7.5 2.91 7.5 6.5 0 1.416-.522 2.726-1.41 3.794-.129.156.41 3.206.41 3.206l-3.265-1.134c-.998.369-2.077.634-3.235.634z"}})])]),t._v(" "),n("span",{staticClass:"action-title"},[t._v("回复")])])])]),t.isReplyFormVisible?n("comment-form",{staticClass:"reply-form",attrs:{entry:t.entry,comment:t.comment,autoFocus:!0,placeholder:t.replyPlaceholder},on:{emptyBlur:t.onReplyFormEmptyBlur,submitted:t.onSubmitted}}):t._e(),n("sub-comment-list",{ref:"subCommentList",staticClass:"sub-comment-list",attrs:{entry:t.entry,parent:t.comment,expanded:t.expanded,removable:t.removable},on:{refetch:t.refetch}})],1),t.isRemoveDialogVisible?n("confirm-dialog",{attrs:{title:"你确定要删除这条评论吗？",content:"删除评论后，评论下的所有回复都会被删除"},on:{confirm:t.deleteComment,cancel:function(e){t.isRemoveDialogVisible=!1}}}):t._e()],1)},staticRenderFns:[]}},1140:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-list"},[n("image-viewer",{ref:"imageViewer",attrs:{selector:".viewable"}}),t._l(t.list,function(e){return n("div",{key:e.id,staticClass:"item"},[n("comment",{staticClass:"comment",attrs:{comment:e,entry:t.entry,expanded:t.expanded},on:{refetch:t.refetch}})],1)})],2)},staticRenderFns:[]}},1141:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-list-box",class:{sticky:t.sticky}},[t.isFromActivity?t._e():n("div",{staticClass:"title"},[t._v("评论")]),n("comment-form",{staticClass:"comment-form",attrs:{entry:t.entry},on:{submitted:t.onSubmitted}}),t.list.length?n("comment-list",{staticClass:"comment-list",attrs:{list:t.renderingList,entry:t.entry,expanded:t.expanded},on:{refetch:t.onSubmitted}}):t._e(),t.isFromActivity?t._e():[!t.expanded&&t.list.length<t.entry.commentsCount&&t.entry.commentsCount>6&&this.canFetchMore?n("div",{staticClass:"fetch-more-comment",on:{click:t.fetchMore}},[t._v(t._s(t.fetchMoreTitle))]):t._e()]],2)},staticRenderFns:[]}},1149:function(t,e,n){function i(t){n(1301)}var s=n(9)(n(1302),n(1319),i,"data-v-a0f279e6",null);t.exports=s.exports},1159:function(t,e,n){function i(t){n(1160)}var s=n(9)(n(1161),n(1162),i,"data-v-00a4671b",null);t.exports=s.exports},1160:function(t,e){},1161:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(31);e.default={props:["category","resourceType","resourceId","noPromotion"],data:function(){return{popupText:"",canOpenInApp:!1}},computed:{promotion:function(){return(this.category||"")+"高手都在看"}},methods:{onClick:function(){if(this.canOpenInApp){this.$getBean("openInAppBusiness").openInApp(this.resourceType,this.resourceId)}else this.downloadApp()},downloadApp:function(){this.$getBean("openInAppBusiness").openAppDownloadPage()}},mounted:function(){var t=this,e=this.$getBean("openInAppBusiness");this.canOpenInApp=e.canOpenInApp(this.$route.path),this.removeEventListener=Object(i.g)(document,function(){if(!t.noPromotion){var e=document.documentElement.offsetHeight,n=window.screen.height,i=window.pageYOffset,s=e-n-i<=50;t.popupText=s?t.promotion:""}})},beforeDestroy:function(){this.removeEventListener()}}},1162:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mobile-bottom-bar",attrs:{"st:block":"mobileBottomBar"}},[n("div",{staticClass:"bar-container"},[t._m(0),n("a",{staticClass:"button",attrs:{"st:name":"openInAppBtn"},on:{click:t.onClick}},[t._v(t._s(t.canOpenInApp?"打开应用":"立即下载")),n("div",{directives:[{name:"show",rawName:"v-show",value:t.popupText,expression:"popupText"}],staticClass:"pop-up"},[n("a",{staticClass:"pop-up-content"},[t._v(t._s(t.popupText))])])])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"left",attrs:{href:"https://juejin.im/about"}},[n("img",{attrs:{src:"https://b-gold-cdn.xitu.io/images/logo-bold.svg"}}),n("span",[t._v("一个帮助开发者成长的社区")])])}]}},1194:function(t,e,n){"use strict";function i(t,e){t=t||{},e=e||t.parsedContent;var n=t.title||"",i=s(e)||t.content;return{title:n,keywords:o((t.tags||[]).map(function(t){return t.title})),description:r(i)}}function s(t){return(t||"").replace(/<.*?>/g,"")}function o(t){return t=t||[],t.join(",").replace(/[\r\n\s]+/g," ")}function r(t){return t=(t||"").trim().slice(0,130),t.replace(/[\r\n\s]+/g," ")}e.a=i,e.c=o,e.b=r;n(230)},1298:function(t,e,n){function i(t){n(1299)}var s=n(9)(n(1300),n(1320),i,"data-v-1988842d",null);t.exports=s.exports},1299:function(t,e){},1300:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1149),s=n.n(i),o=n(988),r=n.n(o);e.default={components:{WechatBanner:s.a,SidebarBlock:r.a},props:["category","closeable"],data:function(){return{visible:!1}},methods:{close:function(){window.localStorage.setItem("HIDE_WECHAT_SIDEBAR_BLOCK",!0),this.visible=!1}},mounted:function(){this.closeable?this.visible=!window.localStorage.getItem("HIDE_WECHAT_SIDEBAR_BLOCK"):this.visible=!0}}},1301:function(t,e){},1302:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={default:[n(1303),n(1304)],frontend:[n(1305),n(1306)],backend:[n(1307),n(1308)],android:[n(1309),n(1310)],ios:[n(1311),n(1312)],ai:[n(1313),n(1314)],flutter:[n(1315),n(1316)],devops:[n(1317),n(1318)]};e.default={props:["category","square"],computed:{imageUrl:function(){return(i[this.category]||i.default)[this.square?1:0]}}}},1303:function(t,e,n){t.exports=n.p+"static/img/default.73b4737.png"},1304:function(t,e,n){t.exports=n.p+"static/img/default.1fb7a71.png"},1305:function(t,e,n){t.exports=n.p+"static/img/frontend.36d7923.png"},1306:function(t,e,n){t.exports=n.p+"static/img/frontend.1dae74a.png"},1307:function(t,e,n){t.exports=n.p+"static/img/backend.58ef824.png"},1308:function(t,e,n){t.exports=n.p+"static/img/backend.ba44b94.png"},1309:function(t,e,n){t.exports=n.p+"static/img/android.adc945b.png"},1310:function(t,e,n){t.exports=n.p+"static/img/android.fef4da1.png"},1311:function(t,e,n){t.exports=n.p+"static/img/ios.f827b0c.png"},1312:function(t,e,n){t.exports=n.p+"static/img/ios.c0a0c8c.png"},1313:function(t,e,n){t.exports=n.p+"static/img/ai.9fab33c.png"},1314:function(t,e,n){t.exports=n.p+"static/img/ai.ecada1f.png"},1315:function(t,e,n){t.exports=n.p+"static/img/flutter.168df7b.png"},1316:function(t,e,n){t.exports=n.p+"static/img/flutter.851314d.png"},1317:function(t,e,n){t.exports=n.p+"static/img/devops.ea48c57.png"},1318:function(t,e,n){t.exports=n.p+"static/img/devops.6b1a320.png"},1319:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wechat-banner"},[n("img",{staticClass:"wechat-img",attrs:{src:t.imageUrl}})])},staticRenderFns:[]}},1320:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("sidebar-block",{staticClass:"wechat-sidebar-block",attrs:{pure:!0}},[n("wechat-banner",{attrs:{category:t.category,square:!0}}),t.closeable?n("div",{staticClass:"close-btn ion-close-round",attrs:{title:"关闭"},on:{click:t.close}}):t._e()],1):t._e()},staticRenderFns:[]}},1356:function(t,e,n){function i(t){n(1357)}var s=n(9)(n(1358),n(1359),i,"data-v-f6632f66",null);t.exports=s.exports},1357:function(t,e){},1358:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(988),s=n.n(i);e.default={components:{SidebarBlock:s.a},props:["list"]}},1359:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.list.length?i("sidebar-block",{staticClass:"related-entry-sidebar-block",attrs:{"st:block":"relatedEntrySidebarBlock",title:"相关文章"}},[i("div",{staticClass:"entry-list"},t._l(t.list,function(e,s){return i("app-link",{key:s,staticClass:"item",attrs:{to:t.$entryPublicRoute(e),blank:!0,"st:name":"link"}},[i("div",{staticClass:"entry-title"},[t._v(t._s(e.title))]),i("div",{staticClass:"entry-meta-box"},[i("div",{staticClass:"entry-meta"},[i("img",{staticClass:"icon",attrs:{src:n(1360)}}),i("span",{staticClass:"count"},[t._v(t._s(e.collectionCount||0))])]),i("div",{staticClass:"entry-meta"},[i("img",{staticClass:"icon",attrs:{src:n(1361)}}),i("span",{staticClass:"count"},[t._v(t._s(e.commentsCount||0))])])])])}))]):t._e()},staticRenderFns:[]}},1360:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgxNnYxNkgweiIvPgogICAgICAgIDxwYXRoIGZpbGw9IiNCMkJBQzIiIGQ9Ik00LjIzNCA2LjY5M3Y3LjI0M0gyLjg4MWMtLjQ4NiAwLS44ODEtLjQ5Mi0uODgxLTEuMDk1VjcuODc1YzAtLjYzLjQxMi0xLjE4Mi44OC0xLjE4MmgxLjM1NHptMy42ODgtMy43QzguMDEgMi40MDQgOC40OSAxLjk5IDkuMDE4IDJjLjc1NC4wMTUgMS4yMDQuNjYzIDEuMzYuOTgzLjI4NC41ODUuMjkyIDEuNTQ5LjA5NyAyLjE2Ny0uMTc3LjU2LS41ODYgMS4yOTYtLjU4NiAxLjI5NmgzLjA2NmMuMzI0IDAgLjYyNS4xNjQuODI2LjQ0OS4yMDQuMjkuMjcuNjY4LjE3OCAxLjAxMWwtMS4zODcgNS4xODNjLS4xMjYuNDk5LS41NDQuODQ3LTEuMDE2Ljg0N0g1LjUzVjYuNjkzYzEuMzg1LS4zMDkgMi4yMzYtMi42MzIgMi4zOTItMy43eiIvPgogICAgPC9nPgo8L3N2Zz4K"},1361:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgxNnYxNkgweiIvPgogICAgICAgIDxwYXRoIGZpbGw9IiNCMkJBQzIiIGQ9Ik0yIDR2OC4wMzhoNC40NDRMMTEuMTExIDE1di0yLjk2MkgxNFY0eiIvPgogICAgPC9nPgo8L3N2Zz4K"},1362:function(t,e,n){function i(t){n(1363)}var s=n(9)(n(1364),n(1365),i,"data-v-2febaf4d",null);t.exports=s.exports},1363:function(t,e){},1364:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),s=n(223),o=n(45),r=n(976),a=n(31),c=n(989),l=n.n(c);e.default={components:{CollectPopup:l.a},props:["entry"],data:function(){return{likeLock:Object(s.a)(),wechatQrCodeUrl:"",isCollectPopupVisible:!1}},methods:{toggleLike:function(){var t=this;this.likeLock.do(function(){return t.$ensureAuthorized("login").then(function(){t.$store.dispatch(i.TOGGLE_LIKE_ENTRY,t.entry).catch(function(e){t.$error(e)})}).catch(function(){})})},onCollectBtnClick:function(){var t=this;this.$ensureAuthorized("login").then(function(){t.isCollectPopupVisible=!t.isCollectPopupVisible}).catch(function(){})},scrollToComment:function(){var t=document.getElementById("comment-box");window.location.hash="#comment",t&&window.setTimeout(function(){return Object(a.k)(t,-80)})},shareToWeibo:function(){this.$getBean("shareBusiness").shareEntryToWeibo(this.entry)},shareToQQ:function(){this.$getBean("shareBusiness").shareEntryToQQ(this.entry)},generateWechatQrCode:function(){this.wechatQrCodeUrl||(this.wechatQrCodeUrl=Object(r.a)(Object(o.b)("article-parse",{id:this.getId(),type:this.getType(),source:"article_sharefloater",campaign:"share_article"})))},getId:function(){return"post"===this.getType()?this.entry.originalUrl.slice(-24):this.entry.id},getType:function(){return"post"===this.entry.type?"post":"entry"}}}},1365:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-suspended-panel"},[n("div",{staticClass:"like-btn panel-btn like-adjust",class:{active:t.entry.liked,"with-badge":t.entry.collectionCount},attrs:{badge:t.entry.collectionCount},on:{click:t.toggleLike}}),n("div",{staticClass:"comment-btn panel-btn comment-adjust",class:{"with-badge":t.entry.commentsCount},attrs:{badge:t._f("truncate")(t.entry.commentsCount)},on:{click:t.scrollToComment}}),n("div",{staticClass:"collect-btn panel-btn",class:{active:t.entry.collected,open:t.isCollectPopupVisible},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.onCollectBtnClick(e)}}},[t.isCollectPopupVisible?n("collect-popup",{attrs:{entry:t.entry,position:"right"},on:{close:function(e){t.isCollectPopupVisible=!1}}}):t._e()],1),n("div",{staticClass:"share-title"},[t._v("分享")]),n("div",{staticClass:"weibo-btn share-btn panel-btn",on:{click:t.shareToWeibo}}),n("div",{staticClass:"qq-btn share-btn panel-btn",on:{click:t.shareToQQ}}),n("div",{staticClass:"wechat-btn share-btn panel-btn",on:{mouseenter:t.generateWechatQrCode}},[n("img",{directives:[{name:"show",rawName:"v-show",value:t.wechatQrCodeUrl,expression:"wechatQrCodeUrl"}],staticClass:"wechat-qr-code-img shadow",attrs:{src:t.wechatQrCodeUrl}})])])},staticRenderFns:[]}},1366:function(t,e,n){function i(t){n(1367)}var s=n(9)(n(1368),n(1369),i,"data-v-d4c2d1ba",null);t.exports=s.exports},1367:function(t,e){},1368:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(974),s=n.n(i),o=n(117),r=n(977);e.default={components:{Thumb:s.a},props:["category"],data:function(){return{disabledBookId:r.c,fetched:!1,recommendData:{category:"",data:[]}}},computed:{categoryTitle:function(){var t="你可能感兴趣的小册",e=o.a[this.recommendData.category];return t=e&&"阅读"!==e?e+"系列小册推荐":t}},watch:{category:function(t){var e=t;this.getBooks(e)}},methods:{toBookInfo:function(t){this.$router.push({name:"bookInfo",params:{id:t}})},tryRead:function(t){this.$router.push({name:"bookSection",params:{id:t}})},getBooks:function(t){var e=this;this.fetched||(this.fetched=!0,this.$getBean("xiaoceBusiness").getRecommendBooks({category:t}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data,i=t.category;e.recommendData={data:n.filter(function(t){return t._id!==r.c}),category:i}}))}},mounted:function(){this.category&&this.getBooks(this.category)},beforeDestroy:function(){}}},1369:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.recommendData.data.length?n("div",{staticClass:"books-recommend books-recommend-footer"},[n("div",{staticClass:"heading"},[t._v(t._s(t.categoryTitle))]),n("div",{staticClass:"book-list"},t._l(t.recommendData.data,function(e){return n("div",{staticClass:"book",on:{click:function(n){t.toBookInfo(e._id)}}},[n("div",{staticClass:"poster"},[n("thumb",{staticClass:"poster-img",attrs:{alt:"小册封面图",url:e.img,quality:95,width:200,height:280}})],1),n("div",{staticClass:"info"},[n("div",{staticClass:"title"},[t._v(t._s(e.title))]),n("div",{staticClass:"bought"},[n("span",{staticClass:"try-read",on:{click:function(n){n.stopPropagation(),n.preventDefault(),t.tryRead(e._id)}}},[t._v("试读")]),n("span",{staticClass:"txt"},[t._v(t._s(e.section.length)+"小节")]),n("span",{staticClass:"txt"},[t._v(t._s(e.buyCount)+"人已购买")])])])])}))]):t._e()},staticRenderFns:[]}},1370:function(t,e,n){function i(t){n(1371)}var s=n(9)(n(1372),n(1373),i,"data-v-39be193a",null);t.exports=s.exports},1371:function(t,e){},1372:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),s=n(990),o=(n.n(s),n(223));e.default={props:["entry"],data:function(){return{likeLock:Object(o.a)(),isSharePanelVisible:!1,isSharePanelOnTop:!1,wechatShareQrCode:""}},computed:{collectText:function(){return this.entry.collected?"已收藏":"收藏"}},methods:{togglePraise:function(){var t=this;this.likeLock.do(function(){return t.$ensureAuthorized("login").then(function(){return t.$store.dispatch(i.TOGGLE_LIKE_ENTRY,t.entry).catch(function(e){t.$error(e)})}).catch(function(){})})},linkToMobileCollection:function(){var t=this;this.$ensureAuthorized("login").then(function(){t.$router.push({path:"/mobile/collections/"+t.entry.id})})}}}},1373:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"action-box"},[n("div",{staticClass:"praise-action action",class:{active:t.entry.liked},on:{click:t.togglePraise}},[n("div",{staticClass:"action-title-box"},[t.entry.liked?[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23"}},[n("path",{attrs:{fill:"#6CBD45","fill-rule":"evenodd",stroke:"#6CBD45","stroke-linejoin":"round",d:"M5 8.692V21H3.372C2.616 21 2 20.131 2 19.064v-8.283c0-1.112.642-2.089 1.372-2.089H5zm6.705-6.027c.146-.99.962-1.683 1.856-1.665 1.278.025 2.039 1.11 2.303 1.647.482.98.495 2.595.165 3.632-.3.938-.993 2.171-.993 2.171h5.194c.549 0 1.058.275 1.399.752.345.487.458 1.12.302 1.695l-2.35 8.685c-.213.835-.922 1.418-1.72 1.418H7V8.864c2.346-.517 4.44-4.41 4.705-6.199z"}})])]:[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23"}},[n("path",{attrs:{fill:"none","fill-rule":"evenodd",stroke:"#8A93A0","stroke-linecap":"round","stroke-linejoin":"round",d:"M5 8.692V21H3.372C2.616 21 2 20.131 2 19.064v-8.283c0-1.112.642-2.089 1.372-2.089H5zm6.705-6.027c.146-.99.962-1.683 1.856-1.665 1.278.025 2.039 1.11 2.303 1.647.482.98.495 2.595.165 3.632-.3.938-.993 2.171-.993 2.171h5.194c.549 0 1.058.275 1.399.752.345.487.458 1.12.302 1.695l-2.35 8.685c-.213.835-.922 1.418-1.72 1.418H7V8.864c2.346-.517 4.44-4.41 4.705-6.199z"}})])],n("span",{staticClass:"action-title"},[t.entry.collectionCount?[t._v(t._s(t.entry.collectionCount))]:[t._v("赞")]],2)],2)]),n("div",{staticClass:"comment-action action",on:{click:function(e){t.$emit("comment")}}},[n("div",{staticClass:"action-title-box"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23"}},[n("path",{attrs:{fill:"none","fill-rule":"evenodd",stroke:"#8A93A0","stroke-linejoin":"round",d:"M11.5 18.37c-5.247 0-9.5-3.664-9.5-8.185C2 5.665 6.253 2 11.5 2S21 5.665 21 10.185c0 1.783-.662 3.433-1.785 4.778-.164.196.518 4.037.518 4.037l-4.136-1.428c-1.263.465-2.63.798-4.097.798z"}})]),t._v(" "),n("span",{staticClass:"action-title"},[t.entry.commentsCount?[t._v(t._s(t._f("limitNumber")(t.entry.commentsCount,999)))]:[t._v("评论")]],2)])]),n("div",{staticClass:"collect-action action",on:{click:t.linkToMobileCollection}},[n("div",{staticClass:"action-title-box"},[t.entry.collected?[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23"}},[n("path",{attrs:{fill:"#FFC347","fill-rule":"evenodd",stroke:"#FFC347",d:"M12.43 17.73c-.515-.286-1.347-.286-1.862 0L6.86 19.77c-1.029.565-1.702.05-1.507-1.148l.71-4.322c.098-.6-.159-1.43-.577-1.856l-2.998-3.06c-.833-.85-.572-1.682.576-1.856l4.143-.63c.575-.089 1.25-.602 1.507-1.148l1.853-3.933c.516-1.09 1.35-1.088 1.863 0l1.856 3.933c.256.546.93 1.06 1.507 1.148l4.144.63c1.15.174 1.406 1.009.575 1.856l-3 3.06c-.416.426-.674 1.256-.576 1.856l.709 4.322c.196 1.2-.481 1.713-1.507 1.148l-3.708-2.04z"}})])]:[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23"}},[n("path",{attrs:{fill:"none","fill-rule":"evenodd",stroke:"#8A93A0",d:"M12.43 17.73c-.515-.286-1.347-.286-1.862 0L6.86 19.77c-1.029.565-1.702.05-1.507-1.148l.71-4.322c.098-.6-.159-1.43-.577-1.856l-2.998-3.06c-.833-.85-.572-1.682.576-1.856l4.143-.63c.575-.089 1.25-.602 1.507-1.148l1.853-3.933c.516-1.09 1.35-1.088 1.863 0l1.856 3.933c.256.546.93 1.06 1.507 1.148l4.144.63c1.15.174 1.406 1.009.575 1.856l-3 3.06c-.416.426-.674 1.256-.576 1.856l.709 4.322c.196 1.2-.481 1.713-1.507 1.148l-3.708-2.04z"}})])],n("span",{staticClass:"action-title"},[t._v(t._s(t.collectText))])],2)])])},staticRenderFns:[]}},1840:function(t,e){},1841:function(t,e,n){"use strict";function i(t){var e=t.state.route,n=e.params.id;if(n){var i=Z(t),s=i.actionType.FETCH;return t.dispatch(s,n)}}function s(t){var e=t.state.route,n=e.params.id;if(n){var i=Z(t).commentList;return t.dispatch(i.actionType.FETCH,{entryId:n,page:1})}}function o(t){var e=Z(t),n=e.actionType.RESET;t.dispatch(n)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(95),a=n.n(r),c=n(1110),l=n.n(c),u=n(1194),d=n(19),m=n(31),h=(n(976),n(45)),f=n(223),p=(n(117),n(58)),v=n(10),g=n(1842),C=n.n(g),b=n(974),y=n.n(b),k=n(1043),A=n.n(k),I=n(1298),w=n.n(I),x=n(1356),E=n.n(x),M=n(1149),_=n.n(M),L=n(1159),T=n.n(L),S=n(1362),B=n.n(S),N=n(1077),D=n.n(N),O=n(1111),R=n.n(O),j=n(1102),U=n.n(j),z=n(1366),P=n.n(z),F=n(225),Q=n.n(F),V=n(1370),K=n.n(V),J=n(1119),G=n.n(J),Z=function(t){return t.state.view.entryPublic};e.default={components:{Thumb:y.a,WechatBanner:_.a,CommentList:R.a,CommentForm:D.a,AppDownloadSidebarBlock:A.a,WechatSidebarBlock:w.a,RelatedEntrySidebarBlock:E.a,RelatedEntry:C.a,MobileBottomBar:T.a,BooksRecommendAside:U.a,BooksRecommendFooter:P.a,ArticleSuspendedPanel:B.a,ImageViewer:Q.a,MobileArticleAction:K.a,CommentListBox:G.a},data:function(){return{sticky:!1,isMobile:!1,isViewNavOnTop:!1,likeLock:Object(f.a)()}},computed:a()({},Object(p.mapGetters)({user:v.USER}),{state:function(){return Z(this.$store)},banner:function(){return this.state.banner},entry:function(){return this.state.entry},categoryTitle:function(){return((this.entry||{}).category||{}).title},isFlutterTag:function(){return this.isTagFlutter()},categoryName:function(){return this.isFlutterTag?"flutter":((this.entry||{}).category||{}).name},categoryId:function(){return this.entry&&this.entry.category&&this.entry.category.id||""},entryCreateDate:function(){return this.entry&&Object(d.a)(new Date(this.entry.createdAt),"YYYY-MM-DD")},parsedContent:function(){var t=this.$getBean("articleBusiness"),e=this.entry.parsedContent||"";return t.processArticleHtml(e,{lazyload:!0})},parsed:function(){return!!this.entry.parsedContent},like:function(){return this.entry.liked},entryLikeCount:function(){return this.entry&&this.entry.collectionCount},domain:function(){return Object(h.a)(this.entry.originalUrl)},canFetchMore:function(){return this.state.commentList.canNext},canExtendCommentList:function(){return this.state.commentList.canNext&&!this.state.commentList.canPrev}}),watch:{$route:function(){this.fetch()}},metaInfo:function(){var t=Object(u.a)(this.entry),e=t.title,n=t.keywords,i=t.description;return{title:e&&e+" - "+this.categoryTitle,meta:[{vmid:"keywords",name:"keywords",content:n},{vmid:"description",name:"description",content:i}]}},shareInfo:function(){return{title:this.entry.title,description:this.entry.abstract||this.entry.content,thumb:this.entry.screenshot,url:this.$route.fullPath}},methods:{fetch:function(){return i(this.$store)},fetchCommentList:function(){return s(this.$store)},reset:function(){return this.lazyload&&this.lazyload.destroy(),o(this.$store)},onHeaderVisibilityChanged:function(t){this.isViewNavOnTop=!t},recordView:function(){this.$getBean("behaviorBusiness").recordViewEntryAction(this.entry.id)},shareToWeibo:function(){this.$getBean("shareBusiness").shareEntryToWeibo(this.entry)},toggleLike:function(){var t=this;this.likeLock.do(function(){return t.$ensureAuthorized().then(function(){return t.$store.dispatch(v.TOGGLE_LIKE_ENTRY,t.entry)}).catch(function(){})})},onBannerShow:function(){this.$getBean("gaBusiness").exec("send","event","entry-banner","show",this.banner.url)},onBannerClick:function(){this.$getBean("gaBusiness").exec("send","event","entry-banner","click",this.banner.url)},initLazyload:function(){var t=this;setTimeout(function(){var e=t.$refs.content.querySelectorAll("img.lazyload");t.lazyload=new l.a(e,{threshold:200,debounce:!0,eagerShowing:!0,infoGetter:function(t){var e=t.getAttribute("data-src");if(e)return{url:e,width:t.getAttribute("data-width"),height:t.getAttribute("data-height")}}})})},initImageViewer:function(){this.$refs.imageViewer.attachContainer(this.$refs.content)},autoFocusComment:function(){"#comment"===this.$route.hash&&(this.focusComment(),Object(m.j)(this.$refs.commentForm))},focusComment:function(){this.$refs.commentForm.focus()},onShouldFetchMoreComment:function(){this.$store.dispatch(this.state.commentList.actionType.FETCH_MORE)},onSubmittedComment:function(){this.refreshCommentList()},refreshCommentList:function(){var t=this.state.commentList.actionType.FORCE_FETCH,e=this.entry.id;this.$store.dispatch(t,{entryId:e})},initBanner:function(){var t=this;this.$store.dispatch(this.state.actionType.FETCH_BANNER).then(function(){t.banner&&t.onBannerShow()})},initLayout:function(){var t=this;this.removeScrollListener=Object(m.g)(window,function(){var e=t.$refs.relatedEntryList.$el,n=e&&e.previousElementSibling;if(n){var i=n.getBoundingClientRect();t.sticky=i.bottom<(t.isViewNavOnTop?0:60)}else t.sticky=!0})},isTagFlutter:function(){var t=this.entry.tags||[];return this.$getBean("tagBusiness").isContainedByTitle(t,"Flutter")}},preFetch:function(t){return i(t)},mounted:function(){var t=this;this.isMobile=document.body.clientWidth<960,this.entry.createdAt=this.entry.createdAt,this.fetch().then(function(){t.parsed&&(t.recordView(),t.initLazyload(),t.initImageViewer()),t.fetchCommentList(),t.$nextTick(function(){t.autoFocusComment()})}),this.initBanner(),this.initLayout()},beforeDestroy:function(){this.reset(),this.removeScrollListener()}}},1842:function(t,e,n){function i(t){n(1843)}var s=n(9)(n(1844),n(1845),i,"data-v-9db545a6",null);t.exports=s.exports},1843:function(t,e){},1844:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(974),s=n.n(i);e.default={components:{Thumb:s.a},props:["entry"]}},1845:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"related-entry",attrs:{"st:block":"relatedEntry"}},[n("app-link",{staticClass:"entry-link",attrs:{"st:name":"link",to:t.$entryDetailRoute(t.entry),blank:!0}},[n("thumb",{staticClass:"thumb",attrs:{url:this.entry.screenshot}}),n("div",{staticClass:"info"},[n("div",{staticClass:"row title-row"},[n("span",{staticClass:"title"},[t._v(t._s(t.entry.title))])]),n("div",{staticClass:"row meta-row"},[n("ul",{staticClass:"meta-list"},[n("li",{staticClass:"meta user"},[n("div",{staticClass:"username"},[t._v(t._s(t.entry.user.username))])]),t.entry.collectionCount?n("li",{staticClass:"meta like"},[n("div",{staticClass:"icon icon-likes iconfont icon-xlcollection"}),n("div",{staticClass:"count"},[t._v(t._s(t.entry.collectionCount))])]):t._e(),t.entry.commentsCount?n("li",{staticClass:"meta comment"},[n("div",{staticClass:"icon icon-comments iconfont icon-xlchatbox"}),n("div",{staticClass:"count"},[t._v(t._s(t.entry.commentsCount))])]):t._e()])])])],1)],1)},staticRenderFns:[]}},1846:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view-container",{on:{headerVisibilityChanged:t.onHeaderVisibilityChanged}},[n("div",{staticClass:"view entry-public-view"},[n("div",{staticClass:"entry-public-main shadow"},[t.entry.screenshot?n("thumb",{staticClass:"thumb thumb--header",attrs:{url:t.entry.screenshot,width:800,height:600}}):t._e(),t.entry.screenshot?n("div",{staticClass:"thumb-placeholder"}):t._e(),t.entry.originalUrl?n("structured-article",{staticClass:"entry-content-box",attrs:{entry:t.entry}},[n("h1",[t._v(t._s(t.entry.title))]),n("div",{staticClass:"entry-public-info"},[n("div",{staticClass:"text-muted info-item"},[t._v("阅读 "+t._s(t.entry.viewsCount))]),n("div",{staticClass:"text-muted info-item"},[t._v("收藏 "+t._s(t.entry.collectionCount))]),n("div",{staticClass:"text-muted info-item"},[t._v(t._s(t.entryCreateDate))])]),n("div",{staticClass:"originalUrl"},[t._v("原文链接："),n("a",{directives:[{name:"link",rawName:"v-link.external.redirect.blank",value:t.entry.originalUrl,expression:"entry.originalUrl",modifiers:{external:!0,redirect:!0,blank:!0}}],attrs:{"st:name":"originLink"}},[t._v(t._s(t.domain))])]),t.banner?n("a",{directives:[{name:"link",rawName:"v-link.blank.external",value:t.banner.url,expression:"banner.url",modifiers:{blank:!0,external:!0}}],staticClass:"banner",on:{click:t.onBannerClick}},[n("span",{staticClass:"text"},[t._v(t._s(t.banner.text))]),n("span",{staticClass:"link"},[t._v(t._s(t.banner.displayedLink))])]):t._e(),t.parsedContent?n("div",{ref:"content",staticClass:"entry-content article-content",attrs:{itemprop:"articleBody"},domProps:{innerHTML:t._s(t.parsedContent)}}):n("a",{directives:[{name:"link",rawName:"v-link.external.blank",value:t.entry.originalUrl,expression:"entry.originalUrl",modifiers:{external:!0,blank:!0}}],staticClass:"origin-link",attrs:{"st:name":"readBtn"},on:{click:t.recordView}},[t._v("查看文章")]),n("div",{staticClass:"footer"},[n("ul",{staticClass:"tag-list"},t._l(t.entry.tags,function(e){return n("li",{staticClass:"item"},[n("router-link",{attrs:{to:t.$tagRoute(e)}},[t._v(t._s(e.title))])],1)})),n("section",[n("wechat-banner",{staticClass:"wechat-banner",attrs:{category:t.categoryName}})],1),t.isMobile?n("section",{staticStyle:{margin:"1.3rem 0"}},[n("books-recommend-footer",{attrs:{category:t.categoryId}})],1):t._e(),t.state.relatedEntryList.length?n("div",{staticClass:"related-entry-list-box"},[n("div",{staticClass:"title"},[t._v("相关热门文章")]),n("ul",{staticClass:"related-entry-list"},t._l(t.state.relatedEntryList,function(t){return n("li",{staticClass:"item"},[n("related-entry",{staticClass:"related-entry",attrs:{entry:t}})],1)}))]):t._e()])]):t._e(),n("comment-list-box",{attrs:{id:"comment-box",list:t.state.commentList.list,loading:t.state.commentList.loading,manual:t.canExtendCommentList,canFetchMore:t.canFetchMore,entry:t.entry},on:{submitted:t.onSubmittedComment,"should-fetch-more":t.onShouldFetchMoreComment}},[t.isMobile?n("mobile-article-action",{attrs:{entry:t.entry}}):t._e()],1)],1),n("div",{ref:"aside",staticClass:"entry-public-aside",class:{sticky:t.sticky,top:t.isViewNavOnTop},attrs:{"st:block":"aside"}},[n("app-download-sidebar-block"),n("wechat-sidebar-block",{attrs:{category:t.categoryName}}),t.isMobile?t._e():n("books-recommend-aside",{attrs:{place:"entry",category:t.categoryId}}),t.state.relatedCollectionList.length?n("section",{staticClass:"section collection-section shadow"},[n("header",{staticClass:"aside-header"},[t._v("相关收藏集")]),n("ul",{staticClass:"aside-list"},t._l(t.state.relatedCollectionList,function(e){return n("li",{staticClass:"item"},[n("app-link",{staticClass:"link",attrs:{to:t.$collectionRoute(e),blank:!0}},[n("span",{staticClass:"title"},[t._v(t._s(e.title))]),n("span",{staticClass:"meta"},[t._v(t._s(e.entryCount)+" 篇文章")])])],1)}))]):t._e(),n("related-entry-sidebar-block",{ref:"relatedEntryList",staticClass:"sticky-section",attrs:{list:t.state.relatedEntryList}})],1)]),n("article-suspended-panel",{staticClass:"article-suspended-panel",attrs:{entry:t.entry}}),n("image-viewer",{ref:"imageViewer"}),n("mobile-bottom-bar",{attrs:{category:t.categoryTitle,resourceType:"entry",resourceId:t.entry.id}})],1)},staticRenderFns:[]}},937:function(t,e,n){function i(t){n(1840)}var s=n(9)(n(1841),n(1846),i,"data-v-41d33d72",null);t.exports=s.exports},974:function(t,e,n){function i(t){n(978)}var s=n(9)(n(979),n(980),i,"data-v-009ea7bb",null);t.exports=s.exports},975:function(t,e,n){function i(t){n(982)}var s=n(9)(n(983),n(986),i,"data-v-311d2efa",null);t.exports=s.exports},976:function(t,e,n){"use strict";function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#000000",n=new o.a({content:t,color:e,padding:0,width:410,height:410,background:"#ffffff",ecl:"L"}).svg();return"data:image/svg+xml;utf8,"+encodeURIComponent(n)}e.a=i;var s=n(224),o=n.n(s)},977:function(t,e,n){"use strict";function i(t,e){var n=isNaN(e)?1:e/10,i=s(t,n);return 0===i?0:i.toFixed(2)}function s(t,e){var n=0,i=t.toString(),s=e.toString();try{n+=i.split(".")[1].length}catch(t){}try{n+=s.split(".")[1].length}catch(t){}i=Number(i.replace(".","")),s=Number(s.replace(".",""));var o=i*s/Math.pow(10,n),r=e>0?.01:0;return Math.max(r,o)}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{free:0,charge:10},e=t.free,n=t.charge,i=e>0,s=n<10;return i?0:s?n:10}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[t.timeLimitDiscount,t.timeLimitDiscountFirstDay].some(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.startUTC,n=void 0===e?null:e,i=t.endUTC,s=void 0===i?null:i,o=(t.discountCount,+new Date),r=+new Date(n),a=+new Date(s);return o>r&&o<a})}function a(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=[{title:"早鸟价",type:"timeLimitDiscountFirstDay"},{title:"限时优惠价",type:"timeLimitDiscount"}],i=t.timeLimitDiscount,s=void 0===i?{}:i,o=t.timeLimitDiscountFirstDay,r=void 0===o?{}:o,a=[r,s].map(function(t,i){var s=t.startUTC,o=void 0===s?null:s,r=t.endUTC,a=void 0===r?null:r,c=t.discountCount,l=void 0===c?10:c,d=+new Date(o),m=+new Date(a),h=l;return u()({id:e},n[i],{startTime:d,endTime:m,sale:h})}),c={},l=0;l<2;l++){var d=+new Date,m=a[l],h=m.startTime,f=void 0===h?null:h,p=m.endTime,v=void 0===p?null:p,g=m.sale,C=void 0===g?10:g,b=C>=0&&C<10,y=d>f&&d<v;if(b&&y){c=a[l];break}}return c}function c(t,e){for(var n=[{className:"current",text:t,No:t}],i=1;i<=3;i++)t-i>1&&n.unshift({className:"",text:t-i,No:t-i}),t+i<e&&n.push({className:"",text:t+i,No:t+i});return t-4>1&&n.unshift({className:"omit",text:"...",No:null}),t>1&&n.unshift({className:"prev",text:"上一页",No:t-1},{className:"",text:"1",No:1}),t+4<e&&n.push({className:"omit",text:"...",No:null}),t<e&&n.push({className:"",text:e,No:e},{className:"next",text:"下一页",No:t+1}),n.length>1?n:[]}n.d(e,"c",function(){return d}),e.a=i,e.g=s,e.d=o,e.f=r,e.e=a,e.b=c;var l=n(3),u=n.n(l),d="5b30c3b351882574957a788f"},978:function(t,e){},979:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(96),s=n(158),o=n(39),r=n.n(o);e.default={components:{Lazy:r.a},props:["url","default","quality","width","height","shrink","format","size","alt","blank"],computed:{defaultThumbUrl:function(){return this.default||i.e},thumbUrl:function(){var t=this.url||(this.blank?"":this.defaultThumbUrl);return this.shrink?Object(s.b)(t,this.width,this.height,{format:this.format,quality:this.quality}):Object(s.a)(t,this.width,this.height,{format:this.format,quality:this.quality})},thumbStyle:function(){return{backgroundSize:this.size||"cover"}}}}},980:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("lazy",{staticClass:"thumb",style:t.thumbStyle,attrs:{div:!0,url:t.thumbUrl}})},staticRenderFns:[]}},981:function(t,e,n){function i(t){n(984)}var s=n(9)(null,n(985),i,"data-v-494d384d",null);t.exports=s.exports},982:function(t,e){},983:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(10),s=n(223),o=n(222),r=n.n(o),a=n(981),c=n.n(a);e.default={components:{Avatar:r.a,Triangle:c.a},props:["userId"],data:function(){return{user:null,followLock:Object(s.a)(),visible:!1,top:0,left:0,isTop:!1}},computed:{popoverStyle:function(){return{top:this.top+"px",left:this.left+"px"}},position:function(){return this.user&&(this.$userPosition(this.user)||this.user.self_description||"暂无简介")},self:function(){return this.user&&this.user.self},followed:function(){return this.user&&this.user.followed}},methods:{fetch:function(){var t=this;return this.$getBean("userBusiness").getUserById(this.userId).then(function(e){t.user=e})},toggleFollow:function(){var t=this;this.followLock.do(function(){return t.$ensureAuthorized().then(function(){return t.$store.dispatch(i.TOGGLE_FOLLOW_USER,t.user).catch(function(e){t.$error(e)})}).catch(function(){})})},showPopover:function(t){var e=this;clearTimeout(this.hideToken),this.showToken=setTimeout(function(){e.fetch().then(function(){e.showToken&&(e.visible=!0,e.$nextTick(function(){var n=t.target.getBoundingClientRect(),i=t.target.offsetWidth||33,s=t.target.offsetHeight||33,o=e.$refs.popover,r=o.offsetWidth,a=o.offsetHeight,c=n.left-r/2+i/2,l=n.top-a-12;e.isTop=!1,l<60&&(e.isTop=!0,l=n.top+s+8),c=Math.max(0,c),e.left=c,e.top=l}))})},300)},hidePopover:function(){var t=this;clearTimeout(this.showToken),this.showToken=null,this.hideToken=setTimeout(function(){t.popoverTimeout=null,t.visible=!1},300)}}}},984:function(t,e){},985:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"container"},[n("em",{staticClass:"triangle"})])}]}},986:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-popover-box",attrs:{"st:block":"userPopover","st:state":t.userId},on:{mouseenter:function(e){t.showPopover(e)},mouseleave:t.hidePopover}},[n("transition",{attrs:{name:"fade"}},[t.visible?n("div",{ref:"popover",staticClass:"user-popover",style:t.popoverStyle},[n("div",{staticClass:"info-row"},[n("app-link",{attrs:{to:t.$userRoute(t.user),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:t.user,decorative:!0}})],1),n("div",{staticClass:"user-info"},[n("app-link",{staticClass:"username",attrs:{to:t.$userRoute(t.user),blank:!0}},[t._v(t._s(t.user.username))]),n("div",{staticClass:"position"},[t._v(t._s(t.position))])],1)],1),n("div",{staticClass:"meta-row"},[n("ul",{staticClass:"meta-list"},[n("li",{staticClass:"item"},[n("div",{staticClass:"count"},[t._v(t._s(t.user.followeesCount||0))]),n("div",{staticClass:"title"},[t._v("关注")])]),n("li",{staticClass:"item"},[n("div",{staticClass:"count"},[t._v(t._s(t.user.followerCount||0))]),n("div",{staticClass:"title"},[t._v("关注者")])])]),t.self?t._e():n("button",{staticClass:"follow-btn",class:{followed:t.followed},attrs:{"st:name":"followBtn"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.toggleFollow(e)}}},[t._v(t._s(t.followed?"已关注":"关注"))])]),n("triangle",{staticClass:"triangle-bottom",class:{isTop:t.isTop}})],1):t._e()]),t._t("default")],2)},staticRenderFns:[]}},987:function(t,e,n){function i(t){n(1058)}var s=n(9)(n(1059),n(1060),i,"data-v-65d5b7df",null);t.exports=s.exports},988:function(t,e,n){function i(t){n(1046)}var s=n(9)(n(1047),n(1048),i,"data-v-70a2cd6d",null);t.exports=s.exports},989:function(t,e,n){function i(t){n(991)}var s=n(9)(n(992),n(994),i,"data-v-e4647de6",null);t.exports=s.exports},990:function(t,e){function n(t){if(navigator.clipboard)return navigator.clipboard.writeText(t);var e=document.createElement("span");e.textContent=t,e.style.whiteSpace="pre";var n=document.createElement("iframe");n.sandbox="allow-same-origin",document.body.appendChild(n);var i=n.contentWindow;i.document.body.appendChild(e);var s=i.getSelection();s||(i=window,s=i.getSelection(),document.body.appendChild(e));var o=i.document.createRange();s.removeAllRanges(),o.selectNode(e),s.addRange(o);var r=!1;try{r=i.document.execCommand("copy")}catch(t){}return s.removeAllRanges(),i.document.body.removeChild(e),document.body.removeChild(n),r?Promise.resolve():Promise.reject()}t.exports=n},991:function(t,e){},992:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(31),s=n(10),o=(n(993),n(223)),r=n(75),a=n(974),c=n.n(a);e.default={components:{Thumb:c.a},props:["entry","position"],data:function(){return{list:[],page:1,loading:!1,filled:!1,creating:!1,isNewFormVisible:!1,newCollectionTitle:"",collectLock:Object(o.a)()}},computed:{empty:function(){return!this.list.length&&!this.loading},canCreate:function(){return!!this.newCollectionTitle}},methods:{close:function(){this.$emit("close")},showNewForm:function(){var t=this;this.isNewFormVisible=!0,this.$nextTick(function(){t.$refs.titleInput.focus()})},init:function(){this.fetchList(),this.initEventListener()},initEventListener:function(){var t=this;Object(i.h)(this.$refs.list,function(e){e<50&&t.fetchList()})},fetchList:function(){var t=this;this.loading||this.filled||(this.loading=!0,this.$getBean("collectionRepository").getCurrentUserCollectionListForAddingEntry(this.entry.id,this.page).then(function(e){t.list=Object(r.c)(t.list.concat(e),function(t){return t.id}),t.page++,t.loading=!1,t.filled=0===e.length}).catch(function(e){t.loading=!1,t.$error(e)}))},createCollection:function(){var t=this;if(!this.creating){this.creating=!0;var e=this.newCollectionTitle.trim();if(e)return this.$getBean("collectionBusiness").createCollection({title:e}).then(function(e){return t.toggleCollect(e).then(function(){t.list.unshift(e),t.$refs.list.scrollTop=0,t.isNewFormVisible=!1,t.newCollectionTitle="",t.creating=!1})}).catch(function(e){t.$error(e),t.creating=!1})}},toggleCollect:function(t){return this.$store.dispatch(s.TOGGLE_COLLECT_ENTRY,{entry:this.entry,collection:t})},onCollectionClick:function(t){var e=this;this.collectLock.do(function(){return e.toggleCollect(t).then(function(){return setTimeout(function(){e.close()},300)})})}},mounted:function(){this.init()}}},993:function(t,e,n){"use strict";var i=n(5);n.n(i)},994:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"collect-popup-box",on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[i("div",{staticClass:"mask",on:{click:t.close}}),i("div",{ref:"popup",staticClass:"collect-popup",class:[t.position]},[i("div",{staticClass:"title"},[t._v("添加到收藏集")]),i("ul",{ref:"list",staticClass:"collection-list"},[t._l(t.list,function(e){return i("li",{staticClass:"item",on:{click:function(n){t.onCollectionClick(e)}}},[i("div",{staticClass:"item-block"},[i("thumb",{staticClass:"thumb",attrs:{url:e.imageUrl,width:50,height:50}}),i("div",{staticClass:"title"},[t._v(t._s(e.title))]),i("div",{staticClass:"entry-count"},[t._v(t._s(e.entryCount))])],1),i("div",{staticClass:"item-block"},[i("button",{staticClass:"collect-icon",class:{collected:e.isIn},style:{display:e.isIn?"block":""}})])])}),t.empty?i("div",{staticClass:"empty"},[i("img",{staticClass:"empty-icon",attrs:{src:n(995)}}),i("div",{staticClass:"empty-title"},[t._v("点击下方文字新建收藏集")])]):t._e()],2),i("div",{staticClass:"action-box"},[t.isNewFormVisible?i("form",{staticClass:"new-form",on:{submit:function(e){e.preventDefault(),t.createCollection(e)}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newCollectionTitle,expression:"newCollectionTitle"}],ref:"titleInput",staticClass:"title-input",attrs:{disabled:t.creating,maxlength:"20"},domProps:{value:t.newCollectionTitle},on:{input:function(e){e.target.composing||(t.newCollectionTitle=e.target.value)}}}),i("button",{staticClass:"submit-btn",attrs:{disabled:!t.canCreate||t.creating},on:{click:function(e){e.preventDefault(),t.createCollection(e)}}},[t._v("添加")])]):i("button",{staticClass:"new-btn",on:{click:t.showNewForm}},[t._v("新建收藏集")])])])])},staticRenderFns:[]}},995:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNzRweCIgaGVpZ2h0PSI0NnB4IiB2aWV3Qm94PSIwIDAgNzQgNDYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogc2tldGNodG9vbCA0MC4zICgzMzgzOSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+OEIzMDNERjgtNjU1OS00RjZCLTg1NzctNThEMzJGQTRCMzQ4PC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBza2V0Y2h0b29sLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSLkuKrkurrkuLvpobVf5pS26JeP6ZuGX+epuiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTY4My4wMDAwMDAsIC02NTkuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC01IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2ODMuMDAwMDAwLCA2NTkuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMzA2NDUxNiwxNS43MzY4NDIxIEwyLjg3NjYwNDY0LDE1LjczNjg0MjEgQzEuNDA0MjY1NTMsMTUuNzM2ODQyMSAwLjU5ODcwMTE2MywxNi44NTc5MzgxIDEuMDgxMDQwMDcsMTguMjUxNjEwNiBMMTAuMjY1NTgxNiw0NC43ODk0NzM3IEwxMy4zMDY0NTE2LDE1LjczNjg0MjEgWiIgaWQ9IlBhdGgtMiIgZmlsbD0iI0VGRjBGMCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTEyLjE0Mjg2Niw5LjkyMzQ5NjA2IEMxMi4zMTE0NjExLDcuNzIwOTc3NzUgMTQuMjQ1NTc2Niw1LjkzNTQ4Mzg3IDE2LjQ0MjM4NCw1LjkzNTQ4Mzg3IEw0Ny43MTYzMzU0LDUuOTM1NDgzODcgTDUxLjUwNDcwMTQsMS4wNDc0ODI0IEM1MS45NTMwNjUsMC40Njg5NzM4NDYgNTIuOTEyNDA5NiwwIDUzLjY1MDY5OTgsMCBMNzAuMTc0ODM2NywwIEM3Mi4zODE1NjU2LDAgNzMuOTkyOTU4MywxLjc3NTA2ODU4IDczLjc3MjI4MzksMy45ODE3MTY4NiBMNjkuOTY4NDYxOCw0Mi4wMTgyODMxIEM2OS43NDg1NDgxLDQ0LjIxNzMyNDYgNjcuNzg1MjY3MSw0NiA2NS41NzQ0OTU2LDQ2IEwxMy4zNzcxMTE2LDQ2IEMxMS4xNzAzMDQ4LDQ2IDkuNTE3MDY4MDgsNDQuMjI2NzgyMyA5LjY4NjYwMjk0LDQyLjAxMTk4NzggTDEyLjE0Mjg2Niw5LjkyMzQ5NjA2IFoiIGlkPSJSZWN0YW5nbGUiIGZpbGw9IiNDQ0NGRDAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},996:function(t,e,n){var i,s,o;/*!
	Autosize 3.0.20
	license: MIT
	http://www.jacklmoore.com/autosize
*/
!function(n,r){s=[e,t],i=r,void 0!==(o="function"==typeof i?i.apply(e,s):i)&&(t.exports=o)}(0,function(t,e){"use strict";function n(t){function e(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,t.style.overflowY=e}function n(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}function i(){var e=t.style.height,i=n(t),s=document.documentElement&&document.documentElement.scrollTop;t.style.height="auto";var o=t.scrollHeight+a;if(0===t.scrollHeight)return void(t.style.height=e);t.style.height=o+"px",c=t.clientWidth,i.forEach(function(t){t.node.scrollTop=t.scrollTop}),s&&(document.documentElement.scrollTop=s)}function s(){i();var n=Math.round(parseFloat(t.style.height)),s=window.getComputedStyle(t,null),o=Math.round(parseFloat(s.height));if(o!==n?"visible"!==s.overflowY&&(e("visible"),i(),o=Math.round(parseFloat(window.getComputedStyle(t,null).height))):"hidden"!==s.overflowY&&(e("hidden"),i(),o=Math.round(parseFloat(window.getComputedStyle(t,null).height))),l!==o){l=o;var a=r("autosize:resized");try{t.dispatchEvent(a)}catch(t){}}}if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!o.has(t)){var a=null,c=t.clientWidth,l=null,u=function(){t.clientWidth!==c&&s()},d=function(e){window.removeEventListener("resize",u,!1),t.removeEventListener("input",s,!1),t.removeEventListener("keyup",s,!1),t.removeEventListener("autosize:destroy",d,!1),t.removeEventListener("autosize:update",s,!1),Object.keys(e).forEach(function(n){t.style[n]=e[n]}),o.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",d,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",s,!1),window.addEventListener("resize",u,!1),t.addEventListener("input",s,!1),t.addEventListener("autosize:update",s,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",o.set(t,{destroy:d,update:s}),function(){var e=window.getComputedStyle(t,null);"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),a="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(a)&&(a=0),s()}()}}function i(t){var e=o.get(t);e&&e.destroy()}function s(t){var e=o.get(t);e&&e.update()}var o="function"==typeof Map?new Map:function(){var t=[],e=[];return{has:function(e){return t.indexOf(e)>-1},get:function(n){return e[t.indexOf(n)]},set:function(n,i){-1===t.indexOf(n)&&(t.push(n),e.push(i))},delete:function(n){var i=t.indexOf(n);i>-1&&(t.splice(i,1),e.splice(i,1))}}}(),r=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){r=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}var a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(a=function(t){return t},a.destroy=function(t){return t},a.update=function(t){return t}):(a=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return n(t)}),t},a.destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],i),t},a.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],s),t}),e.exports=a})},997:function(t,e,n){function i(t){n(1122)}var s=n(9)(n(1123),n(1124),i,"data-v-1cbbd4f0",null);t.exports=s.exports}});