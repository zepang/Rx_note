(function(a,b){'use strict';function c(a){return b.getElementById(a)}function d(a){return b.getElementsByTagName(a)}function e(a,b){a.prepend(b)}function f(a,b){a.appendChild(b)}function g(a,b){a.parentNode.insertBefore(b,a.nextSibling)}function h(a,b){a.classList.add("commento-"+b)}function i(a,b){null!==a&&a.classList.remove("commento-"+b)}function j(a){return b.createElement(a)}function k(a){null!==a&&a.parentNode.removeChild(a)}function l(b,c){var a=b.attributes[c];return void 0===a?void 0:a.value}function m(a){if(null!==a){var b=a.cloneNode(!0);if(null!==a.parentNode)return a.parentNode.replaceChild(b,a),b}return a}function n(a,b,c){a.addEventListener("click",function(){b(c)},!1)}function o(b,c,a){b.setAttribute(c,a)}function p(a,b,c){var d=new XMLHttpRequest;d.open("POST",a,!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.onload=function(){c(JSON.parse(d.response))},d.send(JSON.stringify(b))}function q(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.onload=function(){b(JSON.parse(c.response))},c.send(null)}function r(a){"function"==typeof a&&a()}function s(a){var d="; "+b.cookie,c=d.split("; "+a+"=");if(2===c.length)return c.pop().split(";").shift()}function t(a,c){var d="",e=new Date;e.setTime(e.getTime()+31536000000),d="; expires="+e.toUTCString(),b.cookie=a+"="+c+d+"; path=/"}function u(){var a=s("commentoCommenterToken");return void 0===a?"anonymous":a}function v(){window.open("https://commento.io/profile?commenterToken="+u(),"_blank")}function w(a){window.open("https://commento.io/unsubscribe?unsubscribeSecretHex="+a,"_blank")}function x(b,c){Sa[b.commenterHex]=b,db=b.commenterHex;var d,g=j("div"),i=j("div");d="undefined"===b.link?j("div"):j("a");var k,l=j("div"),m=j("div"),p=j("div"),q=N(b.commenterHex+"-"+b.name);g.id="commento-logged-container",h(g,"logged-container"),h(i,"logged-in-as"),h(d,"name"),h(l,"profile-button"),h(m,"profile-button"),h(p,"profile-button"),d.innerText=b.name,l.innerText="Notification Settings",m.innerText="Edit Profile",p.innerText="Logout",n(p,a.logout),console.log(b),n(l,w,c.unsubscribeSecretHex),n(m,v),o(g,"style","display: none"),"undefined"!==b.link&&o(d,"href",b.link),"undefined"===b.photo?(k=j("div"),k.style.background=q,k.innerHTML=b.name[0].toUpperCase(),h(k,"avatar")):(k=j("img"),k.alt="",o(k,"src","https://cdn.commento.io/api/commenter/photo?commenterHex="+b.commenterHex),h(k,"avatar-img")),f(i,k),f(i,d),f(g,i),f(g,p),"commento"===b.provider&&f(g,m),f(g,l),e(Na,g),Pa=!0}function y(b){var c=u();if("anonymous"===c)return Pa=!1,void r(b);var d={commenterToken:u()};p("https://commento.io/api/commenter/self",d,function(c){return c.success?void(x(c.commenter,c.email),a.allShow(),r(b)):(t("commentoCommenterToken","anonymous"),void r(b))})}function z(a,c){var d=j("link"),e=b.getElementsByTagName("head")[0];d.type="text/css",o(d,"href",a),o(d,"rel","stylesheet"),o(d,"onload",c),f(e,d)}function A(){var b=j("div"),c=j("div"),d=j("a"),a=j("span");return b.id="commento-footer",h(b,"footer"),h(c,"logo-container"),h(d,"logo"),h(a,"logo-text"),o(d,"href","https://commento.io"),o(d,"target","_blank"),o(d,"rel","noopener"),a.innerText="Commento",f(d,a),f(c,d),f(b,c),b}function B(a){var b={commenterToken:u(),domain:ka,path:Oa};p("https://commento.io/api/comment/list",b,function(b){if(!b.success)return void C(b.message);D();Ta=b.requireIdentification,Ua=b.isModerator,Va=b.isFrozen,Xa=b.attributes.isLocked,Ya=b.attributes.stickyCommentHex,Qa=b.comments,Sa=Object.assign({},Sa,b.commenters),_a=b.configuredOauths,cb=b.defaultSortPolicy,r(a)})}function C(a){var b=c("commento-error");b.innerText=a,o(b,"style","display: block;")}function D(){var a=c("commento-error");o(a,"style","display: none;")}function E(){var a=j("div");a.id="commento-error",h(a,"error-box"),o(a,"style","display: none;"),f(Na,a)}function F(a){return function(){a.style.height="",a.style.height=Math.min(Math.max(a.scrollHeight,75),400)+"px"}}function G(a){var b=c("commento-textarea-super-container-"+a),d=c("commento-markdown-button-"+a),e=j("table"),g=j("tr"),i=j("td"),k=j("td"),l=j("tr"),o=j("td"),p=j("td"),q=j("tr"),r=j("td"),s=j("td"),t=j("tr"),u=j("td"),v=j("td"),w=j("tr"),x=j("td"),y=j("td"),z=j("tr"),A=j("td"),B=j("td");e.id="commento-markdown-help-"+a,h(e,"markdown-help"),o.innerHTML="<b>bold</b>",p.innerHTML="surround text with <pre>**two asterisks**</pre>",i.innerHTML="<i>italics</i>",k.innerHTML="surround text with <pre>*asterisks*</pre>",r.innerHTML="<pre>code</pre>",s.innerHTML="surround text with <pre>`backticks`</pre>",u.innerHTML="<strike>strikethrough</strike>",v.innerHTML="surround text with <pre>~~two tilde characters~~</pre>",x.innerHTML="<a href=\"https://example.com\">hyperlink</a>",y.innerHTML="<pre>[hyperlink](https://example.com)</pre> or just a bare URL",A.innerHTML="<blockquote>quote</blockquote>",B.innerHTML="prefix with <pre>&gt;</pre>",d=m(d),n(d,H,a),f(g,i),f(g,k),f(e,g),f(l,o),f(l,p),f(e,l),f(w,x),f(w,y),f(e,w),f(q,r),f(q,s),f(e,q),f(t,u),f(t,v),f(e,t),f(z,A),f(z,B),f(e,z),f(b,e)}function H(a){var b=c("commento-markdown-button-"+a),d=c("commento-markdown-help-"+a);b=m(b),n(b,G,a),k(d)}function I(a,b){var c=j("div"),d=j("div"),e=j("textarea"),g=j("div"),i=j("input"),k=j("label"),l=j("button"),m=j("a");return c.id="commento-textarea-super-container-"+a,d.id="commento-textarea-container-"+a,e.id="commento-textarea-"+a,i.id="commento-anonymous-checkbox-"+a,l.id="commento-submit-button-"+a,m.id="commento-markdown-button-"+a,h(d,"textarea-container"),h(g,"round-check"),h(g,"anonymous-checkbox-container"),h(l,"button"),h(l,"submit-button"),h(m,"markdown-button"),h(c,"button-margin"),o(e,"placeholder","Add a comment"),o(i,"type","checkbox"),o(k,"for","commento-anonymous-checkbox-"+a),k.innerText="Comment anonymously",l.innerText=!0===b?"Save Changes":"Add Comment",m.innerHTML="<b>M &#8595;</b> &nbsp; Markdown",e.oninput=F(e),!0===b?n(l,T,a):n(l,Y,a),n(m,G,a),f(d,e),f(c,d),f(g,i),f(g,k),f(c,l),Ta||!0===b||f(c,g),f(c,m),c}function J(a){i(c("commento-sort-policy-"+cb),"sort-policy-button-selected");var b=c("commento-comments-area");b.innerHTML="",cb=a;var d=Q(U(Qa),"root");d&&f(b,d),h(c("commento-sort-policy-"+a),"sort-policy-button-selected")}function K(){var a=j("div"),b=j("div");for(var c in h(a,"sort-policy-buttons-container"),h(b,"sort-policy-buttons"),fb){var d=j("a");d.id="commento-sort-policy-"+c,h(d,"sort-policy-button"),c===cb&&h(d,"sort-policy-button-selected"),d.innerText=fb[c],n(d,J,c),f(b,d)}return f(a,b),a}function L(b){var d=j("div"),e=j("div"),g=c("commento-main-area"),i=j("div"),l=j("div");d.id="commento-login",i.id="commento-pre-comments-area",l.id="commento-comments-area",h(d,"login"),h(e,"login-text"),h(l,"comments"),e.innerText="Login",l.innerHTML="",n(e,a.loginBoxShow,null),f(d,e),Xa||Va?Pa||Wa?(f(g,M("This thread is locked. You cannot add new comments.")),k(c("commento-login"))):(f(g,d),f(g,I("root"))):(Pa?k(c("commento-login")):f(g,d),f(g,I("root"))),0<Qa.length&&f(g,K()),f(g,i),f(g,l),f(Na,g),r(b)}function M(a){var b=j("div");return h(b,"moderation-notice"),b.innerText=a,b}function N(a){for(var b=["#396ab1","#da7c30","#3e9651","#cc2529","#922428","#6b4c9a","#535154"],c=0,d=0;d<a.length;d++)c+=a.charCodeAt(d);var e=b[c%b.length];return e}function O(a,b){var c=60000,d=60*c,e=24*d,f=30*e,g=12*f,h=a-b;return h<5000?"just now":h<2*c?Math.round(h/1000)+" seconds ago":h<2*d?Math.round(h/c)+" minutes ago":h<2*e?Math.round(h/d)+" hours ago":h<2*f?Math.round(h/e)+" days ago":h<2*g?Math.round(h/f)+" months ago":Math.round(h/g)+" years ago"}function P(a){return 1===a?a+" point":a+" points"}function Q(b,c){var d=b[c];if(!d||!d.length)return null;d.sort(function(c,a){return c.deleted||c.commentHex!==Ya?a.deleted||a.commentHex!==Ya?gb[cb](c,a):1/0:-Infinity});var e=new Date().getTime(),g=j("div");return d.forEach(function(d){var k,l,m=Sa[d.commenterHex],p=j("div"),q=j("div"),r=j("div"),s=j("div"),t=j("div"),u=j("div"),v=j("div"),w=j("div"),x=j("button"),y=j("button"),z=j("button"),A=j("button"),B=j("button"),C=j("button"),D=j("button"),E=j("button"),F=Q(b,d.commentHex),G=j("div"),H=N(d.commenterHex+"-"+m.name);if(l="undefined"!==m.link&&"https://undefined"!==m.link&&""!==m.link?j("a"):j("div"),p.id="commento-comment-card-"+d.commentHex,u.id="commento-comment-body-"+d.commentHex,v.id="commento-comment-text-"+d.commentHex,r.id="commento-comment-subtitle-"+d.commentHex,s.id="commento-comment-timeago-"+d.commentHex,t.id="commento-comment-score-"+d.commentHex,w.id="commento-comment-options-"+d.commentHex,x.id="commento-comment-edit-"+d.commentHex,y.id="commento-comment-reply-"+d.commentHex,z.id="commento-comment-collapse-"+d.commentHex,A.id="commento-comment-upvote-"+d.commentHex,B.id="commento-comment-downvote-"+d.commentHex,C.id="commento-comment-approve-"+d.commentHex,D.id="commento-comment-remove-"+d.commentHex,E.id="commento-comment-sticky-"+d.commentHex,F&&(F.id="commento-comment-children-"+d.commentHex),G.id="commento-comment-contents-"+d.commentHex,l.id="commento-comment-name-"+d.commentHex,z.title="Collapse children",A.title="Upvote",B.title="Downvote",x.title="Edit",y.title="Reply",C.title="Approve",D.title="Remove",E.title=Ya===d.commentHex?Ua?"Unsticky":"This comment has been stickied":"Sticky",s.title=d.creationDate.toString(),p.style.borderLeft="2px solid "+H,l.innerText=d.deleted?"[deleted]":m.name,v.innerHTML=d.html,s.innerHTML=O(e,d.creationDate),t.innerText=P(d.score),"undefined"===m.photo?(k=j("div"),k.style.background=H,"anonymous"===d.commenterHex?(k.innerHTML="?",k.style["font-weight"]="bold",h(k,"avatar")):(k=j("img"),k.setAttribute("data-src",`https://download.remysharp.com/comments/avatars/${m.name}.jpg`),k.src="/images/no-user.svg",k.onerror=()=>{var a=j("div");a.style.background=H,a.innerHTML=m.name[0].toUpperCase(),h(a,"avatar"),k.parentNode.replaceChild(a,k)},h(k,"avatar-img"))):(k=j("img"),o(k,"src","https://cdn.commento.io/api/commenter/photo?commenterHex="+m.commenterHex),h(k,"avatar-img")),h(p,"card"),Ua&&"approved"!==d.state&&h(p,"dark-card"),m.isModerator&&h(l,"moderator"),"flagged"===d.state&&h(l,"flagged"),h(q,"header"),h(l,"name"),h(r,"subtitle"),h(s,"timeago"),h(t,"score"),h(u,"body"),h(w,"options"),eb&&h(w,"options-mobile"),h(x,"option-button"),h(x,"option-edit"),h(y,"option-button"),h(y,"option-reply"),h(z,"option-button"),h(z,"option-collapse"),h(A,"option-button"),h(A,"option-upvote"),h(B,"option-button"),h(B,"option-downvote"),h(C,"option-button"),h(C,"option-approve"),h(D,"option-button"),h(D,"option-remove"),h(E,"option-button"),Ya===d.commentHex?h(E,"option-unsticky"):h(E,"option-sticky"),Pa&&(0<d.direction?h(A,"upvoted"):0>d.direction&&h(B,"downvoted")),n(x,a.editShow,d.commentHex),n(z,a.commentCollapse,d.commentHex),n(C,a.commentApprove,d.commentHex),n(D,a.commentDelete,d.commentHex),n(E,a.commentSticky,d.commentHex),Pa){var I=S(A,B,d.commentHex,d.direction);A=I[0],B=I[1]}else n(A,a.loginBoxShow,null),n(B,a.loginBoxShow,null);n(y,a.replyShow,d.commentHex),"undefined"!==m.link&&"https://undefined"!==m.link&&""!==m.link&&o(l,"href",m.link),f(w,z),d.deleted||(f(w,B),f(w,A)),d.commenterHex===db?f(w,x):!d.deleted&&f(w,y),!d.deleted&&Ua&&"root"===c&&f(w,E),!d.deleted&&(Ua||d.commenterHex===db)&&f(w,D),Ua&&"approved"!==d.state&&f(w,C),d.deleted||Ua||Ya!==d.commentHex||f(w,E),o(w,"style","width: "+32*(w.childNodes.length+1)+"px;");for(var J=0;J<w.childNodes.length;J++)o(w.childNodes[J],"style","right: "+32*J+"px;");if(f(r,t),f(r,s),eb||f(q,w),f(q,k),f(q,l),f(q,r),f(u,v),f(G,u),eb){f(G,w);var K=j("div");h(K,"options-clearfix"),f(G,K)}F&&(h(F,"body"),f(G,F)),f(p,q),f(p,G),d.deleted&&("true"===ia||null===F)||f(g,p)}),0===g.childNodes.length?null:g}function R(){for(var a=b.getElementsByClassName("commento-name"),c=0;c<a.length;c++)o(a[c],"style","max-width: "+(a[c].getBoundingClientRect().width+20)+"px;")}function S(b,c,d,e){return b=m(b),c=m(c),0<e?(n(b,a.vote,[d,[1,0]]),n(c,a.vote,[d,[1,-1]])):0>e?(n(b,a.vote,[d,[-1,1]]),n(c,a.vote,[d,[-1,0]])):(n(b,a.vote,[d,[0,1]]),n(c,a.vote,[d,[0,-1]])),[b,c]}function T(b){var d=c("commento-textarea-"+b),f=d.value;if(""===f)return void h(d,"red-border");i(d,"red-border");var g={commenterToken:u(),commentHex:b,markdown:f};p("https://commento.io/api/comment/edit",g,function(d){if(!d.success)return void C(d.message);D();Ra[b].markdown=f,Ra[b].html=d.html;var g=c("commento-comment-edit-"+b),j=c("commento-textarea-super-container-"+b);j.innerHTML=Ra[b].html,j.id="commento-comment-text-"+b,delete $a[b],h(g,"option-edit"),i(g,"option-cancel"),g.title="Edit comment",g=m(g),n(g,a.editShow,b);var k="";"unapproved"===d.state?k="Your comment is under moderation.":"flagged"===d.state&&(k="Your comment was flagged as spam and is under moderation."),""!=k&&e(c("commento-textarea-super-container-"+b),M(k))})}function U(a){var b={};return a.forEach(function(a){var c=a.parentHex;c in b||(b[c]=[]),a.creationDate=new Date(a.creationDate),b[c].push(a),Ra[a.commentHex]={html:a.html,markdown:a.markdown}}),b}function V(){var a=c("commento-comments-area");a.innerHTML="";var b=Q(U(Qa),"root");b&&f(a,b)}function W(b){return Pa?void a.commentNew(b,u()):void a.loginBoxShow(b)}function X(b){Wa=!0,a.commentNew(b,"anonymous")}function Y(a){if(Ta)return void W(a);var b=c("commento-anonymous-checkbox-"+a),d=c("commento-textarea-"+a),e=d.value;return""===e?void h(d,"red-border"):(i(d,"red-border"),b.checked?void X(a):void W(a))}function Z(b){c(la).innerHTML="",Za={},a.main(b)}function $(){var a=j("div");a.id="commento-login-box-container",f(Na,a)}function _(b,d,e){p("https://commento.io/api/commenter/login",{email:b,password:d},function(b){if(!b.success)return a.loginBoxClose(),void C(b.message);D();t("commentoCommenterToken",b.commenterToken),x(b.commenter,b.email),a.allShow(),k(c("commento-login")),null===e?(a.loginBoxClose(),B(V)):a.commentNew(e,b.commenterToken,function(){a.loginBoxClose(),B(V)})})}function aa(a){var b={isLocked:Xa,stickyCommentHex:Ya},c={commenterToken:u(),domain:ka,path:Oa,attributes:b};p("https://commento.io/api/page/update",c,function(b){if(!b.success)return void C(b.message);D();r(a)})}function ba(){var a=j("div");a.id="commento-main-area",h(a,"main-area"),o(a,"style","display: none"),f(Na,a)}function ca(){var b=j("div"),c=j("button");b.id="commento-mod-tools",c.id="commento-mod-tools-lock-button",h(b,"mod-tools"),c.innerHTML=Xa?"Unlock Thread":"Lock Thread",n(c,a.threadLockToggle),o(b,"style","display: none"),f(b,c),f(Na,b)}function da(){for(var a=d("script"),b=0;b<a.length;b++)if(a[b].src.match(/\/js\/commento\.js$/)){var c=l(a[b],"data-page-id");c!==void 0&&(Oa=c),ga=l(a[b],"data-css-override"),ja=l(a[b],"data-auto-init"),la=l(a[b],"data-id-root"),la===void 0&&(la="commento"),ha=l(a[b],"data-no-fonts"),ka=l(a[b],"data-domain")||parent.location.host,ia=l(a[b],"data-hide-deleted")}}function ea(){if(window.location.hash)if(window.location.hash.startsWith("#commento-")){var a=c("commento-comment-card-"+window.location.hash.split("-")[1]);if(null===a)return;h(a,"highlighted-card"),a.scrollIntoView(!0)}else window.location.hash.startsWith("#commento")&&Na.scrollIntoView(!0)}function fa(){hb||(hb=!0,da(),"true"===ja||ja===void 0?a.main(void 0):"false"!==ja&&console.log("[commento] error: invalid value for data-auto-init; allowed values: true, false"))}var ga,ha,ia,ja,ka=parent.location.host,la="commento",ma="commento-main-area",na="commento-login-box-container",oa="commento-login-box",pa="commento-login-box-email-subtitle",qa="commento-login-box-email-input",ra="commento-login-box-password-input",sa="commento-login-box-name-input",ta="commento-login-box-website-input",ua="commento-login-box-email-button",va="commento-login-box-forgot-link-container",wa="commento-login-box-login-link-container",xa="commento-login-box-sso-pretext",ya="commento-login-box-sso-buttton-container",za="commento-login-box-hr1",Aa="commento-login-box-oauth-pretext",Ba="commento-login-box-oauth-buttons-container",Ca="commento-login-box-hr2",Da="commento-logged-container",Ea="commento-textarea-super-container-",Fa="commento-textarea-",Ga="commento-comment-text-",Ha="commento-comment-edit-",Ia="commento-comment-reply-",Ja="commento-comment-collapse-",Ka="commento-comment-sticky-",La="commento-comment-children-",Ma="https://commento.io",Na=null,Oa=parent.location.pathname,Pa=!1,Qa=[],Ra={},Sa={},Ta=!0,Ua=!1,Va=!1,Wa=!1,Xa=!1,Ya="none",Za={},$a={},_a={},ab="login",bb=!1,cb="score-desc",db=void 0,eb=null;a.logout=function(){t("commentoCommenterToken","anonymous"),Pa=!1,Ua=!1,db=void 0,Z()};var fb={"score-desc":"Upvotes","creationdate-desc":"Newest","creationdate-asc":"Oldest"};a.commentNew=function(b,d,f){var j=c(Ea+b),k=c(Fa+b),l=c(Ia+b),m=k.value;if(""===m)return void h(k,"red-border");i(k,"red-border");var o={commenterToken:d,domain:ka,path:Oa,parentHex:b,markdown:m};p(Ma+"/api/comment/new",o,function(o){if(!o.success)return void C(o.message);D();var p="";"unapproved"===o.state?p="Your comment is under moderation.":"flagged"===o.state&&(p="Your comment was flagged as spam and is under moderation."),""!=p&&e(c(Ea+b),M(p));var q=db;(q===void 0||"anonymous"===d)&&(q="anonymous");var s={commentHex:o.commentHex,commenterHex:q,markdown:m,html:o.html,parentHex:"root",score:0,state:"approved",direction:0,creationDate:new Date},t=Q({root:[s]},"root");Ra[o.commentHex]=s,"root"===b?(k.value="",g(c("commento-pre-comments-area"),t)):(j.replaceWith(t),Za[b]=!1,h(l,"option-reply"),i(l,"option-cancel"),l.title="Reply to this comment",n(l,a.replyShow,b)),r(f)})};var gb={"score-desc":function(c,a){return a.score-c.score},"creationdate-desc":function(c,a){return c.creationDate<a.creationDate?1:-1},"creationdate-asc":function(c,a){return c.creationDate<a.creationDate?-1:1}};a.commentApprove=function(a){var b={commenterToken:u(),commentHex:a};p(Ma+"/api/comment/approve",b,function(b){if(!b.success)return void C(b.message);D();var d=c("commento-comment-card-"+a),e=c("commento-comment-name-"+a),f=c("commento-comment-approve-"+a);i(d,"dark-card"),i(e,"flagged"),k(f)})},a.commentDelete=function(a){if(confirm("Are you sure you want to delete this comment?")){var b={commenterToken:u(),commentHex:a};p(Ma+"/api/comment/delete",b,function(b){if(!b.success)return void C(b.message);D();var d=c(Ga+a);d.innerText="[deleted]"})}},a.vote=function(a){var b=a[0],d=a[1][0],e=a[1][1],f=c("commento-comment-upvote-"+b),g=c("commento-comment-downvote-"+b),j=c("commento-comment-score-"+b),k={commenterToken:u(),commentHex:b,direction:e},l=S(f,g,b,e);f=l[0],g=l[1],i(f,"upvoted"),i(g,"downvoted"),0<e?h(f,"upvoted"):0>e&&h(g,"downvoted"),j.innerText=P(parseInt(j.innerText.replace(/[^\d-.]/g,""))+e-d),p(Ma+"/api/comment/vote",k,function(a){return a.success?void D():(C(a.message),i(f,"upvoted"),i(g,"downvoted"),j.innerText=P(parseInt(j.innerText.replace(/[^\d-.]/g,""))-e+d),void S(f,g,b,d))})},a.editShow=function(b){if(!(b in $a&&$a[b])){var d=c(Ga+b);$a[b]=!0,d.replaceWith(I(b,!0));var e=c(Fa+b);e.value=Ra[b].markdown;var f=c(Ha+b);i(f,"option-edit"),h(f,"option-cancel"),f.title="Cancel edit",f=m(f),n(f,a.editCollapse,b)}},a.editCollapse=function(b){var d=c(Ha+b),e=c(Ea+b);e.innerHTML=Ra[b].html,e.id=Ga+b,delete $a[b],h(d,"option-edit"),i(d,"option-cancel"),d.title="Edit comment",d=m(d),n(d,a.editShow,b)},a.replyShow=function(b){if(!(b in Za&&Za[b])){var d=c(Ga+b);g(d,I(b)),Za[b]=!0;var e=c(Ia+b);i(e,"option-reply"),h(e,"option-cancel"),e.title="Cancel reply",e=m(e),n(e,a.replyCollapse,b)}},a.replyCollapse=function(b){var d=c(Ia+b),e=c(Ea+b);e.remove(),delete Za[b],h(d,"option-reply"),i(d,"option-cancel"),d.title="Reply to this comment",d=m(d),n(d,a.replyShow,b)},a.commentCollapse=function(b){var d=c(La+b),e=c(Ja+b);d&&h(d,"hidden"),i(e,"option-collapse"),h(e,"option-uncollapse"),e.title="Expand children",e=m(e),n(e,a.commentUncollapse,b)},a.commentUncollapse=function(b){var d=c(La+b),e=c(Ja+b);d&&i(d,"hidden"),i(e,"option-uncollapse"),h(e,"option-collapse"),e.title="Collapse children",e=m(e),n(e,a.commentCollapse,b)},a.commentoAuth=function(b){var d=b.provider,e=b.id,f=window.open("","_blank");q(Ma+"/api/commenter/token/new",function(b){if(!b.success)return void C(b.message);D();t("commentoCommenterToken",b.commenterToken),f.location=Ma+"/api/oauth/"+d+"/redirect?commenterToken="+b.commenterToken;var g=setInterval(function(){f.closed&&(clearInterval(g),y(function(){var d=c(Da);d&&o(d,"style",""),"anonymous"!==u()&&k(c("commento-login")),null===e?(a.loginBoxClose(),B(V)):a.commentNew(e,b.commenterToken,function(){a.loginBoxClose(),B(V)})}))},250)})},a.popupRender=function(b){var d=c(na),e=j("div"),g=j("div"),i=j("div"),k=j("div"),l=j("hr"),m=j("div"),p=j("div"),q=j("div"),r=j("hr"),s=j("div"),t=j("div"),u=j("div"),v=j("input"),w=j("button"),x=j("div"),y=j("a"),z=j("div"),A=j("a"),B=j("div");e.id=oa,s.id=pa,v.id=qa,w.id=ua,x.id=va,z.id=wa,i.id=ya,g.id=xa,l.id=za,m.id=Aa,p.id=Ba,r.id=Ca,h(d,"login-box-container"),h(e,"login-box"),h(s,"login-box-subtitle"),h(t,"email-container"),h(u,"email"),h(v,"input"),h(w,"email-button"),h(x,"forgot-link-container"),h(y,"forgot-link"),h(z,"login-link-container"),h(A,"login-link"),h(g,"login-box-subtitle"),h(i,"oauth-buttons-container"),h(k,"oauth-buttons"),h(m,"login-box-subtitle"),h(p,"oauth-buttons-container"),h(q,"oauth-buttons"),h(B,"login-box-close"),h(Na,"root-min-height"),y.innerText="Forgot your password?",A.innerText="Don't have an account? Sign up.",s.innerText="Login with your email address",w.innerText="Continue",m.innerText="Proceed with social login",g.innerText="Proceed with "+parent.location.host+" authentication",n(w,a.passwordAsk,b),n(y,a.forgotPassword,b),n(A,a.popupSwitch,b),n(B,a.loginBoxClose),o(d,"style","display: none; opacity: 0;"),o(v,"name","email"),o(v,"placeholder","Email address"),o(v,"type","text");var C=0;if(["google","twitter","github","gitlab"].forEach(function(c){if(_a[c]){var d=j("button");h(d,"button"),h(d,c+"-button"),d.innerText=c,n(d,a.commentoAuth,{provider:c,id:b}),f(q,d),C++}}),_a.sso){var D=j("button");h(D,"button"),h(D,"sso-button"),D.innerText="Single Sign-On",n(D,a.commentoAuth,{provider:"sso",id:b}),f(k,D),f(i,k),f(e,g),f(e,i),(0<C||_a.commento)&&f(e,l)}0<C?(f(e,m),f(p,q),f(e,p),bb=!0):bb=!1,f(u,v),f(u,w),f(t,u),f(x,y),f(z,A),0<C&&_a.commento&&f(e,r),_a.commento&&(f(e,s),f(e,t),f(e,x),f(e,z)),f(e,B),ab="login",d.innerHTML="",f(d,e)},a.forgotPassword=function(){var b=window.open("","_blank");b.location=Ma+"/forgot?commenter=true",a.loginBoxClose()},a.popupSwitch=function(b){var d=c(pa);bb&&(k(c(Ba)),k(c(Aa)),k(c(za)),k(c(Ca))),_a.sso&&(k(c(ya)),k(c(xa)),k(c(za)),k(c(Ca))),k(c(wa)),k(c(va)),d.innerText="Create an account",ab="signup",a.passwordAsk(b),c(qa).focus()},a.login=function(a){var b=c(qa),d=c(ra);_(b.value,d.value,a)},a.signup=function(b){var d=c(qa),e=c(sa),f=c(ta),g=c(ra),h={email:d.value,name:e.value,website:f.value,password:g.value};p(Ma+"/api/commenter/new",h,function(c){if(!c.success)return a.loginBoxClose(),void C(c.message);D();_(d.value,g.value,b)})},a.passwordAsk=function(b){var d=c(oa),e=c(pa);k(c(ua)),k(c(wa)),k(c(va)),bb&&0<_a.length&&(k(c(za)),k(c(Ca)),k(c(Aa)),k(c(Ba)));var g,l,m,p;"signup"===ab?(g=["name","website","password"],l=[sa,ta,ra],m=["text","text","password"],p=["Real Name","Website (Optional)","Password"]):(g=["password"],l=[ra],m=["password"],p=["Password"]),e.innerText="signup"===ab?"Finish the rest of your profile to complete.":"Enter your password to log in.";for(var q=0;q<g.length;q++){var r=j("div"),s=j("div"),t=j("input");if(t.id=l[q],h(r,"email-container"),h(s,"email"),h(t,"input"),o(t,"name",g[q]),o(t,"type",m[q]),o(t,"placeholder",p[q]),f(s,t),f(r,s),"password"===g[q]){var u=j("button");h(u,"email-button"),u.innerText=ab,"signup"===ab?n(u,a.signup,b):n(u,a.login,b),f(s,u)}f(d,r)}"signup"===ab?c(sa).focus():c(ra).focus()},a.threadLockToggle=function(){var a=c("commento-mod-tools-lock-button");Xa=!Xa,a.disabled=!0,aa(function(){a.disabled=!1,Z()})},a.commentSticky=function(a){if("none"!==Ya){var b=c(Ka+Ya);i(b,"option-unsticky"),h(b,"option-sticky")}Ya=Ya===a?"none":a,aa(function(){var b=c(Ka+a);Ya===a?(i(b,"option-sticky"),h(b,"option-unsticky")):(i(b,"option-unsticky"),h(b,"option-sticky"))})},a.loadCssOverride=function(){ga===void 0?a.allShow():z(ga,"window.commento.allShow()")},a.allShow=function(){var a=c(ma),b=c("commento-mod-tools"),d=c(Da);o(a,"style",""),Ua&&o(b,"style",""),d&&o(d,"style","")},a.loginBoxClose=function(){var a=c(ma),b=c(na);i(a,"blurred"),i(Na,"root-min-height"),o(b,"style","display: none")},a.loginBoxShow=function(b){var d=c(ma),e=c(na);a.popupRender(b),h(d,"blurred"),o(e,"style",""),window.location.hash=na,c(qa).focus()},a.main=function(b){if(Na=c(la),null===Na)return void console.log("[commento] error: no root element with ID '"+la+"' found");hb||da(),null===eb&&(eb=450>Na.getBoundingClientRect().width),h(Na,"root"),"true"!==ha&&h(Na,"root-font"),$(),E(),ba();var d=A();z("https://cdn.commento.io"+"/css/commento.css","window.commento.loadCssOverride()"),y(function(){B(function(){ca(),L(function(){V(),f(Na,d),ea(),a.allShow(),R(),r(b)})})})};var hb=!1,ib=function(){var a=b.readyState;"loading"===a?b.addEventListener("readystatechange",ib):"interactive"===a?fa():"complete"===a&&fa()};ib()})(window.commento,document);
