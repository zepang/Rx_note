<!DOCTYPE html>
<!-- saved from url=(0053)https://github.com/wallstreetcn/webpack-and-spa-guide -->
<html lang="en" class="gr__github_com octotree" style=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
  <link rel="dns-prefetch" href="https://github.githubassets.com/">
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com/">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com/">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">



  <link crossorigin="anonymous" media="all" integrity="sha512-lLo2nlsdl+bHLu6PGvC2j3wfP45RnK4wKQLiPnCDcuXfU38AiD+JCdMywnF3WbJC1jaxe3lAI6AM4uJuMFBLEw==" rel="stylesheet" href="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/frameworks-08fc49d3bd2694c870ea23d0906f3610.css">
  <link crossorigin="anonymous" media="all" integrity="sha512-7GJnHXTuh9o7ksnz7TtfwbL+/VPWHHhoRsVGweB9eScqRDgaNNUojiapOUVE6vqDPObpSAlBRXMxdW3RNxt0jg==" rel="stylesheet" href="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/github-8d7aa9ac9a31fd98573407cacc267e49.css">
  
  
  
  
  

  <meta name="viewport" content="width=device-width">
  
  <title>wallstreetcn/webpack-and-spa-guide: Webpack 4 和单页应用入门</title>
    <meta name="description" content="Webpack 4 和单页应用入门. Contribute to wallstreetcn/webpack-and-spa-guide development by creating an account on GitHub.">
    <link rel="search" type="application/opensearchdescription+xml" href="https://github.com/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    
    <meta property="og:image" content="https://avatars3.githubusercontent.com/u/4260687?s=400&amp;v=4"><meta property="og:site_name" content="GitHub"><meta property="og:type" content="object"><meta property="og:title" content="wallstreetcn/webpack-and-spa-guide"><meta property="og:url" content="https://github.com/wallstreetcn/webpack-and-spa-guide"><meta property="og:description" content="Webpack 4 和单页应用入门. Contribute to wallstreetcn/webpack-and-spa-guide development by creating an account on GitHub.">

  <link rel="assets" href="https://github.githubassets.com/">
  <link rel="web-socket" href="wss://live.github.com/_sockets/VjI6MzQyNzgzMDczOjBiZTY2MTA3MGZlNTQ3MGI2NGM4Mzk2NTBjNjI5MTcwZDQ5OTI2MTI2N2I3ODlmNTUyNTFlODE3NmVjYWIzZTY=--1a2d321e21855f369f1a1ccd7c3d35a571ae5568">
  <meta name="pjax-timeout" content="1000">
  <link rel="sudo-modal" href="https://github.com/sessions/sudo_modal">
  <meta name="request-id" content="AAF0:1829:48C6A8:6BF5E8:5C130EB3" data-pjax-transient="">


  

  <meta name="selected-link" value="repo_source" data-pjax-transient="">

      <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
    <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
    <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">

  <meta name="octolytics-host" content="collector.githubapp.com"><meta name="octolytics-app-id" content="github"><meta name="octolytics-event-url" content="https://collector.githubapp.com/github-external/browser_event"><meta name="octolytics-dimension-request_id" content="AAF0:1829:48C6A8:6BF5E8:5C130EB3"><meta name="octolytics-dimension-region_edge" content="ap-southeast-1"><meta name="octolytics-dimension-region_render" content="iad"><meta name="octolytics-actor-id" content="26034320"><meta name="octolytics-actor-login" content="zepang"><meta name="octolytics-actor-hash" content="a5f9d57e773da6acdc3d9d82cd69167d26542a58fe66e60604d76f48b912e04d">
<meta name="analytics-location" content="/&lt;user-name&gt;/&lt;repo-name&gt;" data-pjax-transient="true">



    <meta name="google-analytics" content="UA-3769691-2">

  <meta class="js-ga-set" name="userId" content="37d9d823571fe37a26fc6dadffb6d350" %="">

<meta class="js-ga-set" name="dimension1" content="Logged In">



  

      <meta name="hostname" content="github.com">
    <meta name="user-login" content="zepang">

      <meta name="expected-hostname" content="github.com">
    <meta name="js-proxy-site-detection-payload" content="YzBiNzg5YjVlYjY2MjJlMGY2ZmQzYzUwZTY4M2I5MzNjNDVhMzM4YTZiZGJhOGY1ODMzYmViYmJiZTEwMjhiN3x7InJlbW90ZV9hZGRyZXNzIjoiNjEuMTQ5LjcuNjkiLCJyZXF1ZXN0X2lkIjoiQUFGMDoxODI5OjQ4QzZBODo2QkY1RTg6NUMxMzBFQjMiLCJ0aW1lc3RhbXAiOjE1NDQ3NTI4MTksImhvc3QiOiJnaXRodWIuY29tIn0=">

    <meta name="enabled-features" content="DASHBOARD_V2_LAYOUT_OPT_IN,EXPLORE_DISCOVER_REPOSITORIES,UNIVERSE_BANNER,MARKETPLACE_PLAN_RESTRICTION_EDITOR,NOTIFY_ON_BLOCK,TIMELINE_COMMENT_UPDATES,RELATED_ISSUES,MARKETPLACE_INSIGHTS_V2">

  <meta name="html-safe-nonce" content="7ed62fa3b2d533032db331b95434d0b8db93babe">

  <meta http-equiv="x-pjax-version" content="fb38f85724f7e61a474d5a9eaef0ba87">
  

      <link href="https://github.com/wallstreetcn/webpack-and-spa-guide/commits/master.atom" rel="alternate" title="Recent Commits to webpack-and-spa-guide:master" type="application/atom+xml">

  <meta name="go-import" content="github.com/wallstreetcn/webpack-and-spa-guide git https://github.com/wallstreetcn/webpack-and-spa-guide.git">

  <meta name="octolytics-dimension-user_id" content="4260687"><meta name="octolytics-dimension-user_login" content="wallstreetcn"><meta name="octolytics-dimension-repository_id" content="71459065"><meta name="octolytics-dimension-repository_nwo" content="wallstreetcn/webpack-and-spa-guide"><meta name="octolytics-dimension-repository_public" content="true"><meta name="octolytics-dimension-repository_is_fork" content="false"><meta name="octolytics-dimension-repository_network_root_id" content="71459065"><meta name="octolytics-dimension-repository_network_root_nwo" content="wallstreetcn/webpack-and-spa-guide"><meta name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown" content="false">


    <link rel="canonical" href="https://github.com/wallstreetcn/webpack-and-spa-guide" data-pjax-transient="">


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://github.githubassets.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://github.githubassets.com/favicon.ico">

<meta name="theme-color" content="#1e2327">


  <meta name="u2f-support" content="true">

  <link rel="manifest" href="https://github.com/manifest.json" crossorigin="use-credentials">

  </head>

  <body class="logged-in env-production intent-mouse" data-gr-c-s-loaded="true" style="">
    

  <div class="position-relative js-header-wrapper ">
    <a href="https://github.com/wallstreetcn/webpack-and-spa-guide#start-of-content" tabindex="1" class="p-3 bg-blue text-white show-on-focus js-skip-to-content">Skip to content</a>
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>

    
    
    


        
<header class="Header  f5" role="banner" style="padding-left: 25px;">
  <div class="d-flex flex-justify-between px-3 ">
    <div class="d-flex flex-justify-between ">
      <div class="">
        <a class="header-logo-invertocat" href="https://github.com/" data-hotkey="g d" aria-label="Homepage" data-ga-click="Header, go to dashboard, icon:logo">
  <svg height="32" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
</a>

      </div>

    </div>

    <div class="HeaderMenu d-flex flex-justify-between flex-auto">
      <nav class="d-flex" aria-label="Global">
            <div class="">
              <div class="header-search scoped-search site-scoped-search js-site-search position-relative js-jump-to" role="combobox" aria-owns="jump-to-results" aria-label="Search or jump to" aria-haspopup="listbox" aria-expanded="false">
  <div class="position-relative">
    <!-- '"` --><!-- </textarea></xmp> --><form class="js-site-search-form" data-scope-type="Repository" data-scope-id="71459065" data-scoped-search-url="/wallstreetcn/webpack-and-spa-guide/search" data-unscoped-search-url="/search" action="https://github.com/wallstreetcn/webpack-and-spa-guide/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="✓">
      <label class="form-control header-search-wrapper header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center js-chromeless-input-container">
        <input type="text" class="form-control header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable" data-hotkey="s,/" name="q" value="" placeholder="Search or jump to…" data-unscoped-placeholder="Search or jump to…" data-scoped-placeholder="Search or jump to…" autocapitalize="off" aria-autocomplete="list" aria-controls="jump-to-results" aria-label="Search or jump to…" data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations#csrf-token=zPslTDsEuew5CTkucvlvqFPjFyJZU8nZeZJJF4h8ozxV/ghaDaWFRzTfGmhEyCQubu4wO+uv+2yu4a3IsVU4dA==" spellcheck="false" autocomplete="off">
          <input type="hidden" class="js-site-search-type-field" name="type">
            <img src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/search-key-slash.svg" alt="" class="mr-2 header-search-key-slash">

            <div class="Box position-absolute overflow-hidden d-none jump-to-suggestions js-jump-to-suggestions-container">
              
<ul class="d-none js-jump-to-suggestions-template-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-suggestion" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="https://github.com/wallstreetcn/webpack-and-spa-guide">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="https://github.com/wallstreetcn/webpack-and-spa-guide" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>

</ul>

<ul class="d-none js-jump-to-no-results-template-container">
  <li class="d-flex flex-justify-center flex-items-center f5 d-none js-jump-to-suggestion p-2">
    <span class="text-gray">No suggested jump to results</span>
  </li>
</ul>

<ul id="jump-to-results" role="listbox" class="p-0 m-0 js-navigation-container jump-to-suggestions-results-container js-jump-to-suggestions-results-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-scoped-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="https://github.com/wallstreetcn/webpack-and-spa-guide">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="https://github.com/wallstreetcn/webpack-and-spa-guide" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>

  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-global-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="https://github.com/wallstreetcn/webpack-and-spa-guide">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="https://github.com/wallstreetcn/webpack-and-spa-guide" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">↵</span>
    </div>
  </a>
</li>


    <li class="d-flex flex-justify-center flex-items-center p-0 f5 js-jump-to-suggestion">
      <img src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/octocat-spinner-128.gif" alt="Octocat Spinner Icon" class="m-2" width="28">
    </li>
</ul>

            </div>
      </label>
</form>  </div>
</div>

            </div>

          <ul class="d-flex pl-2 flex-items-center text-bold list-style-none">
            <li>
              <a class="js-selected-navigation-item HeaderNavlink px-2" data-hotkey="g p" data-ga-click="Header, click, Nav menu - item:pulls context:user" aria-label="Pull requests you created" data-selected-links="/pulls /pulls/assigned /pulls/mentioned /pulls" href="https://github.com/pulls">
                Pull requests
</a>            </li>
            <li>
              <a class="js-selected-navigation-item HeaderNavlink px-2" data-hotkey="g i" data-ga-click="Header, click, Nav menu - item:issues context:user" aria-label="Issues you created" data-selected-links="/issues /issues/assigned /issues/mentioned /issues" href="https://github.com/issues">
                Issues
</a>            </li>
              <li class="position-relative">
                <a class="js-selected-navigation-item HeaderNavlink px-2" data-ga-click="Header, click, Nav menu - item:marketplace context:user" data-octo-click="marketplace_click" data-octo-dimensions="location:nav_bar" data-selected-links=" /marketplace" href="https://github.com/marketplace">
                   Marketplace
</a>                  
              </li>
            <li>
              <a class="js-selected-navigation-item HeaderNavlink px-2" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore" href="https://github.com/explore">
                Explore
</a>            </li>
          </ul>
      </nav>

      <div class="d-flex">
        
<ul class="user-nav d-flex flex-items-center list-style-none" id="user-links">
  <li class="dropdown">
    <span class="d-inline-block  px-2">
      

    </span>
  </li>

  <li class="dropdown">
    <details class="details-overlay details-reset d-flex px-2 flex-items-center">
      <summary class="HeaderNavlink" aria-label="Create new…" data-ga-click="Header, create new, icon:add" aria-haspopup="menu">
        <svg class="octicon octicon-plus float-left mr-1 mt-1" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 9H7v5H5V9H0V7h5V2h2v5h5v2z"></path></svg>
        <span class="dropdown-caret mt-1"></span>
      </summary>
      <details-menu class="dropdown-menu dropdown-menu-sw" role="menu">
        
<a role="menuitem" class="dropdown-item" href="https://github.com/new" data-ga-click="Header, create new repository">
  New repository
</a>

  <a role="menuitem" class="dropdown-item" href="https://github.com/new/import" data-ga-click="Header, import a repository">
    Import repository
  </a>

<a role="menuitem" class="dropdown-item" href="https://gist.github.com/" data-ga-click="Header, create new gist">
  New gist
</a>

  <a role="menuitem" class="dropdown-item" href="https://github.com/organizations/new" data-ga-click="Header, create new organization">
    New organization
  </a>


  <div class="dropdown-divider"></div>
  <div class="dropdown-header">
    <span title="wallstreetcn/webpack-and-spa-guide">This repository</span>
  </div>
    <a role="menuitem" class="dropdown-item" href="https://github.com/wallstreetcn/webpack-and-spa-guide/issues/new" data-ga-click="Header, create new issue">
      New issue
    </a>


      </details-menu>
    </details>
  </li>

  <li class="dropdown">

    <details class="details-overlay details-reset d-flex pl-2 flex-items-center">
      <summary class="HeaderNavlink name mt-1" aria-label="View profile and more" data-ga-click="Header, show menu, icon:avatar" aria-haspopup="menu">
        <img alt="@zepang" class="avatar float-left mr-1" src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/26034320" height="20" width="20">
        <span class="dropdown-caret"></span>
      </summary>
      <details-menu class="dropdown-menu dropdown-menu-sw" role="menu">
        <ul>
          <li class="header-nav-current-user css-truncate"><a role="menuitem" class="no-underline user-profile-link px-3 pt-2 pb-2 mb-n2 mt-n1 d-block" href="https://github.com/zepang" data-ga-click="Header, go to profile, text:Signed in as">Signed in as <strong class="css-truncate-target">zepang</strong></a></li>
          <li class="dropdown-divider"></li>


          <li><a role="menuitem" class="dropdown-item" href="https://github.com/zepang" data-ga-click="Header, go to profile, text:your profile">Your profile</a></li>
          <li><a role="menuitem" class="dropdown-item" href="https://github.com/zepang?tab=repositories" data-ga-click="Header, go to repositories, text:your repositories">Your repositories</a></li>


          <li><a role="menuitem" class="dropdown-item" href="https://github.com/zepang?tab=stars" data-ga-click="Header, go to starred repos, text:your stars">Your stars</a></li>
            <li><a role="menuitem" class="dropdown-item" href="https://gist.github.com/" data-ga-click="Header, your gists, text:your gists">Your gists</a></li>
          <li class="dropdown-divider"></li>
          <li><a role="menuitem" class="dropdown-item" href="https://help.github.com/" data-ga-click="Header, go to help, text:help">Help</a></li>
          <li><a role="menuitem" class="dropdown-item" href="https://github.com/settings/profile" data-ga-click="Header, go to settings, icon:settings">Settings</a></li>
          <li>
            <!-- '"` --><!-- </textarea></xmp> --><form class="logout-form" action="https://github.com/logout" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓"><input type="hidden" name="authenticity_token" value="1PYOezDfdwxvNsB0yJ5cI8THWZ5IwPoRbpJ2C41spi2mgCsCElGpSNCgnjQogUPWmTe0t4kxKzkeYedv5dA2fw==">
              <button type="submit" class="dropdown-item dropdown-signout" data-ga-click="Header, sign out, icon:logout" role="menuitem">
                Sign out
              </button>
</form>          </li>
        </ul>
      </details-menu>
    </details>
  </li>
</ul>



        <!-- '"` --><!-- </textarea></xmp> --><form class="sr-only right-0" action="https://github.com/logout" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓"><input type="hidden" name="authenticity_token" value="khLtVPZ6KEPixH4RQSyPtoPG9et934FTLuiVuZkK2u7gZMgt1PT2B11SIFGhM5BD3jYYwrwuUHteGwTd8bZKvA==">
          <button type="submit" class="dropdown-item dropdown-signout" data-ga-click="Header, sign out, icon:logout">
            Sign out
          </button>
</form>      </div>
    </div>
  </div>
</header>

      

  </div>

  <div id="start-of-content" class="show-on-focus"></div>

    <div id="js-flash-container">

</div>



  <div role="main" class="application-main " data-commit-hovercards-enabled="">
        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode" class="">
    <div id="js-repo-pjax-container" data-pjax-container="">
      
  


  



  <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav  ">
    <div class="repohead-details-container clearfix container" style="">

      <ul class="pagehead-actions">
  <li>
        <!-- '"` --><!-- </textarea></xmp> --><form data-remote="true" class="js-social-form js-social-container" action="https://github.com/notifications/subscribe" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓"><input type="hidden" name="authenticity_token" value="jVjYxRb1Jtn7Ffqgq7JXp9OEbFiOMpwHGsquqmVO8EjyVboJiRW0gc6IzmaGqFBNv/zRqpC92P4q37ZEhCKWkw==">      <input type="hidden" name="repository_id" id="repository_id" value="71459065" class="form-control">

      <details class="details-reset details-overlay select-menu float-left">
        <summary class="btn btn-sm btn-with-count select-menu-button" data-ga-click="Repository, click Watch settings, action:files#disambiguate" aria-haspopup="menu">
          <span data-menu-button="">
              <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
              Watch
          </span>
        </summary>
        <details-menu class="select-menu-modal position-absolute mt-5" style="z-index: 99;" role="menu">
          <div class="select-menu-header">
            <span class="select-menu-title">Notifications</span>
          </div>
          <div class="select-menu-list">
            <button type="submit" name="do" value="included" class="select-menu-item width-full" aria-checked="true" role="menuitemradio">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <div class="select-menu-item-text">
                <span class="select-menu-item-heading">Not watching</span>
                <span class="description">Be notified only when participating or @mentioned.</span>
                <span class="hidden-select-button-text" data-menu-button-contents="">
                  <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
                  Watch
                </span>
              </div>
            </button>

              <button type="submit" name="do" value="release_only" class="select-menu-item width-full" aria-checked="false" role="menuitemradio">
                <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
                <div class="select-menu-item-text">
                  <span class="select-menu-item-heading">Releases only</span>
                  <span class="description">Be notified of new releases, and when participating or @mentioned.</span>
                  <span class="hidden-select-button-text" data-menu-button-contents="">
                    <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
                    Unwatch releases
                  </span>
                </div>
              </button>

            <button type="submit" name="do" value="subscribed" class="select-menu-item width-full" aria-checked="false" role="menuitemradio">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <div class="select-menu-item-text">
                <span class="select-menu-item-heading">Watching</span>
                <span class="description">Be notified of all conversations.</span>
                <span class="hidden-select-button-text" data-menu-button-contents="">
                  <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
                  Unwatch
                </span>
              </div>
            </button>

            <button type="submit" name="do" value="ignore" class="select-menu-item width-full" aria-checked="false" role="menuitemradio">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <div class="select-menu-item-text">
                <span class="select-menu-item-heading">Ignoring</span>
                <span class="description">Never be notified.</span>
                <span class="hidden-select-button-text" data-menu-button-contents="">
                  <svg class="octicon octicon-mute v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.81v10.38c0 .67-.81 1-1.28.53L3 10H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h2l3.72-3.72C7.19 1.81 8 2.14 8 2.81zm7.53 3.22l-1.06-1.06-1.97 1.97-1.97-1.97-1.06 1.06L11.44 8 9.47 9.97l1.06 1.06 1.97-1.97 1.97 1.97 1.06-1.06L13.56 8l1.97-1.97z"></path></svg>
                  Stop ignoring
                </span>
              </div>
            </button>
          </div>
        </details-menu>
      </details>
      <a class="social-count js-social-count" href="https://github.com/wallstreetcn/webpack-and-spa-guide/watchers" aria-label="30 users are watching this repository">
        30
      </a>
</form>
  </li>

  <li>
      <div class="js-toggler-container js-social-container starring-container on">
    <!-- '"` --><!-- </textarea></xmp> --><form class="starred js-social-form" action="https://github.com/wallstreetcn/webpack-and-spa-guide/unstar" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓"><input type="hidden" name="authenticity_token" value="XARHy57TKd5tmnms4sxFv2xVYmdR3SQybr5gmnUNIom+cM+kRhZkMETN3fZxm0KoM4X8Zgz7+Q0Prq4fc8gcQQ==">
      <input type="hidden" name="context" value="repository">
      <button type="submit" class="btn btn-sm btn-with-count js-toggler-target" aria-label="Unstar this repository" title="Unstar wallstreetcn/webpack-and-spa-guide" data-ga-click="Repository, click unstar button, action:files#disambiguate; text:Unstar">
        <svg class="octicon octicon-star v-align-text-bottom" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"></path></svg>
        Unstar
      </button>
        <a class="social-count js-social-count" href="https://github.com/wallstreetcn/webpack-and-spa-guide/stargazers" aria-label="682 users starred this repository">
          682
        </a>
</form>
    <!-- '"` --><!-- </textarea></xmp> --><form class="unstarred js-social-form" action="https://github.com/wallstreetcn/webpack-and-spa-guide/star" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓"><input type="hidden" name="authenticity_token" value="UziAHlLJApFPKD9VzlBCg9Nse2bljC7drHHiRdJjF5kC9vUVmpUz8DMwjgaplkdiuANgpxPlys5aLEEm1nRXkg==">
      <input type="hidden" name="context" value="repository">
      <button type="submit" class="btn btn-sm btn-with-count js-toggler-target" aria-label="Star this repository" title="Star wallstreetcn/webpack-and-spa-guide" data-ga-click="Repository, click star button, action:files#disambiguate; text:Star">
        <svg class="octicon octicon-star v-align-text-bottom" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"></path></svg>
        Star
      </button>
        <a class="social-count js-social-count" href="https://github.com/wallstreetcn/webpack-and-spa-guide/stargazers" aria-label="682 users starred this repository">
          682
        </a>
</form>  </div>

  </li>

  <li>
          <details class="details-reset details-overlay details-overlay-dark d-inline-block float-left">
            <summary class="btn btn-sm btn-with-count" title="Fork your own copy of wallstreetcn/webpack-and-spa-guide to your account" data-ga-click="Repository, show fork modal, action:files#disambiguate; text:Fork" aria-haspopup="dialog">
              <svg class="octicon octicon-repo-forked v-align-text-bottom" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
              Fork
            </summary>
            <details-dialog class="anim-fade-in fast Box Box--overlay d-flex flex-column" role="dialog">
              <div class="Box-header">
                <button class="Box-btn-octicon btn-octicon float-right" type="button" aria-label="Close dialog" data-close-dialog="">
                  <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
                </button>
                <h3 class="Box-title">Fork webpack-and-spa-guide</h3>
              </div>
              <div class="overflow-auto text-center">
                

  <div class="p-4 ">
    <h3 class="h3 pb-3 text-normal">
      Where should we fork webpack-and-spa-guide?
    </h3>

    <div class="d-flex flex-column flex-items-start">
          <!-- '"` --><!-- </textarea></xmp> --><form class="button_to" method="post" action="https://github.com/wallstreetcn/webpack-and-spa-guide/fork"><button type="submit" name="organization" value="zepang" tabindex="0" class="btn-link f5 text-bold my-2 tooltipped tooltipped-se tooltipped-align-left-1" aria-label="Will be created as zepang/webpack-and-spa-guide.">
    <div class="d-flex flex-items-center">
      <img class="avatar avatar-small mr-2" src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/26034320(1)" width="30" height="30" alt="@zepang">
      zepang
    </div>
</button><input type="hidden" name="authenticity_token" value="vE+QugmqkYTazR/9u/tuyK+Dw4MPo7aurcUqEf1MXBRS1wQ/GBSV/yuAgyNPi0Z5oRCbFbpx2P22GeSevNMqBg=="></form>
          <!-- '"` --><!-- </textarea></xmp> --><form class="button_to" method="post" action="https://github.com/wallstreetcn/webpack-and-spa-guide/fork"><button type="submit" name="organization" value="laizehai" tabindex="0" class="btn-link f5 text-bold my-2 tooltipped tooltipped-se tooltipped-align-left-1" aria-label="Will be created as laizehai/webpack-and-spa-guide.">
    <div class="d-flex flex-items-center">
      <img class="avatar avatar-small mr-2" src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/32252250" width="30" height="30" alt="@laizehai">
      laizehai
    </div>
</button><input type="hidden" name="authenticity_token" value="6aTOupOieHhJ6GZ7LvFWz89QiJr2typRlparjqUNYR4HPFo/ghx8A7il+qXagX5+wcPQDENlRAKNSmUB5JIXDA=="></form>
          <!-- '"` --><!-- </textarea></xmp> --><form class="button_to" method="post" action="https://github.com/wallstreetcn/webpack-and-spa-guide/fork"><button type="submit" name="organization" value="tomorrowchuang" tabindex="0" class="btn-link f5 text-bold my-2 tooltipped tooltipped-se tooltipped-align-left-1" aria-label="Will be created as tomorrowchuang/webpack-and-spa-guide.">
    <div class="d-flex flex-items-center">
      <img class="avatar avatar-small mr-2" src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/39296621" width="30" height="30" alt="@tomorrowchuang">
      tomorrowchuang
    </div>
</button><input type="hidden" name="authenticity_token" value="aCZbpbQiAtzMAtuW3YzB6wszMeAvqltn6gnlfGLKykiGvs8gpZwGpz1PR0gp/OlaBaBpdpp4NTTx1SvzI1W8Wg=="></form>
    </div>
  </div>


              </div>
            </details-dialog>
          </details>

    <a href="https://github.com/wallstreetcn/webpack-and-spa-guide/network/members" class="social-count" aria-label="172 users forked this repository">
      172
    </a>
  </li>
</ul>

      <h1 class="public ">
  <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
  <span class="author" itemprop="author"><a class="url fn" rel="author" data-hovercard-type="organization" data-hovercard-url="/orgs/wallstreetcn/hovercard" href="https://github.com/wallstreetcn" aria-describedby="hovercard-aria-description">wallstreetcn</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a data-pjax="#js-repo-pjax-container" href="https://github.com/wallstreetcn/webpack-and-spa-guide">webpack-and-spa-guide</a></strong>

</h1>

    </div>
    
<nav class="reponav js-repo-nav js-sidenav-container-pjax container" itemscope="" itemtype="http://schema.org/BreadcrumbList" aria-label="Repository" data-pjax="#js-repo-pjax-container" style="">

  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a class="js-selected-navigation-item selected reponav-item" itemprop="url" data-hotkey="g c" aria-current="page" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /wallstreetcn/webpack-and-spa-guide" href="https://github.com/wallstreetcn/webpack-and-spa-guide">
      <svg class="octicon octicon-code" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"></path></svg>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>

    <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a itemprop="url" data-hotkey="g i" class="js-selected-navigation-item reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /wallstreetcn/webpack-and-spa-guide/issues" href="https://github.com/wallstreetcn/webpack-and-spa-guide/issues">
        <svg class="octicon octicon-issue-opened" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
        <span itemprop="name">Issues</span>
        <span class="Counter">9</span>
        <meta itemprop="position" content="2">
</a>    </span>

  <span itemscope="" itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a data-hotkey="g p" itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /wallstreetcn/webpack-and-spa-guide/pulls" href="https://github.com/wallstreetcn/webpack-and-spa-guide/pulls">
      <svg class="octicon octicon-git-pull-request" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
      <span itemprop="name">Pull requests</span>
      <span class="Counter">0</span>
      <meta itemprop="position" content="3">
</a>  </span>


    <a data-hotkey="g b" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /wallstreetcn/webpack-and-spa-guide/projects" href="https://github.com/wallstreetcn/webpack-and-spa-guide/projects">
      <svg class="octicon octicon-project" viewBox="0 0 15 16" version="1.1" width="15" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"></path></svg>
      Projects
      <span class="Counter">0</span>
</a>

    <a class="js-selected-navigation-item reponav-item" data-hotkey="g w" data-selected-links="repo_wiki /wallstreetcn/webpack-and-spa-guide/wiki" href="https://github.com/wallstreetcn/webpack-and-spa-guide/wiki">
      <svg class="octicon octicon-book" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M3 5h4v1H3V5zm0 3h4V7H3v1zm0 2h4V9H3v1zm11-5h-4v1h4V5zm0 2h-4v1h4V7zm0 2h-4v1h4V9zm2-6v9c0 .55-.45 1-1 1H9.5l-1 1-1-1H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h5.5l1 1 1-1H15c.55 0 1 .45 1 1zm-8 .5L7.5 3H2v9h6V3.5zm7-.5H9.5l-.5.5V12h6V3z"></path></svg>
      Wiki
</a>
    <a class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors dependency_graph pulse alerts security /wallstreetcn/webpack-and-spa-guide/pulse" href="https://github.com/wallstreetcn/webpack-and-spa-guide/pulse">
      <svg class="octicon octicon-graph" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"></path></svg>
      Insights
</a>

</nav>


  </div>

<div class="container new-discussion-timeline experiment-repo-nav  " style="">
  <div class="repository-content ">

    
    
  

      <div class="mb-3">  <div class="f4">
        <span class="text-gray-dark mr-2" itemprop="about">
          Webpack 4 和单页应用入门
        </span>
  </div>
</div>




  <div class="overall-summary ">
    <div class="stats-switcher-viewport js-stats-switcher-viewport">
      <div class="stats-switcher-wrapper">
      <ul class="numbers-summary">
        <li class="commits">
          <a data-pjax="" href="https://github.com/wallstreetcn/webpack-and-spa-guide/commits/master">
              <svg class="octicon octicon-history" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 13H6V6h5v2H8v5zM7 1C4.81 1 2.87 2.02 1.59 3.59L0 2v4h4L2.5 4.5C3.55 3.17 5.17 2.3 7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-.34.03-.67.09-1H.08C.03 7.33 0 7.66 0 8c0 3.86 3.14 7 7 7s7-3.14 7-7-3.14-7-7-7z"></path></svg>
              <span class="num text-emphasized">
                99
              </span>
              commits
          </a>
        </li>
        <li>
          <a data-pjax="" href="https://github.com/wallstreetcn/webpack-and-spa-guide/branches">
            <svg class="octicon octicon-git-branch" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 5c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v.3c-.02.52-.23.98-.63 1.38-.4.4-.86.61-1.38.63-.83.02-1.48.16-2 .45V4.72a1.993 1.993 0 0 0-1-3.72C.88 1 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2 1.11 0 2-.89 2-2 0-.53-.2-1-.53-1.36.09-.06.48-.41.59-.47.25-.11.56-.17.94-.17 1.05-.05 1.95-.45 2.75-1.25S8.95 7.77 9 6.73h-.02C9.59 6.37 10 5.73 10 5zM2 1.8c.66 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2C1.35 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2zm0 12.41c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm6-8c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
            <span class="num text-emphasized">
              2
            </span>
            branches
          </a>
        </li>

        <li>
          <a href="https://github.com/wallstreetcn/webpack-and-spa-guide/releases">
            <svg class="octicon octicon-tag" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.73 1.73C7.26 1.26 6.62 1 5.96 1H3.5C2.13 1 1 2.13 1 3.5v2.47c0 .66.27 1.3.73 1.77l6.06 6.06c.39.39 1.02.39 1.41 0l4.59-4.59a.996.996 0 0 0 0-1.41L7.73 1.73zM2.38 7.09c-.31-.3-.47-.7-.47-1.13V3.5c0-.88.72-1.59 1.59-1.59h2.47c.42 0 .83.16 1.13.47l6.14 6.13-4.73 4.73-6.13-6.15zM3.01 3h2v2H3V3h.01z"></path></svg>
            <span class="num text-emphasized">
              0
            </span>
            releases
          </a>
        </li>


          <li>
              <a href="https://github.com/wallstreetcn/webpack-and-spa-guide/graphs/contributors">
  <svg class="octicon octicon-organization" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M16 12.999c0 .439-.45 1-1 1H7.995c-.539 0-.994-.447-.995-.999H1c-.54 0-1-.561-1-1 0-2.634 3-4 3-4s.229-.409 0-1c-.841-.621-1.058-.59-1-3 .058-2.419 1.367-3 2.5-3s2.442.58 2.5 3c.058 2.41-.159 2.379-1 3-.229.59 0 1 0 1s1.549.711 2.42 2.088C9.196 9.369 10 8.999 10 8.999s.229-.409 0-1c-.841-.62-1.058-.59-1-3 .058-2.419 1.367-3 2.5-3s2.437.581 2.495 3c.059 2.41-.158 2.38-1 3-.229.59 0 1 0 1s3.005 1.366 3.005 4z"></path></svg>
    <span class="num text-emphasized">
      2
    </span>
    contributors
</a>

          </li>

      </ul>

      </div>
    </div>
  </div>




    <div class="mt-2">
      
    </div>

  <div class="file-navigation in-mid-page d-flex flex-items-start">
  
<div class="select-menu branch-select-menu js-menu-container js-select-menu float-left">
  <button class=" btn btn-sm select-menu-button js-menu-target css-truncate" data-hotkey="w" type="button" aria-label="Switch branches or tags" aria-expanded="false" aria-haspopup="true">
      <i>Branch:</i>
      <span class="js-select-button css-truncate-target">master</span>
  </button>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax="">

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <svg class="octicon octicon-x js-menu-close" role="img" aria-label="Close" viewBox="0 0 12 16" version="1.1" width="12" height="16"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
        <span class="select-menu-title">Switch branches/tags</span>
      </div>

      <tab-container>
      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="form-control js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
        </div>
        <div class="select-menu-tabs" role="tablist">
          <ul>
            <li class="select-menu-tab">
              <button type="button" class="select-menu-tab-nav" data-filter-placeholder="Filter branches/tags" role="tab" aria-selected="true">Branches</button>
            </li>
            <li class="select-menu-tab">
              <button type="button" class="select-menu-tab-nav" data-filter-placeholder="Find a tag…" role="tab">Tags</button>
            </li>
          </ul>
        </div>
      </div>

      <div class="select-menu-list" role="tabpanel">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <a class="select-menu-item js-navigation-item js-navigation-open selected" href="https://github.com/wallstreetcn/webpack-and-spa-guide/tree/master" data-name="master" data-skip-pjax="true" rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                master
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open " href="https://github.com/wallstreetcn/webpack-and-spa-guide/tree/webpack3" data-name="webpack3" data-skip-pjax="true" rel="nofollow">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                webpack3
              </span>
            </a>
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div>

      <div class="select-menu-list" role="tabpanel" hidden="">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div>
      </tab-container>
    </div>
  </div>
</div>


        <a href="https://github.com/wallstreetcn/webpack-and-spa-guide/pull/new/master" class="btn btn-sm new-pull-request-btn" data-pjax="" data-ga-click="Repository, new pull request, location:repo overview">
          New pull request
        </a>

  <div class="breadcrumb flex-auto">
    
  </div>

  <div class="BtnGroup">
      
  <!-- '"` --><!-- </textarea></xmp> --><form class="BtnGroup-form" action="https://github.com/wallstreetcn/webpack-and-spa-guide/new/master" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓"><input type="hidden" name="authenticity_token" value="hi5wQ4QmDx5kpLYI918N2UN5jhsZSVgqw5z9mj6635AAUkUcWiKCZzhXqu6dy88/lxt8CTu1qotwUw1VjrzjzQ==">
    <button class="btn btn-sm BtnGroup-item" type="submit" data-disable-with="Creating file…">
      Create new file
    </button>
</form>

      
  <a href="https://github.com/wallstreetcn/webpack-and-spa-guide/upload/master" class="btn btn-sm BtnGroup-item">
    Upload files
  </a>


    <a href="https://github.com/wallstreetcn/webpack-and-spa-guide/find/master" class="btn btn-sm empty-icon float-right BtnGroup-item" data-pjax="" data-hotkey="t" data-ga-click="Repository, find file, location:repo overview">
      Find file
    </a>
  </div>
  

    <details class="get-repo-select-menu js-get-repo-select-menu position-relative details-overlay details-reset">
  <summary class="btn btn-sm btn-primary">
    Clone or download
    <span class="dropdown-caret"></span>
  </summary>
  <div class="position-relative">
    <div class="get-repo-modal dropdown-menu dropdown-menu-sw pb-0 js-toggler-container  js-get-repo-modal">

      <div class="get-repo-modal-options">
          <div class="clone-options https-clone-options">
              <!-- '"` --><!-- </textarea></xmp> --><form data-remote="true" action="https://github.com/users/set_protocol?protocol_selector=ssh&amp;protocol_type=clone" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓"><input type="hidden" name="authenticity_token" value="kpE9UO4LrG3FTtCFgfAsLFheUZNilk5ZIS87xm4GBOkcgkc6f6poUs8052E3iVGLyHNzDr9j3TA/0vmjsfrFtA=="><button type="submit" class="btn-link btn-change-protocol js-toggler-target float-right">Use SSH</button></form>

            <h4 class="mb-1">
              Clone with HTTPS
              <a class="muted-link" href="https://help.github.com/articles/which-remote-url-should-i-use" target="_blank" title="Which remote URL should I use?">
                <svg class="octicon octicon-question" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M6 10h2v2H6v-2zm4-3.5C10 8.64 8 9 8 9H6c0-.55.45-1 1-1h.5c.28 0 .5-.22.5-.5v-1c0-.28-.22-.5-.5-.5h-1c-.28 0-.5.22-.5.5V7H4c0-1.5 1.5-3 3-3s3 1 3 2.5zM7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7z"></path></svg>
              </a>
            </h4>
            <p class="mb-2 get-repo-decription-text">
              Use Git or checkout with SVN using the web URL.
            </p>

            <div class="input-group">
  <input type="text" class="form-control input-monospace input-sm" data-autoselect="" value="https://github.com/wallstreetcn/webpack-and-spa-guide.git" aria-label="Clone this repository at https://github.com/wallstreetcn/webpack-and-spa-guide.git" readonly="">
  <div class="input-group-button">
    <clipboard-copy value="https://github.com/wallstreetcn/webpack-and-spa-guide.git" aria-label="Copy to clipboard" class="btn btn-sm" tabindex="0" role="button">
      <svg class="octicon octicon-clippy" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"></path></svg>
    </clipboard-copy>
  </div>
</div>

          </div>

          <div class="clone-options ssh-clone-options">
              <!-- '"` --><!-- </textarea></xmp> --><form data-remote="true" action="https://github.com/users/set_protocol?protocol_selector=https&amp;protocol_type=clone" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓"><input type="hidden" name="authenticity_token" value="o+EN7SbSklLxdiYLHa1IgryuN9GjRbelnoH5Gox7xFst8neHt3NWbfsMEe+r1DUlLIMVTH6wJMyAfDt/U4cFBg=="><button type="submit" class="btn-link btn-change-protocol js-toggler-target float-right">Use HTTPS</button></form>

              <h4 class="mb-1">
                Clone with SSH
                <a class="muted-link" href="https://help.github.com/articles/which-remote-url-should-i-use" target="_blank" title="Which remote URL should I use?">
                  <svg class="octicon octicon-question" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M6 10h2v2H6v-2zm4-3.5C10 8.64 8 9 8 9H6c0-.55.45-1 1-1h.5c.28 0 .5-.22.5-.5v-1c0-.28-.22-.5-.5-.5h-1c-.28 0-.5.22-.5.5V7H4c0-1.5 1.5-3 3-3s3 1 3 2.5zM7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7z"></path></svg>
                </a>
              </h4>
              <p class="mb-2 get-repo-decription-text">
                Use an SSH key and passphrase from account.
              </p>

              <div class="input-group">
  <input type="text" class="form-control input-monospace input-sm" data-autoselect="" value="git@github.com:wallstreetcn/webpack-and-spa-guide.git" aria-label="Clone this repository at git@github.com:wallstreetcn/webpack-and-spa-guide.git" readonly="">
  <div class="input-group-button">
    <clipboard-copy value="git@github.com:wallstreetcn/webpack-and-spa-guide.git" aria-label="Copy to clipboard" class="btn btn-sm" tabindex="0" role="button">
      <svg class="octicon octicon-clippy" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"></path></svg>
    </clipboard-copy>
  </div>
</div>

          </div>
        <div class="mt-2">
            <a href="github-windows://openRepo/https://github.com/wallstreetcn/webpack-and-spa-guide" class="btn btn-outline get-repo-btn tooltipped tooltipped-s tooltipped-multiline js-get-repo" data-open-app="windows" aria-label="Clone wallstreetcn/webpack-and-spa-guide to your computer and use it in GitHub Desktop.">
    Open in Desktop
  </a>

<a href="https://github.com/wallstreetcn/webpack-and-spa-guide/archive/master.zip" class="btn btn-outline get-repo-btn
" rel="nofollow" data-ga-click="Repository, download zip, location:repo overview">
  Download ZIP
</a>

        </div>
      </div>

      <div class="js-modal-download-mac py-2 px-3 d-none">
        <h4 class="lh-condensed mb-3">Launching GitHub Desktop<span class="animated-ellipsis-container"><span class="animated-ellipsis">...</span></span></h4>
        <p class="text-gray">If nothing happens, <a href="https://desktop.github.com/">download GitHub Desktop</a> and try again.</p>
        <p><button class="btn-link js-get-repo-modal-download-back">Go back</button></p>
      </div>

      <div class="js-modal-download-windows py-2 px-3 d-none">
        <h4 class="lh-condensed mb-3">Launching GitHub Desktop<span class="animated-ellipsis-container"><span class="animated-ellipsis">...</span></span></h4>
        <p class="text-gray">If nothing happens, <a href="https://desktop.github.com/">download GitHub Desktop</a> and try again.</p>
        <p><button class="btn-link js-get-repo-modal-download-back">Go back</button></p>
      </div>

      <div class="js-modal-download-xcode py-2 px-3 d-none">
        <h4 class="lh-condensed mb-3">Launching Xcode<span class="animated-ellipsis-container"><span class="animated-ellipsis">...</span></span></h4>
        <p class="text-gray">If nothing happens, <a href="https://developer.apple.com/xcode/">download Xcode</a> and try again.</p>
        <p><button class="btn-link js-get-repo-modal-download-back">Go back</button></p>
      </div>

      <div class="js-modal-download-visual-studio py-2 px-3 d-none">
        <h4 class="lh-condensed mb-3">Launching Visual Studio<span class="animated-ellipsis-container"><span class="animated-ellipsis">...</span></span></h4>
        <p class="text-gray">If nothing happens, <a href="https://visualstudio.github.com/">download the GitHub extension for Visual Studio</a> and try again.</p>
        <p><button class="btn-link js-get-repo-modal-download-back">Go back</button></p>
      </div>

    </div>
  </div>
</details>

</div>


  


  <div class="commit-tease js-details-container Details d-flex rounded-top-1" data-issue-and-pr-hovercards-enabled="">
    
<div class="AvatarStack flex-self-start ">
  <div class="AvatarStack-body" aria-label="Jiang Fengming">

        <img src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/68747470733a2f2f302e67726176617461722e636f6d2f6176617461722f33313330616431393762613665316130353061383162643733353130346262643f643d687474707325334125324625324661737365" width="20" height="20" class="avatar" alt="Jiang Fengming">
  </div>
</div>

    <div class="flex-auto f6 mr-3">
      
        <span class="commit-author user-mention">Jiang Fengming</span>


  


        <a data-pjax="true" title="增加 babel-eslint" class="message" href="https://github.com/wallstreetcn/webpack-and-spa-guide/commit/dd0e7c3d872b39798820e446cd2010263d4383c5">增加 babel-eslint</a>

    </div>
    <div class="no-wrap">
      Latest commit
      <a class="commit-tease-sha" href="https://github.com/wallstreetcn/webpack-and-spa-guide/commit/dd0e7c3d872b39798820e446cd2010263d4383c5" data-pjax="">
        dd0e7c3
      </a>
      <span itemprop="dateModified"><relative-time datetime="2018-05-14T10:17:15Z" title="2018年5月14日 GMT+8 下午6:17">on 14 May</relative-time></span>
    </div>
  </div>



<div class="file-wrap">
  <a class="d-none js-permalink-shortcut" data-hotkey="y" href="https://github.com/wallstreetcn/webpack-and-spa-guide/tree/dd0e7c3d872b39798820e446cd2010263d4383c5">Permalink</a>

  <table class="files js-navigation-container js-active-navigation-container" data-pjax="">
    <thead>
      <tr>
        <th><span class="sr-only">Type</span></th>
        <th><span class="sr-only">Name</span></th>
        <th><span class="sr-only">Latest commit message</span></th>
        <th><span class="sr-only">Commit time</span></th>
      </tr>
    </thead>


    <tbody>
      <tr class="warning include-fragment-error">
        <td class="icon"><svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></td>
        <td class="content" colspan="3">Failed to load latest commit information.</td>
      </tr>

        <tr class="js-navigation-item" aria-selected="false">
          <td class="icon">
            <svg aria-label="directory" class="octicon octicon-file-directory" viewBox="0 0 14 16" version="1.1" width="14" height="16" role="img"><path fill-rule="evenodd" d="M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z"></path></svg>
            <img width="16" height="16" class="spinner" alt="" src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/octocat-spinner-32.gif">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a class="js-navigation-open" title="assets" id="32bb636196f91ed59d7a49190e26b42c-4d08c7504a3ad8e3fbabfd9c64bf7ed39301f7de" href="https://github.com/wallstreetcn/webpack-and-spa-guide/tree/master/assets">assets</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
                  <a data-pjax="true" title="tmp" class="message" href="https://github.com/wallstreetcn/webpack-and-spa-guide/commit/2d89e5038346a59dd29b252b9cca0d8a610acf14">tmp</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time-ago datetime="2016-11-24T10:06:49Z" title="2016年11月24日 GMT+8 下午6:06">2 years ago</time-ago></span>
          </td>
        </tr>
        <tr class="js-navigation-item" aria-selected="false">
          <td class="icon">
            <svg aria-label="directory" class="octicon octicon-file-directory" viewBox="0 0 14 16" version="1.1" width="14" height="16" role="img"><path fill-rule="evenodd" d="M13 4H7V3c0-.66-.31-1-1-1H1c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V5c0-.55-.45-1-1-1zM6 4H1V3h5v1z"></path></svg>
            <img width="16" height="16" class="spinner" alt="" src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/octocat-spinner-32.gif">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a class="js-navigation-open" title="examples" id="bfebe34154a0dfd9fc7b447fc9ed74e9-fdb49d6b2b6195d0c873185d9b1b1247f9cbc9ac" href="https://github.com/wallstreetcn/webpack-and-spa-guide/tree/master/examples">examples</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
                  <a data-pjax="true" title="增加 babel-eslint" class="message" href="https://github.com/wallstreetcn/webpack-and-spa-guide/commit/dd0e7c3d872b39798820e446cd2010263d4383c5">增加 babel-eslint</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time-ago datetime="2018-05-14T10:17:15Z" title="2018年5月14日 GMT+8 下午6:17">7 months ago</time-ago></span>
          </td>
        </tr>
        <tr class="js-navigation-item">
          <td class="icon">
            <svg aria-label="file" class="octicon octicon-file" viewBox="0 0 12 16" version="1.1" width="12" height="16" role="img"><path fill-rule="evenodd" d="M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"></path></svg>
            <img width="16" height="16" class="spinner" alt="" src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/octocat-spinner-32.gif">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a class="js-navigation-open" title=".gitignore" id="a084b794bc0759e7a6b77810e01874f2-e43b0f988953ae3a84b00331d0ccf5f7d51cb3cf" href="https://github.com/wallstreetcn/webpack-and-spa-guide/blob/master/.gitignore">.gitignore</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
                  <a data-pjax="true" title="tmp" class="message" href="https://github.com/wallstreetcn/webpack-and-spa-guide/commit/be1c5bbb602515bc7a7ad0ae828866cdda6e1334">tmp</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time-ago datetime="2016-11-07T12:18:38Z" title="2016年11月7日 GMT+8 下午8:18">2 years ago</time-ago></span>
          </td>
        </tr>
        <tr class="js-navigation-item navigation-focus" aria-selected="true">
          <td class="icon">
            <svg aria-label="file" class="octicon octicon-file" viewBox="0 0 12 16" version="1.1" width="12" height="16" role="img"><path fill-rule="evenodd" d="M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"></path></svg>
            <img width="16" height="16" class="spinner" alt="" src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/octocat-spinner-32.gif">
          </td>
          <td class="content">
            <span class="css-truncate css-truncate-target"><a class="js-navigation-open" title="README.md" id="04c6e90faac2675aa89e2176d2eec7d8-22e591e6002973018a837c4d5170ae1d3a9fb8bb" href="https://github.com/wallstreetcn/webpack-and-spa-guide/blob/master/README.md">README.md</a></span>
          </td>
          <td class="message">
            <span class="css-truncate css-truncate-target">
                  <a data-pjax="true" title="增加 babel-eslint" class="message" href="https://github.com/wallstreetcn/webpack-and-spa-guide/commit/dd0e7c3d872b39798820e446cd2010263d4383c5">增加 babel-eslint</a>
            </span>
          </td>
          <td class="age">
            <span class="css-truncate css-truncate-target"><time-ago datetime="2018-05-14T10:17:15Z" title="2018年5月14日 GMT+8 下午6:17">7 months ago</time-ago></span>
          </td>
        </tr>
    </tbody>
  </table>

</div>



  <div id="readme" class="Box Box--condensed instapaper_body md">
    <div class="Box-header px-2 clearfix">
      <h3 class="Box-title pr-3">
        <svg class="octicon octicon-book" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M3 5h4v1H3V5zm0 3h4V7H3v1zm0 2h4V9H3v1zm11-5h-4v1h4V5zm0 2h-4v1h4V7zm0 2h-4v1h4V9zm2-6v9c0 .55-.45 1-1 1H9.5l-1 1-1-1H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h5.5l1 1 1-1H15c.55 0 1 .45 1 1zm-8 .5L7.5 3H2v9h6V3.5zm7-.5H9.5l-.5.5V12h6V3z"></path></svg>
        README.md
      </h3>
    </div>
      <div class="Box-body p-6">
        <article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-webpack-4-和单页应用入门" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#webpack-4-%E5%92%8C%E5%8D%95%E9%A1%B5%E5%BA%94%E7%94%A8%E5%85%A5%E9%97%A8"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Webpack 4 和单页应用入门</h1>
<blockquote>
<p>webpack 更新到了 4.0，官网还没有更新文档。因此把教程更新一下，方便大家用起 webpack 4。</p>
</blockquote>
<p><a target="_blank" rel="noopener noreferrer" href="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/webpack.png"><img src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/webpack.png" alt="webpack" style="max-width:100%;"></a></p>
<h2><a id="user-content-写在开头" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E5%86%99%E5%9C%A8%E5%BC%80%E5%A4%B4"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>写在开头</h2>
<p><del>先说说为什么要写这篇文章，最初的原因是组里的小朋友们看了 <a href="https://webpack.js.org/" rel="nofollow">webpack</a> 文档后，表情都是这样的：摘自 webpack 一篇文档的评论区）</del></p>
<p><a target="_blank" rel="noopener noreferrer" href="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/wtf.jpg"><img src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/wtf.jpg" alt="WTF" style="max-width:100%;"></a></p>
<p><del>和这样的：</del></p>
<p><a target="_blank" rel="noopener noreferrer" href="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/couldn&#39;t-handle.jpg"><img src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/couldn&#39;t-handle.jpg" alt="You Couldn&#39;t Handle Me" style="max-width:100%;"></a></p>
<p><del>是的，即使是外国佬也在吐槽这文档不是人能看的。回想起当年自己啃 webpack 文档的血与泪的往事，觉得有必要整一个教程，可以让大家看完后愉悦地搭建起一个 webpack 打包方案的项目。</del></p>
<p>官网新的 <a href="https://webpack.js.org/" rel="nofollow">webpack</a> 文档现在写的很详细了，能看英文的小伙伴可以直接去看官网。</p>
<p>可能会有人问 webpack 到底有什么用，你不能上来就糊我一脸代码让我马上搞，我照着搞了一遍结果根本没什么用，都是骗人的。所以，在说 webpack 之前，我想先谈一下前端打包方案这几年的演进历程，在什么场景下，我们遇到了什么问题，催生出了应对这些问题的工具。了解了需求和目的之后，你就知道什么时候 webpack 可以帮到你。我希望我用完之后很爽，你们用完之后也是。</p>
<h2><a id="user-content-先说说前端打包方案的黑暗历史" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E5%85%88%E8%AF%B4%E8%AF%B4%E5%89%8D%E7%AB%AF%E6%89%93%E5%8C%85%E6%96%B9%E6%A1%88%E7%9A%84%E9%BB%91%E6%9A%97%E5%8E%86%E5%8F%B2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>先说说前端打包方案的黑暗历史</h2>
<p>在很长的一段前端历史里，是不存在打包这个说法的。那个时候页面基本是纯静态的或者服务端输出的，没有 AJAX，也没有 jQuery。那个时候的 JavaScript 就像个玩具，用处大概就是在侧栏弄个时钟，用 media player 放个 mp3 之类的脚本，代码量不是很多，直接放在 <code>&lt;script&gt;</code> 标签里或者弄个 js 文件引一下就行，日子过得很轻松愉快。</p>
<p>随后的几年，人们开始尝试在一个页面里做更多的事情。容器的显示，隐藏，切换。用 css 写的弹层，图片轮播等等。但如果一个页面内不能向服务器请求数据，能做的事情毕竟有限的，代码的量也能维持在页面交互逻辑范围内。这时候很多人开始突破一个页面能做的事情的范围，使用隐藏的 iframe 和 flash 等作为和服务器通信的桥梁，新世界的大门慢慢地被打开，在一个页面内和服务器进行数据交互，意味着以前需要跳转多个页面的事情现在可以用一个页面搞定。但由于 iframe 和 flash 技术过于 tricky 和复杂，并没能得到广泛的推广。</p>
<p>直到 Google 推出 Gmail 的时候（2004 年），人们意识到了一个被忽略的接口，<a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest" rel="nofollow">XMLHttpRequest</a>, 也就是我们俗称的 AJAX, 这是一个使用方便的，兼容性良好的服务器通信接口。从此开始，我们的页面开始玩出各种花来了，前端一下子出现了各种各样的库，<a href="http://prototypejs.org/" rel="nofollow">Prototype</a>、<a href="https://dojotoolkit.org/" rel="nofollow">Dojo</a>、<a href="http://mootools.net/" rel="nofollow">MooTools</a>、<a href="https://www.sencha.com/products/extjs/" rel="nofollow">Ext JS</a>、<a href="https://jquery.com/" rel="nofollow">jQuery</a>…… 我们开始往页面里插入各种库和插件，我们的 js 文件也就爆炸了。</p>
<p>随着 js 能做的事情越来越多，引用越来越多，文件越来越大，加上当时大约只有 2Mbps 左右的网速，下载速度还不如 3G 网络，对 js 文件的压缩和合并的需求越来越强烈，当然这里面也有把代码混淆了不容易被盗用等其他因素在里面。<a href="http://crockford.com/javascript/jsmin" rel="nofollow">JSMin</a>、<a href="http://yui.github.io/yuicompressor/" rel="nofollow">YUI Compressor</a>、<a href="https://developers.google.com/closure/compiler/" rel="nofollow">Closure Compiler</a>、<a href="http://lisperator.net/uglifyjs/" rel="nofollow">UglifyJS</a> 等 js 文件压缩合并工具陆陆续续诞生了。压缩工具是有了，但我们得要执行它，最简单的办法呢，就是 windows 上搞个 bat 脚本，mac / linux 上搞个 bash 脚本，哪几个文件要合并在一块的，哪几个要压缩的，发布的时候运行一下脚本，生成压缩后的文件。</p>
<p>基于合并压缩技术，项目越做越大，问题也越来越多，大概就是以下这些问题：</p>
<ul>
<li>库和插件为了要给他人调用，肯定要找个地方注册，一般就是在 window 下申明一个全局的函数或对象。难保哪天用的两个库在全局用同样的名字，那就冲突了。</li>
<li>库和插件如果还依赖其他的库和插件，就要告知使用人，需要先引哪些依赖库，那些依赖库也有自己的依赖库的话，就要先引依赖库的依赖库，以此类推。</li>
</ul>
<p>恰好就在这个时候（2009 年），随着后端 JavaScript 技术的发展，人们提出了 <a href="http://wiki.commonjs.org/wiki/Modules/1.1.1" rel="nofollow">CommonJS</a> 的模块化规范，大概的语法是： 如果 <code>a.js</code> 依赖 <code>b.js</code> 和 <code>c.js</code>， 那么就在 <code>a.js</code> 的头部，引入这些依赖文件：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> b <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>./b<span class="pl-pds">'</span></span>)
<span class="pl-k">var</span> c <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>./c<span class="pl-pds">'</span></span>)</pre></div>
<p>那么变量 <code>b</code> 和 <code>c</code> 会是什么呢？那就是 b.js 和 c.js 导出的东西，比如 b.js 可以这样导出：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-c1">exports</span>.<span class="pl-en">square</span> <span class="pl-k">=</span> <span class="pl-k">function</span>(<span class="pl-smi">num</span>) {
  <span class="pl-k">return</span> num <span class="pl-k">*</span> num
}</pre></div>
<p>然后就可以在 a.js 使用这个 <code>square</code> 方法：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> n <span class="pl-k">=</span> <span class="pl-smi">b</span>.<span class="pl-en">square</span>(<span class="pl-c1">2</span>)</pre></div>
<p>如果 c.js 依赖 d.js， 导出的是一个 <code>Number</code>， 那么可以这样写：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> d <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>./d<span class="pl-pds">'</span></span>)
<span class="pl-c1">module</span>.<span class="pl-smi">exports</span> <span class="pl-k">=</span> <span class="pl-smi">d</span>.<span class="pl-c1">PI</span> <span class="pl-c"><span class="pl-c">//</span> 假设 d.PI 的值是 3.14159</span></pre></div>
<p>那么 a.js 中的变量 <code>c</code> 就是数字 <code>3.14159</code>，具体的语法规范可以查看 Node.js 的 <a href="https://nodejs.org/api/modules.html" rel="nofollow">文档</a>。</p>
<p>但是 CommonJS 在浏览器内并不适用。因为 <code>require()</code> 的返回是同步的，意味着有多个依赖的话需要一个一个依次下载，堵塞了 js 脚本的执行。所以人们就在 CommonJS 的基础上定义了 <a href="https://github.com/amdjs/amdjs-api">Asynchronous Module Definition (AMD)</a> 规范(2011 年），使用了异步回调的语法来并行下载多个依赖项，比如作为入口的 a.js 可以这样写：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-c1">require</span>([<span class="pl-s"><span class="pl-pds">'</span>./b<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>./c<span class="pl-pds">'</span></span>], <span class="pl-k">function</span>(<span class="pl-smi">b</span>, <span class="pl-smi">c</span>) {
  <span class="pl-k">var</span> n <span class="pl-k">=</span> <span class="pl-smi">b</span>.<span class="pl-en">square</span>(<span class="pl-c1">2</span>)
  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(c)
})</pre></div>
<p>相应的导出语法也是异步回调方式，比如 <code>c.js</code> 依赖 <code>d.js</code>， 就写成这样：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-en">define</span>([<span class="pl-s"><span class="pl-pds">'</span>./d<span class="pl-pds">'</span></span>], <span class="pl-k">function</span>(<span class="pl-smi">d</span>) {
  <span class="pl-k">return</span> <span class="pl-smi">d</span>.<span class="pl-c1">PI</span>
})</pre></div>
<p>可以看到，定义一个模块是使用 <code>define()</code> 函数，<code>define()</code> 和 <code>require()</code> 的区别是，<code>define()</code> 必须要在回调函数中返回一个值作为导出的东西，<code>require()</code> 不需要导出东西，因此回调函数中不需要返回值，也无法作为被依赖项被其他文件导入，因此一般用于入口文件，比如页面中这样加载 <code>a.js</code>:</p>
<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>js/require.js<span class="pl-pds">"</span></span> <span class="pl-e">data-main</span>=<span class="pl-s"><span class="pl-pds">"</span>js/a<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>
<p>以上是 AMD 规范的基本用法，更详细的就不多说了（反正也淘汰了～），有兴趣的可以看 <a href="http://requirejs.org/docs/api.html" rel="nofollow">这里</a>。</p>
<p>js 模块化问题基本解决了，css 和 html 也没闲着。什么 <a href="http://lesscss.org/" rel="nofollow">less</a>，<a href="http://sass-lang.com/" rel="nofollow">sass</a>，<a href="http://stylus-lang.com/" rel="nofollow">stylus</a> 的 css 预处理器横空出世，说能帮我们简化 css 的写法，自动给你加 vendor prefix。html 在这期间也出现了一堆模板语言，什么 <a href="http://handlebarsjs.com/" rel="nofollow">handlebars</a>，<a href="http://www.embeddedjs.com/" rel="nofollow">ejs</a>，<a href="http://jade-lang.com/" rel="nofollow">jade</a>，可以把 ajax 拿到的数据插入到模板中，然后用 innerHTML 显示到页面上。</p>
<p>托 AMD 和 CSS 预处理和模板语言的福，我们的编译脚本也洋洋洒洒写了百来行。命令行脚本有个不好的地方，就是 windows 和 mac/linux 是不通用的，如果有跨平台需求的话，windows 要装个可以执行 bash 脚本的命令行工具，比如 msys（目前最新的是 <a href="http://msys2.github.io/" rel="nofollow">msys2</a>），或者使用 php 或 python 等其他语言的脚本来编写，对于非全栈型的前端程序员来说，写 bash / php / python 还是很生涩的。因此我们需要一个简单的打包工具，可以利用各种编译工具，编译 / 压缩 js、css、html、图片等资源。然后 <a href="http://gruntjs.com/" rel="nofollow">Grunt</a> 产生了（2012 年），配置文件格式是我们最爱的 js，写法也很简单，社区有非常多的插件支持各种编译、lint、测试工具。一年多后另一个打包工具 <a href="http://gulpjs.com/" rel="nofollow">gulp</a> 诞生了，扩展性更强，采用流式处理效率更高。</p>
<p>依托 AMD 模块化编程，SPA(Single-page application) 的实现方式更为简单清晰，一个网页不再是传统的类似 word 文档的页面，而是一个完整的应用程序。SPA 应用有一个总的入口页面，我们通常把它命名为 index.html、app.html、main.html，这个 html 的 <code>&lt;body&gt;</code> 一般是空的，或者只有总的布局（layout），比如下图：</p>
<p><a target="_blank" rel="noopener noreferrer" href="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/layout.png"><img src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/layout.png" alt="layout" style="max-width:100%;"></a></p>
<p>布局会把 header、nav、footer 的内容填上，但 main 区域是个空的容器。这个作为入口的 html 最主要的工作是加载启动 SPA 的 js 文件，然后由 js 驱动，根据当前浏览器地址进行路由分发，加载对应的 AMD 模块，然后该 AMD 模块执行，渲染对应的 html 到页面指定的容器内（比如图中的 main）。在点击链接等交互时，页面不会跳转，而是由 js 路由加载对应的 AMD 模块，然后该 AMD 模块渲染对应的 html 到容器内。</p>
<p>虽然 AMD 模块让 SPA 更容易地实现，但小问题还是很多的：</p>
<ul>
<li>不是所有的第三方库都是 AMD 规范的，这时候要配置 <code>shim</code>，很麻烦。</li>
<li>虽然 RequireJS 支持通过插件把 html 作为依赖加载，但 html 里面的 <code>&lt;img&gt;</code> 的路径是个问题，需要使用绝对路径并且保持打包后的图片路径和打包前的路径不变，或者使用 html 模板语言把 <code>src</code> 写成变量，在运行时生成。</li>
<li>不支持动态加载 css，变通的方法是把所有的 css 文件合并压缩成一个文件，在入口的 html 页面一次性加载。</li>
<li>SPA 项目越做越大，一个应用打包后的 js 文件到了几 MB 的大小。虽然 <a href="http://requirejs.org/docs/optimization.html" rel="nofollow">r.js</a> 支持分模块打包，但配置很麻烦，因为模块之间会互相依赖，在配置的时候需要 exclude 那些通用的依赖项，而依赖项要在文件里一个个检查。</li>
<li>所有的第三方库都要自己一个个的下载，解压，放到某个目录下，更别提更新有多麻烦了。虽然可以用 <a href="https://www.npmjs.com/" rel="nofollow">npm</a> 包管理工具，但 npm 的包都是 CommonJS 规范的，给后端 Node.js 用的，只有部分支持 AMD 规范，而且在 npm 3 之前，这些包有依赖项的话也是不能用的。后来有个 <a href="https://bower.io/" rel="nofollow">bower</a> 包管理工具是专门的 web 前端仓库，这里的包一般都支持 AMD 规范。</li>
<li>AMD 规范定义和引用模块的语法太麻烦，上面介绍的 AMD 语法仅是最简单通用的语法，API 文档里面还有很多变异的写法，特别是当发生循环引用的时候（a 依赖 b，b 依赖 a），需要使用其他的 <a href="http://requirejs.org/docs/api.html#circular" rel="nofollow">语法</a> 解决这个问题。而且 npm 上很多前后端通用的库都是 CommonJS 的语法。后来很多人又开始尝试使用 ES6 模块规范，如何引用 ES6 模块又是一个大问题。</li>
<li>项目的文件结构不合理，因为 grunt/gulp 是按照文件格式批量处理的，所以一般会把 js、html、css、图片分别放在不同的目录下，所以同一个模块的文件会散落在不同的目录下，开发的时候找文件是个麻烦的事情。code review 时想知道一个文件是哪个模块的也很麻烦，解决办法比如又要在 imgs 目录下建立按模块命名的文件夹，里面再放图片。</li>
</ul>
<p>到了这里，我们的主角 webpack 登场了（2012 年）（此处应有掌声）。</p>
<p>和 webpack 差不多同期登场的还有 <a href="http://browserify.org/" rel="nofollow">Browserify</a>。这里简单介绍一下 Browserify。Browserify 的目的是让前端也能用 CommonJS 的语法 <code>require('module')</code> 来加载 js。它会从入口 js 文件开始，把所有的 <code>require()</code> 调用的文件打包合并到一个文件，这样就解决了异步加载的问题。那么 Browserify 有什么不足之处导致我不推荐使用它呢? 主要原因有下面几点：</p>
<ul>
<li>最主要的一点，Browserify 不支持把代码打包成多个文件，在有需要的时候加载。这就意味着访问任何一个页面都会全量加载所有文件。</li>
<li>Browserify 对其他非 js 文件的加载不够完善，因为它主要解决的是 <code>require()</code> js 模块的问题，其他文件不是它关心的部分。比如 html 文件里的 img 标签，它只能转成 <a href="https://en.wikipedia.org/wiki/Data_URI_scheme" rel="nofollow">Data URI</a> 的形式，而不能替换为打包后的路径。</li>
<li>因为上面一点 Browserify 对资源文件的加载支持不够完善，导致打包时一般都要配合 gulp 或 grunt 一块使用，无谓地增加了打包的难度。</li>
<li>Browserify 只支持 CommonJS 模块规范，不支持 AMD 和 ES6 模块规范，这意味旧的 AMD 模块和将来的 ES6 模块不能使用。</li>
</ul>
<p>基于以上几点，Browserify 并不是一个理想的选择。那么 webpack 是否解决了以上的几个问题呢? 废话，不然介绍它干嘛。那么下面章节我们用实战的方式来说明 webpack 是怎么解决上述的问题的。</p>
<h2><a id="user-content-上手先搞一个简单的-spa-应用" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E4%B8%8A%E6%89%8B%E5%85%88%E6%90%9E%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84-spa-%E5%BA%94%E7%94%A8"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>上手先搞一个简单的 SPA 应用</h2>
<p>一上来步子太大容易扯到蛋，让我们先弄个最简单的 webpack 配置来热一下身。</p>
<h3><a id="user-content-安装-nodejs" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E5%AE%89%E8%A3%85-nodejs"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>安装 Node.js</h3>
<p>webpack 是基于我大 Node.js 的打包工具，上来第一件事自然是先安装 Node.js 了，<a href="https://nodejs.org/" rel="nofollow">传送门 -&gt;</a>。</p>
<h3><a id="user-content-初始化一个项目" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AA%E9%A1%B9%E7%9B%AE"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>初始化一个项目</h3>
<p>我们先随便找个地方，建一个文件夹叫 <code>simple</code>， 然后在这里面搭项目。完成品在 <a href="https://github.com/fenivana/webpack-and-spa-guide/blob/master/examples/simple">examples/simple</a> 目录，大家搞的时候可以参照一下。我们先看一下目录结构：</p>
<pre><code>├── dist                      打包输出目录，只需部署这个目录到生产环境
├── package.json              项目配置信息
├── node_modules              npm 安装的依赖包都在这里面
├── src                       我们的源代码
│   ├── components            可以复用的模块放在这里面
│   ├── index.html            入口 html
│   ├── index.js              入口 js
│   ├── shared                公共函数库
│   └── views                 页面放这里
└── webpack.config.js         webpack 配置文件
</code></pre>
<p>打开命令行窗口，<code>cd</code> 到刚才建的 simple 目录。然后执行这个命令初始化项目：</p>
<div class="highlight highlight-source-shell"><pre>npm init</pre></div>
<p>命令行会要你输入一些配置信息，我们这里一路按回车下去，生成一个默认的项目配置文件 <code>package.json</code>。</p>
<h3><a id="user-content-给项目加上语法报错和代码规范检查" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E7%BB%99%E9%A1%B9%E7%9B%AE%E5%8A%A0%E4%B8%8A%E8%AF%AD%E6%B3%95%E6%8A%A5%E9%94%99%E5%92%8C%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E6%A3%80%E6%9F%A5"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>给项目加上语法报错和代码规范检查</h3>
<p>我们安装 <a href="http://eslint.org/" rel="nofollow">eslint</a>， 用来检查语法报错，当我们书写 js 时，有错误的地方会出现提示。</p>
<div class="highlight highlight-source-shell"><pre>npm install eslint eslint-config-enough babel-eslint eslint-loader --save-dev</pre></div>
<p><code>npm install</code> 可以一条命令同时安装多个包，包之间用空格分隔。包会被安装进 <code>node_modules</code> 目录中。</p>
<p><code>--save-dev</code> 会把安装的包和版本号记录到 <code>package.json</code> 中的 <code>devDependencies</code> 对象中，还有一个 <code>--save</code>， 会记录到 <code>dependencies</code> 对象中，它们的区别，我们可以先简单的理解为打包工具和测试工具用到的包使用 <code>--save-dev</code> 存到 <code>devDependencies</code>， 比如 eslint、webpack。浏览器中执行的 js 用到的包存到 <code>dependencies</code>， 比如 jQuery 等。那么它们用来干嘛的？</p>
<p>因为有些 npm 包安装是需要编译的，那么导致 windows / mac /linux 上编译出的可执行文件是不同的，也就是无法通用，因此我们在提交代码到 git 上去的时候，一般都会在 <code>.gitignore</code> 里指定忽略 node_modules 目录和里面的文件，这样其他人从 git 上拉下来的项目是没有 node_modules 目录的，这时我们需要运行</p>
<div class="highlight highlight-source-shell"><pre>npm install</pre></div>
<p>它会读取 <code>package.json</code> 中的 <code>devDependencies</code> 和 <code>dependencies</code> 字段，把记录的包的相应版本下载下来。</p>
<p>这里 <a href="https://github.com/fenivana/eslint-config-enough">eslint-config-enough</a> 是配置文件，它规定了代码规范，要使它生效，我们要在 <code>package.json</code> 中添加内容：</p>
<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>eslintConfig<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>extends<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>enough<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>env<span class="pl-pds">"</span></span>: {
      <span class="pl-s"><span class="pl-pds">"</span>browser<span class="pl-pds">"</span></span>: <span class="pl-c1">true</span>,
      <span class="pl-s"><span class="pl-pds">"</span>node<span class="pl-pds">"</span></span>: <span class="pl-c1">true</span>
    }
  }
}</pre></div>
<p>业界最有名的语法规范是 <a href="https://github.com/airbnb/javascript">airbnb</a> 出品的，但它规定的太死板了，比如不允许使用 <code>for-of</code> 和 <code>for-in</code> 等。感兴趣的同学可以参照 <a href="https://www.npmjs.com/package/eslint-config-airbnb" rel="nofollow">这里</a> 安装使用。</p>
<p><a href="https://github.com/babel/babel-eslint">babel-eslint</a> 是 <code>eslint-config-enough</code> 依赖的语法解析库，替代 eslint 默认的解析库以支持还未标准化的语法。比如 <a href="https://github.com/tc39/proposal-dynamic-import">import()</a>。</p>
<p><a href="https://github.com/MoOx/eslint-loader">eslint-loader</a> 用于在 webpack 编译的时候检查代码，如果有错误，webpack 会报错。</p>
<p>项目里安装了 eslint 还没用，我们的 IDE 和编辑器也得要装 eslint 插件支持它。</p>
<p><a href="https://code.visualstudio.com/" rel="nofollow">Visual Studio Code</a> 需要安装 <a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint" rel="nofollow">ESLint 扩展</a></p>
<p><a href="https://atom.io/" rel="nofollow">atom</a> 需要安装 <a href="https://atom.io/packages/linter" rel="nofollow">linter</a> 和 <a href="https://atom.io/packages/linter-eslint" rel="nofollow">linter-eslint</a> 这两个插件，装好后重启生效。</p>
<p><a href="https://www.jetbrains.com/webstorm/" rel="nofollow">WebStorm</a> 需要在设置中打开 eslint 开关：</p>
<p><a target="_blank" rel="noopener noreferrer" href="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/webstorm-eslint-config.png"><img src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/webstorm-eslint-config.png" alt="WebStorm ESLint Config" style="max-width:100%;"></a></p>
<h3><a id="user-content-写几个页面" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E5%86%99%E5%87%A0%E4%B8%AA%E9%A1%B5%E9%9D%A2"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>写几个页面</h3>
<p>我们写一个最简单的 SPA 应用来介绍 SPA 应用的内部工作原理。首先，建立 src/index.html 文件，内容如下：</p>
<div class="highlight highlight-text-html-basic"><pre>&lt;!DOCTYPE html&gt;
&lt;<span class="pl-ent">html</span>&gt;
  &lt;<span class="pl-ent">head</span>&gt;
    &lt;<span class="pl-ent">meta</span> <span class="pl-e">charset</span>=<span class="pl-s"><span class="pl-pds">"</span>utf-8<span class="pl-pds">"</span></span>&gt;
  &lt;/<span class="pl-ent">head</span>&gt;

  &lt;<span class="pl-ent">body</span>&gt;
  &lt;/<span class="pl-ent">body</span>&gt;
&lt;/<span class="pl-ent">html</span>&gt;</pre></div>
<p>它是一个空白页面，注意这里我们不需要自己写 <code>&lt;script src="index.js"&gt;&lt;/script&gt;</code>， 因为打包后的文件名和路径可能会变，所以我们用 webpack 插件帮我们自动加上。</p>
<p>src/index.js:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-c"><span class="pl-c">//</span> 引入 router</span>
<span class="pl-k">import</span> <span class="pl-smi">router</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>./router<span class="pl-pds">'</span></span>

<span class="pl-c"><span class="pl-c">//</span> 启动 router</span>
<span class="pl-smi">router</span>.<span class="pl-c1">start</span>()</pre></div>
<p>src/router.js:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-c"><span class="pl-c">//</span> 引入页面文件</span>
<span class="pl-k">import</span> <span class="pl-smi">foo</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>./views/foo<span class="pl-pds">'</span></span>
<span class="pl-k">import</span> <span class="pl-smi">bar</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>./views/bar<span class="pl-pds">'</span></span>

<span class="pl-k">const</span> <span class="pl-c1">routes</span> <span class="pl-k">=</span> {
  <span class="pl-s"><span class="pl-pds">'</span>/foo<span class="pl-pds">'</span></span><span class="pl-k">:</span> foo,
  <span class="pl-s"><span class="pl-pds">'</span>/bar<span class="pl-pds">'</span></span><span class="pl-k">:</span> bar
}

<span class="pl-c"><span class="pl-c">//</span> Router 类，用来控制页面根据当前 URL 切换</span>
<span class="pl-k">class</span> <span class="pl-en">Router</span> {
  <span class="pl-en">start</span>() {
    <span class="pl-c"><span class="pl-c">//</span> 点击浏览器后退 / 前进按钮时会触发 window.onpopstate 事件，我们在这时切换到相应页面</span>
    <span class="pl-c"><span class="pl-c">//</span> https://developer.mozilla.org/en-US/docs/Web/Events/popstate</span>
    <span class="pl-c1">window</span>.<span class="pl-c1">addEventListener</span>(<span class="pl-s"><span class="pl-pds">'</span>popstate<span class="pl-pds">'</span></span>, () <span class="pl-k">=&gt;</span> {
      <span class="pl-c1">this</span>.<span class="pl-c1">load</span>(<span class="pl-smi">location</span>.<span class="pl-c1">pathname</span>)
    })

    <span class="pl-c"><span class="pl-c">//</span> 打开页面时加载当前页面</span>
    <span class="pl-c1">this</span>.<span class="pl-c1">load</span>(<span class="pl-smi">location</span>.<span class="pl-c1">pathname</span>)
  }

  <span class="pl-c"><span class="pl-c">//</span> 前往 path，变更地址栏 URL，并加载相应页面</span>
  <span class="pl-en">go</span>(<span class="pl-smi">path</span>) {
    <span class="pl-c"><span class="pl-c">//</span> 变更地址栏 URL</span>
    <span class="pl-smi">history</span>.<span class="pl-en">pushState</span>({}, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>, path)
    <span class="pl-c"><span class="pl-c">//</span> 加载页面</span>
    <span class="pl-c1">this</span>.<span class="pl-c1">load</span>(path)
  }

  <span class="pl-c"><span class="pl-c">//</span> 加载 path 路径的页面</span>
  <span class="pl-en">load</span>(<span class="pl-smi">path</span>) {
    <span class="pl-c"><span class="pl-c">//</span> 首页</span>
    <span class="pl-k">if</span> (path <span class="pl-k">===</span> <span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>) path <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>/foo<span class="pl-pds">'</span></span>
    <span class="pl-c"><span class="pl-c">//</span> 创建页面实例</span>
    <span class="pl-k">const</span> <span class="pl-c1">view</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">routes</span>[path]()
    <span class="pl-c"><span class="pl-c">//</span> 调用页面方法，把页面加载到 document.body 中</span>
    <span class="pl-smi">view</span>.<span class="pl-en">mount</span>(<span class="pl-c1">document</span>.<span class="pl-c1">body</span>)
  }
}

<span class="pl-c"><span class="pl-c">//</span> 导出 router 实例</span>
<span class="pl-k">export</span> <span class="pl-c1">default</span> <span class="pl-smi">new</span> <span class="pl-en">Router</span>()</pre></div>
<p>src/views/foo/index.js:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-c"><span class="pl-c">//</span> 引入 router</span>
<span class="pl-k">import</span> <span class="pl-smi">router</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>../../router<span class="pl-pds">'</span></span>

<span class="pl-c"><span class="pl-c">//</span> 引入 html 模板，会被作为字符串引入</span>
<span class="pl-k">import</span> <span class="pl-smi">template</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>./index.html<span class="pl-pds">'</span></span>

<span class="pl-c"><span class="pl-c">//</span> 引入 css, 会生成 &lt;style&gt; 块插入到 &lt;head&gt; 头中</span>
<span class="pl-k">import</span> <span class="pl-s"><span class="pl-pds">'</span>./style.css<span class="pl-pds">'</span></span>

<span class="pl-c"><span class="pl-c">//</span> 导出类</span>
<span class="pl-k">export</span> <span class="pl-c1">default</span> <span class="pl-k">class</span> {
  <span class="pl-en">mount</span>(<span class="pl-smi">container</span>) {
    <span class="pl-c1">document</span>.<span class="pl-c1">title</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>
    <span class="pl-smi">container</span>.<span class="pl-smi">innerHTML</span> <span class="pl-k">=</span> template
    <span class="pl-smi">container</span>.<span class="pl-c1">querySelector</span>(<span class="pl-s"><span class="pl-pds">'</span>.foo__gobar<span class="pl-pds">'</span></span>).<span class="pl-c1">addEventListener</span>(<span class="pl-s"><span class="pl-pds">'</span>click<span class="pl-pds">'</span></span>, () <span class="pl-k">=&gt;</span> {
      <span class="pl-c"><span class="pl-c">//</span> 调用 router.go 方法加载 /bar 页面</span>
      <span class="pl-smi">router</span>.<span class="pl-c1">go</span>(<span class="pl-s"><span class="pl-pds">'</span>/bar<span class="pl-pds">'</span></span>)
    })
  }
}</pre></div>
<p>src/views/bar/index.js:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-c"><span class="pl-c">//</span> 引入 router</span>
<span class="pl-k">import</span> <span class="pl-smi">router</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>../../router<span class="pl-pds">'</span></span>

<span class="pl-c"><span class="pl-c">//</span> 引入 html 模板，会被作为字符串引入</span>
<span class="pl-k">import</span> <span class="pl-smi">template</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>./index.html<span class="pl-pds">'</span></span>

<span class="pl-c"><span class="pl-c">//</span> 引入 css, 会生成 &lt;style&gt; 块插入到 &lt;head&gt; 头中</span>
<span class="pl-k">import</span> <span class="pl-s"><span class="pl-pds">'</span>./style.css<span class="pl-pds">'</span></span>

<span class="pl-c"><span class="pl-c">//</span> 导出类</span>
<span class="pl-k">export</span> <span class="pl-c1">default</span> <span class="pl-k">class</span> {
  <span class="pl-en">mount</span>(<span class="pl-smi">container</span>) {
    <span class="pl-c1">document</span>.<span class="pl-c1">title</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>bar<span class="pl-pds">'</span></span>
    <span class="pl-smi">container</span>.<span class="pl-smi">innerHTML</span> <span class="pl-k">=</span> template
    <span class="pl-smi">container</span>.<span class="pl-c1">querySelector</span>(<span class="pl-s"><span class="pl-pds">'</span>.bar__gofoo<span class="pl-pds">'</span></span>).<span class="pl-c1">addEventListener</span>(<span class="pl-s"><span class="pl-pds">'</span>click<span class="pl-pds">'</span></span>, () <span class="pl-k">=&gt;</span> {
      <span class="pl-c"><span class="pl-c">//</span> 调用 router.go 方法加载 /foo 页面</span>
      <span class="pl-smi">router</span>.<span class="pl-c1">go</span>(<span class="pl-s"><span class="pl-pds">'</span>/foo<span class="pl-pds">'</span></span>)
    })
  }
}</pre></div>
<p>借助 webpack 插件，我们可以 <code>import</code> html, css 等其他格式的文件，文本类的文件会被储存为变量打包进 js 文件，其他二进制类的文件，比如图片，可以自己配置，小图片作为 <a href="https://en.wikipedia.org/wiki/Data_URI_scheme" rel="nofollow">Data URI</a> 打包进 js 文件，大文件打包为单独文件，我们稍后再讲这块。</p>
<p>其他的 src 目录下的文件大家自己浏览，拷贝一份到自己的工作目录，等会打包时会用到。</p>
<p>页面代码这样就差不多搞定了，接下来我们进入 webpack 的安装和配置阶段。现在我们还没有讲 webpack 配置所以页面还无法访问，等会弄好 webpack 配置后再看页面实际效果。</p>
<h3><a id="user-content-安装-webpack-和-babel" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E5%AE%89%E8%A3%85-webpack-%E5%92%8C-babel"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>安装 webpack 和 Babel</h3>
<p>我们把 webpack 和它的插件安装到项目：</p>
<div class="highlight highlight-source-shell"><pre>npm install webpack webpack-cli webpack-serve html-webpack-plugin html-loader css-loader style-loader file-loader url-loader --save-dev</pre></div>
<p><a href="https://github.com/webpack/webpack">webpack</a> 即 webpack 核心库。它提供了很多 <a href="https://webpack.js.org/api/node/" rel="nofollow">API</a>, 通过 Node.js 脚本中 <code>require('webpack')</code> 的方式来使用 webpack。</p>
<p><a href="https://github.com/webpack/webpack-cli">webpack-cli</a> 是 webpack 的命令行工具。让我们可以不用写打包脚本，只需配置打包配置文件，然后在命令行输入 <code>webpack-cli --config webpack.config.js</code> 来使用 webpack, 简单很多。webpack 4 之前命令行工具是集成在 webpack 包中的，4.0 开始 webpack 包本身不再集成 cli。</p>
<p><a href="https://github.com/webpack-contrib/webpack-serve">webpack-serve</a> 是 webpack 提供的用来开发调试的服务器，让你可以用 <a href="http://127.0.0.1:8080/" rel="nofollow">http://127.0.0.1:8080/</a> 这样的 url 打开页面来调试，有了它就不用配置 <a href="https://nginx.org/en/" rel="nofollow">nginx</a> 了，方便很多。</p>
<p><a href="https://github.com/ampedandwired/html-webpack-plugin">html-webpack-plugin</a>, <a href="https://github.com/webpack/html-loader">html-loader</a>, <a href="https://github.com/webpack/css-loader">css-loader</a>, <a href="https://github.com/webpack/style-loader">style-loader</a> 等看名字就知道是打包 html 文件，css 文件的插件，大家在这里可能会有疑问，<code>html-webpack-plugin</code> 和 <code>html-loader</code> 有什么区别，<code>css-loader</code> 和 <code>style-loader</code> 有什么区别，我们等会看配置文件的时候再讲。</p>
<p><a href="https://github.com/webpack/file-loader">file-loader</a> 和 <a href="https://github.com/webpack/url-loader">url-loader</a> 是打包二进制文件的插件，具体也在配置文件章节讲解。</p>
<p>接下来，为了能让不支持 ES6 的浏览器 （比如 IE) 也能照常运行，我们需要安装 <a href="http://babeljs.io/" rel="nofollow">babel</a>, 它会把我们写的 ES6 源代码转化成 ES5，这样我们源代码写 ES6，打包时生成 ES5。</p>
<div class="highlight highlight-source-shell"><pre>npm install babel-core babel-preset-env babel-loader --save-dev</pre></div>
<p>这里 <code>babel-core</code> 顾名思义是 babel 的核心编译器。<a href="https://babeljs.io/docs/plugins/preset-env/" rel="nofollow">babel-preset-env</a> 是一个配置文件，我们可以使用这个配置文件转换 <a href="http://exploringjs.com/es6/" rel="nofollow">ES2015</a>/<a href="https://leanpub.com/exploring-es2016-es2017/read" rel="nofollow">ES2016</a>/<a href="http://www.2ality.com/2016/02/ecmascript-2017.html" rel="nofollow">ES2017</a> 到 ES5，是的，不只 ES6 哦。babel 还有 <a href="http://babeljs.io/docs/plugins/" rel="nofollow">其他配置文件</a>。</p>
<p>光安装了 <code>babel-preset-env</code>，在打包时是不会生效的，需要在 <code>package.json</code> 加入 <code>babel</code> 配置：</p>
<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>babel<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>presets<span class="pl-pds">"</span></span>: [<span class="pl-s"><span class="pl-pds">"</span>env<span class="pl-pds">"</span></span>]
  }
}</pre></div>
<p>打包时 babel 会读取 <code>package.json</code> 中 <code>babel</code> 字段的内容，然后执行相应的转换。</p>
<p><a href="https://github.com/babel/babel-loader">babel-loader</a> 是 webpack 的插件，我们下面章节再说。</p>
<h3><a id="user-content-配置-webpack" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E9%85%8D%E7%BD%AE-webpack"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>配置 webpack</h3>
<p>包都装好了，接下来总算可以进入正题了。我们来创建 webpack 配置文件 <code>webpack.config.js</code>，注意这个文件是在 node.js 中运行的，因此不支持 ES6 的 <code>import</code> 语法。我们来看文件内容：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> { <span class="pl-c1">resolve</span> } <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>path<span class="pl-pds">'</span></span>)
<span class="pl-k">const</span> <span class="pl-c1">HtmlWebpackPlugin</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>html-webpack-plugin<span class="pl-pds">'</span></span>)
<span class="pl-k">const</span> <span class="pl-c1">history</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>connect-history-api-fallback<span class="pl-pds">'</span></span>)
<span class="pl-k">const</span> <span class="pl-c1">convert</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>koa-connect<span class="pl-pds">'</span></span>)

<span class="pl-c"><span class="pl-c">//</span> 使用 WEBPACK_SERVE 环境变量检测当前是否是在 webpack-server 启动的开发环境中</span>
<span class="pl-k">const</span> <span class="pl-c1">dev</span> <span class="pl-k">=</span> <span class="pl-c1">Boolean</span>(<span class="pl-c1">process</span>.<span class="pl-smi">env</span>.<span class="pl-c1">WEBPACK_SERVE</span>)

<span class="pl-c1">module</span>.<span class="pl-smi">exports</span> <span class="pl-k">=</span> {
  <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">  webpack 执行模式</span>
<span class="pl-c">  development：开发环境，它会在配置文件中插入调试相关的选项，比如 moduleId 使用文件路径方便调试</span>
<span class="pl-c">  production：生产环境，webpack 会将代码做压缩等优化</span>
<span class="pl-c">  <span class="pl-c">*/</span></span>
  mode<span class="pl-k">:</span> dev <span class="pl-k">?</span> <span class="pl-s"><span class="pl-pds">'</span>development<span class="pl-pds">'</span></span> <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>production<span class="pl-pds">'</span></span>,

  <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">  配置 source map</span>
<span class="pl-c">  开发模式下使用 cheap-module-eval-source-map, 生成的 source map 能和源码每行对应，方便打断点调试</span>
<span class="pl-c">  生产模式下使用 hidden-source-map, 生成独立的 source map 文件，并且不在 js 文件中插入 source map 路径，用于在 error report 工具中查看 （比如 Sentry)</span>
<span class="pl-c">  <span class="pl-c">*/</span></span>
  devtool<span class="pl-k">:</span> dev <span class="pl-k">?</span> <span class="pl-s"><span class="pl-pds">'</span>cheap-module-eval-source-map<span class="pl-pds">'</span></span> <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>hidden-source-map<span class="pl-pds">'</span></span>,

  <span class="pl-c"><span class="pl-c">//</span> 配置页面入口 js 文件</span>
  entry<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./src/index.js<span class="pl-pds">'</span></span>,

  <span class="pl-c"><span class="pl-c">//</span> 配置打包输出相关</span>
  output<span class="pl-k">:</span> {
    <span class="pl-c"><span class="pl-c">//</span> 打包输出目录</span>
    path<span class="pl-k">:</span> <span class="pl-en">resolve</span>(<span class="pl-c1">__dirname</span>, <span class="pl-s"><span class="pl-pds">'</span>dist<span class="pl-pds">'</span></span>),

    <span class="pl-c"><span class="pl-c">//</span> 入口 js 的打包输出文件名</span>
    filename<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>index.js<span class="pl-pds">'</span></span>
  },

  module<span class="pl-k">:</span> {
    <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">    配置各种类型文件的加载器，称之为 loader</span>
<span class="pl-c">    webpack 当遇到 import ... 时，会调用这里配置的 loader 对引用的文件进行编译</span>
<span class="pl-c">    <span class="pl-c">*/</span></span>
    rules<span class="pl-k">:</span> [
      {
        <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">        使用 babel 编译 ES6 / ES7 / ES8 为 ES5 代码</span>
<span class="pl-c">        使用正则表达式匹配后缀名为 .js 的文件</span>
<span class="pl-c">        <span class="pl-c">*/</span></span>
        test<span class="pl-k">:</span><span class="pl-sr"> <span class="pl-pds">/</span><span class="pl-cce">\.</span>js<span class="pl-k">$</span><span class="pl-pds">/</span></span>,

        <span class="pl-c"><span class="pl-c">//</span> 排除 node_modules 目录下的文件，npm 安装的包不需要编译</span>
        exclude<span class="pl-k">:</span><span class="pl-sr"> <span class="pl-pds">/</span>node_modules<span class="pl-pds">/</span></span>,

        <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">        use 指定该文件的 loader, 值可以是字符串或者数组。</span>
<span class="pl-c">        这里先使用 eslint-loader 处理，返回的结果交给 babel-loader 处理。loader 的处理顺序是从最后一个到第一个。</span>
<span class="pl-c">        eslint-loader 用来检查代码，如果有错误，编译的时候会报错。</span>
<span class="pl-c">        babel-loader 用来编译 js 文件。</span>
<span class="pl-c">        <span class="pl-c">*/</span></span>
        use<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>babel-loader<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>eslint-loader<span class="pl-pds">'</span></span>]
      },

      {
        <span class="pl-c"><span class="pl-c">//</span> 匹配 html 文件</span>
        test<span class="pl-k">:</span><span class="pl-sr"> <span class="pl-pds">/</span><span class="pl-cce">\.</span>html<span class="pl-k">$</span><span class="pl-pds">/</span></span>,
        <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">        使用 html-loader, 将 html 内容存为 js 字符串，比如当遇到</span>
<span class="pl-c">        import htmlString from './template.html';</span>
<span class="pl-c">        template.html 的文件内容会被转成一个 js 字符串，合并到 js 文件里。</span>
<span class="pl-c">        <span class="pl-c">*/</span></span>
        use<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>html-loader<span class="pl-pds">'</span></span>
      },

      {
        <span class="pl-c"><span class="pl-c">//</span> 匹配 css 文件</span>
        test<span class="pl-k">:</span><span class="pl-sr"> <span class="pl-pds">/</span><span class="pl-cce">\.</span>css<span class="pl-k">$</span><span class="pl-pds">/</span></span>,

        <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">        先使用 css-loader 处理，返回的结果交给 style-loader 处理。</span>
<span class="pl-c">        css-loader 将 css 内容存为 js 字符串，并且会把 background, @font-face 等引用的图片，</span>
<span class="pl-c">        字体文件交给指定的 loader 打包，类似上面的 html-loader, 用什么 loader 同样在 loaders 对象中定义，等会下面就会看到。</span>
<span class="pl-c">        <span class="pl-c">*/</span></span>
        use<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>style-loader<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>css-loader<span class="pl-pds">'</span></span>]
      },

      {
        <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">        匹配各种格式的图片和字体文件</span>
<span class="pl-c">        上面 html-loader 会把 html 中 &lt;img&gt; 标签的图片解析出来，文件名匹配到这里的 test 的正则表达式，</span>
<span class="pl-c">        css-loader 引用的图片和字体同样会匹配到这里的 test 条件</span>
<span class="pl-c">        <span class="pl-c">*/</span></span>
        test<span class="pl-k">:</span><span class="pl-sr"> <span class="pl-pds">/</span><span class="pl-cce">\.</span>(png<span class="pl-k">|</span>jpg<span class="pl-k">|</span>jpeg<span class="pl-k">|</span>gif<span class="pl-k">|</span>eot<span class="pl-k">|</span>ttf<span class="pl-k">|</span>woff<span class="pl-k">|</span>woff2<span class="pl-k">|</span>svg<span class="pl-k">|</span>svgz)(<span class="pl-cce">\?</span><span class="pl-c1">.</span><span class="pl-k">+</span>)<span class="pl-k">?</span><span class="pl-k">$</span><span class="pl-pds">/</span></span>,

        <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">        使用 url-loader, 它接受一个 limit 参数，单位为字节(byte)</span>
<span class="pl-c"></span>
<span class="pl-c">        当文件体积小于 limit 时，url-loader 把文件转为 Data URI 的格式内联到引用的地方</span>
<span class="pl-c">        当文件大于 limit 时，url-loader 会调用 file-loader, 把文件储存到输出目录，并把引用的文件路径改写成输出后的路径</span>
<span class="pl-c"></span>
<span class="pl-c">        比如 views/foo/index.html 中</span>
<span class="pl-c">        &lt;img src="smallpic.png"&gt;</span>
<span class="pl-c">        会被编译成</span>
<span class="pl-c">        &lt;img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAA..."&gt;</span>
<span class="pl-c"></span>
<span class="pl-c">        而</span>
<span class="pl-c">        &lt;img src="largepic.png"&gt;</span>
<span class="pl-c">        会被编译成</span>
<span class="pl-c">        &lt;img src="/f78661bef717cf2cc2c2e5158f196384.png"&gt;</span>
<span class="pl-c">        <span class="pl-c">*/</span></span>
        use<span class="pl-k">:</span> [
          {
            loader<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>url-loader<span class="pl-pds">'</span></span>,
            options<span class="pl-k">:</span> {
              limit<span class="pl-k">:</span> <span class="pl-c1">10000</span>
            }
          }
        ]
      }
    ]
  },

  <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">  配置 webpack 插件</span>
<span class="pl-c">  plugin 和 loader 的区别是，loader 是在 import 时根据不同的文件名，匹配不同的 loader 对这个文件做处理，</span>
<span class="pl-c">  而 plugin, 关注的不是文件的格式，而是在编译的各个阶段，会触发不同的事件，让你可以干预每个编译阶段。</span>
<span class="pl-c">  <span class="pl-c">*/</span></span>
  plugins<span class="pl-k">:</span> [
    <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">    html-webpack-plugin 用来打包入口 html 文件</span>
<span class="pl-c">    entry 配置的入口是 js 文件，webpack 以 js 文件为入口，遇到 import, 用配置的 loader 加载引入文件</span>
<span class="pl-c">    但作为浏览器打开的入口 html, 是引用入口 js 的文件，它在整个编译过程的外面，</span>
<span class="pl-c">    所以，我们需要 html-webpack-plugin 来打包作为入口的 html 文件</span>
<span class="pl-c">    <span class="pl-c">*/</span></span>
    <span class="pl-k">new</span> <span class="pl-en">HtmlWebpackPlugin</span>({
      <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">      template 参数指定入口 html 文件路径，插件会把这个文件交给 webpack 去编译，</span>
<span class="pl-c">      webpack 按照正常流程，找到 loaders 中 test 条件匹配的 loader 来编译，那么这里 html-loader 就是匹配的 loader</span>
<span class="pl-c">      html-loader 编译后产生的字符串，会由 html-webpack-plugin 储存为 html 文件到输出目录，默认文件名为 index.html</span>
<span class="pl-c">      可以通过 filename 参数指定输出的文件名</span>
<span class="pl-c">      html-webpack-plugin 也可以不指定 template 参数，它会使用默认的 html 模板。</span>
<span class="pl-c">      <span class="pl-c">*/</span></span>
      template<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./src/index.html<span class="pl-pds">'</span></span>,

      <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">      因为和 webpack 4 的兼容性问题，chunksSortMode 参数需要设置为 none</span>
<span class="pl-c">      https://github.com/jantimon/html-webpack-plugin/issues/870</span>
<span class="pl-c">      <span class="pl-c">*/</span></span>
      chunksSortMode<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>none<span class="pl-pds">'</span></span>
    })
  ]
}

<span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">配置开发时用的服务器，让你可以用 http://127.0.0.1:8080/ 这样的 url 打开页面来调试</span>
<span class="pl-c">并且带有热更新的功能，打代码时保存一下文件，浏览器会自动刷新。比 nginx 方便很多</span>
<span class="pl-c">如果是修改 css, 甚至不需要刷新页面，直接生效。这让像弹框这种需要点击交互后才会出来的东西调试起来方便很多。</span>
<span class="pl-c"></span>
<span class="pl-c">因为 webpack-cli 无法正确识别 serve 选项，使用 webpack-cli 执行打包时会报错。</span>
<span class="pl-c">因此我们在这里判断一下，仅当使用 webpack-serve 时插入 serve 选项。</span>
<span class="pl-c">issue：https://github.com/webpack-contrib/webpack-serve/issues/19</span>
<span class="pl-c"><span class="pl-c">*/</span></span>
<span class="pl-k">if</span> (dev) {
  <span class="pl-c1">module</span>.<span class="pl-smi">exports</span>.<span class="pl-smi">serve</span> <span class="pl-k">=</span> {
    <span class="pl-c"><span class="pl-c">//</span> 配置监听端口，默认值 8080</span>
    port<span class="pl-k">:</span> <span class="pl-c1">8080</span>,

    <span class="pl-c"><span class="pl-c">//</span> add: 用来给服务器的 koa 实例注入 middleware 增加功能</span>
    <span class="pl-en">add</span><span class="pl-k">:</span> <span class="pl-smi">app</span> <span class="pl-k">=&gt;</span> {
      <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">      配置 SPA 入口</span>
<span class="pl-c"></span>
<span class="pl-c">      SPA 的入口是一个统一的 html 文件，比如</span>
<span class="pl-c">      http://localhost:8080/foo</span>
<span class="pl-c">      我们要返回给它</span>
<span class="pl-c">      http://localhost:8080/index.html</span>
<span class="pl-c">      这个文件</span>
<span class="pl-c">      <span class="pl-c">*/</span></span>
      <span class="pl-smi">app</span>.<span class="pl-en">use</span>(<span class="pl-en">convert</span>(<span class="pl-en">history</span>()))
    }
  }
}</pre></div>
<h3><a id="user-content-走一个" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E8%B5%B0%E4%B8%80%E4%B8%AA"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>走一个</h3>
<p>配置 OK 了，接下来我们就运行一下吧。我们先试一下开发环境用的 <code>webpack-serve</code>:</p>
<div class="highlight highlight-source-shell"><pre>./node_modules/.bin/webpack-serve webpack.config.js</pre></div>
<p>执行时需要指定配置文件。</p>
<p>上面的命令适用于 Mac / Linux 等 * nix 系统，也适用于 Windows 上的 PowerShell 和 bash/zsh 环境（<a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" rel="nofollow">Windows Subsystem for Linux</a>, <a href="https://git-scm.com/downloads" rel="nofollow">Git Bash</a>、<a href="http://babun.github.io/" rel="nofollow">Babun</a>、<a href="http://msys2.github.io/" rel="nofollow">MSYS2</a> 等）。安利一下 Windows 同学使用 <a href="https://www.microsoft.com/store/p/ubuntu/9nblggh4msv6" rel="nofollow">Ubuntu on Windows</a>，可以避免很多跨平台的问题，比如设置环境变量。</p>
<p>如果使用 Windows 的 cmd.exe，请执行：</p>
<pre><code>node_modules\.bin\webpack-serve webpack.config.js
</code></pre>
<p>npm 会把包的可执行文件安装到 <code>./node_modules/.bin/</code> 目录下，所以我们要在这个目录下执行命令。</p>
<p>命令执行后，控制台显示：</p>
<pre><code>｢wdm｣: Compiled successfully。
</code></pre>
<p>这就代表编译成功了，我们可以在浏览器打开 <code>http://localhost:8080/</code> 看看效果。如果有报错，那可能是什么地方没弄对？请自己仔细检查一下～</p>
<p>我们可以随意更改一下 src 目录下的源代码，保存后，浏览器里的页面应该很快会有相应变化。</p>
<p>要退出编译，按 <code>ctrl+c</code>。</p>
<p>开发环境编译试过之后，我们试试看编译生产环境的代码，命令是：</p>
<div class="highlight highlight-source-shell"><pre>./node_modules/.bin/webpack-cli</pre></div>
<p>不需要指定配置文件，默认读取 webpack.config.js</p>
<p>执行脚本的命令有点麻烦，因此，我们可以利用 npm，把命令写在 <code>package.json</code> 中：</p>
<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>scripts<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>dev<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>webpack-serve webpack.config.js<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>build<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>webpack-cli<span class="pl-pds">"</span></span>
  }
}</pre></div>
<p><code>package.json</code> 中的 <code>scripts</code> 对象，可以用来写一些脚本命令，命令不需要前缀目录 <code>./node_modules/.bin/</code>，npm 会自动寻找该目录下的命令。我们可以执行：</p>
<div class="highlight highlight-source-shell"><pre>npm run dev</pre></div>
<p>来启动开发环境。</p>
<p>执行</p>
<div class="highlight highlight-source-shell"><pre>npm run build</pre></div>
<p>来打包生产环境的代码。</p>
<h2><a id="user-content-进阶配置" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E8%BF%9B%E9%98%B6%E9%85%8D%E7%BD%AE"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>进阶配置</h2>
<p>上面的项目虽然可以跑起来了，但有几个点我们还没有考虑到：</p>
<ul>
<li>设置静态资源的 url 路径前缀</li>
<li>各个页面分开打包</li>
<li>第三方库和业务代码分开打包</li>
<li>输出的 entry 文件加上 hash</li>
<li>开发环境关闭 performance.hints</li>
<li>配置 favicon</li>
<li>开发环境允许其他电脑访问</li>
<li>打包时自定义部分参数</li>
<li>webpack-serve 处理路径带后缀名的文件的特殊规则</li>
<li>代码中插入环境变量</li>
<li>简化 import 路径</li>
<li>优化 babel 编译后的代码性能</li>
<li>使用 webpack 自带的 ES6 模块处理功能</li>
<li>使用 autoprefixer 自动创建 css 的 vendor prefixes</li>
</ul>
<p>那么，让我们在上面的配置的基础上继续完善，下面的代码我们只写出改变的部分。代码在 <a href="https://github.com/fenivana/webpack-and-spa-guide/blob/master/examples/advanced">examples/advanced</a> 目录。</p>
<h3><a id="user-content-设置静态资源的-url-路径前缀" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E8%AE%BE%E7%BD%AE%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E7%9A%84-url-%E8%B7%AF%E5%BE%84%E5%89%8D%E7%BC%80"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>设置静态资源的 url 路径前缀</h3>
<p>现在我们的资源文件的 url 直接在根目录，比如 <code>http://127.0.0.1:8080/index.js</code>， 这样做缓存控制和 CDN 不是很方便，因此我们给资源文件的 url 加一个前缀，比如 <code>http://127.0.0.1:8080/assets/index.js</code>. 我们来修改一下 webpack 配置：</p>
<div class="highlight highlight-source-js"><pre>{
  output<span class="pl-k">:</span> {
    publicPath<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/assets/<span class="pl-pds">'</span></span>
  }
}</pre></div>
<p><code>webpack-serve</code> 也需要修改：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">if</span> (dev) {
  <span class="pl-c1">module</span>.<span class="pl-smi">exports</span>.<span class="pl-smi">serve</span> <span class="pl-k">=</span> {
    port<span class="pl-k">:</span> <span class="pl-c1">8080</span>,
    host<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>0.0.0.0<span class="pl-pds">'</span></span>,
    dev<span class="pl-k">:</span> {
      <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">      指定 webpack-dev-middleware 的 publicpath</span>
<span class="pl-c">      一般情况下与 output.publicPath 保持一致（除非 output.publicPath 使用的是相对路径）</span>
<span class="pl-c">      https://github.com/webpack/webpack-dev-middleware#publicpath</span>
<span class="pl-c">      <span class="pl-c">*/</span></span>
      publicPath<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/assets/<span class="pl-pds">'</span></span>
    },
    <span class="pl-en">add</span><span class="pl-k">:</span> <span class="pl-smi">app</span> <span class="pl-k">=&gt;</span> {
      <span class="pl-smi">app</span>.<span class="pl-en">use</span>(<span class="pl-en">convert</span>(<span class="pl-en">history</span>({
        index<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/assets/<span class="pl-pds">'</span></span> <span class="pl-c"><span class="pl-c">//</span> index.html 文件在 /assets/ 路径下</span>
      })))
    }
  }
}</pre></div>
<h3><a id="user-content-各个页面分开打包" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E5%90%84%E4%B8%AA%E9%A1%B5%E9%9D%A2%E5%88%86%E5%BC%80%E6%89%93%E5%8C%85"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>各个页面分开打包</h3>
<p>这样浏览器只需加载当前页面所需的代码。</p>
<p>webpack 可以使用异步加载文件的方式引用模块，我们使用 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function" rel="nofollow">async</a>/
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/await" rel="nofollow">await</a> 和 <a href="https://github.com/tc39/proposal-dynamic-import">dynamic import</a> 来实现：</p>
<p>src/router.js:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-c"><span class="pl-c">//</span> 将 async/await 转换成 ES5 代码后需要这个运行时库来支持</span>
<span class="pl-k">import</span> <span class="pl-s"><span class="pl-pds">'</span>regenerator-runtime/runtime<span class="pl-pds">'</span></span>

<span class="pl-k">const</span> <span class="pl-c1">routes</span> <span class="pl-k">=</span> {
  <span class="pl-c"><span class="pl-c">//</span> import() 返回 promise</span>
  <span class="pl-s"><span class="pl-pds">'</span><span class="pl-en">/foo</span><span class="pl-pds">'</span></span><span class="pl-k">:</span> () <span class="pl-k">=&gt;</span> <span class="pl-k">import</span>(<span class="pl-s"><span class="pl-pds">'</span>./views/foo<span class="pl-pds">'</span></span>),
  <span class="pl-s"><span class="pl-pds">'</span><span class="pl-en">/bar.do</span><span class="pl-pds">'</span></span><span class="pl-k">:</span> () <span class="pl-k">=&gt;</span> <span class="pl-k">import</span>(<span class="pl-s"><span class="pl-pds">'</span>./views/bar.do<span class="pl-pds">'</span></span>)
}

<span class="pl-k">class</span> <span class="pl-en">Router</span> {
  <span class="pl-c"><span class="pl-c">//</span> ...</span>

  <span class="pl-c"><span class="pl-c">//</span> 加载 path 路径的页面</span>
  <span class="pl-c"><span class="pl-c">//</span> 使用 async/await 语法</span>
  <span class="pl-k">async</span> <span class="pl-en">load</span>(<span class="pl-smi">path</span>) {
    <span class="pl-c"><span class="pl-c">//</span> 首页</span>
    <span class="pl-k">if</span> (path <span class="pl-k">===</span> <span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>) path <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>/foo<span class="pl-pds">'</span></span>

    <span class="pl-c"><span class="pl-c">//</span> 动态加载页面</span>
    <span class="pl-k">const</span> <span class="pl-c1">View</span> <span class="pl-k">=</span> (<span class="pl-k">await</span> routes[path]()).<span class="pl-smi">default</span>

    <span class="pl-c"><span class="pl-c">//</span> 创建页面实例</span>
    <span class="pl-k">const</span> <span class="pl-c1">view</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">View</span>()

    <span class="pl-c"><span class="pl-c">//</span> 调用页面方法，把页面加载到 document.body 中</span>
    <span class="pl-smi">view</span>.<span class="pl-en">mount</span>(<span class="pl-c1">document</span>.<span class="pl-c1">body</span>)
  }
}</pre></div>
<p>这样我们就不需要在开头把所有页面文件都 import 进来了。</p>
<p><a href="https://github.com/facebook/regenerator/tree/master/packages/regenerator-runtime">regenerator-runtime</a> 是 <a href="https://github.com/facebook/regenerator">regenerator</a>
的运行时库。Babel 通过插件 <a href="https://babeljs.io/docs/plugins/transform-regenerator" rel="nofollow">transform-regenerator</a> 使用 <code>regenerator</code> 将 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*" rel="nofollow">generator</a> 函数和 async/await
语法转换成 ES5 语法后，需要运行时库才能正确执行。</p>
<p>另外因为 <code>import()</code> 还没有正式进入标准，需要使用 <a href="https://babeljs.io/docs/plugins/syntax-dynamic-import/" rel="nofollow">syntax-dynamic-import</a> 来解析此语法。
我们可以安装 <a href="https://babeljs.io/docs/plugins/preset-stage-2/" rel="nofollow">babel-preset-stage-2</a>，它包含了 <code>import()</code> 和其他 stage 2 的语法支持。</p>
<div class="highlight highlight-source-shell"><pre>npm install regenerator-runtime babel-preset-stage-2 --save-dev</pre></div>
<p><code>package.json</code> 改一下：</p>
<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>babel<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>presets<span class="pl-pds">"</span></span>: [
      <span class="pl-s"><span class="pl-pds">"</span>env<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>stage-2<span class="pl-pds">"</span></span>
    ]
  }
}</pre></div>
<p>然后修改 webpack 配置：</p>
<div class="highlight highlight-source-js"><pre>{
  output<span class="pl-k">:</span> {
    <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">    代码中引用的文件（js、css、图片等）会根据配置合并为一个或多个包，我们称一个包为 chunk。</span>
<span class="pl-c">    每个 chunk 包含多个 modules。无论是否是 js，webpack 都将引入的文件视为一个 module。</span>
<span class="pl-c">    chunkFilename 用来配置这个 chunk 输出的文件名。</span>
<span class="pl-c"></span>
<span class="pl-c">    [chunkhash]：这个 chunk 的 hash 值，文件发生变化时该值也会变。使用 [chunkhash] 作为文件名可以防止浏览器读取旧的缓存文件。</span>
<span class="pl-c"></span>
<span class="pl-c">    还有一个占位符 [id]，编译时每个 chunk 会有一个id。</span>
<span class="pl-c">    我们在这里不使用它，因为这个 id 是个递增的数字，增加或减少一个chunk，都可能导致其他 chunk 的 id 发生改变，导致缓存失效。</span>
<span class="pl-c">    <span class="pl-c">*/</span></span>
    chunkFilename<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>[chunkhash].js<span class="pl-pds">'</span></span>,
  }
}</pre></div>
<h3><a id="user-content-第三方库和业务代码分开打包" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E5%92%8C%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81%E5%88%86%E5%BC%80%E6%89%93%E5%8C%85"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>第三方库和业务代码分开打包</h3>
<p>这样更新业务代码时可以借助浏览器缓存，用户不需要重新下载没有发生变化的第三方库。
Webpack 4 最大的改进便是自动拆分 chunk, 如果同时满足下列条件，chunk 就会被拆分：</p>
<ul>
<li>新的 chunk 能被复用，或者模块是来自 node_modules 目录</li>
<li>新的 chunk 大于 30Kb(min+gz 压缩前）</li>
<li>按需加载 chunk 的并发请求数量小于等于 5 个</li>
<li>页面初始加载时的并发请求数量小于等于 3 个</li>
</ul>
<p>一般情况只需配置这几个参数即可：</p>
<div class="highlight highlight-source-js"><pre>{
  plugins<span class="pl-k">:</span> [
    <span class="pl-c"><span class="pl-c">//</span> ...</span>

    <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">    使用文件路径的 hash 作为 moduleId。</span>
<span class="pl-c">    虽然我们使用 [chunkhash] 作为 chunk 的输出名，但仍然不够。</span>
<span class="pl-c">    因为 chunk 内部的每个 module 都有一个 id，webpack 默认使用递增的数字作为 moduleId。</span>
<span class="pl-c">    如果引入了一个新文件或删掉一个文件，可能会导致其他文件的 moduleId 也发生改变，</span>
<span class="pl-c">    那么受影响的 module 所在的 chunk 的 [chunkhash] 就会发生改变，导致缓存失效。</span>
<span class="pl-c">    因此使用文件路径的 hash 作为 moduleId 来避免这个问题。</span>
<span class="pl-c">    <span class="pl-c">*/</span></span>
    <span class="pl-k">new</span> <span class="pl-en">webpack.HashedModuleIdsPlugin</span>()
  ],

  optimization<span class="pl-k">:</span> {
    <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">    上面提到 chunkFilename 指定了 chunk 打包输出的名字，那么文件名存在哪里了呢？</span>
<span class="pl-c">    它就存在引用它的文件中。这意味着一个 chunk 文件名发生改变，会导致引用这个 chunk 文件也发生改变。</span>
<span class="pl-c"></span>
<span class="pl-c">    runtimeChunk 设置为 true, webpack 就会把 chunk 文件名全部存到一个单独的 chunk 中，</span>
<span class="pl-c">    这样更新一个文件只会影响到它所在的 chunk 和 runtimeChunk，避免了引用这个 chunk 的文件也发生改变。</span>
<span class="pl-c">    <span class="pl-c">*/</span></span>
    runtimeChunk<span class="pl-k">:</span> <span class="pl-c1">true</span>,

    splitChunks<span class="pl-k">:</span> {
      <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">      默认 entry 的 chunk 不会被拆分</span>
<span class="pl-c">      因为我们使用了 html-webpack-plugin 来动态插入 &lt;script&gt; 标签，entry 被拆成多个 chunk 也能自动被插入到 html 中，</span>
<span class="pl-c">      所以我们可以配置成 all, 把 entry chunk 也拆分了</span>
<span class="pl-c">      <span class="pl-c">*/</span></span>
      chunks<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>all<span class="pl-pds">'</span></span>
    }
  }
}</pre></div>
<p>webpack 4 支持更多的手动优化，详见： <a href="https://gist.github.com/sokra/1522d586b8e5c0f5072d7565c2bee693">https://gist.github.com/sokra/1522d586b8e5c0f5072d7565c2bee693</a></p>
<p>但正如 webpack 文档中所说，默认配置已经足够优化，在没有测试的情况下不要盲目手动优化。</p>
<h3><a id="user-content-输出的-entry-文件加上-hash" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E8%BE%93%E5%87%BA%E7%9A%84-entry-%E6%96%87%E4%BB%B6%E5%8A%A0%E4%B8%8A-hash"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>输出的 entry 文件加上 hash</h3>
<p>上面我们提到了 <code>chunkFilename</code> 使用 <code>[chunkhash]</code> 防止浏览器读取错误缓存，那么 entry 同样需要加上 hash。
但使用 <code>webpack-serve</code> 启动开发环境时，entry 文件是没有 <code>[chunkhash]</code> 的，用了会报错。
因此我们只在执行 <code>webpack-cli</code> 时使用 <code>[chunkhash]</code>。</p>
<div class="highlight highlight-source-js"><pre>{
  output<span class="pl-k">:</span> {
    filename<span class="pl-k">:</span> dev <span class="pl-k">?</span> <span class="pl-s"><span class="pl-pds">'</span>[name].js<span class="pl-pds">'</span></span> <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>[chunkhash].js<span class="pl-pds">'</span></span>
  }
}</pre></div>
<p>这里我们使用了 <code>[name]</code> 占位符。解释它之前我们先了解一下 <code>entry</code> 的完整定义:</p>
<div class="highlight highlight-source-js"><pre>{
  entry<span class="pl-k">:</span> {
    <span class="pl-c1">NAME</span><span class="pl-k">:</span> [<span class="pl-c1">FILE1</span>, <span class="pl-c1">FILE2</span>, <span class="pl-k">...</span>]
  }
}</pre></div>
<p>我们可以定义多个 entry 文件，比如你的项目有多个 html 入口文件，每个 html 对应一个或多个 entry 文件。
然后每个 entry 可以定义由多个 module 组成，这些 module 会依次执行。
在 webpack 4 之前，这是很有用的功能，比如之前提到的第三方库和业务代码分开打包，在以前，我们需要这么配置：</p>
<div class="highlight highlight-source-js"><pre>{
  entry {
    main<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./src/index.js<span class="pl-pds">'</span></span>,
    vendor<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>jquery<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>lodash<span class="pl-pds">'</span></span>]
  }
}</pre></div>
<p>entry 引用文件的规则和 <code>import</code> 是一样的，会寻找 <code>node_modules</code> 里的包。然后结合 <code>CommonsChunkPlugin</code> 把 vendor 定义的 module 从业务代码分离出来打包成一个单独的 chunk。
如果 entry 是一个 module，我们可以不使用数组的形式。</p>
<p>在 simple 项目中，我们配置了 <code>entry: './src/index.js'</code>，这是最简单的形式，转换成完整的写法就是：</p>
<div class="highlight highlight-source-js"><pre>{
  entry<span class="pl-k">:</span> {
    main<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>./src/index.js<span class="pl-pds">'</span></span>]
  }
}</pre></div>
<p>webpack 会给这个 entry 指定名字为 <code>main</code>。</p>
<p>看到这应该知道 <code>[name]</code> 的意思了吧？它就是 entry 的名字。</p>
<p>有人可能注意到官网文档中还有一个 <code>[hash]</code> 占位符，这个 hash 是整个编译过程产生的一个总的 hash 值，而不是单个文件的 hash 值，项目中任何一个文件的改动，都会造成这个 hash 值的改变。<code>[hash]</code> 占位符是始终存在的，但我们不希望修改一个文件导致所有输出的文件 hash 都改变，这样就无法利用浏览器缓存了。因此这个 <code>[hash]</code> 意义不大。</p>
<h3><a id="user-content-开发环境关闭-performancehints" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%85%B3%E9%97%AD-performancehints"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>开发环境关闭 performance.hints</h3>
<p>我们注意到运行开发环境是命令行会报一段 warning：</p>
<pre><code>WARNING in asset size limit: The following asset(s) exceed the recommended size limit (250 kB).
This can impact web performance.
</code></pre>
<p>这是说建议每个输出的 js 文件的大小不要超过 250k。但开发环境因为包含了 sourcemap 并且代码未压缩所以一般都会超过这个大小，所以我们可以在开发环境把这个 warning 关闭。</p>
<p>webpack 配置中加入：</p>
<div class="highlight highlight-source-js"><pre>{
  <span class="pl-c1">performance</span><span class="pl-k">:</span> {
    hints<span class="pl-k">:</span> dev <span class="pl-k">?</span> <span class="pl-c1">false</span> <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>warning<span class="pl-pds">'</span></span>
  }
}</pre></div>
<h3><a id="user-content-配置-favicon" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E9%85%8D%E7%BD%AE-favicon"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>配置 favicon</h3>
<p>在 src 目录中放一张 favicon.png，然后 <code>src/index.html</code> 的 <code>&lt;head&gt;</code> 中插入：</p>
<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">link</span> <span class="pl-e">rel</span>=<span class="pl-s"><span class="pl-pds">"</span>icon<span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>image/png<span class="pl-pds">"</span></span> <span class="pl-e">href</span>=<span class="pl-s"><span class="pl-pds">"</span>favicon.png<span class="pl-pds">"</span></span>&gt;</pre></div>
<p>修改 webpack 配置：</p>
<div class="highlight highlight-source-js"><pre>{
  module<span class="pl-k">:</span> {
    rules<span class="pl-k">:</span> [
      {
        test<span class="pl-k">:</span><span class="pl-sr"> <span class="pl-pds">/</span><span class="pl-cce">\.</span>html<span class="pl-k">$</span><span class="pl-pds">/</span></span>,
        use<span class="pl-k">:</span> [
          {
            loader<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>html-loader<span class="pl-pds">'</span></span>,
            options<span class="pl-k">:</span> {
              <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">              html-loader 接受 attrs 参数，表示什么标签的什么属性需要调用 webpack 的 loader 进行打包。</span>
<span class="pl-c">              比如 &lt;img&gt; 标签的 src 属性，webpack 会把 &lt;img&gt; 引用的图片打包，然后 src 的属性值替换为打包后的路径。</span>
<span class="pl-c">              使用什么 loader 代码，同样是在 module.rules 定义中使用匹配的规则。</span>
<span class="pl-c"></span>
<span class="pl-c">              如果 html-loader 不指定 attrs 参数，默认值是 img:src, 意味着会默认打包 &lt;img&gt; 标签的图片。</span>
<span class="pl-c">              这里我们加上 &lt;link&gt; 标签的 href 属性，用来打包入口 index.html 引入的 favicon.png 文件。</span>
<span class="pl-c">              <span class="pl-c">*/</span></span>
              attrs<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>img:src<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>link:href<span class="pl-pds">'</span></span>]
            }
          }
        ]
      },

      {
        <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">        匹配 favicon.png</span>
<span class="pl-c">        上面的 html-loader 会把入口 index.html 引用的 favicon.png 图标文件解析出来进行打包</span>
<span class="pl-c">        打包规则就按照这里指定的 loader 执行</span>
<span class="pl-c">        <span class="pl-c">*/</span></span>
        test<span class="pl-k">:</span><span class="pl-sr"> <span class="pl-pds">/</span>favicon<span class="pl-cce">\.</span>png<span class="pl-k">$</span><span class="pl-pds">/</span></span>,

        use<span class="pl-k">:</span> [
          {
            <span class="pl-c"><span class="pl-c">//</span> 使用 file-loader</span>
            loader<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>file-loader<span class="pl-pds">'</span></span>,
            options<span class="pl-k">:</span> {
              <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">              name：指定文件输出名</span>
<span class="pl-c">              [hash] 为源文件的hash值，[ext] 为后缀。</span>
<span class="pl-c">              <span class="pl-c">*/</span></span>
              name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>[hash].[ext]<span class="pl-pds">'</span></span>
            }
          }
        ]
      },

      <span class="pl-c"><span class="pl-c">//</span> 图片文件的加载配置增加一个 exclude 参数</span>
      {
        test<span class="pl-k">:</span><span class="pl-sr"> <span class="pl-pds">/</span><span class="pl-cce">\.</span>(png<span class="pl-k">|</span>jpg<span class="pl-k">|</span>jpeg<span class="pl-k">|</span>gif<span class="pl-k">|</span>eot<span class="pl-k">|</span>ttf<span class="pl-k">|</span>woff<span class="pl-k">|</span>woff2<span class="pl-k">|</span>svg<span class="pl-k">|</span>svgz)(<span class="pl-cce">\?</span><span class="pl-c1">.</span><span class="pl-k">+</span>)<span class="pl-k">?</span><span class="pl-k">$</span><span class="pl-pds">/</span></span>,

        <span class="pl-c"><span class="pl-c">//</span> 排除 favicon.png, 因为它已经由上面的 loader 处理了。如果不排除掉，它会被这个 loader 再处理一遍</span>
        exclude<span class="pl-k">:</span><span class="pl-sr"> <span class="pl-pds">/</span>favicon<span class="pl-cce">\.</span>png<span class="pl-k">$</span><span class="pl-pds">/</span></span>,

        use<span class="pl-k">:</span> [
          {
            loader<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>url-loader<span class="pl-pds">'</span></span>,
            options<span class="pl-k">:</span> {
              limit<span class="pl-k">:</span> <span class="pl-c1">10000</span>
            }
          }
        ]
      }
    ]
  }
}</pre></div>
<p>其实 html-webpack-plugin 接受一个 <code>favicon</code> 参数，可以指定 favicon 文件路径，会自动打包插入到 html 文件中。但它有个 <a href="https://github.com/ampedandwired/html-webpack-plugin/issues/364">bug</a>，打包后的文件名路径不带 hash，就算有 hash，它也是 [hash]，而不是 [chunkhash]。导致修改代码也会改变 favicon 打包输出的文件名。issue 中提到的 favicons-webpack-plugin 倒是可以用，但它依赖 PhantomJS, 非常大。</p>
<h3><a id="user-content-开发环境允许其他电脑访问" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%85%81%E8%AE%B8%E5%85%B6%E4%BB%96%E7%94%B5%E8%84%91%E8%AE%BF%E9%97%AE"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>开发环境允许其他电脑访问</h3>
<div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> <span class="pl-c1">internalIp</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>internal-ip<span class="pl-pds">'</span></span>)

<span class="pl-c1">module</span>.<span class="pl-smi">exports</span>.<span class="pl-smi">serve</span> <span class="pl-k">=</span> {
  host<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>0.0.0.0<span class="pl-pds">'</span></span>,
  hot<span class="pl-k">:</span> {
    host<span class="pl-k">:</span> {
      client<span class="pl-k">:</span> <span class="pl-smi">internalIp</span>.<span class="pl-smi">v4</span>.<span class="pl-en">sync</span>(),
      server<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>0.0.0.0<span class="pl-pds">'</span></span>
    }
  },
  
  <span class="pl-c"><span class="pl-c">//</span> ...</span>
}</pre></div>
<h3><a id="user-content-打包时自定义部分参数" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E6%89%93%E5%8C%85%E6%97%B6%E8%87%AA%E5%AE%9A%E4%B9%89%E9%83%A8%E5%88%86%E5%8F%82%E6%95%B0"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>打包时自定义部分参数</h3>
<p>在多人开发时，每个人可能需要有自己的配置，比如说 webpack-serve 监听的端口号，如果写死在 webpack 配置里，而那个端口号在某个同学的电脑上被其他进程占用了，简单粗暴的修改 <code>webpack.config.js</code> 会导致提交代码后其他同学的端口也被改掉。</p>
<p>还有一点就是开发环境、测试环境、生产环境的部分 webpack 配置是不同的，比如 <code>publicPath</code> 在生产环境可能要配置一个 CDN 地址。</p>
<p>我们在根目录建立一个文件夹 <code>config</code>，里面创建 3 个配置文件：</p>
<ul>
<li>default.js: 生产环境</li>
</ul>
<div class="highlight highlight-source-js"><pre><span class="pl-c1">module</span>.<span class="pl-smi">exports</span> <span class="pl-k">=</span> {
  publicPath<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>http://cdn.example.com/assets/<span class="pl-pds">'</span></span>
}</pre></div>
<ul>
<li>dev.js: 默认开发环境</li>
</ul>
<div class="highlight highlight-source-js"><pre><span class="pl-c1">module</span>.<span class="pl-smi">exports</span> <span class="pl-k">=</span> {
  publicPath<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>/assets/<span class="pl-pds">'</span></span>,

  serve<span class="pl-k">:</span> {
    port<span class="pl-k">:</span> <span class="pl-c1">8090</span>
  }
}</pre></div>
<ul>
<li>local.js: 个人本地环境，在 dev.js 基础上修改部分参数。</li>
</ul>
<div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> <span class="pl-c1">config</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>./dev<span class="pl-pds">'</span></span>)
<span class="pl-smi">config</span>.<span class="pl-smi">serve</span>.<span class="pl-c1">port</span> <span class="pl-k">=</span> <span class="pl-c1">8070</span>
<span class="pl-c1">module</span>.<span class="pl-smi">exports</span> <span class="pl-k">=</span> config</pre></div>
<p><code>package.json</code> 修改 <code>scripts</code>:</p>
<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>scripts<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>local<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>npm run webpack-serve --config=local<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>dev<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>npm run webpack-serve --config=dev<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>webpack-serve<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>webpack-serve webpack.config.js<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>build<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>webpack-cli<span class="pl-pds">"</span></span>
  }
}</pre></div>
<p>webpack 配置修改：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-c"><span class="pl-c">//</span> ...</span>
<span class="pl-k">const</span> <span class="pl-c1">url</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>url<span class="pl-pds">'</span></span>)

<span class="pl-k">const</span> <span class="pl-c1">config</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>./config/<span class="pl-pds">'</span></span> <span class="pl-k">+</span> (<span class="pl-c1">process</span>.<span class="pl-smi">env</span>.<span class="pl-smi">npm_config_config</span> <span class="pl-k">||</span> <span class="pl-s"><span class="pl-pds">'</span>default<span class="pl-pds">'</span></span>))

<span class="pl-c1">module</span>.<span class="pl-smi">exports</span> <span class="pl-k">=</span> {
  <span class="pl-c"><span class="pl-c">//</span> ...</span>
  
  output<span class="pl-k">:</span> {
    <span class="pl-c"><span class="pl-c">//</span> ...</span>
    publicPath<span class="pl-k">:</span> <span class="pl-smi">config</span>.<span class="pl-smi">publicPath</span>
  }
  
  <span class="pl-c"><span class="pl-c">//</span> ...</span>
}

<span class="pl-k">if</span> (dev) {
  <span class="pl-c1">module</span>.<span class="pl-smi">exports</span>.<span class="pl-smi">serve</span> <span class="pl-k">=</span> {
    host<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>0.0.0.0<span class="pl-pds">'</span></span>,
    port<span class="pl-k">:</span> <span class="pl-smi">config</span>.<span class="pl-smi">serve</span>.<span class="pl-c1">port</span>,
    dev<span class="pl-k">:</span> {
      publicPath<span class="pl-k">:</span> <span class="pl-smi">config</span>.<span class="pl-smi">publicPath</span>
    },
    <span class="pl-en">add</span><span class="pl-k">:</span> <span class="pl-smi">app</span> <span class="pl-k">=&gt;</span> {
      <span class="pl-smi">app</span>.<span class="pl-en">use</span>(<span class="pl-en">convert</span>(<span class="pl-en">history</span>({
        index<span class="pl-k">:</span> <span class="pl-smi">url</span>.<span class="pl-c1">parse</span>(<span class="pl-smi">config</span>.<span class="pl-smi">publicPath</span>).<span class="pl-c1">pathname</span>
      })))
    }
  }
}</pre></div>
<p>这里的关键是 <code>npm run</code> 传进来的自定义参数可以通过 <code>process.env.npm_config_*</code> 获得。参数中如果有 <code>-</code> 会被转成 <code>_</code>。</p>
<p>还有一点，我们不需要把自己个人用的配置文件提交到 git，所以我们在 <code>.gitignore</code> 中加入：</p>
<pre><code>config/*
!config/default.js
!config/dev.js
</code></pre>
<p>把 <code>config</code> 目录排除掉，但是保留生产环境和 dev 默认配置文件。</p>
<p>可能有同学注意到了 <code>webpack-cli</code> 可以通过 <a href="https://webpack.js.org/api/cli/#environment-options" rel="nofollow">--env</a> 的方式从命令行传参给脚本，遗憾的是 <code>webpack-cli</code> <a href="https://github.com/webpack-contrib/webpack-serve#webpack-function-configs">不支持</a>。</p>
<h3><a id="user-content-webpack-serve-处理带后缀名的文件的特殊规则" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#webpack-serve-%E5%A4%84%E7%90%86%E5%B8%A6%E5%90%8E%E7%BC%80%E5%90%8D%E7%9A%84%E6%96%87%E4%BB%B6%E7%9A%84%E7%89%B9%E6%AE%8A%E8%A7%84%E5%88%99"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>webpack-serve 处理带后缀名的文件的特殊规则</h3>
<p>当处理带后缀名的请求时，比如 <a href="http://localhost:8080/bar.do" rel="nofollow">http://localhost:8080/bar.do</a> ，<code>connect-history-api-fallback</code> 会认为它应该是一个实际存在的文件，就算找不到该文件，也不会 fallback 到 index.html，而是返回 404。但在 SPA 应用中这不是我们希望的。</p>
<p>幸好有一个配置选项 <code>disableDotRule: true</code> 可以禁用这个规则，使带后缀的文件当不存在时也能 fallback 到 index.html</p>
<div class="highlight highlight-source-js"><pre><span class="pl-c1">module</span>.<span class="pl-smi">exports</span>.<span class="pl-smi">serve</span> <span class="pl-k">=</span> {
  <span class="pl-c"><span class="pl-c">//</span> ...</span>
  <span class="pl-en">add</span><span class="pl-k">:</span> <span class="pl-smi">app</span> <span class="pl-k">=&gt;</span> {
    <span class="pl-smi">app</span>.<span class="pl-en">use</span>(<span class="pl-en">convert</span>(<span class="pl-en">history</span>({
      <span class="pl-c"><span class="pl-c">//</span> ...</span>
      disableDotRule<span class="pl-k">:</span> <span class="pl-c1">true</span>,
      htmlAcceptHeaders<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>text/html<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>application/xhtml+xml<span class="pl-pds">'</span></span>] <span class="pl-c"><span class="pl-c">//</span> 需要配合 disableDotRule 一起使用</span>
    })))
  }
}</pre></div>
<h3><a id="user-content-代码中插入环境变量" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E4%BB%A3%E7%A0%81%E4%B8%AD%E6%8F%92%E5%85%A5%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>代码中插入环境变量</h3>
<p>在业务代码中，有些变量在开发环境和生产环境是不同的，比如域名、后台 API 地址等。还有开发环境可能需要打印调试信息等。</p>
<p>我们可以使用 <a href="https://webpack.js.org/plugins/define-plugin/" rel="nofollow">DefinePlugin</a> 插件在打包时往代码中插入需要的环境变量。</p>
<div class="highlight highlight-source-js"><pre><span class="pl-c"><span class="pl-c">//</span> ...</span>
<span class="pl-k">const</span> <span class="pl-c1">pkgInfo</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>./package.json<span class="pl-pds">'</span></span>)

<span class="pl-c1">module</span>.<span class="pl-smi">exports</span> <span class="pl-k">=</span> {
  <span class="pl-c"><span class="pl-c">//</span> ...</span>
  plugins<span class="pl-k">:</span> [
    <span class="pl-k">new</span> <span class="pl-en">webpack.DefinePlugin</span>({
      <span class="pl-c1">DEBUG</span><span class="pl-k">:</span> dev,
      <span class="pl-c1">VERSION</span><span class="pl-k">:</span> <span class="pl-c1">JSON</span>.<span class="pl-c1">stringify</span>(<span class="pl-smi">pkgInfo</span>.<span class="pl-c1">version</span>),
      <span class="pl-c1">CONFIG</span><span class="pl-k">:</span> <span class="pl-c1">JSON</span>.<span class="pl-c1">stringify</span>(<span class="pl-smi">config</span>.<span class="pl-smi">runtimeConfig</span>)
    }),
    <span class="pl-c"><span class="pl-c">//</span> ...</span>
  ]
}</pre></div>
<p>DefinePlugin 插件的原理很简单，如果我们在代码中写：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-c1">DEBUG</span>)</pre></div>
<p>它会做类似这样的处理：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-s"><span class="pl-pds">'</span>console.log(DEBUG)<span class="pl-pds">'</span></span>.<span class="pl-c1">replace</span>(<span class="pl-s"><span class="pl-pds">'</span>DEBUG<span class="pl-pds">'</span></span>, <span class="pl-c1">true</span>)</pre></div>
<p>最后生成：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-c1">true</span>)</pre></div>
<p>这里有一点需要注意，像这里的 <code>VERSION</code>， 如果我们不对 <code>pkgInfo.version</code> 做 <code>JSON.stringify()</code>，</p>
<div class="highlight highlight-source-js"><pre><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-c1">VERSION</span>)</pre></div>
<p>然后做替换操作：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-s"><span class="pl-pds">'</span>console.log(VERSION)<span class="pl-pds">'</span></span>.<span class="pl-c1">replace</span>(<span class="pl-s"><span class="pl-pds">'</span>VERSION<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>1.0.0<span class="pl-pds">'</span></span>)</pre></div>
<p>最后生成：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-c1">1.0</span>.<span class="pl-ii">0</span>)</pre></div>
<p>这样语法就错误了。所以，我们需要 <code>JSON.stringify(pkgInfo.version)</code> 转一下变成 <code>'"1.0.0"'</code>，替换的时候才会带引号。</p>
<p>还有一点，webpack 打包压缩的时候，会把代码进行优化，比如：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">if</span> (<span class="pl-c1">DEBUG</span>) {
  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>debug mode<span class="pl-pds">'</span></span>)
} <span class="pl-k">else</span> {
  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>production mode<span class="pl-pds">'</span></span>)
}</pre></div>
<p>会被编译成：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">if</span> (<span class="pl-c1">false</span>) {
  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>debug mode<span class="pl-pds">'</span></span>)
} <span class="pl-k">else</span> {
  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>production mode<span class="pl-pds">'</span></span>)
}</pre></div>
<p>然后压缩优化为：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>production mode<span class="pl-pds">'</span></span>)</pre></div>
<h3><a id="user-content-简化-import-路径" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E7%AE%80%E5%8C%96-import-%E8%B7%AF%E5%BE%84"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>简化 import 路径</h3>
<p>文件 a 引入文件 b 时，b 的路径是相对于 a 文件所在目录的。如果 a 和 b 在不同的目录，藏得又深，写起来就会很麻烦：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">import</span> <span class="pl-smi">b</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>../../../components/b<span class="pl-pds">'</span></span></pre></div>
<p>为了方便，我们可以定义一个路径别名（alias）：</p>
<div class="highlight highlight-source-js"><pre>resolve<span class="pl-k">:</span> {
  alias<span class="pl-k">:</span> {
    <span class="pl-s"><span class="pl-pds">'</span>~<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-en">resolve</span>(<span class="pl-c1">__dirname</span>, <span class="pl-s"><span class="pl-pds">'</span>src<span class="pl-pds">'</span></span>)
  }
}</pre></div>
<p>这样，我们可以以 <code>src</code> 目录为基础路径来 <code>import</code> 文件：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-k">import</span> <span class="pl-smi">b</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>~/components/b<span class="pl-pds">'</span></span></pre></div>
<p>html 中的 <code>&lt;img&gt;</code> 标签没法使用这个别名功能，但 <code>html-loader</code> 有一个 <code>root</code> 参数，可以使 <code>/</code> 开头的文件相对于 <code>root</code> 目录解析。</p>
<div class="highlight highlight-source-js"><pre>{
  test<span class="pl-k">:</span><span class="pl-sr"> <span class="pl-pds">/</span><span class="pl-cce">\.</span>html<span class="pl-k">$</span><span class="pl-pds">/</span></span>,
  use<span class="pl-k">:</span> [
    {
      loader<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>html-loader<span class="pl-pds">'</span></span>,
      options<span class="pl-k">:</span> {
        root<span class="pl-k">:</span> <span class="pl-en">resolve</span>(<span class="pl-c1">__dirname</span>, <span class="pl-s"><span class="pl-pds">'</span>src<span class="pl-pds">'</span></span>),
        attrs<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>img:src<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>link:href<span class="pl-pds">'</span></span>]
      }
    }
  ]
}</pre></div>
<p>那么，<code>&lt;img src="/favicon.png"&gt;</code> 就能顺利指向到 src 目录下的 favicon.png 文件，不需要关心当前文件和目标文件的相对路径。</p>
<p>PS: 在调试 <code>&lt;img&gt;</code> 标签的时候遇到一个坑，<code>html-loader</code> 会解析 <code>&lt;!-- --&gt;</code> 注释中的内容，之前在注释中写的</p>
<div class="highlight highlight-text-html-basic"><pre><span class="pl-c"><span class="pl-c">&lt;!--</span></span>
<span class="pl-c">大于 10kb 的图片，图片会被储存到输出目录，src 会被替换为打包后的路径</span>
<span class="pl-c">&lt;img src="/assets/f78661bef717cf2cc2c2e5158f196384.png"&gt;</span>
<span class="pl-c"><span class="pl-c">--&gt;</span></span></pre></div>
<p>之前因为没有加 <code>root</code> 参数，所以 <code>/</code> 开头的文件名不会被解析，加了 <code>root</code> 导致编译时报错，找不到该文件。大家记住这一点。</p>
<h3><a id="user-content-优化-babel-编译后的代码性能" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E4%BC%98%E5%8C%96-babel-%E7%BC%96%E8%AF%91%E5%90%8E%E7%9A%84%E4%BB%A3%E7%A0%81%E6%80%A7%E8%83%BD"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>优化 babel 编译后的代码性能</h3>
<p>babel 编译后的代码一般会造成性能损失，babel 提供了一个 <a href="http://babeljs.io/docs/plugins/preset-env/#optionsloose" rel="nofollow">loose</a> 选项，使编译后的代码不需要完全遵循 ES6 规定，简化编译后的代码，提高代码执行效率：</p>
<p>package.json:</p>
<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>babel<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>presets<span class="pl-pds">"</span></span>: [
      [
        <span class="pl-s"><span class="pl-pds">"</span>env<span class="pl-pds">"</span></span>,
        {
          <span class="pl-s"><span class="pl-pds">"</span>loose<span class="pl-pds">"</span></span>: <span class="pl-c1">true</span>
        }
      ],
      <span class="pl-s"><span class="pl-pds">"</span>stage-2<span class="pl-pds">"</span></span>
    ]
  }
}</pre></div>
<p>但这么做会有兼容性的风险，可能会导致 ES6 源码理应的执行结果和编译后的 ES5 代码的实际结果并不一致。如果代码没有遇到实际的效率瓶颈，官方 <a href="http://www.2ality.com/2015/12/babel6-loose-mode.html" rel="nofollow">不建议</a> 使用 <code>loose</code> 模式。</p>
<h3><a id="user-content-使用-webpack-自带的-es6-模块处理功能" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E4%BD%BF%E7%94%A8-webpack-%E8%87%AA%E5%B8%A6%E7%9A%84-es6-%E6%A8%A1%E5%9D%97%E5%A4%84%E7%90%86%E5%8A%9F%E8%83%BD"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>使用 webpack 自带的 ES6 模块处理功能</h3>
<p>我们目前的配置，babel 会把 ES6 模块定义转为 CommonJS 定义，但 webpack 自己可以处理 <code>import</code> 和 <code>export</code>， 而且 webpack 处理 <code>import</code> 时会做代码优化，把没用到的部分代码删除掉。因此我们通过 babel 提供的 <code>modules: false</code> 选项把 ES6 模块转为 CommonJS 模块的功能给关闭掉。</p>
<p>package.json:</p>
<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>babel<span class="pl-pds">"</span></span>: {
    <span class="pl-s"><span class="pl-pds">"</span>presets<span class="pl-pds">"</span></span>: [
      [
        <span class="pl-s"><span class="pl-pds">"</span>env<span class="pl-pds">"</span></span>,
        {
          <span class="pl-s"><span class="pl-pds">"</span>loose<span class="pl-pds">"</span></span>: <span class="pl-c1">true</span>,
          <span class="pl-s"><span class="pl-pds">"</span>modules<span class="pl-pds">"</span></span>: <span class="pl-c1">false</span>
        }
      ],
      <span class="pl-s"><span class="pl-pds">"</span>stage-2<span class="pl-pds">"</span></span>
    ]
  }
}</pre></div>
<h3><a id="user-content-使用-autoprefixer-自动创建-css-的-vendor-prefixes" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E4%BD%BF%E7%94%A8-autoprefixer-%E8%87%AA%E5%8A%A8%E5%88%9B%E5%BB%BA-css-%E7%9A%84-vendor-prefixes"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>使用 autoprefixer 自动创建 css 的 vendor prefixes</h3>
<p>css 有一个很麻烦的问题就是比较新的 css 属性在各个浏览器里是要加前缀的，我们可以使用 <a href="https://github.com/postcss/autoprefixer">autoprefixer</a> 工具自动创建这些浏览器规则，那么我们的 css 中只需要写：</p>
<div class="highlight highlight-source-css"><pre><span class="pl-e">:fullscreen</span> <span class="pl-ent">a</span> {
    <span class="pl-c1"><span class="pl-c1">display</span></span>: <span class="pl-c1">flex</span>
}</pre></div>
<p>autoprefixer 会编译成：</p>
<div class="highlight highlight-source-css"><pre><span class="pl-e">:-webkit-full-screen</span> <span class="pl-ent">a</span> {
    <span class="pl-c1"><span class="pl-c1">display</span></span>: <span class="pl-c1">-webkit-box</span>;
    <span class="pl-c1"><span class="pl-c1">display</span></span>: <span class="pl-c1">flex</span>
}
<span class="pl-e">:-moz-full-screen</span> <span class="pl-ent">a</span> {
    <span class="pl-c1"><span class="pl-c1">display</span></span>: <span class="pl-c1">flex</span>
}
<span class="pl-e">:-ms-fullscreen</span> <span class="pl-ent">a</span> {
    <span class="pl-c1"><span class="pl-c1">display</span></span>: <span class="pl-c1">-ms-flexbox</span>;
    <span class="pl-c1"><span class="pl-c1">display</span></span>: <span class="pl-c1">flex</span>
}
<span class="pl-e">:fullscreen</span> <span class="pl-ent">a</span> {
    <span class="pl-c1"><span class="pl-c1">display</span></span>: <span class="pl-c1">-webkit-box</span>;
    <span class="pl-c1"><span class="pl-c1">display</span></span>: <span class="pl-c1">-ms-flexbox</span>;
    <span class="pl-c1"><span class="pl-c1">display</span></span>: <span class="pl-c1">flex</span>
}</pre></div>
<p>首先，我们用 npm 安装它：</p>
<div class="highlight highlight-source-shell"><pre>npm install postcss-loader autoprefixer --save-dev</pre></div>
<p>autoprefixer 是 <a href="http://postcss.org/" rel="nofollow">postcss</a> 的一个插件，所以我们也要安装 postcss 的 webpack <a href="https://github.com/postcss/postcss-loader">loader</a>。</p>
<p>修改一下 webpack 的 css rule：</p>
<div class="highlight highlight-source-js"><pre>{
  test<span class="pl-k">:</span><span class="pl-sr"> <span class="pl-pds">/</span><span class="pl-cce">\.</span>css<span class="pl-k">$</span><span class="pl-pds">/</span></span>,
  use<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>style-loader<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>css-loader<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>postcss-loader<span class="pl-pds">'</span></span>]
}</pre></div>
<p>然后创建文件 <code>postcss.config.js</code>:</p>
<div class="highlight highlight-source-js"><pre><span class="pl-c1">module</span>.<span class="pl-smi">exports</span> <span class="pl-k">=</span> {
  plugins<span class="pl-k">:</span> [
    <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>autoprefixer<span class="pl-pds">'</span></span>)()
  ]
}</pre></div>
<h2><a id="user-content-使用-webpack-打包多页面应用multiple-page-application" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E4%BD%BF%E7%94%A8-webpack-%E6%89%93%E5%8C%85%E5%A4%9A%E9%A1%B5%E9%9D%A2%E5%BA%94%E7%94%A8multiple-page-application"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>使用 webpack 打包多页面应用（Multiple-Page Application）</h2>
<p>多页面网站同样可以用 webpack 来打包，以便使用 npm 包，<code>import()</code>，<code>code splitting</code> 等好处。</p>
<p>MPA 意味着并没不是一个单一的 html 入口和 js 入口，而是每个页面对应一个 html 和多个 js。那么我们可以把项目结构设计为：</p>
<pre><code>├── dist
├── package.json
├── node_modules
├── src
│   ├── components
│   ├── shared
|   ├── favicon.png
│   └── pages                 页面放这里
|       ├── foo               编译后生成 http://localhost:8080/foo.html
|       |    ├── index.html
|       |    ├── index.js
|       |    ├── style.css
|       |    └── pic.png
|       └── bar                        http://localhost:8080/bar.html
|           ├── index.html
|           ├── index.js
|           ├── style.css
|           └── baz                    http://localhost:8080/bar/baz.html
|               ├── index.html
|               ├── index.js
|               └── style.css
└── webpack.config.js
</code></pre>
<p>这里每个页面的 <code>index.html</code> 是个完整的从 <code>&lt;!DOCTYPE html&gt;</code> 开头到 <code>&lt;/html&gt;</code> 结束的页面，这些文件都要用 <code>html-webpack-plugin</code> 处理。<code>index.js</code> 是每个页面的业务逻辑，作为每个页面的入口 js 配置到 <code>entry</code> 中。这里我们需要用 <code>glob</code> 库来把这些文件都筛选出来批量操作。为了使用 webpack 4 的 <code>optimization.splitChunks</code> 和 <code>optimization.runtimeChunk</code> 功能，我写了 <a href="https://github.com/fenivana/html-webpack-include-sibling-chunks-plugin">html-webpack-include-sibling-chunks-plugin</a> 插件来配合使用。还要装几个插件把 css 压缩并放到 <code>&lt;head&gt;</code> 中。</p>
<div class="highlight highlight-source-shell"><pre>npm install glob html-webpack-include-sibling-chunks-plugin uglifyjs-webpack-plugin mini-css-extract-plugin optimize-css-assets-webpack-plugin --save-dev</pre></div>
<p><code>webpack.config.js</code> 修改的地方：</p>
<div class="highlight highlight-source-js"><pre><span class="pl-c"><span class="pl-c">//</span> ...</span>
<span class="pl-k">const</span> <span class="pl-c1">UglifyJsPlugin</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>uglifyjs-webpack-plugin<span class="pl-pds">'</span></span>)
<span class="pl-k">const</span> <span class="pl-c1">MiniCssExtractPlugin</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>mini-css-extract-plugin<span class="pl-pds">'</span></span>)
<span class="pl-k">const</span> <span class="pl-c1">OptimizeCSSAssetsPlugin</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>optimize-css-assets-webpack-plugin<span class="pl-pds">'</span></span>)
<span class="pl-k">const</span> <span class="pl-c1">HtmlWebpackIncludeSiblingChunksPlugin</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>html-webpack-include-sibling-chunks-plugin<span class="pl-pds">'</span></span>)
<span class="pl-k">const</span> <span class="pl-c1">glob</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>glob<span class="pl-pds">'</span></span>)

<span class="pl-k">const</span> <span class="pl-c1">dev</span> <span class="pl-k">=</span> <span class="pl-c1">Boolean</span>(<span class="pl-c1">process</span>.<span class="pl-smi">env</span>.<span class="pl-c1">WEBPACK_SERVE</span>)
<span class="pl-k">const</span> <span class="pl-c1">config</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>./config/<span class="pl-pds">'</span></span> <span class="pl-k">+</span> (<span class="pl-c1">process</span>.<span class="pl-smi">env</span>.<span class="pl-smi">npm_config_config</span> <span class="pl-k">||</span> <span class="pl-s"><span class="pl-pds">'</span>default<span class="pl-pds">'</span></span>))

<span class="pl-k">const</span> <span class="pl-c1">entries</span> <span class="pl-k">=</span> <span class="pl-smi">glob</span>.<span class="pl-en">sync</span>(<span class="pl-s"><span class="pl-pds">'</span>./src/**/index.js<span class="pl-pds">'</span></span>)
<span class="pl-k">const</span> <span class="pl-c1">entry</span> <span class="pl-k">=</span> {}
<span class="pl-k">const</span> <span class="pl-c1">htmlPlugins</span> <span class="pl-k">=</span> []
<span class="pl-k">for</span> (<span class="pl-k">const</span> <span class="pl-c1">path</span> <span class="pl-k">of</span> entries) {
  <span class="pl-k">const</span> <span class="pl-c1">template</span> <span class="pl-k">=</span> <span class="pl-smi">path</span>.<span class="pl-c1">replace</span>(<span class="pl-s"><span class="pl-pds">'</span>index.js<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>index.html<span class="pl-pds">'</span></span>)
  <span class="pl-k">const</span> <span class="pl-c1">chunkName</span> <span class="pl-k">=</span> <span class="pl-smi">path</span>.<span class="pl-c1">slice</span>(<span class="pl-s"><span class="pl-pds">'</span>./src/pages/<span class="pl-pds">'</span></span>.<span class="pl-c1">length</span>, <span class="pl-k">-</span><span class="pl-s"><span class="pl-pds">'</span>/index.js<span class="pl-pds">'</span></span>.<span class="pl-c1">length</span>)
  entry[chunkName] <span class="pl-k">=</span> dev <span class="pl-k">?</span> [path, template] <span class="pl-k">:</span> path
  <span class="pl-smi">htmlPlugins</span>.<span class="pl-c1">push</span>(<span class="pl-k">new</span> <span class="pl-en">HtmlWebpackPlugin</span>({
    template,
    filename<span class="pl-k">:</span> chunkName <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span>.html<span class="pl-pds">'</span></span>,
    chunksSortMode<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>none<span class="pl-pds">'</span></span>,
    chunks<span class="pl-k">:</span> [chunkName]
  }))
}

<span class="pl-c1">module</span>.<span class="pl-smi">exports</span> <span class="pl-k">=</span> {
  entry,

  output<span class="pl-k">:</span> {
    path<span class="pl-k">:</span> <span class="pl-en">resolve</span>(<span class="pl-c1">__dirname</span>, <span class="pl-s"><span class="pl-pds">'</span>dist<span class="pl-pds">'</span></span>),
    <span class="pl-c"><span class="pl-c">//</span> 我们不定义 publicPath，否则访问 html 时需要带上 publicPath 前缀</span>
    filename<span class="pl-k">:</span> dev <span class="pl-k">?</span> <span class="pl-s"><span class="pl-pds">'</span>[name].js<span class="pl-pds">'</span></span> <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>[chunkhash].js<span class="pl-pds">'</span></span>,
    chunkFilename<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>[chunkhash].js<span class="pl-pds">'</span></span>
  },

  optimization<span class="pl-k">:</span> {
    runtimeChunk<span class="pl-k">:</span> <span class="pl-c1">true</span>,
    splitChunks<span class="pl-k">:</span> {
      chunks<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>all<span class="pl-pds">'</span></span>
    },
    minimizer<span class="pl-k">:</span> dev <span class="pl-k">?</span> [] <span class="pl-k">:</span> [
      <span class="pl-k">new</span> <span class="pl-en">UglifyJsPlugin</span>({
        cache<span class="pl-k">:</span> <span class="pl-c1">true</span>,
        parallel<span class="pl-k">:</span> <span class="pl-c1">true</span>,
        sourceMap<span class="pl-k">:</span> <span class="pl-c1">true</span>
      }),
      <span class="pl-k">new</span> <span class="pl-en">OptimizeCSSAssetsPlugin</span>()
    ]
  },

  module<span class="pl-k">:</span> {
    rules<span class="pl-k">:</span> [
      <span class="pl-c"><span class="pl-c">//</span> ...</span>
      
      {
        test<span class="pl-k">:</span><span class="pl-sr"> <span class="pl-pds">/</span><span class="pl-cce">\.</span>css<span class="pl-k">$</span><span class="pl-pds">/</span></span>,
        use<span class="pl-k">:</span> [dev <span class="pl-k">?</span> <span class="pl-s"><span class="pl-pds">'</span>style-loader<span class="pl-pds">'</span></span> <span class="pl-k">:</span> <span class="pl-smi">MiniCssExtractPlugin</span>.<span class="pl-smi">loader</span>, <span class="pl-s"><span class="pl-pds">'</span>css-loader<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>postcss-loader<span class="pl-pds">'</span></span>]
      },
      
      <span class="pl-c"><span class="pl-c">//</span> ...</span>
    ]
  },

  plugins<span class="pl-k">:</span> [
    <span class="pl-c"><span class="pl-c">//</span> ...</span>
    
    <span class="pl-c"><span class="pl-c">/*</span></span>
<span class="pl-c">    这里不使用 [chunkhash]</span>
<span class="pl-c">    因为从同一个 chunk 抽离出来的 css 共享同一个 [chunkhash]</span>
<span class="pl-c">    [contenthash] 你可以简单理解为 moduleId + content 生成的 hash</span>
<span class="pl-c">    因此一个 chunk 中的多个 module 有自己的 [contenthash]</span>
<span class="pl-c">    <span class="pl-c">*/</span></span>
    <span class="pl-k">new</span> <span class="pl-en">MiniCssExtractPlugin</span>({
      filename<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>[contenthash].css<span class="pl-pds">'</span></span>,
      chunkFilename<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>[contenthash].css<span class="pl-pds">'</span></span>
    }),

    <span class="pl-c"><span class="pl-c">//</span> 必须放在html-webpack-plugin前面</span>
    <span class="pl-k">new</span> <span class="pl-en">HtmlWebpackIncludeSiblingChunksPlugin</span>(),

    <span class="pl-k">...</span>htmlPlugins
  ],

  <span class="pl-c"><span class="pl-c">//</span> ...</span>
}</pre></div>
<p><code>entry</code> 和 <code>htmlPlugins</code> 会通过遍历 pages 目录生成，比如：</p>
<p>entry:</p>
<div class="highlight highlight-source-js"><pre>{
  <span class="pl-s"><span class="pl-pds">'</span>bar/baz<span class="pl-pds">'</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./src/pages/bar/baz/index.js<span class="pl-pds">'</span></span>,
  bar<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./src/pages/bar/index.js<span class="pl-pds">'</span></span>,
  foo<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./src/pages/foo/index.js<span class="pl-pds">'</span></span>
}</pre></div>
<p>在开发环境中，为了能够修改 html 文件后网页能够自动刷新，我们还需要把 html 文件也加入 entry 中，比如：</p>
<div class="highlight highlight-source-js"><pre>{
  foo<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>./src/pages/foo/index.js<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>./src/pages/foo/index.html<span class="pl-pds">'</span></span>]
}</pre></div>
<p>这样，当 foo 页面的 index.js 或 index.html 文件改动时，都会触发浏览器刷新该页面。虽然把 html 加入 entry 很奇怪，但放心，不会导致错误。记得不要在生产环境这么做，不然导致 chunk 文件包含了无用的 html 片段。</p>
<p>htmlPlugins:</p>
<div class="highlight highlight-source-js"><pre>[
  <span class="pl-k">new</span> <span class="pl-en">HtmlWebpackPlugin</span>({
    template<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./src/pages/bar/baz/index.html<span class="pl-pds">'</span></span>,
    filename<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>bar/baz.html<span class="pl-pds">'</span></span>,
    chunksSortMode<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>none<span class="pl-pds">'</span></span>,
    chunks<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>bar/baz<span class="pl-pds">'</span></span>]
  },

  <span class="pl-k">new</span> <span class="pl-en">HtmlWebpackPlugin</span>({
    template<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./src/pages/bar/index.html<span class="pl-pds">'</span></span>,
    filename<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>bar.html<span class="pl-pds">'</span></span>,
    chunksSortMode<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>none<span class="pl-pds">'</span></span>,
    chunks<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>bar<span class="pl-pds">'</span></span>]
  },

  <span class="pl-k">new</span> <span class="pl-en">HtmlWebpackPlugin</span>({
    template<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>./src/pages/foo/index.html<span class="pl-pds">'</span></span>,
    filename<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>foo.html<span class="pl-pds">'</span></span>,
    chunksSortMode<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>none<span class="pl-pds">'</span></span>,
    chunks<span class="pl-k">:</span> [<span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>]
  }
]</pre></div>
<p>代码在 <a href="https://github.com/fenivana/webpack-and-spa-guide/blob/master/examples/mpa">examples/mpa</a> 目录。</p>
<h2><a id="user-content-总结" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E6%80%BB%E7%BB%93"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>总结</h2>
<p>通过这篇文章，我想大家应该学会了 webpack 的正确打开姿势。虽然我没有提及如何用 webpack 来编译 <a href="https://facebook.github.io/react/" rel="nofollow">React</a> 和 <a href="http://vuejs.org/" rel="nofollow">vue.js</a>, 但大家可以想到，无非是安装一些 loader 和 plugin 来处理 <a href="https://babeljs.io/docs/plugins/preset-react/" rel="nofollow">jsx</a> 和 <a href="http://vue-loader.vuejs.org/" rel="nofollow">vue</a> 格式的文件，那时难度就不在于 webpack 了，而是代码架构组织的问题了。具体的大家自己去摸索一下。</p>
<h2><a id="user-content-版权许可" class="anchor" aria-hidden="true" href="https://github.com/wallstreetcn/webpack-and-spa-guide#%E7%89%88%E6%9D%83%E8%AE%B8%E5%8F%AF"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>版权许可</h2>
<p><a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="nofollow"><img alt="知识共享许可协议" src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/68747470733a2f2f692e6372656174697665636f6d6d6f6e732e6f72672f6c2f62792d6e632f342e302f38387833312e706e67" data-canonical-src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" style="max-width:100%;"></a><br>本作品采用 <a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="nofollow">知识共享署名 - 非商业性使用 4.0 国际许可协议</a> 进行许可。</p>
</article>
      </div>
  </div>



  </div>
  <div class="modal-backdrop js-touch-events"></div>
</div>

    </div>
  </div>

  </div>

        
<div class="footer container-lg px-3" role="contentinfo" style="">
  <div class="position-relative d-flex flex-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <ul class="list-style-none d-flex flex-wrap ">
      <li class="mr-3">© 2018 <span title="0.39746s from unicorn-759fcfb447-mmzfl">GitHub</span>, Inc.</li>
        <li class="mr-3"><a data-ga-click="Footer, go to terms, text:terms" href="https://github.com/site/terms">Terms</a></li>
        <li class="mr-3"><a data-ga-click="Footer, go to privacy, text:privacy" href="https://github.com/site/privacy">Privacy</a></li>
        <li class="mr-3"><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li class="mr-3"><a href="https://githubstatus.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a data-ga-click="Footer, go to help, text:help" href="https://help.github.com/">Help</a></li>
    </ul>

    <a aria-label="Homepage" title="GitHub" class="footer-octicon mr-lg-4" href="https://github.com/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>
</a>
   <ul class="list-style-none d-flex flex-wrap ">
        <li class="mr-3"><a data-ga-click="Footer, go to contact, text:contact" href="https://github.com/contact">Contact GitHub</a></li>
        <li class="mr-3"><a href="https://github.com/pricing" data-ga-click="Footer, go to Pricing, text:Pricing">Pricing</a></li>
      <li class="mr-3"><a href="https://developer.github.com/" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li class="mr-3"><a href="https://training.github.com/" data-ga-click="Footer, go to training, text:training">Training</a></li>
        <li class="mr-3"><a href="https://blog.github.com/" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a data-ga-click="Footer, go to about, text:about" href="https://github.com/about">About</a></li>

    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>
</div>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
    </button>
    You can’t perform that action at this time.
  </div>


    
    <script crossorigin="anonymous" integrity="sha512-RCvJS2PfQrEWhkR1wQIcpC31aDleNWPH+hFn18BuNnvTFaPeyNHR3PQa069RAWeKBb0U9koM+TNNOLotv5sVDA==" type="application/javascript" src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/frameworks-289ef65f9e95c3ff8ac68268d4163a5d.js.下载"></script>
    
    <script crossorigin="anonymous" async="async" integrity="sha512-nyZo0OlRCjDaG47OjlnvXsla/+GVqZvRWK8/QD4V7Q8bTNha4EwAzhjv7AqW3N5UNKloTo+gTvnGp6Es4K2tPQ==" type="application/javascript" src="./wallstreetcn_webpack-and-spa-guide_ Webpack 4 和单页应用入门_files/github-614a30277b217de8dc4b0982450bf849.js.下载"></script>
    
    
    
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner d-none">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="https://github.com/wallstreetcn/webpack-and-spa-guide">Reload</a> to refresh your session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="https://github.com/wallstreetcn/webpack-and-spa-guide">Reload</a> to refresh your session.</span>
  </div>
  <div class="facebox" id="facebox" style="display:none;">
  <div class="facebox-popup">
    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description">
    </div>
    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
    </button>
  </div>
</div>

  <template id="site-details-dialog"></template>

  <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none; top: 117px; left: 502.648px;" tabindex="0">
  <div class="Popover-message Popover-message--large Box box-shadow-large Popover-message--top-left" style="width:360px;"></div>
</div>

<div id="hovercard-aria-description" class="sr-only">
  Press h to open a hovercard with more details.
</div>


  


<nav class="octotree_sidebar ui-resizable octotree_github_sidebar" style="width: 329px;">
    <a class="octotree_toggle btn">
      <div class="loader"></div>
      <span></span>

      
    </a>

    <a class="octotree_opts" href="javascript:void(0)">
      <i class="settings"></i>
    </a>

    <div class="octotree_views">
      <div class="octotree_view octotree_treeview current">
        <div class="octotree_view_header"><div class="octotree_header_repo">
           <a href="https://github.com/wallstreetcn">wallstreetcn</a>
           /
           <a data-pjax="" href="https://github.com/wallstreetcn/webpack-and-spa-guide">webpack-and-spa-guide</a>
         </div>
         <div class="octotree_header_branch">
           master
         </div></div>
        <div class="octotree_view_body jstree jstree-1 jstree-default" role="tree" tabindex="0" aria-activedescendant="octotreeassets" aria-busy="false"><ul class="jstree-container-ul jstree-children jstree-wholerow-ul jstree-no-dots" role="group"><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="octotreeassets_anchor" aria-expanded="false" id="octotreeassets" class="jstree-node  jstree-closed"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="https://github.com/wallstreetcn/webpack-and-spa-guide/tree/master/assets" tabindex="-1" data-download-url="/wallstreetcn/webpack-and-spa-guide/tree/master/assets" data-download-filename="assets" id="octotreeassets_anchor"><i class="jstree-icon jstree-themeicon tree jstree-themeicon-custom" role="presentation"></i>assets</a></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="octotreeexamples_anchor" aria-expanded="false" id="octotreeexamples" class="jstree-node  jstree-closed"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="https://github.com/wallstreetcn/webpack-and-spa-guide/tree/master/examples" tabindex="-1" data-download-url="/wallstreetcn/webpack-and-spa-guide/tree/master/examples" data-download-filename="examples" id="octotreeexamples_anchor"><i class="jstree-icon jstree-themeicon tree jstree-themeicon-custom" role="presentation"></i>examples</a></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="octotree.gitignore_anchor" id="octotree.gitignore" class="jstree-node  jstree-leaf"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="https://github.com/wallstreetcn/webpack-and-spa-guide/blob/master/.gitignore" tabindex="-1" data-download-url="/wallstreetcn/webpack-and-spa-guide/blob/master/.gitignore" data-download-filename=".gitignore" id="octotree.gitignore_anchor"><i class="jstree-icon jstree-themeicon blob git-icon medium-red jstree-themeicon-custom" role="presentation"></i>.gitignore</a></li><li role="treeitem" aria-selected="false" aria-level="1" aria-labelledby="octotreeREADME.md_anchor" id="octotreeREADME.md" class="jstree-node  jstree-leaf jstree-last"><div unselectable="on" role="presentation" class="jstree-wholerow">&nbsp;</div><i class="jstree-icon jstree-ocl" role="presentation"></i><a class="jstree-anchor" href="https://github.com/wallstreetcn/webpack-and-spa-guide/blob/master/README.md" tabindex="-1" data-download-url="/wallstreetcn/webpack-and-spa-guide/blob/master/README.md" data-download-filename="README.md" id="octotreeREADME.md_anchor"><i class="jstree-icon jstree-themeicon blob book-icon medium-blue jstree-themeicon-custom" role="presentation"></i>README.md</a></li></ul></div>
      </div>

      <div class="octotree_view octotree_errorview">
        <div class="octotree_view_header"></div>
        <form class="octotree_view_body">
          <div class="message"></div>
          <div>
            <input name="token" type="text" placeholder="Paste access token here" autocomplete="off">
          </div>
          <div>
            <button type="submit" class="btn">Save</button>
            <a href="https://github.com/ovity/octotree#access-token" target="_blank" tabindex="-1">Why is this required?</a>
          </div>
          <div class="error"></div>
        </form>
      </div>

      <div class="octotree_view octotree_optsview">
        <div class="octotree_view_header">Settings</div>
        <form class="octotree_view_body">
          <div>
            <label>Site access token</label>
            <a class="octotree_help" href="https://github.com/ovity/octotree#settings" target="_blank" tabindex="-1">
              <span></span>
            </a>
            <input type="text" data-store="TOKEN" data-perhost="true">
          </div>

          <div>
            <div>
              <label>Hotkeys</label>
            </div>
            <input type="text" data-store="HOTKEYS">
          </div>

          <div class="octotree_github_only">
            <div>
              <label>GitHub Enterprise URLs</label>
            </div>
            <textarea data-store="GHEURLS" placeholder="https://github.mysite1.com                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   https://github.mysite2.com">            </textarea>
          </div>
          <div>
            <label><input type="checkbox" data-store="ICONS"> Show file-specific icons</label>
          </div>
          <div>
            <label><input type="checkbox" data-store="REMEMBER"> Remember sidebar visibility</label>
          </div>

          <div>
            <label><input type="checkbox" data-store="NONCODE"> Show in non-code pages</label>
          </div>

          <div class="octotree_github_only">
            <label><input type="checkbox" data-store="LOADALL"> Load entire tree at once</label>
          </div>

          <div class="octotree_github_only">
            <label>
              <input type="checkbox" data-store="PR">
                Show only pull request changes
              <span class="octotree_opts_disclaimer">Note: maximum of 300 files</span>
            </label>
          </div>

          <div>
            <button type="submit" class="btn">Save</button>
          </div>
        </form>
      </div>
    </div>

    <div class="octotree_bottom">
      <a href="https://opencollective.com/octotree" target="_blank">
        <i class="support"></i>Support us
      </a>
      &nbsp;•&nbsp;
      <a href="https://github.com/ovity/octotree/issues/new" target="_blank">
        <i class="github"></i>Feedback?
      </a>
    </div>
  <div class="ui-resizable-handle ui-resizable-e" style="z-index: 90;"></div></nav><div class="saladict-DIV"><div class="saladict-SaladBowl isAnimate saladict-SaladBowl-enter-done" role="img" style="left: 611px !important; top: 213px !important;"><div class="saladict-SaladBowl_Leaf"></div><div class="saladict-SaladBowl_Orange"></div><div class="saladict-SaladBowl_Tomato"></div><div class="saladict-SaladBowl_Bowl"></div></div></div></body></html>