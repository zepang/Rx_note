epx=window.epx||{};epx.selectLocaleFromPopUp=function(){function init(){var open=function(){$(".locale-selector").find(".site-flag").fadeIn(200)},close=function(){$(".locale-selector").find(".site-flag").fadeOut(200)},localeSelector=$(".locale-selector");localeSelector.css("position","relative").find(".current-locale").click(function(ev){var _this,panel,closeOnEsc,closeOnClick;ev.preventDefault();ev.stopPropagation();_this=$(this);panel=_this.data("panel");panel.css("top",-panel.outerHeight()-10);closeOnEsc=function(e){(e.keyCode||e.which)===27&&(close(),_this=null,$(document).unbind("keyup",closeOnEsc),closeOnEsc=null)};$(document).bind("keyup",closeOnEsc);closeOnClick=function(){close();_this=null;$("html").unbind("click",closeOnClick);closeOnClick=null};$("html").bind("click",closeOnClick);open()}).data("panel",localeSelector.find(".site-flag"));localeSelector.find("close").click(function(ev){ev.preventDefault();close()});localeSelector.find(".site-flag tr:last-child").addClass("last")}return{init:init}}();$(document).ready(function(){epx.selectLocaleFromPopUp.init()});