var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("template",["jquery"],function(t){"use strict";return function(e,n){var i;return i=e||"",t.each(n,function(e,n){var r,o;r="undefined"==typeof n?"undefined":_typeof(n),o=new RegExp("{{\\s*"+e+"\\s*}}","g"),"object"===r&&null!==n?t.each(n,function(t,n){var r;r=new RegExp("{{\\s*"+e+"."+t+"\\s*}}","g"),i=i.replace(r,n)}):i=i.replace(o,n)}),i}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("sfModal",["jquery","template","bootstrap"],function(t,e){"use strict";return function(n){var i,r;if("object"!==("undefined"==typeof n?"undefined":_typeof(n))){if("hide"===n)return void t(".sfmodal").modal("hide");if("toggle"===n)return void t(".sfmodal").modal("toggle");n={content:n,hideDone:!0}}i=t.extend({hideTitle:!1,hideFooter:!1,modalSize:"",title:"操作失败",content:"玩脱了",wrapper:null,$content:null,hideClose:!1,closeText:"取消",closeClass:"btn-default",backdrop:!0,closeFn:function(){},hideDone:!1,doneText:"确认",doneClass:"btn-primary",keyboard:"true",afterShow:function(){},doneFn:function(){t(".sfmodal").modal("hide")},show:function(){},shown:function(){},hide:function(){},hidden:function(){},loaded:function(){}},n),r='<div class="sfmodal modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">  <div class="modal-dialog {{modalSize}}">    <div class="modal-content">      '+(i.hideTitle?"":'<div class="modal-header">        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>        <h4 class="modal-title">{{title}}</h4>      </div>')+'<div class="modal-body">        <div class="sfModal-content">          </div></div>          <div class="modal-footer '+(i.hideFooter?"hidden":"")+'">'+(i.hideClose?"":'<button type="button" class="btn {{closeClass}}" data-dismiss="modal">{{closeText}}</button>')+(i.hideDone?"":'<button type="button" class="btn {{doneClass}} done-btn">{{doneText}}</button>')+"</div>        </div>      </div>    </div>",t(".sfmodal").length>0&&(t(".sfmodal").remove(),t(".modal-backdrop").remove()),i.wrapper?(t(i.wrapper).append(e(r,i)),t(i.wrapper).append('<div class="modal-backdrop in"></div>')):t("body").append(e(r,i)),i.$content?t(".sfmodal .sfModal-content").append(i.$content):t(".sfmodal .sfModal-content").html(i.content),t(".sfmodal").modal({keyboard:i.keyboard,backdrop:i.backdrop}),t(".sfmodal").on("show.bs.modal",i.show).on("hide.bs.modal",function(e){i.hide(e),i.wrapper&&t(".modal-backdrop").remove()}).on("hidden.bs.modal",i.hidden).on("loaded.bs.modal",i.loaded).on("shown.bs.modal",i.shown).modal("show"),i.afterShow&&i.afterShow(),t(".sfmodal .done-btn").click(function(e){i.doneFn(e),i.wrapper&&t(".modal-backdrop").remove()}),t(".sfmodal .close-btn").click(function(e){i.closeFn(e),i.wrapper&&t(".modal-backdrop").remove()})}}),define("mobile",["jquery"],function(t){return window.innerWidth>767?{login:null,signup:null}:(t(".hate, .like").data("toggle","false"),{login:function(){location.href="/user/login"},signup:function(){location.href="/user/register"}})}),define("isMobile",[],function(){var t;return t=function(t){var e,n;return e={Android:function(){return!!navigator.userAgent.match(/Android/i)},BlackBerry:function(){return!!navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)},Windows:function(){return!!navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Windows()}},n=e[t]()||!1}}),function(){var t=this,e=t._,n=Array.prototype,i=Object.prototype,r=Function.prototype,o=n.push,a=n.slice,s=n.concat,l=i.toString,c=i.hasOwnProperty,u=Array.isArray,h=Object.keys,d=r.bind,p=function(t){return t instanceof p?t:this instanceof p?void(this._wrapped=t):new p(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=p),exports._=p):t._=p,p.VERSION="1.7.0";var f=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return function(){return t.apply(e,arguments)}};p.iteratee=function(t,e,n){return null==t?p.identity:p.isFunction(t)?f(t,e,n):p.isObject(t)?p.matches(t):p.property(t)},p.each=p.forEach=function(t,e,n){if(null==t)return t;e=f(e,n);var i,r=t.length;if(r===+r)for(i=0;r>i;i++)e(t[i],i,t);else{var o=p.keys(t);for(i=0,r=o.length;r>i;i++)e(t[o[i]],o[i],t)}return t},p.map=p.collect=function(t,e,n){if(null==t)return[];e=p.iteratee(e,n);for(var i,r=t.length!==+t.length&&p.keys(t),o=(r||t).length,a=Array(o),s=0;o>s;s++)i=r?r[s]:s,a[s]=e(t[i],i,t);return a};var m="Reduce of empty array with no initial value";p.reduce=p.foldl=p.inject=function(t,e,n,i){null==t&&(t=[]),e=f(e,i,4);var r,o=t.length!==+t.length&&p.keys(t),a=(o||t).length,s=0;if(arguments.length<3){if(!a)throw new TypeError(m);n=t[o?o[s++]:s++]}for(;a>s;s++)r=o?o[s]:s,n=e(n,t[r],r,t);return n},p.reduceRight=p.foldr=function(t,e,n,i){null==t&&(t=[]),e=f(e,i,4);var r,o=t.length!==+t.length&&p.keys(t),a=(o||t).length;if(arguments.length<3){if(!a)throw new TypeError(m);n=t[o?o[--a]:--a]}for(;a--;)r=o?o[a]:a,n=e(n,t[r],r,t);return n},p.find=p.detect=function(t,e,n){var i;return e=p.iteratee(e,n),p.some(t,function(t,n,r){return e(t,n,r)?(i=t,!0):void 0}),i},p.filter=p.select=function(t,e,n){var i=[];return null==t?i:(e=p.iteratee(e,n),p.each(t,function(t,n,r){e(t,n,r)&&i.push(t)}),i)},p.reject=function(t,e,n){return p.filter(t,p.negate(p.iteratee(e)),n)},p.every=p.all=function(t,e,n){if(null==t)return!0;e=p.iteratee(e,n);var i,r,o=t.length!==+t.length&&p.keys(t),a=(o||t).length;for(i=0;a>i;i++)if(r=o?o[i]:i,!e(t[r],r,t))return!1;return!0},p.some=p.any=function(t,e,n){if(null==t)return!1;e=p.iteratee(e,n);var i,r,o=t.length!==+t.length&&p.keys(t),a=(o||t).length;for(i=0;a>i;i++)if(r=o?o[i]:i,e(t[r],r,t))return!0;return!1},p.contains=p.include=function(t,e){return null!=t&&(t.length!==+t.length&&(t=p.values(t)),p.indexOf(t,e)>=0)},p.invoke=function(t,e){var n=a.call(arguments,2),i=p.isFunction(e);return p.map(t,function(t){return(i?e:t[e]).apply(t,n)})},p.pluck=function(t,e){return p.map(t,p.property(e))},p.where=function(t,e){return p.filter(t,p.matches(e))},p.findWhere=function(t,e){return p.find(t,p.matches(e))},p.max=function(t,e,n){var i,r,o=-1/0,a=-1/0;if(null==e&&null!=t){t=t.length===+t.length?t:p.values(t);for(var s=0,l=t.length;l>s;s++)i=t[s],i>o&&(o=i)}else e=p.iteratee(e,n),p.each(t,function(t,n,i){r=e(t,n,i),(r>a||r===-1/0&&o===-1/0)&&(o=t,a=r)});return o},p.min=function(t,e,n){var i,r,o=1/0,a=1/0;if(null==e&&null!=t){t=t.length===+t.length?t:p.values(t);for(var s=0,l=t.length;l>s;s++)i=t[s],o>i&&(o=i)}else e=p.iteratee(e,n),p.each(t,function(t,n,i){r=e(t,n,i),(a>r||1/0===r&&1/0===o)&&(o=t,a=r)});return o},p.shuffle=function(t){for(var e,n=t&&t.length===+t.length?t:p.values(t),i=n.length,r=Array(i),o=0;i>o;o++)e=p.random(0,o),e!==o&&(r[o]=r[e]),r[e]=n[o];return r},p.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=p.values(t)),t[p.random(t.length-1)]):p.shuffle(t).slice(0,Math.max(0,e))},p.sortBy=function(t,e,n){return e=p.iteratee(e,n),p.pluck(p.map(t,function(t,n,i){return{value:t,index:n,criteria:e(t,n,i)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var g=function(t){return function(e,n,i){var r={};return n=p.iteratee(n,i),p.each(e,function(i,o){var a=n(i,o,e);t(r,i,a)}),r}};p.groupBy=g(function(t,e,n){p.has(t,n)?t[n].push(e):t[n]=[e]}),p.indexBy=g(function(t,e,n){t[n]=e}),p.countBy=g(function(t,e,n){p.has(t,n)?t[n]++:t[n]=1}),p.sortedIndex=function(t,e,n,i){n=p.iteratee(n,i,1);for(var r=n(e),o=0,a=t.length;a>o;){var s=o+a>>>1;n(t[s])<r?o=s+1:a=s}return o},p.toArray=function(t){return t?p.isArray(t)?a.call(t):t.length===+t.length?p.map(t,p.identity):p.values(t):[]},p.size=function(t){return null==t?0:t.length===+t.length?t.length:p.keys(t).length},p.partition=function(t,e,n){e=p.iteratee(e,n);var i=[],r=[];return p.each(t,function(t,n,o){(e(t,n,o)?i:r).push(t)}),[i,r]},p.first=p.head=p.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:a.call(t,0,e)},p.initial=function(t,e,n){return a.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},p.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},p.rest=p.tail=p.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},p.compact=function(t){return p.filter(t,p.identity)};var v=function(t,e,n,i){if(e&&p.every(t,p.isArray))return s.apply(i,t);for(var r=0,a=t.length;a>r;r++){var l=t[r];p.isArray(l)||p.isArguments(l)?e?o.apply(i,l):v(l,e,n,i):n||i.push(l)}return i};p.flatten=function(t,e){return v(t,e,!1,[])},p.without=function(t){return p.difference(t,a.call(arguments,1))},p.uniq=p.unique=function(t,e,n,i){if(null==t)return[];p.isBoolean(e)||(i=n,n=e,e=!1),null!=n&&(n=p.iteratee(n,i));for(var r=[],o=[],a=0,s=t.length;s>a;a++){var l=t[a];if(e)a&&o===l||r.push(l),o=l;else if(n){var c=n(l,a,t);p.indexOf(o,c)<0&&(o.push(c),r.push(l))}else p.indexOf(r,l)<0&&r.push(l)}return r},p.union=function(){return p.uniq(v(arguments,!0,!0,[]))},p.intersection=function(t){if(null==t)return[];for(var e=[],n=arguments.length,i=0,r=t.length;r>i;i++){var o=t[i];if(!p.contains(e,o)){for(var a=1;n>a&&p.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},p.difference=function(t){var e=v(a.call(arguments,1),!0,!0,[]);return p.filter(t,function(t){return!p.contains(e,t)})},p.zip=function(t){if(null==t)return[];for(var e=p.max(arguments,"length").length,n=Array(e),i=0;e>i;i++)n[i]=p.pluck(arguments,i);return n},p.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},p.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=p.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}for(;r>i;i++)if(t[i]===e)return i;return-1},p.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=t.length;for("number"==typeof n&&(i=0>n?i+n+1:Math.min(i,n+1));--i>=0;)if(t[i]===e)return i;return-1},p.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),o=0;i>o;o++,t+=n)r[o]=t;return r};var y=function(){};p.bind=function(t,e){var n,i;if(d&&t.bind===d)return d.apply(t,a.call(arguments,1));if(!p.isFunction(t))throw new TypeError("Bind must be called on a function");return n=a.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(a.call(arguments)));y.prototype=t.prototype;var r=new y;y.prototype=null;var o=t.apply(r,n.concat(a.call(arguments)));return p.isObject(o)?o:r}},p.partial=function(t){var e=a.call(arguments,1);return function(){for(var n=0,i=e.slice(),r=0,o=i.length;o>r;r++)i[r]===p&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},p.bindAll=function(t){var e,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(e=1;i>e;e++)n=arguments[e],t[n]=p.bind(t[n],t);return t},p.memoize=function(t,e){var n=function(i){var r=n.cache,o=e?e.apply(this,arguments):i;return p.has(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return n.cache={},n},p.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},p.defer=function(t){return p.delay.apply(p,[t,1].concat(a.call(arguments,1)))},p.throttle=function(t,e,n){var i,r,o,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:p.now(),a=null,o=t.apply(i,r),a||(i=r=null)};return function(){var c=p.now();s||n.leading!==!1||(s=c);var u=e-(c-s);return i=this,r=arguments,0>=u||u>e?(clearTimeout(a),a=null,s=c,o=t.apply(i,r),a||(i=r=null)):a||n.trailing===!1||(a=setTimeout(l,u)),o}},p.debounce=function(t,e,n){var i,r,o,a,s,l=function(){var c=p.now()-a;e>c&&c>0?i=setTimeout(l,e-c):(i=null,n||(s=t.apply(o,r),i||(o=r=null)))};return function(){o=this,r=arguments,a=p.now();var c=n&&!i;return i||(i=setTimeout(l,e)),c&&(s=t.apply(o,r),o=r=null),s}},p.wrap=function(t,e){return p.partial(e,t)},p.negate=function(t){return function(){return!t.apply(this,arguments)}},p.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}},p.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},p.before=function(t,e){var n;return function(){return--t>0?n=e.apply(this,arguments):e=null,n}},p.once=p.partial(p.before,2),p.keys=function(t){if(!p.isObject(t))return[];if(h)return h(t);var e=[];for(var n in t)p.has(t,n)&&e.push(n);return e},p.values=function(t){for(var e=p.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},p.pairs=function(t){for(var e=p.keys(t),n=e.length,i=Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},p.invert=function(t){for(var e={},n=p.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},p.functions=p.methods=function(t){var e=[];for(var n in t)p.isFunction(t[n])&&e.push(n);return e.sort()},p.extend=function(t){if(!p.isObject(t))return t;for(var e,n,i=1,r=arguments.length;r>i;i++){e=arguments[i];for(n in e)c.call(e,n)&&(t[n]=e[n])}return t},p.pick=function(t,e,n){var i,r={};if(null==t)return r;if(p.isFunction(e)){e=f(e,n);for(i in t){var o=t[i];e(o,i,t)&&(r[i]=o)}}else{var l=s.apply([],a.call(arguments,1));t=new Object(t);for(var c=0,u=l.length;u>c;c++)i=l[c],i in t&&(r[i]=t[i])}return r},p.omit=function(t,e,n){if(p.isFunction(e))e=p.negate(e);else{var i=p.map(s.apply([],a.call(arguments,1)),String);e=function(t,e){return!p.contains(i,e)}}return p.pick(t,e,n)},p.defaults=function(t){if(!p.isObject(t))return t;for(var e=1,n=arguments.length;n>e;e++){var i=arguments[e];for(var r in i)void 0===t[r]&&(t[r]=i[r])}return t},p.clone=function(t){return p.isObject(t)?p.isArray(t)?t.slice():p.extend({},t):t},p.tap=function(t,e){return e(t),t};var b=function(t,e,n,i){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof p&&(t=t._wrapped),e instanceof p&&(e=e._wrapped);var r=l.call(t);if(r!==l.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]===t)return i[o]===e;var a=t.constructor,s=e.constructor;if(a!==s&&"constructor"in t&&"constructor"in e&&!(p.isFunction(a)&&a instanceof a&&p.isFunction(s)&&s instanceof s))return!1;n.push(t),i.push(e);var c,u;if("[object Array]"===r){if(c=t.length,u=c===e.length)for(;c--&&(u=b(t[c],e[c],n,i)););}else{var h,d=p.keys(t);if(c=d.length,u=p.keys(e).length===c)for(;c--&&(h=d[c],u=p.has(e,h)&&b(t[h],e[h],n,i)););}return n.pop(),i.pop(),u};p.isEqual=function(t,e){return b(t,e,[],[])},p.isEmpty=function(t){if(null==t)return!0;if(p.isArray(t)||p.isString(t)||p.isArguments(t))return 0===t.length;for(var e in t)if(p.has(t,e))return!1;return!0},p.isElement=function(t){return!(!t||1!==t.nodeType)},p.isArray=u||function(t){return"[object Array]"===l.call(t)},p.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},p.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){p["is"+t]=function(e){return l.call(e)==="[object "+t+"]"}}),p.isArguments(arguments)||(p.isArguments=function(t){return p.has(t,"callee")}),"function"!=typeof/./&&(p.isFunction=function(t){return"function"==typeof t||!1}),p.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},p.isNaN=function(t){return p.isNumber(t)&&t!==+t},p.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===l.call(t)},p.isNull=function(t){return null===t},p.isUndefined=function(t){return void 0===t},p.has=function(t,e){return null!=t&&c.call(t,e)},p.noConflict=function(){return t._=e,this},p.identity=function(t){return t},p.constant=function(t){return function(){return t}},p.noop=function(){},p.property=function(t){return function(e){return e[t]}},p.matches=function(t){var e=p.pairs(t),n=e.length;return function(t){if(null==t)return!n;t=new Object(t);for(var i=0;n>i;i++){var r=e[i],o=r[0];if(r[1]!==t[o]||!(o in t))return!1}return!0}},p.times=function(t,e,n){var i=Array(Math.max(0,t));e=f(e,n,1);for(var r=0;t>r;r++)i[r]=e(r);return i},p.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},p.now=Date.now||function(){return(new Date).getTime()};var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},x=p.invert(_),w=function(t){var e=function(e){return t[e]},n="(?:"+p.keys(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}};p.escape=w(_),p.unescape=w(x),p.result=function(t,e){if(null!=t){var n=t[e];return p.isFunction(n)?t[e]():n}};var k=0;p.uniqueId=function(t){var e=++k+"";return t?t+e:e},p.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},S=/\\|'|\r|\n|\u2028|\u2029/g,$=function(t){return"\\"+D[t]};p.template=function(t,e,n){!e&&n&&(e=n),e=p.defaults({},e,p.templateSettings);var i=RegExp([(e.escape||C).source,(e.interpolate||C).source,(e.evaluate||C).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(i,function(e,n,i,a,s){return o+=t.slice(r,s).replace(S,$),r=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(t){throw t.source=o,t}var s=function(t){return a.call(this,t,p)},l=e.variable||"obj";return s.source="function("+l+"){\n"+o+"}",s},p.chain=function(t){var e=p(t);return e._chain=!0,e};var E=function(t){return this._chain?p(t).chain():t};p.mixin=function(t){p.each(p.functions(t),function(e){var n=p[e]=t[e];p.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),E.call(this,n.apply(p,t))}})},p.mixin(p),p.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];p.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],E.call(this,n)}}),p.each(["concat","join","slice"],function(t){var e=n[t];p.prototype[t]=function(){return E.call(this,e.apply(this._wrapped,arguments))}}),p.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return p})}.call(this),function(t){t.fn.hoverIntent=function(e,n,i,r){var o={interval:r||400,sensitivity:5,timeout:600};o="object"==typeof e?t.extend(o,e):t.isFunction(n)?t.extend(o,{over:e,out:n,selector:i}):t.extend(o,{over:e,out:e,selector:n});var a,s,l,c,u=function(t){a=t.pageX,s=t.pageY},h=function(e,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.sqrt((l-a)*(l-a)+(c-s)*(c-s))<o.sensitivity?(t(n).off("mousemove.hoverIntent",u),n.hoverIntent_s=!0,o.over.apply(n,[e])):(l=a,c=s,n.hoverIntent_t=setTimeout(function(){h(e,n)},o.interval),void 0)},d=function(t,e){return e.hoverIntent_t=clearTimeout(e.hoverIntent_t),e.hoverIntent_s=!1,o.out.apply(e,[t])},p=function(e){var n=t.extend({},e),i=this;i.hoverIntent_t&&(i.hoverIntent_t=clearTimeout(i.hoverIntent_t)),"mouseenter"===e.type?(l=n.pageX,c=n.pageY,t(i).on("mousemove.hoverIntent",u),i.hoverIntent_s||(i.hoverIntent_t=setTimeout(function(){h(n,i)},o.interval))):(t(i).off("mousemove.hoverIntent",u),i.hoverIntent_s&&(i.hoverIntent_t=setTimeout(function(){d(n,i)},o.timeout)))};return this.on({"mouseenter.hoverIntent":p,"mouseleave.hoverIntent":p},o.selector)}}(jQuery),define("jquery_hoverIntent",["jquery"],function(t){return function(){var e;return e||t.$.fn.hoverIntent}}(this)),define("sfAjax",["jquery"],function(t){"use strict";t.sfAjax=function(e,n,i,r){var o,a,s,l;a=t.extend({id:e.data("id")||e.closest(".js__content-ops").data("id"),do:e.data("do")||e.data("action"),type:e.data("type")},i),o=a.do,s=o.indexOf("/cancel")>0?o.replace("/cancel",""):o+"/cancel",l="/api/"+a.type+"/"+a.id+"/"+a.do,t.post(l,function(t){0===t.status?(e.data("do",s),n?n(t):location.reload()):r&&r(t)})}}),function(t){"function"==typeof define&&define.amd?define("jquery_cookie",["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){function e(t){return s.raw?t:encodeURIComponent(t)}function n(t){return s.raw?t:decodeURIComponent(t)}function i(t){return e(s.json?JSON.stringify(t):String(t))}function r(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(a," ")),s.json?JSON.parse(t):t}catch(t){}}function o(e,n){var i=s.raw?e:r(e);return t.isFunction(n)?n(i):i}var a=/\+/g,s=t.cookie=function(r,a,l){if(void 0!==a&&!t.isFunction(a)){if(l=t.extend({},s.defaults,l),"number"==typeof l.expires){var c=l.expires,u=l.expires=new Date;u.setTime(+u+864e5*c)}return document.cookie=[e(r),"=",i(a),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var h=r?void 0:{},d=document.cookie?document.cookie.split("; "):[],p=0,f=d.length;p<f;p++){var m=d[p].split("="),g=n(m.shift()),v=m.join("=");if(r&&r===g){h=o(v,a);break}r||void 0===(v=o(v))||(h[g]=v)}return h};s.defaults={},t.removeCookie=function(e,n){return void 0!==t.cookie(e)&&(t.cookie(e,"",t.extend({},n,{expires:-1})),!t.cookie(e))}}),function(t,e,n,i){var r=t(e);t.fn.lazyload=function(o){function a(){var e=0;l.each(function(){var n=t(this);if(!c.skip_invisible||n.is(":visible"))if(t.abovethetop(this,c)||t.leftofbegin(this,c));else if(t.belowthefold(this,c)||t.rightoffold(this,c)){if(++e>c.failure_limit)return!1}else n.trigger("appear"),e=0})}var s,l=this,c={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:SF.staticUrl+"/global/img/squares.svg"};return o&&(i!==o.failurelimit&&(o.failure_limit=o.failurelimit,delete o.failurelimit),i!==o.effectspeed&&(o.effect_speed=o.effectspeed,delete o.effectspeed),t.extend(c,o)),s=c.container===i||c.container===e?r:t(c.container),0===c.event.indexOf("scroll")&&s.bind(c.event,function(){return a()}),this.each(function(){var e=this,n=t(e);e.loaded=!1,n.attr("src")!==i&&n.attr("src")!==!1||n.is("img")&&n.attr("src",c.placeholder),n.one("appear",function(){if(!this.loaded){if(c.appear){var i=l.length;c.appear.call(e,i,c)}t("<img />").bind("load",function(){var i=n.attr("data-"+c.data_attribute);n.hide(),n.is("img")?n.attr("src",i):n.css("background-image","url('"+i+"')"),n[c.effect](c.effect_speed),e.loaded=!0;var r=t.grep(l,function(t){return!t.loaded});if(l=t(r),c.load){var o=l.length;c.load.call(e,o,c)}}).attr("src",n.attr("data-"+c.data_attribute))}}),0!==c.event.indexOf("scroll")&&n.bind(c.event,function(){e.loaded||n.trigger("appear")})}),r.bind("resize",function(){a()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&r.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&l.each(function(){t(this).trigger("appear")})}),t(n).ready(function(){a()}),this},t.belowthefold=function(n,o){var a;return a=o.container===i||o.container===e?(e.innerHeight?e.innerHeight:r.height())+r.scrollTop():t(o.container).offset().top+t(o.container).height(),a<=t(n).offset().top-o.threshold},t.rightoffold=function(n,o){var a;return a=o.container===i||o.container===e?r.width()+r.scrollLeft():t(o.container).offset().left+t(o.container).width(),a<=t(n).offset().left-o.threshold},t.abovethetop=function(n,o){var a;return a=o.container===i||o.container===e?r.scrollTop():t(o.container).offset().top,a>=t(n).offset().top+o.threshold+t(n).height()},t.leftofbegin=function(n,o){var a;return a=o.container===i||o.container===e?r.scrollLeft():t(o.container).offset().left,a>=t(n).offset().left+o.threshold+t(n).width()},t.inviewport=function(e,n){return!(t.rightoffold(e,n)||t.leftofbegin(e,n)||t.belowthefold(e,n)||t.abovethetop(e,n))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document),define("jquery_lazyload",["jquery"],function(t){return function(){var e;return e||t.$.fn.lazyload}}(this)),function(t){function e(e,n,i,r){var o={data:r||0===r||r===!1?r:n?n.data:{},_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:c,nest:u,wrap:h,html:d,update:p};return e&&t.extend(o,e,{nodes:[],parent:n}),i&&(o.tmpl=i,o._ctnt=o._ctnt||o.tmpl(t,o),o.key=++x,(k.length?b:y)[x]=o),o}function n(e,r,o){var a,s=o?t.map(o,function(t){return"string"==typeof t?e.key?t.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+g+'="'+e.key+'" $2'):t:n(t,e,t._ctnt)}):e;return r?s:(s=s.join(""),s.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(e,n,r,o){a=t(r).get(),l(a),n&&(a=i(n).concat(a)),o&&(a=a.concat(i(o)))}),a?a:i(s))}function i(e){var n=document.createElement("div");return n.innerHTML=e,t.makeArray(n.childNodes)}function r(e){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+t.trim(e).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(e,n,i,r,o,s,l){var c,u,h,d=t.tmpl.tag[i];if(!d)throw"Unknown template tag: "+i;return c=d._default||[],s&&!/\w$/.test(o)&&(o+=s,s=""),o?(o=a(o),l=l?","+a(l)+")":s?")":"",u=s?o.indexOf(".")>-1?o+a(s):"("+o+").call($item"+l:o,h=s?u:"(typeof("+o+")==='function'?("+o+").call($item):("+o+"))"):h=u=c.$1||"null",r=a(r),"');"+d[n?"close":"open"].split("$notnull_1").join(o?"typeof("+o+")!=='undefined' && ("+o+")!=null":"true").split("$1a").join(h).split("$1").join(u).split("$2").join(r||c.$2||"")+"__.push('"})+"');}return __;")}function o(e,i){e._wrap=n(e,!0,t.isArray(i)?i:[v.test(i)?i:t(i).html()]).join("")}function a(t){return t?t.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(t){var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}function l(n){function i(n){function i(t){t+=c,a=u[t]=u[t]||e(a,y[a.parent.key+c]||a.parent)}var r,o,a,s,l=n;if(s=n.getAttribute(g)){for(;l.parentNode&&1===(l=l.parentNode).nodeType&&!(r=l.getAttribute(g)););r!==s&&(l=l.parentNode?11===l.nodeType?0:l.getAttribute(g)||0:0,(a=y[s])||(a=b[s],a=e(a,y[l]||b[l]),a.key=++x,y[x]=a),w&&i(s)),n.removeAttribute(g)}else w&&(a=t.data(n,"tmplItem"))&&(i(a.key),y[a.key]=a,l=t.data(n.parentNode,"tmplItem"),l=l?l.key:0);if(a){for(o=a;o&&o.key!=l;)o.nodes.push(n),o=o.parent;delete a._ctnt,delete a._wrap,t.data(n,"tmplItem",a)}}var r,o,a,s,l,c="_"+w,u={};for(a=0,s=n.length;a<s;a++)if(1===(r=n[a]).nodeType){for(o=r.getElementsByTagName("*"),l=o.length-1;l>=0;l--)i(o[l]);i(r)}}function c(t,e,n,i){return t?void k.push({_:t,tmpl:e,item:this,data:n,options:i}):k.pop()}function u(e,n,i){return t.tmpl(t.template(e),n,i,this)}function h(e,n){var i=e.options||{};return i.wrapped=n,t.tmpl(t.template(e.tmpl),e.data,i,e.item)}function d(e,n){var i=this._wrap;return t.map(t(t.isArray(i)?i.join(""):i).filter(e||"*"),function(t){return n?t.innerText||t.textContent:t.outerHTML||s(t)})}function p(){var e=this.nodes;t.tmpl(null,null,null,this).insertBefore(e[0]),t(e).remove()}var f,m=t.fn.domManip,g="_tmplitem",v=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,y={},b={},_={key:0,data:{}},x=0,w=0,k=[];t.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,n){t.fn[e]=function(i){var r,o,a,s,l=[],c=t(i),u=1===this.length&&this[0].parentNode;if(f=y||{},u&&11===u.nodeType&&1===u.childNodes.length&&1===c.length)c[n](this[0]),l=this;else{for(o=0,a=c.length;o<a;o++)w=o,r=(o>0?this.clone(!0):this).get(),t(c[o])[n](r),l=l.concat(r);w=0,l=this.pushStack(l,e,c.selector)}return s=f,f=null,t.tmpl.complete(s),l}}),t.fn.extend({tmpl:function(e,n,i){return t.tmpl(this[0],e,n,i)},tmplItem:function(){return t.tmplItem(this[0])},template:function(e){return t.template(e,this[0])},domManip:function(e,n,i){if(e[0]&&t.isArray(e[0])){for(var r,o=t.makeArray(arguments),a=e[0],s=a.length,l=0;l<s&&!(r=t.data(a[l++],"tmplItem")););r&&w&&(o[2]=function(e){t.tmpl.afterManip(this,e,i)}),m.apply(this,o)}else m.apply(this,arguments);return w=0,!f&&t.tmpl.complete(y),this}}),t.extend({tmpl:function(i,r,a,s){var l,c=!s;if(c)s=_,i=t.template[i]||t.template(null,i),b={};else if(!i)return i=s.tmpl,y[s.key]=s,s.nodes=[],s.wrapped&&o(s,s.wrapped),t(n(s,null,s.tmpl(t,s)));return i?("function"==typeof r&&(r=r.call(s||{})),a&&a.wrapped&&o(a,a.wrapped),l=t.isArray(r)?t.map(r,function(t){return t?e(a,s,i,t):null}):[e(a,s,i,r)],c?t(n(s,null,l)):l):[]},tmplItem:function(e){var n;for(e instanceof t&&(e=e[0]);e&&1===e.nodeType&&!(n=t.data(e,"tmplItem"))&&(e=e.parentNode););return n||_},template:function(e,n){return n?("string"==typeof n?n=r(n):n instanceof t&&(n=n[0]||{}),n.nodeType&&(n=t.data(n,"tmpl")||t.data(n,"tmpl",r(n.innerHTML))),"string"==typeof e?t.template[e]=n:n):e?"string"!=typeof e?t.template(null,e):t.template[e]||t.template(null,v.test(e)?e:t(e)):null},encode:function(t){return(""+t).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}),t.extend(t.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},if:{open:"if(($notnull_1) && $1a){",close:"}"},else:{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){y={}},afterManip:function(e,n,i){var r=11===n.nodeType?t.makeArray(n.childNodes):1===n.nodeType?[n]:[];i.call(e,n),l(r),w++}})}(jQuery),define("jquery_tmpl",["jquery"],function(t){return function(){var e;return e||t.$.fn.tmpl}}(this)),define("typeHelper",["jquery","jquery_tmpl"],function(t){"use strict";var e,n,i,r,o,a,s,l;s='<ul class="dropdown-menu" role="menu"></ul>',r=void 0,e=void 0,i=void 0,n=void 0,o=void 0,a=["gmail.com","qq.com","163.com","hotmail.com","sina.com","126.com","live.com","live.cn","vip.sina.com","vip.qq.com","sina.cn","sohu.com","139.com","wo.com.cn","189.cn","21cn.com"],l='<button class="btn btn-default result" type="button">${result}</button><a href="#" class="i-cancel ml10 delete-result">&times;</a>',t.fn.typeHelperOld=function(c){var u;r=t.extend({data:null,tpl:'<li><a href="#" data-value="${name}">${name}</a></li>',defaultList:[],showNum:5,remoteData:null,submitKey:null,onlyResult:!0,autoSelect:!0,emailMode:!1,
insertHandler:function(){}},c),u=[],n=t(this),0!==n.length&&(n.after(t("<div></div>").addClass("typehelper")).siblings(".typehelper").append(n),e=n.parent().css("position","relative"),t.tmpl(s).insertAfter(n),i=e.find("ul").hide().css("minWidth",n.outerWidth()),t.each(r.defaultList,function(e,n){t.tmpl(r.tpl,n).appendTo(i)}),n.on("focus",function(){r.defaultList.length>0&&t(this).parent().trigger("show.typehelper")}),n.on("input",function(e){n.is(":focus")&&(t(this).parent().trigger("search.typehelper"),t(this).parent().trigger("show.typehelper"))}),n.on("keydown",function(e){t(this).parent().trigger("select.typehelper",e)}),i.delegate("li","mouseover",function(){t(this).siblings("li").removeClass("active"),t(this).addClass("active")}),n.on("blur",function(){var e,n;t(this).parent().trigger("hide.typehelper"),r.autoSelect&&(t(this).siblings("ul").find(".active").length>0?(e=i.find(".active").index(),n=u[e],t(this).parent().trigger("insert.typehelper",[i.find(".active a"),n])):t(this).val(""))}),e.on("show.typehelper",function(){t(this).find("ul").show()}),e.on("hide.typehelper",function(){t(this).find("ul").hide()}),e.on("insert.typehelper",function(o,a,s){e=t(this),n=e.find("input"),i=e.find("ul"),n.val(t(a).data("value")),t(".result",e).length>0&&(t(".result",e).remove(),e.find(".delete-result").remove()),r.onlyResult&&(n.hide(),i.after(t.tmpl(l,{result:n.val()})),r.submitKey&&n.data(r.submitKey,t(a).data(r.submitKey)),e.find(".result").on("click",function(){t(this).siblings(".delete-result").remove(),t(this).remove(),n.show().focus(),e.trigger("search.typehelper")}),e.find(".delete-result").on("click",function(){return t(this).siblings(".result").remove(),t(this).remove(),n.val("").show(),!1})),e.parents(".form-group").next(".form-group").find("input").focus(),r.insertHandler(s)}),e.on("select.typehelper",function(r,o){var a,s,l,c,h,d;if(e=t(this),n=e.find("input"),i=e.find("ul"),a=i.find("li"),o)switch(o.keyCode){case 9:o.shiftKey||(o.preventDefault(),e.parent(".form-group").next(".form-group").find("input").focus());break;case 38:o.preventDefault(),a.length&&(i.find(".active").length?i.find(".active").removeClass("active").prev("li").addClass("active"):a.last().addClass("active"));break;case 40:o.preventDefault(),a.length&&(i.find(".active").length?i.find(".active").removeClass("active").next("li").addClass("active"):a.first().addClass("active"));break;case 13:if(o.stopPropagation(),o.preventDefault(),i.find(".active").length<=0)return;c=i.find(".active").index(),d=u[c],e.trigger("insert.typehelper",[i.find(".active a"),d]),e.trigger("hide.typehelper");break;case 9:s=t(this).parents("form").find("input"),l=s.index(t("input:focus")),l!==-1&&(h=s.slice(l+1),h.length&&h.each(function(){var e,n;if(n=t(this).attr("type"),e=["text","email","password","url"],!t(this).val()&&e.indexOf(n)!==-1)return t(this).focus(),!1}));break;case 27:o.preventDefault();break;default:return}}),e.on("search.typehelper",function(){var s,l,c,h;if(e=t(this),n=e.find("input"),i=e.find("ul"),n.val().length)if(c=[],r.remoteData)r.remoteData(n.val(),function(e){u=e,c=e,c.length>0&&(i.children().remove(),t.tmpl(r.tpl,c).appendTo(i),1===c.length&&i.children().first().addClass("active"))});else{for(h=0,r.emailMode&&(r.data=[{name:n.val()}],t.each(a,function(t,e){n.val().split("@")[1]!=e&&r.data.push({name:n.val().replace(/@.*$/,"")+"@"+e})})),o=r.data.length,l=0;l<o&&(s=r.data[l],!(0===s.name.toLowerCase().indexOf(n.val().toLowerCase())&&(c.push(s),h++,h>=r.showNum)));)l++;c.length>0&&(i.children().remove(),t.tmpl(r.tpl,c).appendTo(i),(1===c.length||r.emailMode)&&i.children().first().addClass("active"))}}),n.val().length>0&&e.trigger("insert.typehelper",n))}}),function(t){"function"==typeof define&&define.amd?define("jquery-mousewheel",["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var a=e||window.event,s=l.call(arguments,1),c=0,h=0,d=0,p=0,f=0,m=0;if(e=t.event.fix(a),e.type="mousewheel","detail"in a&&(d=a.detail*-1),"wheelDelta"in a&&(d=a.wheelDelta),"wheelDeltaY"in a&&(d=a.wheelDeltaY),"wheelDeltaX"in a&&(h=a.wheelDeltaX*-1),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(h=d*-1,d=0),c=0===d?h:d,"deltaY"in a&&(d=a.deltaY*-1,c=d),"deltaX"in a&&(h=a.deltaX,0===d&&(c=h*-1)),0!==d||0!==h){if(1===a.deltaMode){var g=t.data(this,"mousewheel-line-height");c*=g,d*=g,h*=g}else if(2===a.deltaMode){var v=t.data(this,"mousewheel-page-height");c*=v,d*=v,h*=v}if(p=Math.max(Math.abs(d),Math.abs(h)),(!o||p<o)&&(o=p,i(a,p)&&(o/=40)),i(a,p)&&(c/=40,h/=40,d/=40),c=Math[c>=1?"floor":"ceil"](c/o),h=Math[h>=1?"floor":"ceil"](h/o),d=Math[d>=1?"floor":"ceil"](d/o),u.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();f=e.clientX-y.left,m=e.clientY-y.top}return e.deltaX=h,e.deltaY=d,e.deltaFactor=o,e.offsetX=f,e.offsetY=m,e.deltaMode=0,s.unshift(e,c,h,d),r&&clearTimeout(r),r=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,s)}}function n(){o=null}function i(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var r,o,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var c=a.length;c;)t.event.fixHooks[a[--c]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),i=n["offsetParent"in t.fn?"offsetParent":"parent"]();return i.length||(i=t("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(t){"undefined"!=typeof module&&module.exports?module.exports=t:t(jQuery,window,document)}(function(t){!function(e){var n="function"==typeof define&&define.amd,i="undefined"!=typeof module&&module.exports,r="https:"==document.location.protocol?"https:":"http:",o="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js";n||(i?require("jquery-mousewheel")(t):t.event.special.mousewheel||t("head").append(decodeURI("%3Cscript src="+r+"//"+o+"%3E%3C/script%3E"))),e()}(function(){var e,n="mCustomScrollbar",i="mCS",r=".mCustomScrollbar",o={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},a=0,s={},l=window.attachEvent&&!window.addEventListener?1:0,c=!1,u=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],h={init:function(e){var e=t.extend(!0,{},o,e),n=d.call(this);if(e.live){var l=e.liveSelector||this.selector||r,c=t(l);if("off"===e.live)return void f(l);s[l]=setTimeout(function(){c.mCustomScrollbar(e),"once"===e.live&&c.length&&f(l)},500)}else f(l);return e.setWidth=e.set_width?e.set_width:e.setWidth,e.setHeight=e.set_height?e.set_height:e.setHeight,e.axis=e.horizontalScroll?"x":m(e.axis),e.scrollInertia=e.scrollInertia>0&&e.scrollInertia<17?17:e.scrollInertia,"object"!=typeof e.mouseWheel&&1==e.mouseWheel&&(e.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),e.mouseWheel.scrollAmount=e.mouseWheelPixels?e.mouseWheelPixels:e.mouseWheel.scrollAmount,e.mouseWheel.normalizeDelta=e.advanced.normalizeMouseWheelDelta?e.advanced.normalizeMouseWheelDelta:e.mouseWheel.normalizeDelta,e.scrollButtons.scrollType=g(e.scrollButtons.scrollType),p(e),t(n).each(function(){var n=t(this);if(!n.data(i)){n.data(i,{idx:++a,opt:e,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:n.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var r=n.data(i),o=r.opt,s=n.data("mcs-axis"),l=n.data("mcs-scrollbar-position"),c=n.data("mcs-theme");s&&(o.axis=s),l&&(o.scrollbarPosition=l),c&&(o.theme=c,p(o)),v.call(this),r&&o.callbacks.onCreate&&"function"==typeof o.callbacks.onCreate&&o.callbacks.onCreate.call(this),t("#mCSB_"+r.idx+"_container img:not(."+u[2]+")").addClass(u[2]),h.update.call(null,n)}})},update:function(e,n){var r=e||d.call(this);return t(r).each(function(){var e=t(this);if(e.data(i)){var r=e.data(i),o=r.opt,a=t("#mCSB_"+r.idx+"_container"),s=t("#mCSB_"+r.idx),l=[t("#mCSB_"+r.idx+"_dragger_vertical"),t("#mCSB_"+r.idx+"_dragger_horizontal")];if(!a.length)return;r.tweenRunning&&Y(e),n&&r&&o.callbacks.onBeforeUpdate&&"function"==typeof o.callbacks.onBeforeUpdate&&o.callbacks.onBeforeUpdate.call(this),e.hasClass(u[3])&&e.removeClass(u[3]),e.hasClass(u[4])&&e.removeClass(u[4]),s.css("max-height","none"),s.height()!==e.height()&&s.css("max-height",e.height()),b.call(this),"y"===o.axis||o.advanced.autoExpandHorizontalScroll||a.css("width",y(a)),r.overflowed=C.call(this),E.call(this),o.autoDraggerLength&&x.call(this),w.call(this),S.call(this);var c=[Math.abs(a[0].offsetTop),Math.abs(a[0].offsetLeft)];"x"!==o.axis&&(r.overflowed[0]?l[0].height()>l[0].parent().height()?D.call(this):(X(e,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}),r.contentReset.y=null):(D.call(this),"y"===o.axis?$.call(this):"yx"===o.axis&&r.overflowed[1]&&X(e,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==o.axis&&(r.overflowed[1]?l[1].width()>l[1].parent().width()?D.call(this):(X(e,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}),r.contentReset.x=null):(D.call(this),"x"===o.axis?$.call(this):"yx"===o.axis&&r.overflowed[0]&&X(e,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),n&&r&&(2===n&&o.callbacks.onImageLoad&&"function"==typeof o.callbacks.onImageLoad?o.callbacks.onImageLoad.call(this):3===n&&o.callbacks.onSelectorChange&&"function"==typeof o.callbacks.onSelectorChange?o.callbacks.onSelectorChange.call(this):o.callbacks.onUpdate&&"function"==typeof o.callbacks.onUpdate&&o.callbacks.onUpdate.call(this)),U.call(this)}})},scrollTo:function(e,n){if("undefined"!=typeof e&&null!=e){var r=d.call(this);return t(r).each(function(){var r=t(this);if(r.data(i)){var o=r.data(i),a=o.opt,s={trigger:"external",scrollInertia:a.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},l=t.extend(!0,{},s,n),c=z.call(this,e),u=l.scrollInertia>0&&l.scrollInertia<17?17:l.scrollInertia;c[0]=H.call(this,c[0],"y"),c[1]=H.call(this,c[1],"x"),l.moveDragger&&(c[0]*=o.scrollRatio.y,c[1]*=o.scrollRatio.x),l.dur=nt()?0:u,setTimeout(function(){null!==c[0]&&"undefined"!=typeof c[0]&&"x"!==a.axis&&o.overflowed[0]&&(l.dir="y",l.overwrite="all",X(r,c[0].toString(),l)),null!==c[1]&&"undefined"!=typeof c[1]&&"y"!==a.axis&&o.overflowed[1]&&(l.dir="x",l.overwrite="none",X(r,c[1].toString(),l))},l.timeout)}})}},stop:function(){var e=d.call(this);return t(e).each(function(){var e=t(this);e.data(i)&&Y(e)})},disable:function(e){var n=d.call(this);return t(n).each(function(){var n=t(this);if(n.data(i)){n.data(i);U.call(this,"remove"),$.call(this),e&&D.call(this),E.call(this,!0),n.addClass(u[3])}})},destroy:function(){var e=d.call(this);return t(e).each(function(){var r=t(this);if(r.data(i)){var o=r.data(i),a=o.opt,s=t("#mCSB_"+o.idx),l=t("#mCSB_"+o.idx+"_container"),c=t(".mCSB_"+o.idx+"_scrollbar");a.live&&f(a.liveSelector||t(e).selector),U.call(this,"remove"),$.call(this),D.call(this),r.removeData(i),J(this,"mcs"),c.remove(),l.find("img."+u[2]).removeClass(u[2]),s.replaceWith(l.contents()),r.removeClass(n+" _"+i+"_"+o.idx+" "+u[6]+" "+u[7]+" "+u[5]+" "+u[3]).addClass(u[4])}})}},d=function(){return"object"!=typeof t(this)||t(this).length<1?r:this},p=function(e){var n=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],i=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],r=["minimal","minimal-dark"],o=["minimal","minimal-dark"],a=["minimal","minimal-dark"];e.autoDraggerLength=!(t.inArray(e.theme,n)>-1)&&e.autoDraggerLength,e.autoExpandScrollbar=!(t.inArray(e.theme,i)>-1)&&e.autoExpandScrollbar,e.scrollButtons.enable=!(t.inArray(e.theme,r)>-1)&&e.scrollButtons.enable,e.autoHideScrollbar=t.inArray(e.theme,o)>-1||e.autoHideScrollbar,e.scrollbarPosition=t.inArray(e.theme,a)>-1?"outside":e.scrollbarPosition},f=function(t){s[t]&&(clearTimeout(s[t]),J(s,t))},m=function(t){return"yx"===t||"xy"===t||"auto"===t?"yx":"x"===t||"horizontal"===t?"x":"y"},g=function(t){return"stepped"===t||"pixels"===t||"step"===t||"click"===t?"stepped":"stepless"},v=function(){var e=t(this),r=e.data(i),o=r.opt,a=o.autoExpandScrollbar?" "+u[1]+"_expand":"",s=["<div id='mCSB_"+r.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+r.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_vertical"+a+"'><div class='"+u[12]+"'><div id='mCSB_"+r.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+r.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+r.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_horizontal"+a+"'><div class='"+u[12]+"'><div id='mCSB_"+r.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],l="yx"===o.axis?"mCSB_vertical_horizontal":"x"===o.axis?"mCSB_horizontal":"mCSB_vertical",c="yx"===o.axis?s[0]+s[1]:"x"===o.axis?s[1]:s[0],h="yx"===o.axis?"<div id='mCSB_"+r.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",d=o.autoHideScrollbar?" "+u[6]:"",p="x"!==o.axis&&"rtl"===r.langDir?" "+u[7]:"";o.setWidth&&e.css("width",o.setWidth),o.setHeight&&e.css("height",o.setHeight),o.setLeft="y"!==o.axis&&"rtl"===r.langDir?"989999px":o.setLeft,e.addClass(n+" _"+i+"_"+r.idx+d+p).wrapInner("<div id='mCSB_"+r.idx+"' class='mCustomScrollBox mCS-"+o.theme+" "+l+"'><div id='mCSB_"+r.idx+"_container' class='mCSB_container' style='position:relative; top:"+o.setTop+"; left:"+o.setLeft+";' dir="+r.langDir+" /></div>");var f=t("#mCSB_"+r.idx),m=t("#mCSB_"+r.idx+"_container");"y"===o.axis||o.advanced.autoExpandHorizontalScroll||m.css("width",y(m)),"outside"===o.scrollbarPosition?("static"===e.css("position")&&e.css("position","relative"),e.css("overflow","visible"),f.addClass("mCSB_outside").after(c)):(f.addClass("mCSB_inside").append(c),m.wrap(h)),_.call(this);var g=[t("#mCSB_"+r.idx+"_dragger_vertical"),t("#mCSB_"+r.idx+"_dragger_horizontal")];g[0].css("min-height",g[0].height()),g[1].css("min-width",g[1].width())},y=function(e){var n=[e[0].scrollWidth,Math.max.apply(Math,e.children().map(function(){return t(this).outerWidth(!0)}).get())],i=e.parent().width();return n[0]>i?n[0]:n[1]>i?n[1]:"100%"},b=function(){var e=t(this),n=e.data(i),r=n.opt,o=t("#mCSB_"+n.idx+"_container");if(r.advanced.autoExpandHorizontalScroll&&"y"!==r.axis){o.css({width:"auto","min-width":0,"overflow-x":"scroll"});var a=Math.ceil(o[0].scrollWidth);3===r.advanced.autoExpandHorizontalScroll||2!==r.advanced.autoExpandHorizontalScroll&&a>o.parent().width()?o.css({width:a,"min-width":"100%","overflow-x":"inherit"}):o.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(o[0].getBoundingClientRect().right+.4)-Math.floor(o[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},_=function(){var e=t(this),n=e.data(i),r=n.opt,o=t(".mCSB_"+n.idx+"_scrollbar:first"),a=tt(r.scrollButtons.tabindex)?"tabindex='"+r.scrollButtons.tabindex+"'":"",s=["<a href='#' class='"+u[13]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+u[14]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+u[15]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+u[16]+"' oncontextmenu='return false;' "+a+" />"],l=["x"===r.axis?s[2]:s[0],"x"===r.axis?s[3]:s[1],s[2],s[3]];r.scrollButtons.enable&&o.prepend(l[0]).append(l[1]).next(".mCSB_scrollTools").prepend(l[2]).append(l[3])},x=function(){var e=t(this),n=e.data(i),r=t("#mCSB_"+n.idx),o=t("#mCSB_"+n.idx+"_container"),a=[t("#mCSB_"+n.idx+"_dragger_vertical"),t("#mCSB_"+n.idx+"_dragger_horizontal")],s=[r.height()/o.outerHeight(!1),r.width()/o.outerWidth(!1)],c=[parseInt(a[0].css("min-height")),Math.round(s[0]*a[0].parent().height()),parseInt(a[1].css("min-width")),Math.round(s[1]*a[1].parent().width())],u=l&&c[1]<c[0]?c[0]:c[1],h=l&&c[3]<c[2]?c[2]:c[3];a[0].css({height:u,"max-height":a[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":c[0]+"px"}),a[1].css({width:h,"max-width":a[1].parent().width()-10})},w=function(){var e=t(this),n=e.data(i),r=t("#mCSB_"+n.idx),o=t("#mCSB_"+n.idx+"_container"),a=[t("#mCSB_"+n.idx+"_dragger_vertical"),t("#mCSB_"+n.idx+"_dragger_horizontal")],s=[o.outerHeight(!1)-r.height(),o.outerWidth(!1)-r.width()],l=[s[0]/(a[0].parent().height()-a[0].height()),s[1]/(a[1].parent().width()-a[1].width())];n.scrollRatio={y:l[0],x:l[1]}},k=function(t,e,n){var i=n?u[0]+"_expanded":"",r=t.closest(".mCSB_scrollTools");"active"===e?(t.toggleClass(u[0]+" "+i),r.toggleClass(u[1]),t[0]._draggable=t[0]._draggable?0:1):t[0]._draggable||("hide"===e?(t.removeClass(u[0]),r.removeClass(u[1])):(t.addClass(u[0]),r.addClass(u[1])))},C=function(){var e=t(this),n=e.data(i),r=t("#mCSB_"+n.idx),o=t("#mCSB_"+n.idx+"_container"),a=null==n.overflowed?o.height():o.outerHeight(!1),s=null==n.overflowed?o.width():o.outerWidth(!1),l=o[0].scrollHeight,c=o[0].scrollWidth;return l>a&&(a=l),c>s&&(s=c),[a>r.height(),s>r.width()]},D=function(){var e=t(this),n=e.data(i),r=n.opt,o=t("#mCSB_"+n.idx),a=t("#mCSB_"+n.idx+"_container"),s=[t("#mCSB_"+n.idx+"_dragger_vertical"),t("#mCSB_"+n.idx+"_dragger_horizontal")];if(Y(e),("x"!==r.axis&&!n.overflowed[0]||"y"===r.axis&&n.overflowed[0])&&(s[0].add(a).css("top",0),X(e,"_resetY")),"y"!==r.axis&&!n.overflowed[1]||"x"===r.axis&&n.overflowed[1]){var l=dx=0;"rtl"===n.langDir&&(l=o.width()-a.outerWidth(!1),dx=Math.abs(l/n.scrollRatio.x)),a.css("left",l),s[1].css("left",dx),X(e,"_resetX")}},S=function(){function e(){a=setTimeout(function(){t.event.special.mousewheel?(clearTimeout(a),L.call(n[0])):e()},100)}var n=t(this),r=n.data(i),o=r.opt;if(!r.bindEvents){if(B.call(this),o.contentTouchScroll&&A.call(this),P.call(this),o.mouseWheel.enable){var a;e()}M.call(this),j.call(this),o.advanced.autoScrollOnFocus&&O.call(this),o.scrollButtons.enable&&R.call(this),o.keyboard.enable&&N.call(this),r.bindEvents=!0}},$=function(){var e=t(this),n=e.data(i),r=n.opt,o=i+"_"+n.idx,a=".mCSB_"+n.idx+"_scrollbar",s=t("#mCSB_"+n.idx+",#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,"+a+" ."+u[12]+",#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal,"+a+">a"),l=t("#mCSB_"+n.idx+"_container");r.advanced.releaseDraggableSelectors&&s.add(t(r.advanced.releaseDraggableSelectors)),r.advanced.extraDraggableSelectors&&s.add(t(r.advanced.extraDraggableSelectors)),n.bindEvents&&(t(document).add(t(!I()||top.document)).unbind("."+o),s.each(function(){t(this).unbind("."+o)}),clearTimeout(e[0]._focusTimeout),J(e[0],"_focusTimeout"),clearTimeout(n.sequential.step),J(n.sequential,"step"),clearTimeout(l[0].onCompleteTimeout),J(l[0],"onCompleteTimeout"),n.bindEvents=!1)},E=function(e){var n=t(this),r=n.data(i),o=r.opt,a=t("#mCSB_"+r.idx+"_container_wrapper"),s=a.length?a:t("#mCSB_"+r.idx+"_container"),l=[t("#mCSB_"+r.idx+"_scrollbar_vertical"),t("#mCSB_"+r.idx+"_scrollbar_horizontal")],c=[l[0].find(".mCSB_dragger"),l[1].find(".mCSB_dragger")];"x"!==o.axis&&(r.overflowed[0]&&!e?(l[0].add(c[0]).add(l[0].children("a")).css("display","block"),s.removeClass(u[8]+" "+u[10])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&c[0].css("display","none"),s.removeClass(u[10])):(l[0].css("display","none"),s.addClass(u[10])),s.addClass(u[8]))),"y"!==o.axis&&(r.overflowed[1]&&!e?(l[1].add(c[1]).add(l[1].children("a")).css("display","block"),s.removeClass(u[9]+" "+u[11])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&c[1].css("display","none"),s.removeClass(u[11])):(l[1].css("display","none"),s.addClass(u[11])),s.addClass(u[9]))),r.overflowed[0]||r.overflowed[1]?n.removeClass(u[5]):n.addClass(u[5])},T=function(e){var n=e.type,i=e.target.ownerDocument!==document?[t(frameElement).offset().top,t(frameElement).offset().left]:null,r=I()&&e.target.ownerDocument!==top.document?[t(e.view.frameElement).offset().top,t(e.view.frameElement).offset().left]:[0,0];switch(n){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return i?[e.originalEvent.pageY-i[0]+r[0],e.originalEvent.pageX-i[1]+r[1],!1]:[e.originalEvent.pageY,e.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var o=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],a=e.originalEvent.touches.length||e.originalEvent.changedTouches.length;return e.target.ownerDocument!==document?[o.screenY,o.screenX,a>1]:[o.pageY,o.pageX,a>1];default:return i?[e.pageY-i[0]+r[0],e.pageX-i[1]+r[1],!1]:[e.pageY,e.pageX,!1]}},B=function(){function e(t){var e=f.find("iframe");if(e.length){var n=t?"auto":"none";e.css("pointer-events",n)}}function n(t,e,n,i){if(f[0].idleTimer=h.scrollInertia<233?250:0,r.attr("id")===p[1])var o="x",a=(r[0].offsetLeft-e+i)*u.scrollRatio.x;else var o="y",a=(r[0].offsetTop-t+n)*u.scrollRatio.y;X(s,a.toString(),{dir:o,drag:!0})}var r,o,a,s=t(this),u=s.data(i),h=u.opt,d=i+"_"+u.idx,p=["mCSB_"+u.idx+"_dragger_vertical","mCSB_"+u.idx+"_dragger_horizontal"],f=t("#mCSB_"+u.idx+"_container"),m=t("#"+p[0]+",#"+p[1]),g=h.advanced.releaseDraggableSelectors?m.add(t(h.advanced.releaseDraggableSelectors)):m,v=h.advanced.extraDraggableSelectors?t(!I()||top.document).add(t(h.advanced.extraDraggableSelectors)):t(!I()||top.document);m.bind("mousedown."+d+" touchstart."+d+" pointerdown."+d+" MSPointerDown."+d,function(n){if(n.stopImmediatePropagation(),n.preventDefault(),Q(n)){c=!0,l&&(document.onselectstart=function(){return!1}),e(!1),Y(s),r=t(this);var i=r.offset(),u=T(n)[0]-i.top,d=T(n)[1]-i.left,p=r.height()+i.top,f=r.width()+i.left;u<p&&u>0&&d<f&&d>0&&(o=u,a=d),k(r,"active",h.autoExpandScrollbar)}}).bind("touchmove."+d,function(t){t.stopImmediatePropagation(),t.preventDefault();var e=r.offset(),i=T(t)[0]-e.top,s=T(t)[1]-e.left;n(o,a,i,s)}),t(document).add(v).bind("mousemove."+d+" pointermove."+d+" MSPointerMove."+d,function(t){if(r){var e=r.offset(),i=T(t)[0]-e.top,s=T(t)[1]-e.left;if(o===i&&a===s)return;n(o,a,i,s)}}).add(g).bind("mouseup."+d+" touchend."+d+" pointerup."+d+" MSPointerUp."+d,function(t){r&&(k(r,"active",h.autoExpandScrollbar),r=null),c=!1,l&&(document.onselectstart=null),e(!0)})},A=function(){function n(t){if(!Z(t)||c||T(t)[2])return void(e=0);e=1,w=0,k=0,u=1,C.removeClass("mCS_touch_action");var n=B.offset();h=T(t)[0]-n.top,d=T(t)[1]-n.left,O=[T(t)[0],T(t)[1]]}function r(t){if(Z(t)&&!c&&!T(t)[2]&&(S.documentTouchScroll||t.preventDefault(),t.stopImmediatePropagation(),(!k||w)&&u)){g=G();var e=E.offset(),n=T(t)[0]-e.top,i=T(t)[1]-e.left,r="mcsLinearOut";if(P.push(n),L.push(i),O[2]=Math.abs(T(t)[0]-O[0]),O[3]=Math.abs(T(t)[1]-O[1]),D.overflowed[0])var o=A[0].parent().height()-A[0].height(),a=h-n>0&&n-h>-(o*D.scrollRatio.y)&&(2*O[3]<O[2]||"yx"===S.axis);if(D.overflowed[1])var s=A[1].parent().width()-A[1].width(),p=d-i>0&&i-d>-(s*D.scrollRatio.x)&&(2*O[2]<O[3]||"yx"===S.axis);a||p?(N||t.preventDefault(),w=1):(k=1,C.addClass("mCS_touch_action")),N&&t.preventDefault(),_="yx"===S.axis?[h-n,d-i]:"x"===S.axis?[null,d-i]:[h-n,null],B[0].idleTimer=250,D.overflowed[0]&&l(_[0],F,r,"y","all",!0),D.overflowed[1]&&l(_[1],F,r,"x",M,!0)}}function o(t){if(!Z(t)||c||T(t)[2])return void(e=0);e=1,t.stopImmediatePropagation(),Y(C),m=G();var n=E.offset();p=T(t)[0]-n.top,f=T(t)[1]-n.left,P=[],L=[]}function a(t){if(Z(t)&&!c&&!T(t)[2]){u=0,t.stopImmediatePropagation(),w=0,k=0,v=G();var e=E.offset(),n=T(t)[0]-e.top,i=T(t)[1]-e.left;if(!(v-g>30)){b=1e3/(v-m);var r="mcsEaseOut",o=b<2.5,a=o?[P[P.length-2],L[L.length-2]]:[0,0];y=o?[n-a[0],i-a[1]]:[n-p,i-f];var h=[Math.abs(y[0]),Math.abs(y[1])];b=o?[Math.abs(y[0]/4),Math.abs(y[1]/4)]:[b,b];var d=[Math.abs(B[0].offsetTop)-y[0]*s(h[0]/b[0],b[0]),Math.abs(B[0].offsetLeft)-y[1]*s(h[1]/b[1],b[1])];_="yx"===S.axis?[d[0],d[1]]:"x"===S.axis?[null,d[1]]:[d[0],null],x=[4*h[0]+S.scrollInertia,4*h[1]+S.scrollInertia];var C=parseInt(S.contentTouchScroll)||0;_[0]=h[0]>C?_[0]:0,_[1]=h[1]>C?_[1]:0,D.overflowed[0]&&l(_[0],x[0],r,"y",M,!1),D.overflowed[1]&&l(_[1],x[1],r,"x",M,!1)}}}function s(t,e){var n=[1.5*e,2*e,e/1.5,e/2];return t>90?e>4?n[0]:n[3]:t>60?e>3?n[3]:n[2]:t>30?e>8?n[1]:e>6?n[0]:e>4?e:n[2]:e>8?e:n[3]}function l(t,e,n,i,r,o){t&&X(C,t.toString(),{dur:e,scrollEasing:n,dir:i,overwrite:r,drag:o})}var u,h,d,p,f,m,g,v,y,b,_,x,w,k,C=t(this),D=C.data(i),S=D.opt,$=i+"_"+D.idx,E=t("#mCSB_"+D.idx),B=t("#mCSB_"+D.idx+"_container"),A=[t("#mCSB_"+D.idx+"_dragger_vertical"),t("#mCSB_"+D.idx+"_dragger_horizontal")],P=[],L=[],F=0,M="yx"===S.axis?"none":"all",O=[],j=B.find("iframe"),R=["touchstart."+$+" pointerdown."+$+" MSPointerDown."+$,"touchmove."+$+" pointermove."+$+" MSPointerMove."+$,"touchend."+$+" pointerup."+$+" MSPointerUp."+$],N=void 0!==document.body.style.touchAction;B.bind(R[0],function(t){n(t)}).bind(R[1],function(t){r(t)}),E.bind(R[0],function(t){o(t)}).bind(R[2],function(t){a(t)}),j.length&&j.each(function(){t(this).load(function(){I(this)&&t(this.contentDocument||this.contentWindow.document).bind(R[0],function(t){n(t),o(t)}).bind(R[1],function(t){r(t)}).bind(R[2],function(t){a(t)})})})},P=function(){function n(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function r(t,e,n){u.type=n&&o?"stepped":"stepless",u.scrollAmount=10,q(a,t,e,"mcsLinearOut",n?60:null)}var o,a=t(this),s=a.data(i),l=s.opt,u=s.sequential,h=i+"_"+s.idx,d=t("#mCSB_"+s.idx+"_container"),p=d.parent();d.bind("mousedown."+h,function(t){e||o||(o=1,c=!0)}).add(document).bind("mousemove."+h,function(t){if(!e&&o&&n()){var i=d.offset(),a=T(t)[0]-i.top+d[0].offsetTop,c=T(t)[1]-i.left+d[0].offsetLeft;a>0&&a<p.height()&&c>0&&c<p.width()?u.step&&r("off",null,"stepped"):("x"!==l.axis&&s.overflowed[0]&&(a<0?r("on",38):a>p.height()&&r("on",40)),"y"!==l.axis&&s.overflowed[1]&&(c<0?r("on",37):c>p.width()&&r("on",39)))}}).bind("mouseup."+h+" dragend."+h,function(t){e||(o&&(o=0,r("off",null)),c=!1)})},L=function(){function e(e,i){if(Y(n),!F(n,e.target)){var a="auto"!==o.mouseWheel.deltaFactor?parseInt(o.mouseWheel.deltaFactor):l&&e.deltaFactor<100?100:e.deltaFactor||100,u=o.scrollInertia;if("x"===o.axis||"x"===o.mouseWheel.axis)var h="x",d=[Math.round(a*r.scrollRatio.x),parseInt(o.mouseWheel.scrollAmount)],p="auto"!==o.mouseWheel.scrollAmount?d[1]:d[0]>=s.width()?.9*s.width():d[0],f=Math.abs(t("#mCSB_"+r.idx+"_container")[0].offsetLeft),m=c[1][0].offsetLeft,g=c[1].parent().width()-c[1].width(),v=e.deltaX||e.deltaY||i;else var h="y",d=[Math.round(a*r.scrollRatio.y),parseInt(o.mouseWheel.scrollAmount)],p="auto"!==o.mouseWheel.scrollAmount?d[1]:d[0]>=s.height()?.9*s.height():d[0],f=Math.abs(t("#mCSB_"+r.idx+"_container")[0].offsetTop),m=c[0][0].offsetTop,g=c[0].parent().height()-c[0].height(),v=e.deltaY||i;"y"===h&&!r.overflowed[0]||"x"===h&&!r.overflowed[1]||((o.mouseWheel.invert||e.webkitDirectionInvertedFromDevice)&&(v=-v),o.mouseWheel.normalizeDelta&&(v=v<0?-1:1),(v>0&&0!==m||v<0&&m!==g||o.mouseWheel.preventDefault)&&(e.stopImmediatePropagation(),e.preventDefault()),e.deltaFactor<2&&!o.mouseWheel.normalizeDelta&&(p=e.deltaFactor,u=17),X(n,(f-v*p).toString(),{dir:h,dur:u}))}}if(t(this).data(i)){var n=t(this),r=n.data(i),o=r.opt,a=i+"_"+r.idx,s=t("#mCSB_"+r.idx),c=[t("#mCSB_"+r.idx+"_dragger_vertical"),t("#mCSB_"+r.idx+"_dragger_horizontal")],u=t("#mCSB_"+r.idx+"_container").find("iframe");u.length&&u.each(function(){t(this).load(function(){I(this)&&t(this.contentDocument||this.contentWindow.document).bind("mousewheel."+a,function(t,n){e(t,n)})})}),s.bind("mousewheel."+a,function(t,n){e(t,n)})}},I=function(t){var e=null;if(t){try{var n=t.contentDocument||t.contentWindow.document;e=n.body.innerHTML}catch(t){}return null!==e}try{var n=top.document;e=n.body.innerHTML}catch(t){}return null!==e},F=function(e,n){var r=n.nodeName.toLowerCase(),o=e.data(i).opt.mouseWheel.disableOver,a=["select","textarea"];return t.inArray(r,o)>-1&&!(t.inArray(r,a)>-1&&!t(n).is(":focus"))},M=function(){var e,n=t(this),r=n.data(i),o=i+"_"+r.idx,a=t("#mCSB_"+r.idx+"_container"),s=a.parent(),l=t(".mCSB_"+r.idx+"_scrollbar ."+u[12]);l.bind("mousedown."+o+" touchstart."+o+" pointerdown."+o+" MSPointerDown."+o,function(n){c=!0,t(n.target).hasClass("mCSB_dragger")||(e=1)}).bind("touchend."+o+" pointerup."+o+" MSPointerUp."+o,function(t){c=!1}).bind("click."+o,function(i){if(e&&(e=0,t(i.target).hasClass(u[12])||t(i.target).hasClass("mCSB_draggerRail"))){Y(n);var o=t(this),l=o.find(".mCSB_dragger");if(o.parent(".mCSB_scrollTools_horizontal").length>0){if(!r.overflowed[1])return;var c="x",h=i.pageX>l.offset().left?-1:1,d=Math.abs(a[0].offsetLeft)-h*(.9*s.width())}else{if(!r.overflowed[0])return;var c="y",h=i.pageY>l.offset().top?-1:1,d=Math.abs(a[0].offsetTop)-h*(.9*s.height())}X(n,d.toString(),{dir:c,scrollEasing:"mcsEaseInOut"})}})},O=function(){var e=t(this),n=e.data(i),r=n.opt,o=i+"_"+n.idx,a=t("#mCSB_"+n.idx+"_container"),s=a.parent();a.bind("focusin."+o,function(n){var i=t(document.activeElement),o=a.find(".mCustomScrollBox").length,l=0;i.is(r.advanced.autoScrollOnFocus)&&(Y(e),clearTimeout(e[0]._focusTimeout),e[0]._focusTimer=o?(l+17)*o:0,e[0]._focusTimeout=setTimeout(function(){var t=[et(i)[0],et(i)[1]],n=[a[0].offsetTop,a[0].offsetLeft],o=[n[0]+t[0]>=0&&n[0]+t[0]<s.height()-i.outerHeight(!1),n[1]+t[1]>=0&&n[0]+t[1]<s.width()-i.outerWidth(!1)],c="yx"!==r.axis||o[0]||o[1]?"all":"none";"x"===r.axis||o[0]||X(e,t[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:c,dur:l}),"y"===r.axis||o[1]||X(e,t[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:c,dur:l})},e[0]._focusTimer))})},j=function(){var e=t(this),n=e.data(i),r=i+"_"+n.idx,o=t("#mCSB_"+n.idx+"_container").parent();o.bind("scroll."+r,function(e){0===o.scrollTop()&&0===o.scrollLeft()||t(".mCSB_"+n.idx+"_scrollbar").css("visibility","hidden")})},R=function(){var e=t(this),n=e.data(i),r=n.opt,o=n.sequential,a=i+"_"+n.idx,s=".mCSB_"+n.idx+"_scrollbar",l=t(s+">a");l.bind("mousedown."+a+" touchstart."+a+" pointerdown."+a+" MSPointerDown."+a+" mouseup."+a+" touchend."+a+" pointerup."+a+" MSPointerUp."+a+" mouseout."+a+" pointerout."+a+" MSPointerOut."+a+" click."+a,function(i){
function a(t,n){o.scrollAmount=r.scrollButtons.scrollAmount,q(e,t,n)}if(i.preventDefault(),Q(i)){var s=t(this).attr("class");switch(o.type=r.scrollButtons.scrollType,i.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===o.type)return;c=!0,n.tweenRunning=!1,a("on",s);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===o.type)return;c=!1,o.dir&&a("off",s);break;case"click":if("stepped"!==o.type||n.tweenRunning)return;a("on",s)}}})},N=function(){function e(e){function i(t,e){a.type=o.keyboard.scrollType,a.scrollAmount=o.keyboard.scrollAmount,"stepped"===a.type&&r.tweenRunning||q(n,t,e)}switch(e.type){case"blur":r.tweenRunning&&a.dir&&i("off",null);break;case"keydown":case"keyup":var s=e.keyCode?e.keyCode:e.which,l="on";if("x"!==o.axis&&(38===s||40===s)||"y"!==o.axis&&(37===s||39===s)){if((38===s||40===s)&&!r.overflowed[0]||(37===s||39===s)&&!r.overflowed[1])return;"keyup"===e.type&&(l="off"),t(document.activeElement).is(h)||(e.preventDefault(),e.stopImmediatePropagation(),i(l,s))}else if(33===s||34===s){if((r.overflowed[0]||r.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type){Y(n);var d=34===s?-1:1;if("x"===o.axis||"yx"===o.axis&&r.overflowed[1]&&!r.overflowed[0])var p="x",f=Math.abs(c[0].offsetLeft)-d*(.9*u.width());else var p="y",f=Math.abs(c[0].offsetTop)-d*(.9*u.height());X(n,f.toString(),{dir:p,scrollEasing:"mcsEaseInOut"})}}else if((35===s||36===s)&&!t(document.activeElement).is(h)&&((r.overflowed[0]||r.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type)){if("x"===o.axis||"yx"===o.axis&&r.overflowed[1]&&!r.overflowed[0])var p="x",f=35===s?Math.abs(u.width()-c.outerWidth(!1)):0;else var p="y",f=35===s?Math.abs(u.height()-c.outerHeight(!1)):0;X(n,f.toString(),{dir:p,scrollEasing:"mcsEaseInOut"})}}}var n=t(this),r=n.data(i),o=r.opt,a=r.sequential,s=i+"_"+r.idx,l=t("#mCSB_"+r.idx),c=t("#mCSB_"+r.idx+"_container"),u=c.parent(),h="input,textarea,select,datalist,keygen,[contenteditable='true']",d=c.find("iframe"),p=["blur."+s+" keydown."+s+" keyup."+s];d.length&&d.each(function(){t(this).load(function(){I(this)&&t(this.contentDocument||this.contentWindow.document).bind(p[0],function(t){e(t)})})}),l.attr("tabindex","0").bind(p[0],function(t){e(t)})},q=function(e,n,r,o,a){function s(t){h.snapAmount&&(d.scrollAmount=h.snapAmount instanceof Array?"x"===d.dir[0]?h.snapAmount[1]:h.snapAmount[0]:h.snapAmount);var n="stepped"!==d.type,i=a?a:t?n?m/1.5:g:1e3/60,r=t?n?7.5:40:2.5,l=[Math.abs(p[0].offsetTop),Math.abs(p[0].offsetLeft)],u=[c.scrollRatio.y>10?10:c.scrollRatio.y,c.scrollRatio.x>10?10:c.scrollRatio.x],f="x"===d.dir[0]?l[1]+d.dir[1]*(u[1]*r):l[0]+d.dir[1]*(u[0]*r),v="x"===d.dir[0]?l[1]+d.dir[1]*parseInt(d.scrollAmount):l[0]+d.dir[1]*parseInt(d.scrollAmount),y="auto"!==d.scrollAmount?v:f,b=o?o:t?n?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",_=!!t;return t&&i<17&&(y="x"===d.dir[0]?l[1]:l[0]),X(e,y.toString(),{dir:d.dir[0],scrollEasing:b,dur:i,onComplete:_}),t?void(d.dir=!1):(clearTimeout(d.step),void(d.step=setTimeout(function(){s()},i)))}function l(){clearTimeout(d.step),J(d,"step"),Y(e)}var c=e.data(i),h=c.opt,d=c.sequential,p=t("#mCSB_"+c.idx+"_container"),f="stepped"===d.type,m=h.scrollInertia<26?26:h.scrollInertia,g=h.scrollInertia<1?17:h.scrollInertia;switch(n){case"on":if(d.dir=[r===u[16]||r===u[15]||39===r||37===r?"x":"y",r===u[13]||r===u[15]||38===r||37===r?-1:1],Y(e),tt(r)&&"stepped"===d.type)return;s(f);break;case"off":l(),(f||c.tweenRunning&&d.dir)&&s(!0)}},z=function(e){var n=t(this).data(i).opt,r=[];return"function"==typeof e&&(e=e()),e instanceof Array?r=e.length>1?[e[0],e[1]]:"x"===n.axis?[null,e[0]]:[e[0],null]:(r[0]=e.y?e.y:e.x||"x"===n.axis?null:e,r[1]=e.x?e.x:e.y||"y"===n.axis?null:e),"function"==typeof r[0]&&(r[0]=r[0]()),"function"==typeof r[1]&&(r[1]=r[1]()),r},H=function(e,n){if(null!=e&&"undefined"!=typeof e){var r=t(this),o=r.data(i),a=o.opt,s=t("#mCSB_"+o.idx+"_container"),l=s.parent(),c=typeof e;n||(n="x"===a.axis?"x":"y");var u="x"===n?s.outerWidth(!1):s.outerHeight(!1),d="x"===n?s[0].offsetLeft:s[0].offsetTop,p="x"===n?"left":"top";switch(c){case"function":return e();case"object":var f=e.jquery?e:t(e);if(!f.length)return;return"x"===n?et(f)[1]:et(f)[0];case"string":case"number":if(tt(e))return Math.abs(e);if(e.indexOf("%")!==-1)return Math.abs(u*parseInt(e)/100);if(e.indexOf("-=")!==-1)return Math.abs(d-parseInt(e.split("-=")[1]));if(e.indexOf("+=")!==-1){var m=d+parseInt(e.split("+=")[1]);return m>=0?0:Math.abs(m)}if(e.indexOf("px")!==-1&&tt(e.split("px")[0]))return Math.abs(e.split("px")[0]);if("top"===e||"left"===e)return 0;if("bottom"===e)return Math.abs(l.height()-s.outerHeight(!1));if("right"===e)return Math.abs(l.width()-s.outerWidth(!1));if("first"===e||"last"===e){var f=s.find(":"+e);return"x"===n?et(f)[1]:et(f)[0]}return t(e).length?"x"===n?et(t(e))[1]:et(t(e))[0]:(s.css(p,e),void h.update.call(null,r[0]))}}},U=function(e){function n(){return clearTimeout(d[0].autoUpdate),0===s.parents("html").length?void(s=null):void(d[0].autoUpdate=setTimeout(function(){return c.advanced.updateOnSelectorChange&&(l.poll.change.n=o(),l.poll.change.n!==l.poll.change.o)?(l.poll.change.o=l.poll.change.n,void a(3)):c.advanced.updateOnContentResize&&(l.poll.size.n=s[0].scrollHeight+s[0].scrollWidth+d[0].offsetHeight+s[0].offsetHeight+s[0].offsetWidth,l.poll.size.n!==l.poll.size.o)?(l.poll.size.o=l.poll.size.n,void a(1)):!c.advanced.updateOnImageLoad||"auto"===c.advanced.updateOnImageLoad&&"y"===c.axis||(l.poll.img.n=d.find("img").length,l.poll.img.n===l.poll.img.o)?void((c.advanced.updateOnSelectorChange||c.advanced.updateOnContentResize||c.advanced.updateOnImageLoad)&&n()):(l.poll.img.o=l.poll.img.n,void d.find("img").each(function(){r(this)}))},c.advanced.autoUpdateTimeout))}function r(e){function n(t,e){return function(){return e.apply(t,arguments)}}function i(){this.onload=null,t(e).addClass(u[2]),a(2)}if(t(e).hasClass(u[2]))return void a();var r=new Image;r.onload=n(r,i),r.src=e.src}function o(){c.advanced.updateOnSelectorChange===!0&&(c.advanced.updateOnSelectorChange="*");var t=0,e=d.find(c.advanced.updateOnSelectorChange);return c.advanced.updateOnSelectorChange&&e.length>0&&e.each(function(){t+=this.offsetHeight+this.offsetWidth}),t}function a(t){clearTimeout(d[0].autoUpdate),h.update.call(null,s[0],t)}var s=t(this),l=s.data(i),c=l.opt,d=t("#mCSB_"+l.idx+"_container");return e?(clearTimeout(d[0].autoUpdate),void J(d[0],"autoUpdate")):void n()},W=function(t,e,n){return Math.round(t/e)*e-n},Y=function(e){var n=e.data(i),r=t("#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal");r.each(function(){K.call(this)})},X=function(e,n,r){function o(t){return l&&c.callbacks[t]&&"function"==typeof c.callbacks[t]}function a(){return[c.callbacks.alwaysTriggerOffsets||_>=x[0]+C,c.callbacks.alwaysTriggerOffsets||_<=-D]}function s(){var t=[p[0].offsetTop,p[0].offsetLeft],n=[y[0].offsetTop,y[0].offsetLeft],i=[p.outerHeight(!1),p.outerWidth(!1)],o=[d.height(),d.width()];e[0].mcs={content:p,top:t[0],left:t[1],draggerTop:n[0],draggerLeft:n[1],topPct:Math.round(100*Math.abs(t[0])/(Math.abs(i[0])-o[0])),leftPct:Math.round(100*Math.abs(t[1])/(Math.abs(i[1])-o[1])),direction:r.dir}}var l=e.data(i),c=l.opt,u={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:c.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},r=t.extend(u,r),h=[r.dur,r.drag?0:r.dur],d=t("#mCSB_"+l.idx),p=t("#mCSB_"+l.idx+"_container"),f=p.parent(),m=c.callbacks.onTotalScrollOffset?z.call(e,c.callbacks.onTotalScrollOffset):[0,0],g=c.callbacks.onTotalScrollBackOffset?z.call(e,c.callbacks.onTotalScrollBackOffset):[0,0];if(l.trigger=r.trigger,0===f.scrollTop()&&0===f.scrollLeft()||(t(".mCSB_"+l.idx+"_scrollbar").css("visibility","visible"),f.scrollTop(0).scrollLeft(0)),"_resetY"!==n||l.contentReset.y||(o("onOverflowYNone")&&c.callbacks.onOverflowYNone.call(e[0]),l.contentReset.y=1),"_resetX"!==n||l.contentReset.x||(o("onOverflowXNone")&&c.callbacks.onOverflowXNone.call(e[0]),l.contentReset.x=1),"_resetY"!==n&&"_resetX"!==n){if(!l.contentReset.y&&e[0].mcs||!l.overflowed[0]||(o("onOverflowY")&&c.callbacks.onOverflowY.call(e[0]),l.contentReset.x=null),!l.contentReset.x&&e[0].mcs||!l.overflowed[1]||(o("onOverflowX")&&c.callbacks.onOverflowX.call(e[0]),l.contentReset.x=null),c.snapAmount){var v=c.snapAmount instanceof Array?"x"===r.dir?c.snapAmount[1]:c.snapAmount[0]:c.snapAmount;n=W(n,v,c.snapOffset)}switch(r.dir){case"x":var y=t("#mCSB_"+l.idx+"_dragger_horizontal"),b="left",_=p[0].offsetLeft,x=[d.width()-p.outerWidth(!1),y.parent().width()-y.width()],w=[n,0===n?0:n/l.scrollRatio.x],C=m[1],D=g[1],S=C>0?C/l.scrollRatio.x:0,$=D>0?D/l.scrollRatio.x:0;break;case"y":var y=t("#mCSB_"+l.idx+"_dragger_vertical"),b="top",_=p[0].offsetTop,x=[d.height()-p.outerHeight(!1),y.parent().height()-y.height()],w=[n,0===n?0:n/l.scrollRatio.y],C=m[0],D=g[0],S=C>0?C/l.scrollRatio.y:0,$=D>0?D/l.scrollRatio.y:0}w[1]<0||0===w[0]&&0===w[1]?w=[0,0]:w[1]>=x[1]?w=[x[0],x[1]]:w[0]=-w[0],e[0].mcs||(s(),o("onInit")&&c.callbacks.onInit.call(e[0])),clearTimeout(p[0].onCompleteTimeout),V(y[0],b,Math.round(w[1]),h[1],r.scrollEasing),!l.tweenRunning&&(0===_&&w[0]>=0||_===x[0]&&w[0]<=x[0])||V(p[0],b,Math.round(w[0]),h[0],r.scrollEasing,r.overwrite,{onStart:function(){r.callbacks&&r.onStart&&!l.tweenRunning&&(o("onScrollStart")&&(s(),c.callbacks.onScrollStart.call(e[0])),l.tweenRunning=!0,k(y),l.cbOffsets=a())},onUpdate:function(){r.callbacks&&r.onUpdate&&o("whileScrolling")&&(s(),c.callbacks.whileScrolling.call(e[0]))},onComplete:function(){if(r.callbacks&&r.onComplete){"yx"===c.axis&&clearTimeout(p[0].onCompleteTimeout);var t=p[0].idleTimer||0;p[0].onCompleteTimeout=setTimeout(function(){o("onScroll")&&(s(),c.callbacks.onScroll.call(e[0])),o("onTotalScroll")&&w[1]>=x[1]-S&&l.cbOffsets[0]&&(s(),c.callbacks.onTotalScroll.call(e[0])),o("onTotalScrollBack")&&w[1]<=$&&l.cbOffsets[1]&&(s(),c.callbacks.onTotalScrollBack.call(e[0])),l.tweenRunning=!1,p[0].idleTimer=0,k(y,"hide")},t)}}})}},V=function(t,e,n,i,r,o,a){function s(){x.stop||(y||f.call(),y=G()-v,l(),y>=x.time&&(x.time=y>x.time?y+d-(y-x.time):y+d-1,x.time<y+1&&(x.time=y+1)),x.time<i?x.id=p(s):g.call())}function l(){i>0?(x.currVal=h(x.time,b,w,i,r),_[e]=Math.round(x.currVal)+"px"):_[e]=n+"px",m.call()}function c(){d=1e3/60,x.time=y+d,p=window.requestAnimationFrame?window.requestAnimationFrame:function(t){return l(),setTimeout(t,.01)},x.id=p(s)}function u(){null!=x.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(x.id):clearTimeout(x.id),x.id=null)}function h(t,e,n,i,r){switch(r){case"linear":case"mcsLinear":return n*t/i+e;case"mcsLinearOut":return t/=i,t--,n*Math.sqrt(1-t*t)+e;case"easeInOutSmooth":return t/=i/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e);case"easeInOutStrong":return t/=i/2,t<1?n/2*Math.pow(2,10*(t-1))+e:(t--,n/2*(-Math.pow(2,-10*t)+2)+e);case"easeInOut":case"mcsEaseInOut":return t/=i/2,t<1?n/2*t*t*t+e:(t-=2,n/2*(t*t*t+2)+e);case"easeOutSmooth":return t/=i,t--,-n*(t*t*t*t-1)+e;case"easeOutStrong":return n*(-Math.pow(2,-10*t/i)+1)+e;case"easeOut":case"mcsEaseOut":default:var o=(t/=i)*t,a=o*t;return e+n*(.499999999999997*a*o+-2.5*o*o+5.5*a+-6.5*o+4*t)}}t._mTween||(t._mTween={top:{},left:{}});var d,p,a=a||{},f=a.onStart||function(){},m=a.onUpdate||function(){},g=a.onComplete||function(){},v=G(),y=0,b=t.offsetTop,_=t.style,x=t._mTween[e];"left"===e&&(b=t.offsetLeft);var w=n-b;x.stop=0,"none"!==o&&u(),c()},G=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},K=function(){var t=this;t._mTween||(t._mTween={top:{},left:{}});for(var e=["top","left"],n=0;n<e.length;n++){var i=e[n];t._mTween[i].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(t._mTween[i].id):clearTimeout(t._mTween[i].id),t._mTween[i].id=null,t._mTween[i].stop=1)}},J=function(t,e){try{delete t[e]}catch(n){t[e]=null}},Q=function(t){return!(t.which&&1!==t.which)},Z=function(t){var e=t.originalEvent.pointerType;return!(e&&"touch"!==e&&2!==e)},tt=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},et=function(t){var e=t.parents(".mCSB_container");return[t.offset().top-e.offset().top,t.offset().left-e.offset().left]},nt=function(){function t(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null}var e=t();return!!e&&document[e]};t.fn[n]=function(e){return h[e]?h[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):h.init.apply(this,arguments)},t[n]=function(e){return h[e]?h[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):h.init.apply(this,arguments)},t[n].defaults=o,window[n]=!0,t(window).load(function(){t(r)[n](),t.extend(t.expr[":"],{mcsInView:t.expr[":"].mcsInView||function(e){var n,i,r=t(e),o=r.parents(".mCSB_container");if(o.length)return n=o.parent(),i=[o[0].offsetTop,o[0].offsetLeft],i[0]+et(r)[0]>=0&&i[0]+et(r)[0]<n.height()-r.outerHeight(!1)&&i[1]+et(r)[1]>=0&&i[1]+et(r)[1]<n.width()-r.outerWidth(!1)},mcsOverflow:t.expr[":"].mcsOverflow||function(e){var n=t(e).data(i);if(n)return n.overflowed[0]||n.overflowed[1]}})})})}),define("mCustomScrollbar",["jquery"],function(t){return function(){var e;return e||t.$.fn.mCustomScrollbar}}(this)),define("formAjax",["sfModal","mobile"],function(t,e){var n={_:window.SF.token};$(document).ajaxComplete(function(e,i,r){var o,a,s,l,c,u,h;if(window.captchaPostData=null!=(s=window.captchaPostData)?s:{},i.responseText)if(i.responseText.indexOf("<br />")!==-1||i.responseText.indexOf("<pre>exception ")!==-1)console.log("后端返回错误信息=> ",i.responseText),"localhost"===location.hostname&&t({title:"警告：前方高能！",$content:i.responseText,hideClose:!0,modalSize:"modal-lg"});else if(i.responseJSON&&1===i.responseJSON.status){if(h=i.responseJSON,!h.data)return;var d=h.data[0];if(r.url.indexOf("/user/stat")===-1&&"login"===d)require("main").register();else if("form"===d&&h.data[1].hasOwnProperty("captcha")&&1===_.keys(h.data[1]).length)captchaPostData.api=r.url,captchaPostData.data=r.data,t({modalSize:"modal-sm",title:h.data[1].captcha,content:"<div id='captchaPostForm' ><div class='reloadCaptcha'><img title='点击切换验证码'  src='/user/captcha?w=240&h=50' ></div><div class='form-group'><input class='form-action form-control' name='captcha'></div></div>",hideClose:!0,doneText:"确认并提交",doneFn:function(){var t;return t=$("#captchaPostForm").find("input[name=captcha]"),captchaPostData.captcha=t.val(),$.post("/api/captcha/check",{captcha:captchaPostData.captcha},function(e){if(!e.status)return e.data?$.post(captchaPostData.api,captchaPostData.data+"&captcha="+captchaPostData.captcha,function(t){return window.captchaPostData={},t.data.hasOwnProperty("url")?location.href=t.data.url:location.reload()}):(t.addClass("error"),console.log("验证码错误"),$(".reloadCaptcha").trigger("click"))})}});else if("robot"===d)location.href="/stop-robot";else if("unactivated"===d)t("hide"),$("#activate").modal("show");else if("nonBlocked"===d)t(h.data[1]);else if("access"===d)t({title:h.data[1][0],content:h.data[1][1],hideClose:!0});else if("form"===d){var p=r.url.split("?")[0];u=r.url.split("/")[2],u=u.split("?")[0],l=new RegExp("[?&]_="+n._),c=r.url.replace(l,""),o=!0;var f=h.data[1];$.each(f,function(t,e){var n,i,r,a;if("captcha"===t&&($("[name=captcha]").parents(".form-group").show(),$(".captcha").parent("a").click()),r=t.toLowerCase().replace(/\b[a-z]/g,function(t){return t.toUpperCase()}),"tags"===t&&"必须填写标签"===e)return void $("#article .sf-typeHelper, #question .sf-typeHelper , #live .sf-typeHelper, #liveSeries .sf-typeHelper, .blog-post .sf-typeHelper, .sf-typeHelper--fortags").addClass("error").after('<span class="error--msg">'+e+"</span>");if("cap"===t)return $('input[name="cap"]').closest(".form-group").find(".help-block.err").remove(),$(".captchaInput").addClass("has-error"),$('input[name="cap"]').closest(".form-group").addClass("has-error"),void $('input[name="cap"]').addClass("error").after('<span class="help-block err">'+e+"</span>");if("list"===t)return void $("#liveSeries .liveseries-select").addClass("error").after('<span class="error--msg">'+e+"</span>");if(a="#"+u+r,0===$(a).length&&(a="#"+u.replace(/s$/,"")+r),i=$("form#"+u+" *[name="+t+"]").not("[type=hidden]").parents(".form-group"),0===i.length&&(i=$("form#"+u.replace(/s$/,"")+" *[name="+t+"]").not("[type=hidden]").parents(".form-group")),n=$('form[action="'+p+'"] *[name='+t+"]").not("[type=hidden]").parents(".form-group"),n.length||(n=$('form[action="'+c+'"] *[name='+t+"]").not("[type=hidden]").parents(".form-group"),n.length||(n=$('.form[action="'+p+'"] *[name='+t+"]").not("[type=hidden]").parents(".form-group"),n.length||(n=$("form *[name="+t+"]").not("[type=hidden]").parents(".form-group"),n.length||(n=$("form *[data-name="+t+"]").not("[type=hidden]").parents(".form-group"))))),$(a).length)$(a).addClass("error").attr("data-error",e),0===$(a).next(".error--msg").length&&$(a).after('<span class="error--msg">'+e+"</span>");else if(i.length){i.find(".help-block.err").remove(),i.addClass("has-error");var s=i.find("[name="+t+"]").not("[type=hidden]"),l=s.closest(".input-group");l.length>0?l.after('<span class="help-block err">'+e+"</span>"):s.after('<span class="help-block err">'+e+"</span>")}else if(n.length)n.find(".help-block").remove(),n.addClass("has-error"),n.find(".input-group").length>0?n.find(".input-group").after('<span class="help-block err">'+e+"</span>"):(n.find("[name="+t+"]").not("[type=hidden]").parents(".form-group").append('<span class="help-block err">'+e+"</span>"),n.find("[data-name="+t+"]").not("[type=hidden]").parents(".form-group").append('<span class="help-block err">'+e+"</span>"));else if($("form").length&&!$("form").hasClass("header-search")){if($("form#"+u+" *[name="+t+"]").not("[type=hidden]").siblings(".error--msg").remove(),$("form#"+u+" *[name="+t+"]").not("[type=hidden]").addClass("error").attr("data-error",e).after('<span class="error--msg">'+e+"</span>"),1===$("form").length&&$("form").hasClass("header-search")){var h=$(".form *[data-name="+t+"]");0==h.length&&(h=$(".form *[name="+t+"]"));var d=h.closest(".form-group");d.addClass("has-error"),d.find(".err").remove(),h.after('<span class="help-block err">'+e+"</span>")}}else if($(".form").length){var f=$(".form *[data-name="+t+"]");0==f.length&&(f=$(".form *[name="+t+"]"));var m=f.closest(".form-group");m.hasClass("err-inline")?(m.addClass("has-error"),m.find(".err").remove(),f.after('<span class="help-inline-block help-block err">'+e+"</span>")):(m.addClass("has-error"),m.find(".err").remove(),f.after('<span class="help-block err">'+e+"</span>"))}o&&($(a).length?$(a).focus():(n.length&&n.find("[name="+t+"]").not("[type=hidden]").focus(),i.length&&i.find("[name="+t+"]").not("[type=hidden]").focus(),o=!1))})}else a=["limit","lock","author","rank","account"],_.find(a,function(t){return t===d})?$.get("/api/errorMessage",{type:d,key:h.data[1]},function(e){if(e.data)return t({title:e.data[0],content:e.data[1],hideClose:!0})}):t({title:d,content:h.data[1],hideClose:!0})}})}),define("header",["main","sfModal","isMobile","underscore"],function(t,e,n,i){$(".opts__item.user").first().on("touchend",function(t){n("any")&&$(this).find(".dropdown-avatar-menu").toggle()}),$(".dropdown-avatar-menu").first().on("touchend",function(t){n("any")&&t.stopPropagation()}),$(".3rdLogin").click(function(t){t.preventDefault(),window.open($(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),$(".menu__item--more a").first().on("click",function(t){t.preventDefault()});var r='\n        <div class="dropdown-content-recommend">\n            <% _.each(data,function(d){ %>\n                <div class="recommend-item">\n                    <a class="block" href="<%= d.url %>"><p class="item-title"><%= d.name %></p></a>\n                    <div class="item-info">\n                        <span><%= d.cityName %></span> · <span><%= d.startDate %>&nbsp<%= d.startWeek %></span> <% if(d.isSignFinished == 0){ %> · <span class="item-info-state">  报名中 </span><%}%>\n                    </div>\n                </div>\n            <% }) %>\n            <div class="item-showmore">\n                <a href="/events">查看更多活动</a>\n            </div>\n        </div>\n    ',o=function(){return $.get("/api/activity/recommend",function(t){if(0==t.status){var e=i.template(r)(t);$(".dropdown-block").append(e),$(".dropdown-content-menu").css("height")<$(".dropdown-content-recommend").css("height")&&$(".dropdown-content-menu").css("height",$(".dropdown-content-recommend").css("height")),t.data.length||$(".dropdown-content-recommend").addClass("hidden")}}),(o=function(){})()};$(".menu__item--more").hoverIntent(function(){$(this).find(".dropdown-block").removeClass("hidden"),o()},function(){$(this).find(".dropdown-block").addClass("hidden")},null,1),$(".hoverDropdown").hoverIntent(function(){$(this).find(".dropdown-avatar-menu").removeClass("hidden")},function(){$(this).find(".dropdown-avatar-menu").addClass("hidden")},null,1),$(".dropdownBtn").click(function(t){var e;$(this).parent(".hoverDropdown").hasClass("open")&&(t.preventDefault(),e=$(this).attr("href"),t.ctrlKey||t.metaKey?window.open(e):location.href=e)}),$("#shouldGoTo").on("click",function(t){var e=$(this),n=e.data("type");$("body").hasClass("news-list");switch(n){case"blog":location.href="/write";break;case"qa":$(".site-ask-btn").length>0?location.href=$(".site-ask-btn").attr("href"):location.href="/ask";break;case"news":location.href="/submit";break;case"note":location.href="/record";break;default:$("body").hasClass("user-note")?location.href="/record":location.href="/ask"}}),$(".header-search input").on("focus",function(t){t.preventDefault(),$(".sf-header").addClass("search-open")}),$(".header-search input").on("blur",function(t){t.preventDefault(),$(".sf-header").removeClass("search-open")}),function(){var t=["/lives","/news"];t.forEach(function(t){!function(t){var e="navItemHighlight"+t,n=$('.sf-header--index [href="'+t+'"]');$(".header-response").length||(localStorage.getItem(e)||n.addClass("menu__item--new-show"),n.on("click",function(){localStorage.getItem(e)||localStorage.setItem(e,1)}))}(t)})}(),$("#live__nav--newest").on("click",function(t){var e=$(this);ddosMode?e.removeClass("livemenu__item--new-show"):socket.emit("check_live",function(){e.removeClass("livemenu__item--new-show")})}),$('.sf-header--index [href="/lives"]').on("click",function(t){var e=$(this);ddosMode?e.removeClass("menu__item--new-show"):socket.emit("check_live",function(){e.removeClass("menu__item--new-show")})})}),jQuery(function(t){t(document).ready(function(){var e=[],n=[],i=0,r="",o="",a="",s=null,l=0,c=0,u=0,h=0,d=0;t(window).scroll(function(e){var n=t(this).scrollTop();r=n>i?"down":"up",i=n}),t.fn.stickUp=function(e){t(this).addClass("stuckMenu");var i=0;if(null!=e){for(var r in e.parts)e.parts.hasOwnProperty(r)&&(n[i]=e.parts[i],i++);0==i&&console.log("error:needs arguments"),o=e.itemClass,a=e.itemHover,null!=e.topMargin?"auto"==e.topMargin?h=parseInt(t(".stuckMenu").css("margin-top")):isNaN(e.topMargin)&&e.topMargin.search("px")>0?h=parseInt(e.topMargin.replace("px","")):isNaN(parseInt(e.topMargin))?(console.log("incorrect argument, ignored."),h=0):h=parseInt(e.topMargin):h=0,s=t("."+o).size()}l=parseInt(t(this).height()),c=parseInt(t(this).css("margin-bottom")),u=parseInt(t(this).next().closest("div").css("margin-top")),d=t(this).offset()?parseInt(t(this).offset().top):null},t(document).on("scroll",function(){function i(i){contentView=.4*t("#"+n[i]).height(),testView=e[i]-contentView,varscroll>testView?(t("."+o).removeClass(a),t("."+o+":eq("+i+")").addClass(a)):varscroll<50&&(t("."+o).removeClass(a),t("."+o+":eq(0)").addClass(a))}if(varscroll=parseInt(t(document).scrollTop()),null!=s)for(var p=0;p<s;p++)e[p]=t("#"+n[p]).offset().top,"down"==r&&varscroll>e[p]-50&&varscroll<e[p]+50&&(t("."+o).removeClass(a),t("."+o+":eq("+p+")").addClass(a)),"up"==r&&i(p);t("#footer").length>0&&d<=varscroll+h+10&&t("#footer").offset().top>varscroll+t(".ad-should-be-fixed").height()+66&&(t(".stuckMenu").addClass("isStuck"),t(".stuckMenu").next().closest("div").css({"margin-top":l+c+u+"px"},10),t(".stuckMenu").css("position","fixed"),t(".isStuck").css({top:"10px"},10,function(){})),varscroll+h+10<d&&(t(".stuckMenu").removeClass("isStuck"),t(".stuckMenu").next().closest("div").css({"margin-top":u+"px"},10),t(".stuckMenu").css({position:"relative",top:0}))})})}),define("jquery_stickUp",["jquery"],function(t){return function(){var e;return e||t.$.fn.stickUp}}(this)),define("main",["jquery","sfModal","mobile","isMobile","underscore","jquery_hoverIntent","sfAjax","bootstrap","jquery_cookie","jquery_lazyload","underscore","typeHelper","jquery-mousewheel","mCustomScrollbar","formAjax","header","jquery_stickUp"],function(t,e,n,i){var r,o,a,s,l,c,u,h,d,p,f,m,g,v;i("any")&&(t("#icon4weChat").attr("src",t("#icon4weChat").data("src")),t(".sfad-sidebar").remove()),t(".js-content-restore").on("click",function(){var e,n,i,r;if(e=t(this),r=e.data("type"),i=e.data("id"),n="/api/"+r+"/"+i+"/delete/cancel",confirm("真的要恢复吗?"))return t.post(n,function(t){return location.reload()})}),t("#footer .weixin-popover-qrcode").popover({content:'<div class="weixin-qrcode"></div><p class="text-center mb0">关注微信号</p>',html:!0,placement:"top",trigger:"hover"}),t(".weixin-popover-qrcode").mouseover(function(e){t(this).popover("show")}),function(){d=function(){t(".opts__item--message").removeClass("hide"),t.get("/api/notifications",function(e){var n,i,r,o;e.status||(e.data=null!=(i=e.data)?i:[],r={data:e.data,unread:{general:_.filter(e.data.general,function(t){return 0===parseInt(t.viewed)}).length,ranked:_.filter(e.data.ranked,function(t){return 0===parseInt(t.viewed)}).length,followed:_.filter(e.data.followed,function(t){return 0===parseInt(t.viewed)}).length,comment:_.filter(e.data.comment,function(t){return 0===parseInt(t.viewed)}).length}},o=_.reduce(r.unread,function(t,e){return t+e},0),o>0&&t(".opts__item--message .message-ingore-all").removeClass("hide"),t("#messageGeneral").html(_.template(t("#messageGeneralTpl").html())(r.data)),t("#messageComment").html(_.template(t("#messageCommentTpl").html())(r.data)),t("#messageRanked").html(_.template(t("#messageRankedTpl").html())(r.data)),t("#messageFollowed").html(_.template(t("#messageFollowedTpl").html())(r.data)),t(".opts__item--message-loading").remove(),n={},t(".mCustomScrollbar-message").mCustomScrollbar({scrollInertia:0,callbacks:{onScroll:function(){var e,i,r;if(r=this.mcs.topPct,i=t(this).data("proto"),n[i]=n[i]||2,r>55&&n[i]!==-1){if(console.log(i,r,"ajax page "+n[i]),e="/api/notifications?type="+i+"&page="+n[i],window.__api===e)return;return window.__api=e,t.get(e,function(e){var r,o;if(!e.status)return r=e.data[i],r.length>0?(o=_.template(t("#item--"+i).html())(e.data),t(".tab-pane.active .mCSB_container").append(o),n[i]++):n[i]=-1})}}}}))})},t(".opts__item--message .message-ingore-all").on("click",function(){var e;e=t(this),t.post("/api/notifications/all/view",function(n){return d(),t(".notice-dot").addClass("hide"),e.addClass("hide")})}),t(".opts__item--message").on("click",".message__btn--follow",function(){var e,n;return e=t(this),n=e.data("id"),e.addClass("disabled"),t.post("/api/user/"+n+"/follow",function(t){return d(),e.removeClass("disabled")})}),t(".opts__item--message").on("click",".message__btn--unfollow",function(){var e,n;return e=t(this),n=e.data("id"),e.addClass("disabled"),t.post("/api/user/"+n+"/follow/cancel",function(t){return d(),e.removeClass("disabled")})}),t(".dropdown-toggle-message").on("click",function(e){var n;return e.preventDefault(),n=t(".opts__item--message"),"undefined"!=typeof v&&v.emit("read"),r.titleRender.clear("message"),r.titleRender.clear("event"),"none"!==n.css("display")?n.addClass("hide"):(d(),t.get("/api/notifications/viewed",function(e){var n;if(n=null,!e.status)return _.each(e.data,function(e,i){if(e)return n?(n=t(".notice-dot-"+i),n.removeClass("hide"),n.removeClass("notice-dot--special")):(n=t(".notice-dot-"+i),n.addClass("notice-dot--special"),n.closest("a[role='tab']").trigger("click"))})}))}),t(".opts__item--message a[role='tab']").on("click",function(e){var n;if(t(".opts__item--message .active").not(".btn").removeClass("active"),t(this).addClass("active"),t(this).find(".notice-dot.hide").length>0&&0===t(this).find(".notice-dot--special").length);else if(t(this).find(".notice-dot").addClass("hide"),n=t(this).attr("href"),"#messageRanked"===n&&t.post("/api/notifications/viewed?type=ranked"),"#messageComment"===n&&t.post("/api/notifications/viewed?type=comment"),"#messageGeneral"===n&&t.post("/api/notifications/viewed?type=general"),"#messageInbox"===n&&t.post("/api/notifications/viewed?type=inbox"),"#messageFollowed"===n)return t.post("/api/notifications/viewed?type=followed")}),t("body").on("click",function(e){"none"!==t(".opts__item--message").css("display")&&0===t(e.target).parents(".message").length&&t(".opts__item--message").addClass("hide")})}(),function(){var e=function(){t(".opts__item--letter").removeClass("hide"),t.get("/api/messages",function(e){if(!e.status){t("#messageInbox").html(_.template(t("#messageInboxTpl").html())({inboxes:e.data})),t(".opts__item--letter-loading").remove();var n=_.filter(e.data,function(t){return 0===parseInt(t.viewed)}).length;n>0&&t(".opts__item--letter .message-ingore-all").removeClass("hide")}})};t("#messageInbox").on("click","li",function(){var e,n;if(e=t(this),n=e.data("click"),Boolean(n))return location.href=n}),t(".opts__item--letter .message-ingore-all").on("click",function(){var n;n=t(this),t.post("/api/messages/all/view",function(t){e(),n.addClass("hide")})}),t(".dropdown-toggle-letter").on("click",function(n){n.preventDefault();var i=t(".opts__item--letter");"none"!==i.css("display")?i.addClass("hide"):e()}),t("body").on("click",function(e){"none"!==t(".opts__item--letter").css("display")&&0===t(e.target).parents(".letter").length&&t(".opts__item--letter").addClass("hide")}),t("#settings-btn").click(function(){t(".opts__item--letter").toggleClass("hide")})}(),"/tags"===t(".nav__item--more>a").attr("href")||(t("body").on("click",function(e){if("none"!==t(".tag-mgr__box").css("display")&&0===t(e.target).closest(".nav__item--more").length&&0===t(e.target).closest(".tag-mgr__box").length)return t(".nav__item--more").trigger("click")}),t(".tag-mgr__query").on("keyup",function(e){var n,i,r,o;return n=t(this),o=n.data("tags"),i=t(this).val(),r=function(e){var n,r,a;if(a='<li><a href="<%= url %>"><%= name %></a></li>',n=_.filter(o,function(t){return t.name.search(e)!==-1}),r=_.reduce(n,function(t,e){return t+_.template(a)(e)},""),t(".tag-mgr__list").html(r),t(".tag-mgr__list li").length>0&&i.length>0)return t(".tag-mgr__list li:first-child").addClass("active")},m.inputT&&clearTimeout(m.inputT),m.inputT=setTimeout(function(){return r(i)},100)}),t(".tag-mgr__list").on("mouseover",function(){if(t(".tag-mgr__list li").length>1)return t(".tag-mgr__list li.active").removeClass("active")}),m={inputT:0,t:0},t(".nav__item--more").on("click",function(){var e,n,i;return n=t(this),e=t(".tag-mgr__box"),i=Number(n.data("open")),i?e.addClass("hide"):(e.removeClass("hide"),t(".tag-mgr__query").focus()),t(this).data("open",Number(!i))})),t(".js__action--complain").on("click",function(){return e({title:"我要申诉",content:_.template(t("#js__action--complain-tpl").html()),doneFn:function(){return t(".complain__form").submit()}})}),t(".js__view--selector").on("click",function(){var e;return e=t(this).data("action"),t.cookie("view",e),location.reload()}),
t.cookie("view")&&t(".js__view--selector").removeClass("hidden-sm").removeClass("hidden-md").removeClass("hidden-lg"),a=function(){var t,e,n;n="test",e=window.sessionStorage;try{return e.setItem(n,"1"),e.removeItem(n),!0}catch(e){return t=e,!1}},g=function(e){var n;a()&&(e>500||(localStorage&&(n=localStorage.getItem("show-app-promotion-bar"),n=n||!0,n!==!0?t(".app-promotion-bar").hide():t(".app-promotion-bar").show()),t("body").on("click",".close",function(){t(".app-promotion-bar").hide(),localStorage.setItem("show-app-promotion-bar",!1)}),t("body").on("click",".icon",function(){t(".app-promotion-bar").hide(),localStorage.setItem("show-app-promotion-bar",!1)})))},o=function(t){var e,n;switch(n="",e=new Date(t),e.getDay()){case 0:n="周日";break;case 1:n="周一";break;case 2:n="周二";break;case 3:n="周三";break;case 4:n="周四";break;case 5:n="周五";break;case 6:n="周六"}return n},s=function(){e({title:"登录",doneText:"登录",hideClose:!0,hideDone:!0,hideFooter:!0,content:t("#loginModal").text(),show:function(){return t("input[name=username]").focus(),window.ga&&ga("send","event","login modal","show","login modal"),t("[name=mail]").first().focus(),t("#loginShowMore").click(function(e){e.preventDefault(),t(this).hide(),t(this).siblings().removeClass("hidden")}),t(".sfmodal .widget-login a").click(function(e){e.preventDefault(),window.open(t(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),t("#loginReloadCaptcha").click(function(){t(this).find("img").attr("src","/user/captcha?w=145&h=34")})}}),t(".register-mail").typeHelperOld({emailMode:!0,onlyResult:!1})},l=function(){e({title:"注册",doneText:"登录",hideClose:!0,hideDone:!0,hideFooter:!0,content:t("#registerModal").text(),show:function(){return setTimeout(function(){t("input[name=name]").focus()},0),window.ga&&ga("send","event","login modal","show","login modal"),t("[name=mail]").first().focus(),t("#loginShowMore").click(function(e){e.preventDefault(),t(this).hide(),t(this).siblings().removeClass("hidden")}),t(".sfmodal .widget-login a").click(function(e){e.preventDefault(),window.open(t(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),t("#login-name").on("input",function(e){var n=/^[0-9]{11}$/;n.test(e.target.value.trim())?(t(".phone-register-only").removeClass("hidden"),t(this).closest("form").attr("action","/api/user/phone/register"),t("[name=register_type]").val("phone"),t("#login-name").attr("name","phone")):(t(".phone-register-only").addClass("hidden"),t(this).closest("form").attr("action","/api/user/register"),t("[name=register_type]").val("mail"),t("#login-name").attr("name","mail"))}),t("#loginReloadCaptcha").click(function(){t(this).find("img").attr("src","/user/captcha?w=145&h=34")})}}),t(".register-mail").typeHelperOld({emailMode:!0,onlyResult:!1})},c=function(){e({modalSize:"modal-md",title:"绑定手机号",doneText:"绑定手机号",hideClose:!0,hideDone:!0,hideFooter:!0,content:t("#bindPhoneModal").text(),doneFn:function(){var e=t(".form__bindphone-apply").serializeArray(),n={};e.map(function(t){n[t.name]=t.value}),console.log("data",n),t.post("/api/user/phone/bind/check",n,function(e){if(e.status){var n=e.data[1];n.phone&&t("phone").parents(".form-group").addClass("has-error").find(".help-block").html(n.phone)}else alert("绑定成功"),location.reload()})}})},u=function(){e({modalSize:"modal-md",title:"手机验证码登陆",doneText:"绑定",content:t("#phoneLoginModal").text(),doneFn:function(){var e=t(".form__bindphone-apply").serializeArray(),n={};e.map(function(t){n[t.name]=t.value}),console.log("data",n),t.post("/api/user/phone/bind/check",n,function(t){t.status||(alert("绑定成功"),location.reload())})}})},f=function(){this.title=t("title"),this.titleText=this.title.html(),this.map={}},f.prototype._render=function(){count=0;for(k in this.map)count+=parseInt(this.map[k]);this.title.html((count>0?"("+(count>=100?"...":count)+") ":"")+this.titleText)},f.prototype.set=function(t,e){this.map[t]=e,this._render()},f.prototype.clear=function(t){delete this.map[t],this._render()},t(".addWeek").each(function(e,n){t(this).append(" "+o(t(this).html()))}),t('[data-toggle="tooltip"]').tooltip({container:"body"}),t("img.lazy").lazyload({effect:"fadeIn"}),window.oauthLogin=function(t){location.hostname.indexOf("segmentfault")!==-1?location.reload():location.href="/"},window.oauthRegister=function(t){location.href="/user/bind"},r={_:window.SF.token,staticUrl:window.SF.staticUrl,userId:t("#SFUserId").attr("value"),userRank:t("#SFUserRank").attr("value"),login:n.login||s,register:l,bindphone:c,phonelogin:u,titleRender:new f},r.loadScript=function(t,e){var n=document.createElement("script");n.async=!0,n.src=t,n.onload=function(){e()},document.getElementsByTagName("head")[0].appendChild(n)},t(document).ajaxError(function(e,n,i){413===n.status?(t("#uploading")&&t("#uploading").text(""),alert("文件大小或尺寸超出限制，请修改后重新上传！")):console.log("Ajax "+n.status+": ",i.url)}),t(document).ajaxSend(function(t,e,n){n.url.indexOf("?")===-1?n.url=n.url+"?_="+r._:n.url=n.url+"&_="+r._}),t("body").delegate("form","submit",function(e){var n;n=t(this),n.attr("method")&&n.attr("action")&&(e.preventDefault(),n.find("button[type=submit]").attr("disabled","disabled"),t.ajax({url:n.attr("action"),type:n.attr("method"),data:n.serialize(),success:function(t){n.find("button[type=submit]").removeAttr("disabled"),0===t.status&&("/api/user?do=login"===n.attr("action")&&"/user/login"!==location.pathname?window.location.reload():/^\//.test(t.data)?window.location=t.data:window.location.reload())}}))}),t("body").delegate("form input, form textarea, .form input, .form textarea","keydown",function(e){t(this).removeClass("error"),t(this).parents(".form-group").removeClass("has-error"),t(this).next(".help-block.err").remove(),t(this).next(".error--msg").remove(),t(this).parents(".form-group").find(".help-block.err").remove()}),t("#backtop").click(function(){return t("body,html").animate({scrollTop:0}),!1}),t(document).scroll(function(){t(this).scrollTop()>720?t("#backtop").removeClass("hidden"):t("#backtop").addClass("hidden")}),t(".topframe").length&&t(".topframe .close").click(function(e){t(this).parent().remove(),0!==t(".topframe").length&&t(".topframe .content").text()||t("body").removeClass("have-notify")}),window.SFHacker={setOldVersion:function(){t.cookie("v","old"),window.location.reload()},unSetOldVersion:function(){t.removeCookie("v",{path:"/"}),window.location.reload()},makePureTextarea:function(){t.cookie("typemode","native"),window.location.reload()},unMakePureTextarea:function(){t.removeCookie("typemode",{path:"/"}),window.location.reload()}},t("body").on("click",".SFLogin",function(t){t.preventDefault(),r.register()}),t("body").on("click",".SFRegister",function(t){t.preventDefault(),r.login()}),t("body").on("click",".phoneLogin",function(t){t.preventDefault(),r.phonelogin()}),t(".notlogin").on("click",function(e){e.preventDefault();var n=t(this);r.login(function(){n.removeClass("notlogin")})}),t(".captchaInput img").on("click",function(){var e=Date.parse(new Date);t(this).attr("src","/user/captcha?w=240&h=50&t="+e)});var y=function(t){var e=t.closest("form"),n=e.find(".captchaInput .captcha"),i=n.data("src");n.attr("src",i),e.find(".captchaInput").removeClass("hidden")};t("body").on("focus",'input[name="phone"]',function(){var e=t(this);e.closest("form").find(".captchaInput .captcha").attr("src")||y(e)}),function(){window.isBindPage||t("body").on("click",".login-modal .login-wrap .js-user-login__phone-vaild-btn",function(){var e=t(this),n=60,i=void 0,r=function(){n>1?(n--,e.text(n+"s")):(clearInterval(i),e.text("获取验证码"),e.prop("disabled",!1))},o={},a=t(this).closest("form").find("input:not(.hide,hidden)");a.each(function(){var e=t(this),n=e.attr("name"),i=e.val();o[n]=i}),t.post("/api/user/phone/register/send",o,function(t){t.status||(e.prop("disabled",!0),i=setInterval(r,1e3))})})}(),t("body").on("click",".bindphone-model .user-bind__phone-vaild-btn",function(){var e=t(this),n=60,i=void 0,r=function(){n>1?(n--,e.text(n+"s")):(clearInterval(i),e.text("获取验证码"),e.prop("disabled",!1))};t.post("/api/user/phone/bind",{phone:t(".bindphone--phone").val()},function(t){t.status||(e.prop("disabled",!0),i=setInterval(r,1e3))})}),t("body").on("click",".phonelogin-modal .user-bind__phone-vaild-btn",function(){var e=t(this),n=60,i=void 0,r=function(){n>1?(n--,e.text(n+"s")):(clearInterval(i),e.text("获取验证码"),e.prop("disabled",!1))};t.post("/api/user/phone/phoneloginsend",{phone:t(".phonelogin--phone").val()},function(t){t.status||(e.prop("disabled",!0),i=setInterval(r,1e3))})}),p=function(e,n,i,r){var o;o=e,o.on("shown.bs.modal",function(){return t.post("/api/user/active/alert",function(t){})}),o.length>0&&t(".write-btns a").each(function(e,n){t(this).click(function(t){return o.modal("show"),!1})}),o.find(".activate-form").on("submit",function(e){var n;return e.preventDefault(),n=t(this),t.post(i,{mail:n.find(".mail").val()},function(e){0===e.status&&(n.parent().find(".session-mail").text(n.find(".mail").val()),t(".activate-showmail").show(),t(".activate-form").hide(),location.reload())}),!1}),o.find(".activate-resend",o).click(function(e){var i,o,a,s;o=t(this),i=o.siblings("span").find("span"),a=void 0,s=void 0,a=120,a--,t.post(n,function(e){var n;0===e.status?(t(".company-activete-tips").length&&t(".company-activete-tips").html(null!=(n='<div class="alert alert-success">'+e.message)?n:e.data[1]+"</div>"),r&&r(),s=setInterval(function(){return 0===a?(clearInterval(s),o.show(),o.siblings("span").hide()):(o.hide(),o.siblings("span").show(),i.text(a--))},1e3)):(t(".company-activete-tips").length&&(e.message?t(".company-activete-tips").html('<div class="alert alert-danger">'+e.message+"</div>"):t(".company-activete-tips").html('<div class="alert alert-danger">'+e.data[1]+"</div>")),setTimeout(function(){return t(".company-activete-tips").length&&t(".company-activete-tips").html('<div class="alert alert-success">激活邮件已发送 （<span>120</span>）</div>'),o.show()},9e5))})})},p(t("#activate"),"/api/user/reactivate","/api/user/activate/mail"),p(t("#companyActivate"),"/api/company/reactivate","/api/settings/mail/edit"),t(".side-ask [class*=btn-sn-]").click(function(e){e.preventDefault(),window.open(t(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),function(){t("body").on("click",".activate__step--init input[name=activate_type]",function(){var e=t(this),n=e.val();t('.activate__step--init .form-group[data-type="'+n+'"]').removeClass("hide"),"phone"===n?t(".activate__step--init .form-group[data-type=mail]").addClass("hide"):"mail"===n&&t(".activate__step--init .form-group[data-type=phone]").addClass("hide")}),t("body").on("click",".activate__step--init .activate__step-code-btn",function(){var e=void 0,n=t(this),i=(t(".activate__step-code-value"),t(".activate__step-phone-value")),r=60,o=function(){r<1?(n.text("获取验证码"),n.prop("disabled",!1),clearInterval(e)):n.text(--r+"s")};n.prop("disabled",!0),t.post("/api/user/phone/activate/send",{phone:i.val()},function(t){t.status?n.prop("disabled",!1):e=setInterval(o,1e3)})}),t("body").on("click",".activate-change",function(e){t(".activate-showmail").hide(),t(".activate-form").show()}),t("#activate").on("show.bs.modal",function(){var e=t(".activate__step--init>form").serializeArray(),n={};e.map(function(t){n[t.name]=t.value}),n.mail&&n.mail.length>0&&(t(".activate__step--init input[value=mail]").trigger("click"),setTimeout(function(){},50),t(".activate__step--init .btn-primary").trigger("click"))}),t("body").on("click",".activate__step--init .btn-primary",function(){var e=t(this),n=t(".activate__step--init>form").serializeArray(),i={};if(n.map(function(t){i[t.name]=t.value}),i.hasOwnProperty("activate_type"))if("mail"===i.activate_type){i={mail:i.mail};var r=function(e,n){t(".activate__step--mail .session-mail").text(e);var i="",r={"mail.google.com":["gmail.com"],"mail.qq.com":["qq.com","vip.qq.com","foxmail.com"],"mail.163.com":["163.com"],"mail.126.com":["126.com"],"mail.sina.com":["sina.com","vip.sina.com","sina.cn"],"mail.sohu.com":["sohu.com"],"mail.139.com":["139.com"],"mail.wo.com.cn":["wo.com.cn"],"mail.189.cn":["189.cn"],"mail.21cn.com":["21.cn"],"mail.aliyun.com":["aliyun.com"],"mail.yahoo.com":["yahoo.com"]};for(var o in r){var a=r[o],s=a.find(function(t){return t===e.split("@")[1]});s&&(i=o)}i.length>0?t(".activate__step--mail .activate_step-mail-goto").attr("href","http://"+i):t(".activate__step--mail .activate_step-mail-goto").hide();var l="mailto:pr@segmentfault.com?subject=邮箱 "+e+" 无法激活&body=请描述具体内容";t(".activate__step-contact").attr("href",l);var c=t(".activate__step-reactivate-btn");n||c.addClass("disabled");var u=void 0,h=120,d=function(){h>0?c.text("激活邮件已发送（"+h--+"s）"):(c.text("重新发送激活邮件"),clearInterval(u),c.removeClass("disabled"))};return n||(u=setInterval(d,1e3)),{destory:function(){c.text("重新发送激活邮件"),clearInterval(u),c.removeClass("disabled")}}},o=e.closest(".activate__step");o.next(".activate__step").removeClass("hide"),o.remove();var a=r(i.mail,!0);0!=t('input[name="mail"]').data("mail").length&&t.post("/api/user/activate/mail",i,function(t){t.status&&a.destory()}),t(".activate__step-reactivate-btn").on("click",function(){a=r(i.mail),t.post("/api/user/activate/mail",i,function(t){t.status&&a.destory()})}),t(".activate-form").on("click",".btn-primary",function(){var e=t(".activate-form .change-mail").val();e.length>0&&(a.destory(),a=r(e),t.post("/api/user/activate/mail",{mail:e},function(e){e.status?a.destory():(t(".activate-showmail").show(),t(".activate-form").hide())}))})}else delete i.mail,delete i.activate_type,t.post("/api/user/activate/phone",i,function(t){t.status||location.reload()})})}();var b=window.location.href,x=/openInApp=1/.test(b);!function(){if(r.userId&&/micromessenger/.test(navigator.userAgent.toLowerCase()));else if(i("any")&&!x){var e='<div class="app-promotion-bar">\n                            <a href="javascript:;"><i class="fa fa-close close"></i></a>\n                            <div class="icon"></div>\n                            <h5 class="title h5">SegmentFault</h5>\n                            <p class="describe">一起探索更多未知</p>\n                            <a class="download-btn btn btn-sm btn-primary" href="/app#qrcode">下载 App</a>\n                        </div>';t("body").append(e)}}(),g(document.body.clientWidth);try{localStorage.getItem("alert-tos")||t(".alert--tos").removeClass("hide")}catch(t){}if(t(".read-tos").on("click",function(){try{localStorage.setItem("alert-tos",1)}catch(t){}t(this).hasClass("close")||(location.href=t(this).data("url"))}),r.userId)if(ddosMode){var w="/api/user/stat";t.get(w,function(e){var n=e.data,i=n.events,o=n.messages,a=n.newestLive,s=localStorage.getItem("lastLive");s!==a&&("live"!==t("body").data("mod")?(t('.sf-header--index [href="/lives"]').addClass("menu__item--new-show"),t('.sf-header--index [href="/lives"]').attr("href","/lives/newest")):t("#live__nav--newest").addClass("livemenu__item--new-show")),localStorage.setItem("lastLive",a);var l=o,c=i;l>0?(r.titleRender.set("message",l),l>99&&(l="..."),t("#letterCount").siblings(".has-unread__count").remove(),t("#letterCount").after('<span class="has-unread__count">'+l+"</span>"),t("#letterCount-response").find(".redpoint-response").remove(),t("#letterCount-response").append('<span class="redpoint-response">'+l+"</span>")):(r.titleRender.clear("message"),t(".letter .has-unread__count").remove(),t(".letter-response .redpoint-response").remove()),c>0?(r.titleRender.set("event",c),c>99&&(c="..."),t("#messageCount").siblings(".has-unread__count").remove(),t("#messageCount").after('<span class="has-unread__count">'+c+"</span>"),t("#messageCount-response").find(".redpoint-response").remove(),t("#messageCount-response").append('<span class="redpoint-response">'+c+"</span>")):(r.titleRender.clear("event"),t(".message .has-unread__count").remove(),t(".message-response .redpoint-response").remove()),c>0||l>0?t(".user-avatar").after('<div class="has-unread__count has-unread__count-avatar"><span class="redpoint"></span></div>'):t(".user .has-unread__count").remove()})}else h="9443",require([r.staticUrl+"/3rd/socket/socket.io.js"],function(e){v=e("segmentfault.com:"+h,{reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:3}),window.socket=v,v.emit("login",t.cookie("PHPSESSID")),v.on("allsite",function(e){"live"==e.message&&("live"!==t("body").data("mod")?(t('.sf-header--index [href="/lives"]').addClass("menu__item--new-show"),t('.sf-header--index [href="/lives"]').attr("href","/lives/newest")):t("#live__nav--newest").addClass("livemenu__item--new-show"))}),v.on("event",function(e){var n=e.message,i=e.event,o=e.review;o>0?(t("#reviewCount").siblings(".has-unread__count").remove(),t("#reviewCount").after('<span class="has-unread__count" style="background:#5bc0de">=</span>')):t("#reviewCount .has-unread__count").remove(),n>0?(r.titleRender.set("message",n),n>99&&(n="..."),t("#letterCount").siblings(".has-unread__count").remove(),t("#letterCount").after('<span class="has-unread__count">'+n+"</span>"),t("#letterCount-response").find(".redpoint-response").remove(),t("#letterCount-response").append('<span class="redpoint-response">'+n+"</span>")):(r.titleRender.clear("message"),t(".letter .has-unread__count").remove(),t(".letter-response .redpoint-response").remove()),i>0?(r.titleRender.set("event",i),i>99&&(i="..."),t("#messageCount").siblings(".has-unread__count").remove(),t("#messageCount").after('<span class="has-unread__count">'+i+"</span>"),t("#messageCount-response").find(".redpoint-response").remove(),t("#messageCount-response").append('<span class="redpoint-response">'+i+"</span>")):(r.titleRender.clear("event"),t(".message .has-unread__count").remove(),t(".message-response .redpoint-response").remove()),i>0||n>0||o>0?t(".user-avatar").after('<div class="has-unread__count has-unread__count-avatar"><span class="redpoint"></span></div>'):t(".user .has-unread__count").remove()})});return t(".topframe").text().indexOf(!0)&&t(".send-mail").click(),t("#loginBanner").on("click",".fa-times-circle",function(e){e.preventDefault(),t("#loginBanner").hide()}),t("#loginBanner").on("click",".login_now",function(t){t.preventDefault(),r.login()}),t(".bindphone").on("click",function(t){t.preventDefault(),r.bindphone()}),jQuery(function(t){t(document).ready(function(){setTimeout(function(){t(".ad-should-be-fixed").stickUp()},2e3)})}),function(){t("#notices").length&&t.get("/api/notice/newest",function(t){0!==t.data.length&&(document.querySelector("#notices").classList.remove("hidden"),document.querySelector("#notices .report").setAttribute("href",t.data[0].url),document.querySelector("#notices .report").innerHTML=t.data[0].title)})}(),function(){var n=t("#isRemoteLogin").length>0;if(n){var i=t("#isRemoteLogin").data("phone").toString()||"",r=t("#isRemoteLogin").data("mail").toString()||"",o=i.slice(0,3)+"****"+i.slice(-4),a=r.slice(0,2)+"****"+r.slice(r.indexOf("@"),r.length);e({modalSize:"modal-md",title:"异地登录验证",backdrop:"static",content:'\n                    <div id="remoteLoginActivate">\n                        <div class="activate--init">\n                            <form class="form-horizontal">\n                                <div class="form-group">\n                                    <label class="col-sm-3 required control-label">验证方式</label>\n                                    <div class="col-sm-6">\n                                        <label class="radio-inline">\n                                            <input type="radio" name="activate_type" value="phone" checked> 用手机验证\n                                        </label>\n                                        <label class="radio-inline">\n                                            <input type="radio" name="activate_type" value="mail"> 用 Email 验证\n                                        </label>\n                                    </div>\n                                </div>\n\n                                <div class="form-group" data-type="phone">\n                                    <label class="col-sm-3 required control-label">手机号码</label>\n                                    <div class="col-sm-6">\n                                        <input class="form-control activate__step-phone-value" type="phone" name="phone"\n                                                placeholder="仅支持大陆手机号" value="'+o+'" disabled/>\n                                    </div>\n                                </div>\n\n                                <div class="form-group captch-block hidden" data-type="phone">\n                                    <label class="col-sm-3 required control-label">图形验证码</label>\n                                    <div class="col-sm-6">\n                                        <input type="text" class="form-control" name="cap" placeholder="请输入下方的验证码">\n                                        <div class="mt10 ">\n                                            <a id="loginReloadCaptcha" href="javascript:void(0)">\n                                            <img data-src="/user/captcha?w=240&h=50" class="captcha" width="240" height="50"/></a>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class="form-group" data-type="phone">\n                                    <label class="col-sm-3 required control-label">验证码</label>\n                                    <div class="col-sm-6">\n                                        <div class="input-group">\n                                            <input name="code" type="text" class="form-control activate__step-code-value"\n                                                    placeholder="短信验证码">\n                                            <span class="input-group-btn">\n                                                <button style="width:96px;" class="btn btn-default get-code-btn"\n                                                    type="button">获取验证码</button>\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div class="form-group hidden" data-type="mail">\n                                    <label class="col-sm-3 required control-label">Email</label>\n                                    <div class="col-sm-6">\n                                        <input class="form-control" type="email" name="mail" placeholder="hello@segmentfault.com" value="'+a+'" disabled/>\n                                    </div>\n                                </div>\n\n                                <div class="form-action">\n                                    <div class="col-sm-offset-8">\n                                        <button type="button" class="btn btn-primary submit negativeml15">提交</button>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n\n                        <div class="activate--mail hidden">\n                            <div class="mt20 mb10">\n                                <span class="text-muted activate-label pull-left">你的 Email：</span>\n                                <span class="activate-showmail">\n                                    <strong class="h4 session-mail">'+a+'</strong>\n                                    </span>\n                                <form method="post" class="activate-form inline-block" style="display:none;width:400px;">\n                                    <div class="form-group col-sm-7 mb0">\n                                        <input type="text" class="form-control change-mail" name="mail"\n                                                placeholder="hello@segmentfault.com">\n                                    </div>\n                                    <div class="form-group col-sm-5 mb0">\n                                        <button class="btn btn-primary mr10" type="button">保存</button>\n                                    </div>\n                                </form>\n                            </div>\n                            <p class="text-muted">\n                                验证邮件已发送，请注意查收（注意检查回收站、垃圾箱中是否有激活邮件）\n                                <br>如果仍未收到，请尝试 <a class="activate__step-reactivate-btn btn btn-link p0" href="javascript:void(0);">重新发送激活邮件</a>\n                                ，如有困难请 <a class="activate__step-contact" href="">联系我们</a>\n                            </p>\n\n                            <div class="text-right mt20">\n                                <a class="btn btn-default activate_step-mail-goto" target="_blank" href="">前往邮箱查收</a>\n                            </div>\n                    \n                        </div>\n\n                    </div>\n                ',hideClose:!0,hideDone:!0,show:function(){var e=function(){var n=t("#remoteLoginActivate .captcha");return n.attr("src",n.data("src")),(e=function(){return null})()};t("body").on("click","#remoteLoginActivate input[name=activate_type]",function(){var n=t(this),i=n.val();t('#remoteLoginActivate .form-group[data-type="'+i+'"]').removeClass("hidden"),"phone"===i?(t("#remoteLoginActivate .form-group[data-type=mail]").addClass("hidden"),e()):"mail"===i&&t("#remoteLoginActivate .form-group[data-type=phone]").addClass("hidden")}),i||(t('input[value="mail"]').trigger("click"),t('input[name="activate_type"]').prop("disabled","disabled")),r||t('input[name="activate_type"]').prop("disabled","disabled"),t("body").on("click","#remoteLoginActivate .get-code-btn",function(e){if(t("#remoteLoginActivate .captch-block").hasClass("hidden")){t("#remoteLoginActivate .captch-block").removeClass("hidden");var n=t("#remoteLoginActivate .captcha");n.attr("src",n.data("src"))}else{var r=void 0,o=t(this),a=(t(".activate__step-phone-value"),60),s=function(){a<1?(o.text("获取验证码"),o.prop("disabled",!1),clearInterval(r)):o.text(--a+"s")};o.prop("disabled",!0);var l="/api/user/phone/remote-login/send",c=t('#remoteLoginActivate input[name="cap"]').val();t.post(l,{phone:i,cap:c},function(t){0==t.status?r=setInterval(s,1e3):o.prop("disabled",!1)})}}),t("body").on("click","#remoteLoginActivate .captcha",function(e){var n=t(e.target);n.attr("src",n.data("src"))}),t("body").on("click","#remoteLoginActivate .submit",function(e){var n=t("#remoteLoginActivate .form-group[data-type=mail]").hasClass("hidden")?"phone":"mail";if("phone"==n){var o="/api/user/phone/remote-login/active",a=t('#remoteLoginActivate  input[name="code"]').val();t.post(o,{phone:i,code:a},function(t){0==t.status&&location.reload()})}else{var s="/api/user/mail/remote-login/send";t.post(s,{mail:r},function(e){if(0==e.status){t(".activate--mail").removeClass("hidden"),t(".activate--init").addClass("hidden");var n=function(e,n){var i="",r={"mail.google.com":["gmail.com"],"mail.qq.com":["qq.com","vip.qq.com","foxmail.com"],"mail.163.com":["163.com"],"mail.126.com":["126.com"],"mail.sina.com":["sina.com","vip.sina.com","sina.cn"],"mail.sohu.com":["sohu.com"],"mail.139.com":["139.com"],"mail.wo.com.cn":["wo.com.cn"],"mail.189.cn":["189.cn"],"mail.21cn.com":["21.cn"],"mail.aliyun.com":["aliyun.com"],"mail.yahoo.com":["yahoo.com"]};for(var o in r){var a=r[o],s=a.find(function(t){return t===e.split("@")[1]});s&&(i=o)}i.length>0?t("#remoteLoginActivate .activate_step-mail-goto").attr("href","http://"+i):t("#remoteLoginActivate .activate_step-mail-goto").hide();var l="mailto:pr@segmentfault.com?subject=邮箱 "+e+" 无法进行异地登录验证&body=请描述具体内容";t(".activate__step-contact").attr("href",l);var c=t(".activate__step-reactivate-btn");n||c.addClass("disabled");var u=void 0,h=120,d=function(){h>0?c.text("激活邮件已发送（"+h--+"s）"):(c.text("重新发送激活邮件"),clearInterval(u),c.removeClass("disabled"))};return n||(u=setInterval(d,1e3)),{destory:function(){c.text("重新发送激活邮件"),clearInterval(u),c.removeClass("disabled")}}},i=n(r,!0);t(".activate__step-reactivate-btn").on("click",function(){i=n(r),t.post("/api/user/mail/remote-login/send",{mail:r},function(e){if(e.status){i.destory();var n=e.data[1],r="";t.each(n,function(t,e){r=e,r&&alert(r)})}})})}})}})}})}}(),r}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("pingpp",[],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.pingpp=t()}}(function(){return function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){var i=t("./payment_elements.js");e.exports={userCallback:void 0,innerCallback:function(t,e){"function"==typeof this.userCallback&&("undefined"==typeof e&&(e=this.error()),this.userCallback(t,e),this.userCallback=void 0,i.clear())},error:function(t,e){return t="undefined"==typeof t?"":t,e="undefined"==typeof e?"":e,{msg:t,extra:e}}}},{"./payment_elements.js":22}],2:[function(t,e,n){var i=t("../utils"),r={}.hasOwnProperty;e.exports={ALIPAY_PC_DIRECT_URL:"https://mapi.alipay.com/gateway.do",handleCharge:function(t){var e=t.channel,n=t.credential[e],o=this.ALIPAY_PC_DIRECT_URL;r.call(n,"channel_url")&&(o=n.channel_url),r.call(n,"_input_charset")||(n._input_charset="utf-8");var a=i.stringifyData(n,e,!0);i.redirectTo(o+"?"+a)}}},{"../utils":25}],3:[function(t,e,n){var i=t("../utils"),r=t("../mods"),o={}.hasOwnProperty;e.exports={ALIPAY_WAP_URL_OLD:"https://wappaygw.alipay.com/service/rest.htm",ALIPAY_WAP_URL:"https://mapi.alipay.com/gateway.do",handleCharge:function(t){var e=t.channel,n=t.credential[e],a=this.ALIPAY_WAP_URL;o.call(n,"req_data")?a=this.ALIPAY_WAP_URL_OLD:o.call(n,"channel_url")&&(a=n.channel_url),o.call(n,"_input_charset")||(o.call(n,"service")&&"alipay.wap.create.direct.pay.by.user"===n.service||o.call(n,"req_data"))&&(n._input_charset="utf-8");var s=i.stringifyData(n,e,!0),l=a+"?"+s,c=r.getExtraModule("ap");i.inWeixin()&&"undefined"!=typeof c?c.pay(l):i.redirectTo(l)}}},{"../mods":21,"../utils":25}],4:[function(t,e,n){var i=t("../utils"),r=t("../callbacks"),o={}.hasOwnProperty;e.exports={handleCharge:function(t){var e=t.channel,n=t.credential[e];return o.call(n,"url")?void i.redirectTo(n.url+"?"+i.stringifyData(n,e)):void r.innerCallback("fail",r.error("invalid_credential","missing_field:url"))}}},{"../callbacks":1,"../utils":25}],5:[function(t,e,n){var i=t("../../utils"),r=t("../../callbacks"),o={}.hasOwnProperty;e.exports={handleCharge:function(t){var e,n=t.credential[t.channel];if("string"==typeof n)e=n;else{if(!o.call(n,"url"))return void r.innerCallback("fail",r.error("invalid_credential","credential format is incorrect"));e=n.url}i.redirectTo(e)}}},{"../../callbacks":1,"../../utils":25}],6:[function(t,e,n){var i=t("../utils");e.exports={CP_B2B_URL:"https://payment.chinapay.com/CTITS/service/rest/page/nref/000000000017/0/0/0/0/0",handleCharge:function(t){var e=t.credential[t.channel];i.formSubmit(this.CP_B2B_URL,"post",e)}}},{"../utils":25}],7:[function(t,e,n){var i=t("./commons/redirect_base");e.exports={handleCharge:function(t){i.handleCharge(t)}}},{"./commons/redirect_base":5}],8:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{"./commons/redirect_base":5,dup:7}],9:[function(t,e,n){var i=t("../utils"),r={}.hasOwnProperty;e.exports={JDPAY_WAP_URL_OLD:"https://m.jdpay.com/wepay/web/pay",JDPAY_H5_URL:"https://h5pay.jd.com/jdpay/saveOrder",JDPAY_PC_URL:"https://wepay.jd.com/jdpay/saveOrder",
handleCharge:function(t){var e=t.credential[t.channel],n=this.JDPAY_H5_URL;r.call(e,"channelUrl")?(n=e.channelUrl,delete e.channelUrl):r.call(e,"merchantRemark")&&(n=this.JDPAY_WAP_URL_OLD),i.formSubmit(n,"post",e)}}},{"../utils":25}],10:[function(t,e,n){var i=t("../callbacks"),r=t("../utils"),o=t("../stash"),a={}.hasOwnProperty;e.exports={SRC_URL:"http://pub.idqqimg.com/qqmobile/qqapi.js?_bid=152",ID:"mqq_api",handleCharge:function(t){var e=t.credential[t.channel];return a.call(e,"token_id")?(o.tokenId=e.token_id,void r.loadUrlJs(this.ID,this.SRC_URL,this.callpay)):void i.innerCallback("fail",i.error("invalid_credential","missing_token_id"))},callpay:function(){if("undefined"!=typeof mqq){if(0==mqq.QQVersion)return i.innerCallback("fail","Not in the QQ client"),void delete o.tokenId;mqq.tenpay.pay({tokenId:o.tokenId},i.userCallback)}else i.innerCallback("fail","network_err");delete o.tokenId}}},{"../callbacks":1,"../stash":23,"../utils":25}],11:[function(t,e,n){var i=t("../utils");e.exports={UPACP_PC_URL:"https://gateway.95516.com/gateway/api/frontTransReq.do",handleCharge:function(t){var e=t.credential[t.channel];i.formSubmit(this.UPACP_PC_URL,"post",e)}}},{"../utils":25}],12:[function(t,e,n){var i=t("../utils");e.exports={UPACP_WAP_URL:"https://gateway.95516.com/gateway/api/frontTransReq.do",handleCharge:function(t){var e=t.credential[t.channel];i.formSubmit(this.UPACP_WAP_URL,"post",e)}}},{"../utils":25}],13:[function(t,e,n){var i=t("../stash"),r=t("../callbacks"),o={}.hasOwnProperty;e.exports={handleCharge:function(t){for(var e=t.credential[t.channel],n=["appId","timeStamp","nonceStr","package","signType","paySign"],a=0;a<n.length;a++)if(!o.call(e,n[a]))return void r.innerCallback("fail",r.error("invalid_credential","missing_field_"+n[a]));i.jsApiParameters=e,this.callpay()},wxLiteEnabled:function(){return"undefined"!=typeof wx&&wx.requestPayment},callpay:function(){if(!this.wxLiteEnabled())return void console.log("请在微信小程序中打开");var t=i.jsApiParameters;delete t.appId,t.complete=function(t){"requestPayment:ok"===t.errMsg&&r.innerCallback("success"),"requestPayment:cancel"===t.errMsg&&r.innerCallback("cancel",r.error("用户取消支付")),"undefined"!==t.err_code&&"undefined"!==t.err_desc&&r.innerCallback("fail",r.error(t.err_desc,t))},wx.requestPayment(t)},runTestMode:function(t){wx.showModal({title:"提示",content:'因 "微信小程序" 限制 域名的原因 暂不支持 模拟付款 请使用 livekey 获取 charge 进行支付'})}}},{"../callbacks":1,"../stash":23}],14:[function(t,e,n){var i=t("../callbacks"),r=t("../utils"),o=t("../stash"),a=t("../mods"),s={}.hasOwnProperty;e.exports={PINGPP_NOTIFY_URL_BASE:"https://api.pingxx.com/notify",handleCharge:function(t){for(var e=t.credential[t.channel],n=["appId","timeStamp","nonceStr","package","signType","paySign"],r=0;r<n.length;r++)if(!s.call(e,n[r]))return void i.innerCallback("fail",i.error("invalid_credential","missing_field_"+n[r]));o.jsApiParameters=e,this.callpay()},callpay:function(){var t=this,e=a.getExtraModule("wx_jssdk");if("undefined"!=typeof e&&e.jssdkEnabled())e.callpay();else if("undefined"==typeof WeixinJSBridge){var n=function(){t.jsApiCall()};document.addEventListener?document.addEventListener("WeixinJSBridgeReady",n,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",n),document.attachEvent("onWeixinJSBridgeReady",n))}else this.jsApiCall()},jsApiCall:function(){s.call(o,"jsApiParameters")&&WeixinJSBridge.invoke("getBrandWCPayRequest",o.jsApiParameters,function(t){delete o.jsApiParameters,"get_brand_wcpay_request:ok"==t.err_msg?i.innerCallback("success"):"get_brand_wcpay_request:cancel"==t.err_msg?i.innerCallback("cancel"):i.innerCallback("fail",i.error("wx_result_fail",t.err_msg))})},runTestMode:function(t){var e=confirm("模拟付款？");if(e){var n=(null===t.or_id?"":"/orders/"+t.or_id)+"/charges/"+t.id;r.request(this.PINGPP_NOTIFY_URL_BASE+n+"?livemode=false","GET",null,function(t,e){if(e>=200&&e<400&&"success"==t)i.innerCallback("success");else{var n="http_code:"+e+";response:"+t;i.innerCallback("fail",i.error("testmode_notify_fail",n))}},function(){i.innerCallback("fail",i.error("network_err"))})}}}},{"../callbacks":1,"../mods":21,"../stash":23,"../utils":25}],15:[function(t,e,n){var i=t("../utils"),r=t("../callbacks"),o={}.hasOwnProperty;e.exports={handleCharge:function(t){var e=t.credential[t.channel];"string"==typeof e?i.redirectTo(e):"object"==typeof e&&o.call(e,"url")?i.redirectTo(e.url):r.innerCallback("fail",r.error("invalid_credential","credential 格式不正确"))}}},{"../callbacks":1,"../utils":25}],16:[function(t,e,n){var i=t("../utils"),r=t("../callbacks"),o={}.hasOwnProperty;e.exports={YEEPAY_WAP_URL:"https://ok.yeepay.com/paymobile/api/pay/request",YEEPAY_WAP_TEST_URL:"http://mobiletest.yeepay.com/paymobile/api/pay/request",handleCharge:function(t){for(var e=t.channel,n=t.credential[e],a=["merchantaccount","encryptkey","data"],s=0;s<a.length;s++)if(!o.call(n,a[s]))return void r.innerCallback("fail",r.error("invalid_credential","missing_field_"+a[s]));var l;l=o.call(n,"mode")&&"test"==n.mode?this.YEEPAY_WAP_TEST_URL:this.YEEPAY_WAP_URL,i.redirectTo(l+"?"+i.stringifyData(n,e,!0))}}},{"../callbacks":1,"../utils":25}],17:[function(t,e,n){var i=t("./utils"),r=t("./stash"),o=t("./libs/md5"),a={seperator:"###",limit:1,report_url:"https://statistics.pingxx.com/one_stats",timeout:100},s=function(t,e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=t.substr(0).match(n);return null!==i?unescape(i[2]):null},l=function(){return navigator.userAgent},c=function(){return window.location.host};a.store=function(t){if("undefined"!=typeof localStorage&&null!==localStorage){var e=this,n={};n.app_id=t.app_id||r.app_id||"app_not_defined",n.ch_id=t.ch_id||"",n.channel=t.channel||"",n.type=t.type||"",n.user_agent=l(),n.host=c(),n.time=(new Date).getTime(),n.puid=r.puid;var i="app_id="+n.app_id+"&channel="+n.channel+"&ch_id="+n.ch_id+"&host="+n.host+"&time="+n.time+"&type="+n.type+"&user_agent="+n.user_agent+"&puid="+n.puid,o=i;null!==localStorage.getItem("PPP_ONE_STATS")&&0!==localStorage.getItem("PPP_ONE_STATS").length&&(o=localStorage.getItem("PPP_ONE_STATS")+e.seperator+i);try{localStorage.setItem("PPP_ONE_STATS",o)}catch(t){}}},a.send=function(){if("undefined"!=typeof localStorage&&null!==localStorage){var t=this,e=localStorage.getItem("PPP_ONE_STATS");if(!(null===e||e.split(t.seperator).length<t.limit))try{for(var n=[],r=e.split(t.seperator),a=o(r.join("&")),l=0;l<r.length;l++)n.push({app_id:s(r[l],"app_id"),channel:s(r[l],"channel"),ch_id:s(r[l],"ch_id"),host:s(r[l],"host"),time:s(r[l],"time"),type:s(r[l],"type"),user_agent:s(r[l],"user_agent"),puid:s(r[l],"puid")});i.request(t.report_url,"POST",n,function(t,e){200==e&&localStorage.removeItem("PPP_ONE_STATS")},void 0,{"X-Pingpp-Report-Token":a})}catch(t){}}},a.report=function(t){var e=this;e.store(t),setTimeout(function(){e.send()},e.timeout)},e.exports=a},{"./libs/md5":19,"./stash":23,"./utils":25}],18:[function(t,e,n){var i=t("./stash"),r=t("./utils"),o=t("./collection");e.exports={SRC_URL:"https://cookie.pingxx.com",init:function(){var t=this;r.documentReady(function(){t.initPuid()})},initPuid:function(){if("undefined"!=typeof window&&"undefined"!=typeof localStorage){var t=localStorage.getItem("pingpp_uid");if(null===t){t=r.randomString();try{localStorage.setItem("pingpp_uid",t)}catch(t){}}if(i.puid=t,!document.getElementById("p_analyse_iframe")){var e=document.createElement("iframe");e.id="p_analyse_iframe",e.src=this.SRC_URL+"/?puid="+t,e.style.display="none",document.body.appendChild(e)}setTimeout(function(){o.send()},0)}}}},{"./collection":17,"./stash":23,"./utils":25}],19:[function(t,e,n){!function(){function t(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n}function n(t,e){return t<<e|t>>>32-e}function i(e,i,r,o,a,s){return t(n(t(t(i,e),t(o,s)),a),r)}function r(t,e,n,r,o,a,s){return i(e&n|~e&r,t,e,o,a,s)}function o(t,e,n,r,o,a,s){return i(e&r|n&~r,t,e,o,a,s)}function a(t,e,n,r,o,a,s){return i(e^n^r,t,e,o,a,s)}function s(t,e,n,r,o,a,s){return i(n^(e|~r),t,e,o,a,s)}function l(e,n){e[n>>5]|=128<<n%32,e[(n+64>>>9<<4)+14]=n;var i,l,c,u,h,d=1732584193,p=-271733879,f=-1732584194,m=271733878;for(i=0;i<e.length;i+=16)l=d,c=p,u=f,h=m,d=r(d,p,f,m,e[i],7,-680876936),m=r(m,d,p,f,e[i+1],12,-389564586),f=r(f,m,d,p,e[i+2],17,606105819),p=r(p,f,m,d,e[i+3],22,-1044525330),d=r(d,p,f,m,e[i+4],7,-176418897),m=r(m,d,p,f,e[i+5],12,1200080426),f=r(f,m,d,p,e[i+6],17,-1473231341),p=r(p,f,m,d,e[i+7],22,-45705983),d=r(d,p,f,m,e[i+8],7,1770035416),m=r(m,d,p,f,e[i+9],12,-1958414417),f=r(f,m,d,p,e[i+10],17,-42063),p=r(p,f,m,d,e[i+11],22,-1990404162),d=r(d,p,f,m,e[i+12],7,1804603682),m=r(m,d,p,f,e[i+13],12,-40341101),f=r(f,m,d,p,e[i+14],17,-1502002290),p=r(p,f,m,d,e[i+15],22,1236535329),d=o(d,p,f,m,e[i+1],5,-165796510),m=o(m,d,p,f,e[i+6],9,-1069501632),f=o(f,m,d,p,e[i+11],14,643717713),p=o(p,f,m,d,e[i],20,-373897302),d=o(d,p,f,m,e[i+5],5,-701558691),m=o(m,d,p,f,e[i+10],9,38016083),f=o(f,m,d,p,e[i+15],14,-660478335),p=o(p,f,m,d,e[i+4],20,-405537848),d=o(d,p,f,m,e[i+9],5,568446438),m=o(m,d,p,f,e[i+14],9,-1019803690),f=o(f,m,d,p,e[i+3],14,-187363961),p=o(p,f,m,d,e[i+8],20,1163531501),d=o(d,p,f,m,e[i+13],5,-1444681467),m=o(m,d,p,f,e[i+2],9,-51403784),f=o(f,m,d,p,e[i+7],14,1735328473),p=o(p,f,m,d,e[i+12],20,-1926607734),d=a(d,p,f,m,e[i+5],4,-378558),m=a(m,d,p,f,e[i+8],11,-2022574463),f=a(f,m,d,p,e[i+11],16,1839030562),p=a(p,f,m,d,e[i+14],23,-35309556),d=a(d,p,f,m,e[i+1],4,-1530992060),m=a(m,d,p,f,e[i+4],11,1272893353),f=a(f,m,d,p,e[i+7],16,-155497632),p=a(p,f,m,d,e[i+10],23,-1094730640),d=a(d,p,f,m,e[i+13],4,681279174),m=a(m,d,p,f,e[i],11,-358537222),f=a(f,m,d,p,e[i+3],16,-722521979),p=a(p,f,m,d,e[i+6],23,76029189),d=a(d,p,f,m,e[i+9],4,-640364487),m=a(m,d,p,f,e[i+12],11,-421815835),f=a(f,m,d,p,e[i+15],16,530742520),p=a(p,f,m,d,e[i+2],23,-995338651),d=s(d,p,f,m,e[i],6,-198630844),m=s(m,d,p,f,e[i+7],10,1126891415),f=s(f,m,d,p,e[i+14],15,-1416354905),p=s(p,f,m,d,e[i+5],21,-57434055),d=s(d,p,f,m,e[i+12],6,1700485571),m=s(m,d,p,f,e[i+3],10,-1894986606),f=s(f,m,d,p,e[i+10],15,-1051523),p=s(p,f,m,d,e[i+1],21,-2054922799),d=s(d,p,f,m,e[i+8],6,1873313359),m=s(m,d,p,f,e[i+15],10,-30611744),f=s(f,m,d,p,e[i+6],15,-1560198380),p=s(p,f,m,d,e[i+13],21,1309151649),d=s(d,p,f,m,e[i+4],6,-145523070),m=s(m,d,p,f,e[i+11],10,-1120210379),f=s(f,m,d,p,e[i+2],15,718787259),p=s(p,f,m,d,e[i+9],21,-343485551),d=t(d,l),p=t(p,c),f=t(f,u),m=t(m,h);return[d,p,f,m]}function c(t){var e,n="";for(e=0;e<32*t.length;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function u(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;for(e=0;e<8*t.length;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function h(t){return c(l(u(t),8*t.length))}function d(t,e){var n,i,r=u(t),o=[],a=[];for(o[15]=a[15]=void 0,r.length>16&&(r=l(r,8*t.length)),n=0;n<16;n+=1)o[n]=909522486^r[n],a[n]=1549556828^r[n];return i=l(o.concat(u(e)),512+8*e.length),c(l(a.concat(i),640))}function p(t){var e,n,i="0123456789abcdef",r="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),r+=i.charAt(e>>>4&15)+i.charAt(15&e);return r}function f(t){return unescape(encodeURIComponent(t))}function m(t){return h(f(t))}function g(t){return p(m(t))}function v(t,e){return d(f(t),f(e))}function y(t,e){return p(v(t,e))}function b(t,e,n){return e?n?v(e,t):y(e,t):n?m(t):g(t)}e.exports=b}()},{}],20:[function(t,e,n){var i=t("./version").v,r=t("./testmode"),o=t("./callbacks"),a=t("./mods"),s=t("./stash"),l=t("./collection"),c=t("./payment_elements"),u={}.hasOwnProperty,h=function(){t("./init").init()};h.prototype={version:i,createPayment:function(t,e,n,i){if("function"==typeof e&&(o.userCallback=e),c.init(t),!u.call(c,"id"))return void o.innerCallback("fail",o.error("invalid_charge","no_charge_id"));if(!u.call(c,"channel"))return void o.innerCallback("fail",o.error("invalid_charge","no_channel"));u.call(c,"app")&&("string"==typeof c.app?s.app_id=c.app:"object"==typeof c.app&&"string"==typeof c.app.id&&(s.app_id=c.app.id)),l.report({type:"pure_sdk_click",channel:c.channel,ch_id:c.id});var h=c.channel;if(!u.call(c,"credential"))return void o.innerCallback("fail",o.error("invalid_charge","no_credential"));if(!c.credential)return void o.innerCallback("fail",o.error("invalid_credential","credential_is_undefined"));if(!u.call(c.credential,h))return void o.innerCallback("fail",o.error("invalid_credential","credential_is_incorrect"));if(!u.call(c,"livemode"))return void o.innerCallback("fail",o.error("invalid_charge","no_livemode_field"));var d=a.getChannelModule(h);return"undefined"==typeof d?(console.error('channel module "'+h+'" is undefined'),void o.innerCallback("fail",o.error("invalid_channel",'channel module "'+h+'" is undefined'))):c.livemode===!1?void(u.call(d,"runTestMode")?d.runTestMode(c):r.runTestMode(c)):("undefined"!=typeof n&&(s.signature=n),"boolean"==typeof i&&(s.debug=i),void d.handleCharge(c))},setAPURL:function(t){s.APURL=t}},e.exports=new h},{"./callbacks":1,"./collection":17,"./init":18,"./mods":21,"./payment_elements":22,"./stash":23,"./testmode":24,"./version":26}],21:[function(t,e,n){var i={}.hasOwnProperty,r={};e.exports=r,r.channels={alipay_pc_direct:t("./channels/alipay_pc_direct"),alipay_wap:t("./channels/alipay_wap"),bfb_wap:t("./channels/bfb_wap"),cp_b2b:t("./channels/cp_b2b"),fqlpay_qr:t("./channels/fqlpay_qr"),fqlpay_wap:t("./channels/fqlpay_wap"),jdpay_wap:t("./channels/jdpay_wap"),qpay_pub:t("./channels/qpay_pub"),upacp_pc:t("./channels/upacp_pc"),upacp_wap:t("./channels/upacp_wap"),wx_lite:t("./channels/wx_lite"),wx_pub:t("./channels/wx_pub"),wx_wap:t("./channels/wx_wap"),yeepay_wap:t("./channels/yeepay_wap")},r.extras={},r.getChannelModule=function(t){if(i.call(r.channels,t))return r.channels[t]},r.getExtraModule=function(t){if(i.call(r.extras,t))return r.extras[t]}},{"./channels/alipay_pc_direct":2,"./channels/alipay_wap":3,"./channels/bfb_wap":4,"./channels/cp_b2b":6,"./channels/fqlpay_qr":7,"./channels/fqlpay_wap":8,"./channels/jdpay_wap":9,"./channels/qpay_pub":10,"./channels/upacp_pc":11,"./channels/upacp_wap":12,"./channels/wx_lite":13,"./channels/wx_pub":14,"./channels/wx_wap":15,"./channels/yeepay_wap":16}],22:[function(t,e,n){var i=t("./callbacks"),r={}.hasOwnProperty;e.exports={id:null,or_id:null,channel:null,app:null,credential:{},extra:null,livemode:null,order_no:null,time_expire:null,init:function(t){var e;if("string"==typeof t)try{e=JSON.parse(t)}catch(t){return void i.innerCallback("fail",i.error("json_decode_fail",t))}else e=t;if("undefined"==typeof e)return void i.innerCallback("fail",i.error("json_decode_fail"));if(r.call(e,"object")&&"order"==e.object){e.or_id=e.id,e.id=e.charge,e.order_no=e.merchant_order_no;var n=e.charge_essentials;e.channel=n.channel,e.credential=n.credential,e.extra=n.extra}for(var o in this)r.call(e,o)&&(this[o]=e[o]);return this},clear:function(){for(var t in this)"function"!=typeof this[t]&&(this[t]=null)}}},{"./callbacks":1}],23:[function(t,e,n){e.exports={}},{}],24:[function(t,e,n){var i=t("./utils"),r={}.hasOwnProperty;e.exports={PINGPP_MOCK_URL:"http://sissi.pingxx.com/mock.php",runTestMode:function(t){var e={ch_id:t.id,scheme:"http",channel:t.channel};r.call(t,"or_id")&&null!==t.or_id&&(e.or_id=t.or_id),r.call(t,"order_no")?e.order_no=t.order_no:r.call(t,"orderNo")&&(e.order_no=t.orderNo),r.call(t,"time_expire")?e.time_expire=t.time_expire:r.call(t,"timeExpire")&&(e.time_expire=t.timeExpire),r.call(t,"extra")&&(e.extra=encodeURIComponent(JSON.stringify(t.extra))),i.redirectTo(this.PINGPP_MOCK_URL+"?"+i.stringifyData(e))}}},{"./utils":25}],25:[function(t,e,n){var i={}.hasOwnProperty,r=e.exports={stringifyData:function(t,e,n){"undefined"==typeof n&&(n=!1);var r=[];for(var o in t)i.call(t,o)&&"function"!=typeof t[o]&&("bfb_wap"==e&&"url"==o||"yeepay_wap"==e&&"mode"==o||"channel_url"!=o&&r.push(o+"="+(n?encodeURIComponent(t[o]):t[o])));return r.join("&")},request:function(t,e,n,o,a,s){if("undefined"==typeof XMLHttpRequest)return void console.log("Function XMLHttpRequest is undefined.");var l=new XMLHttpRequest;if("undefined"!=typeof l.timeout&&(l.timeout=6e3),e=e.toUpperCase(),"GET"===e&&"object"==typeof n&&n&&(t+="?"+r.stringifyData(n,"",!0)),l.open(e,t,!0),"undefined"!=typeof s)for(var c in s)i.call(s,c)&&l.setRequestHeader(c,s[c]);"POST"===e?(l.setRequestHeader("Content-type","application/json; charset=utf-8"),l.send(JSON.stringify(n))):l.send(),"undefined"==typeof o&&(o=function(){}),"undefined"==typeof a&&(a=function(){}),l.onreadystatechange=function(){4==l.readyState&&o(l.responseText,l.status,l)},l.onerror=function(t){a(l,0,t)}},formSubmit:function(t,e,n){if("undefined"==typeof window)return void console.log("Not a browser, form submit url: "+t);var r=document.createElement("form");r.setAttribute("method",e),r.setAttribute("action",t);for(var o in n)if(i.call(n,o)){var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",o),a.setAttribute("value",n[o]),r.appendChild(a)}document.body.appendChild(r),r.submit()},randomString:function(t){"undefined"==typeof t&&(t=32);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=e.length,i="",r=0;r<t;r++)i+=e.charAt(Math.floor(Math.random()*n));return i},redirectTo:function(t){return"undefined"==typeof window?void console.log("Not a browser, redirect url: "+t):void(window.location.href=t)},inWeixin:function(){if("undefined"==typeof navigator)return!1;var t=navigator.userAgent.toLowerCase();return t.indexOf("micromessenger")!==-1},documentReady:function(t){return"undefined"==typeof document?void t():void("loading"!=document.readyState?t():document.addEventListener("DOMContentLoaded",t))},loadUrlJs:function(t,e,n){var i=document.getElementsByTagName("head")[0],r=null;null==document.getElementById(t)?(r=document.createElement("script"),r.setAttribute("type","text/javascript"),r.setAttribute("src",e),r.setAttribute("id",t),r.async=!0,null!=n&&(r.onload=r.onreadystatechange=function(){return!r.ready&&void(r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(r.ready=!0,n()))}),i.appendChild(r)):null!=n&&n()}}},{}],26:[function(t,e,n){e.exports={v:"2.1.7"}},{}]},{},[20])(20)}),function(t){var e,n={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},i='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',r=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","whiteSpace"],o=t(i).data("autosize",!0)[0];o.style.lineHeight="99px","99px"===t(o).css("lineHeight")&&r.push("lineHeight"),o.style.lineHeight="",t.fn.autosize=function(i){return this.length?(i=t.extend({},n,i||{}),o.parentNode!==document.body&&t(document.body).append(o),this.each(function(){function n(){var e,n=!!window.getComputedStyle&&window.getComputedStyle(d,null);n?(e=d.getBoundingClientRect().width,0!==e&&"number"==typeof e||(e=parseInt(n.width,10)),t.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(t,i){e-=parseInt(n[i],10)})):e=p.width(),o.style.width=Math.max(e,0)+"px"}function a(){var a={};if(e=d,o.className=i.className,o.id=i.id,c=parseInt(p.css("maxHeight"),10),t.each(r,function(t,e){a[e]=p.css(e)}),t(o).css(a).attr("wrap",p.attr("wrap")),n(),window.chrome){var s=d.style.width;d.style.width="0px";d.offsetWidth;d.style.width=s}}function s(){var t,r;e!==d?a():n(),!d.value&&i.placeholder?o.value=(p.attr("placeholder")||"")+i.append:o.value=d.value+i.append,o.style.overflowY=d.style.overflowY,r=parseInt(d.style.height,10),o.scrollTop=0,o.scrollTop=9e4,t=o.scrollTop,c&&t>c?(d.style.overflowY="scroll",t=c):(d.style.overflowY="hidden",t<u&&(t=u));var s=parseInt(window.getComputedStyle(d,null).getPropertyValue("padding-bottom"),10);t+=f+s,t-=28,r!==t&&(d.style.height=t+"px",m&&i.callback.call(d,d),p.trigger("autosize.resized"))}function l(){clearTimeout(h),h=setTimeout(function(){var t=p.width();t!==v&&(v=t,s())},parseInt(i.resizeDelay,10))}var c,u,h,d=this,p=t(d),f=0,m=t.isFunction(i.callback),g={height:d.style.height,overflow:d.style.overflow,overflowY:d.style.overflowY,wordWrap:d.style.wordWrap,resize:d.style.resize},v=p.width();p.css("resize");p.data("autosize")||(p.data("autosize",!0),"border-box"!==p.css("box-sizing")&&"border-box"!==p.css("-moz-box-sizing")&&"border-box"!==p.css("-webkit-box-sizing")||(f=p.outerHeight()-p.height()),u=Math.max(parseInt(p.css("minHeight"),10)-f||0,p.height()),p.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"onpropertychange"in d?"oninput"in d?p.on("input.autosize keyup.autosize",s):p.on("propertychange.autosize",function(){"value"===event.propertyName&&s()}):p.on("input.autosize",s),i.resizeDelay!==!1&&t(window).on("resize.autosize",l),p.on("autosize.resize",s),p.on("autosize.resizeIncludeStyle",function(){e=null,s()}),p.on("autosize.destroy",function(){e=null,clearTimeout(h),t(window).off("resize",l),p.off("autosize").off(".autosize").css(g).removeData("autosize")}),s())})):this}}(jQuery||$),define("jquery_autosize",["jquery"],function(t){return function(){var e;return e||t.$.fn.autosize}}(this)),function(){!function(t){return"function"==typeof define&&define.amd?define("atwho",["jquery"],t):t(window.jQuery)}(function(t){var e,n,i,r,o,a,s,l,c=[].slice;i=function(){function e(e){this.current_flag=null,this.controllers={},this.alias_maps={},this.$inputor=t(e),this.iframe=null,this.setIframe(),this.listen()}return e.prototype.setIframe=function(t){return t?(this.window=t.contentWindow,this.document=t.contentDocument||this.window.document,this.iframe=t):(this.document=document,this.window=window,this.iframe=null)},e.prototype.controller=function(t){var e,n,i,r;if(this.alias_maps[t])n=this.controllers[this.alias_maps[t]];else{r=this.controllers;for(i in r)if(e=r[i],i===t){n=e;break}}return n?n:this.controllers[this.current_flag]},e.prototype.set_context_for=function(t){return this.current_flag=t,this},e.prototype.reg=function(t,e){var n,i;return n=(i=this.controllers)[t]||(i[t]=new r(this,t)),e.alias&&(this.alias_maps[e.alias]=t),n.init(e),this},e.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",function(t){return function(e){return t.on_keyup(e)}}(this)).on("keydown.atwhoInner",function(t){return function(e){return t.on_keydown(e)}}(this)).on("scroll.atwhoInner",function(t){return function(e){var n;return null!=(n=t.controller())?n.view.hide(e):void 0}}(this)).on("blur.atwhoInner",function(t){return function(e){var n;if(n=t.controller())return n.view.hide(e,n.get_opt("display_timeout"))}}(this)).on("click.atwhoInner",function(t){return function(e){var n;return null!=(n=t.controller())?n.view.hide(e):void 0}}(this))},e.prototype.shutdown=function(){var t,e,n;n=this.controllers;for(e in n)t=n[e],t.destroy(),delete this.controllers[e];return this.$inputor.off(".atwhoInner")},e.prototype.dispatch=function(){return t.map(this.controllers,function(t){return function(e){var n;return(n=e.get_opt("delay"))?(clearTimeout(t.delayedCallback),t.delayedCallback=setTimeout(function(){if(e.look_up())return t.set_context_for(e.at)},n)):e.look_up()?t.set_context_for(e.at):void 0}}(this))},e.prototype.on_keyup=function(e){var n;switch(e.keyCode){case a.ESC:e.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case a.DOWN:case a.UP:case a.CTRL:t.noop();break;case a.P:case a.N:e.ctrlKey||this.dispatch();break;default:this.dispatch()}},e.prototype.on_keydown=function(e){var n,i;if(n=null!=(i=this.controller())?i.view:void 0,n&&n.visible())switch(e.keyCode){case a.ESC:e.preventDefault(),n.hide(e);break;case a.UP:e.preventDefault(),n.prev();break;case a.DOWN:e.preventDefault(),n.next();break;case a.P:if(!e.ctrlKey)return;e.preventDefault(),n.prev();break;case a.N:if(!e.ctrlKey)return;e.preventDefault(),n.next();break;case a.TAB:case a.ENTER:if(!n.visible())return;e.preventDefault(),n.choose(e);break;default:t.noop()}},e}(),r=function(){function n(n,i){this.app=n,this.at=i,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.cur_rect=null,this.range=null,e.append(this.$el=t("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new s(this),this.view=new l(this)}return n.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},n.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho.default,e),this.view.init(),this.model.reload(this.setting.data)},n.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},n.prototype.call_default=function(){var e,n,i;i=arguments[0],e=2<=arguments.length?c.call(arguments,1):[];try{return o[i].apply(this,e)}catch(e){return n=e,t.error(""+n+" Or maybe At.js doesn't have function "+i)}},n.prototype.trigger=function(t,e){var n,i;return null==e&&(e=[]),e.push(this),n=this.get_opt("alias"),i=n?""+t+"-"+n+".atwho":""+t+".atwho",this.$inputor.trigger(i,e)},n.prototype.callbacks=function(t){return this.get_opt("callbacks")[t]||o[t]},n.prototype.get_opt=function(t,e){var n;try{return this.setting[t]}catch(t){return n=t,null}},n.prototype.content=function(){return this.$inputor.is("textarea, input")?this.$inputor.val():this.$inputor.text()},n.prototype.catch_query=function(){var t,e,n,i,r,o;return e=this.content(),t=this.$inputor.caret("pos",{iframe:this.app.iframe}),o=e.slice(0,t),i=this.callbacks("matcher").call(this,this.at,o,this.get_opt("start_with_space")),"string"==typeof i&&i.length<=this.get_opt("max_len",20)?(r=t-i.length,n=r+i.length,this.pos=r,i={text:i,head_pos:r,end_pos:n},this.trigger("matched",[this.at,i.text])):(i=null,this.view.hide()),this.query=i},n.prototype.rect=function(){var t,e;if(t=this.$inputor.caret("offset",this.pos-1,{iframe:this.app.iframe}))return"true"===this.$inputor.attr("contentEditable")&&(t=this.cur_rect||(this.cur_rect=t)||t),e=this.app.document.selection?0:2,{left:t.left,top:t.top,bottom:t.top+t.height+e}},n.prototype.reset_rect=function(){if("true"===this.$inputor.attr("contentEditable"))return this.cur_rect=null},n.prototype.mark_range=function(){if("true"===this.$inputor.attr("contentEditable")&&(this.app.window.getSelection&&(this.range=this.app.window.getSelection().getRangeAt(0)),this.app.document.selection))return this.ie8_range=this.app.document.selection.createRange()},n.prototype.insert_content_for=function(e){var n,i,r;return i=e.data("value"),r=this.get_opt("insert_tpl"),this.$inputor.is("textarea, input")||!r?i:(n=t.extend({},e.data("item-data"),{"atwho-data-value":i,"atwho-at":this.at}),this.callbacks("tpl_eval").call(this,r,n))},n.prototype.insert=function(e,n){var i,r,o,a,s,l,c,u,h;return i=this.$inputor,h=this.callbacks("inserting_wrapper").call(this,i,e,this.get_opt("suffix")),i.is("textarea, input")?(l=i.val(),c=l.slice(0,Math.max(this.query.head_pos-this.at.length,0)),u=""+c+h+l.slice(this.query.end_pos||0),i.val(u),i.caret("pos",c.length+h.length,{iframe:this.app.iframe})):(a=this.range)?(o=a.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length,a.setStart(a.endContainer,Math.max(o,0)),a.setEnd(a.endContainer,a.endOffset),a.deleteContents(),r=t(h,this.app.document)[0],a.insertNode(r),a.setEndAfter(r),a.collapse(!1),s=this.app.window.getSelection(),s.removeAllRanges(),s.addRange(a)):(a=this.ie8_range)&&(a.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length),a.pasteHTML(h),a.collapse(!1),a.select()),i.is(":focus")||i.focus(),i.change()},n.prototype.render_view=function(t){var e;return e=this.get_opt("search_key"),t=this.callbacks("sorter").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.get_opt("limit")))},n.prototype.look_up=function(){var e,n;if(e=this.catch_query())return n=function(t){return t&&t.length>0?this.render_view(t):this.view.hide()},this.model.query(e.text,t.proxy(n,this)),e},n}(),s=function(){function e(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(t,e){var n,i,r;return n=this.fetch(),i=this.context.get_opt("search_key"),n=this.context.callbacks("filter").call(this.context,t,n,i)||[],r=this.context.callbacks("remote_filter"),n.length>0||!r&&0===n.length?e(n):r.call(this.context,t,e)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,t||[]))},e.prototype.load=function(t){if(!this.saved()&&t)return this._load(t)},e.prototype.reload=function(t){return this._load(t)},e.prototype._load=function(e){return"string"==typeof e?t.ajax(e,{dataType:"json"}).done(function(t){return function(e){return t.save(e)}}(this)):this.save(e)},e}(),l=function(){function e(e){this.context=e,this.$el=t("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return e.prototype.init=function(){var t;return t=this.context.get_opt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+t})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bind_event=function(){var e;return e=this.$el.find("ul"),e.on("mouseenter.atwho-view","li",function(n){return e.find(".cur").removeClass("cur"),t(n.currentTarget).addClass("cur")}).on("click",function(t){return function(e){return t.choose(e),e.preventDefault()}}(this))},e.prototype.visible=function(){return this.$el.is(":visible")},e.prototype.choose=function(t){var e,n;if((e=this.$el.find(".cur")).length&&(n=this.context.insert_content_for(e),this.context.insert(this.context.callbacks("before_insert").call(this.context,n,e),e),this.context.trigger("inserted",[e,t]),this.hide(t)),this.context.get_opt("hide_without_suffix"))return this.stop_showing=!0},e.prototype.reposition=function(e){var n,i;return e.bottom+this.$el.height()-t(window).scrollTop()>t(window).height()&&(e.bottom=e.top-this.$el.height()),n={left:e.left,top:e.bottom},null!=(i=this.context.callbacks("before_reposition"))&&i.call(this.context,n),this.$el.offset(n),this.context.trigger("reposition",[n])},e.prototype.next=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.next(),e.length||(e=this.$el.find("li:first")),e.addClass("cur")},e.prototype.prev=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.prev(),e.length||(e=this.$el.find("li:last")),e.addClass("cur")},e.prototype.show=function(){var t;return this.stop_showing?void(this.stop_showing=!1):(this.context.mark_range(),this.visible()||(this.$el.show(),this.context.trigger("shown")),(t=this.context.rect())?this.reposition(t):void 0)},e.prototype.hide=function(t,e){var n;if(this.visible())return isNaN(e)?(this.context.reset_rect(),this.$el.hide(),this.context.trigger("hidden",[t])):(n=function(t){return function(){return t.hide()}}(this),clearTimeout(this.timeout_id),this.timeout_id=setTimeout(n,e))},e.prototype.render=function(e){var n,i,r,o,a,s,l;if(!(t.isArray(e)&&e.length>0))return void this.hide();for(this.$el.find("ul").empty(),i=this.$el.find("ul"),a=this.context.get_opt("tpl"),s=0,l=e.length;s<l;s++)r=e[s],r=t.extend({},r,{"atwho-at":this.context.at}),o=this.context.callbacks("tpl_eval").call(this.context,a,r),n=t(this.context.callbacks("highlighter").call(this.context,o,this.context.query.text)),n.data("item-data",r),i.append(n);return this.show(),this.context.get_opt("highlight_first")?i.find("li:first").addClass("cur"):void 0},e}(),a={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78},o={before_save:function(e){var n,i,r,o;if(!t.isArray(e))return e;for(o=[],i=0,r=e.length;i<r;i++)n=e[i],
t.isPlainObject(n)?o.push(n):o.push({name:n});return o},matcher:function(t,e,n){var i,r;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(t="(?:^|\\s)"+t),r=new RegExp(t+"([A-Za-z0-9_+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi"),i=r.exec(e),i?i[2]||i[1]:null},filter:function(t,e,n){var i,r,o,a;for(a=[],r=0,o=e.length;r<o;r++)i=e[r],~i[n].toLowerCase().indexOf(t.toLowerCase())&&a.push(i);return a},remote_filter:null,sorter:function(t,e,n){var i,r,o,a;if(!t)return e;for(a=[],r=0,o=e.length;r<o;r++)i=e[r],i.atwho_order=i[n].toLowerCase().indexOf(t.toLowerCase()),i.atwho_order>-1&&a.push(i);return a.sort(function(t,e){return t.atwho_order-e.atwho_order})},tpl_eval:function(t,e){var n;try{return t.replace(/\$\{([^\}]*)\}/g,function(t,n,i){return e[n]})}catch(t){return n=t,""}},highlighter:function(t,e){var n;return e?(n=new RegExp(">\\s*(\\w*?)("+e.replace("+","\\+")+")(\\w*)\\s*<","ig"),t.replace(n,function(t,e,n,i){return"> "+e+"<strong>"+n+"</strong>"+i+" <"})):t},before_insert:function(t,e){return t},inserting_wrapper:function(t,e,n){var i,r;return i=""===n?n:n||" ",t.is("textarea, input")?""+e+i:"true"===t.attr("contentEditable")?(i=""===n?n:n||"&nbsp;",/firefox/i.test(navigator.userAgent)?r="<span>"+e+i+"</span>":(n="<span contenteditable='false'>"+i+"<span>",r="<span contenteditable='false'>"+e+n+"</span>"),this.app.document.selection&&(r="<span contenteditable='true'>"+e+"</span>"),r):void 0}},n={load:function(t,e){var n;if(n=this.controller(t))return n.model.load(e)},setIframe:function(t){return this.setIframe(t),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},e=t("<div id='atwho-container'></div>"),t.fn.atwho=function(r){var o,a;return a=arguments,t("body").append(e),o=null,this.filter("textarea, input, [contenteditable=true]").each(function(){var e,s;return(s=(e=t(this)).data("atwho"))||e.data("atwho",s=new i(this)),"object"!=typeof r&&r?n[r]&&s?o=n[r].apply(s,Array.prototype.slice.call(a,1)):t.error("Method "+r+" does not exist on jQuery.caret"):s.reg(r.at,r)}),o||this},t.fn.atwho.default={at:void 0,alias:void 0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span id='${id}'>${atwho-data-value}</span>",callbacks:o,search_key:"name",suffix:void 0,hide_without_suffix:!1,start_with_space:!0,highlight_first:!0,limit:5,max_len:20,display_timeout:300,delay:null}})}.call(this),function(){!function(t){return"function"==typeof define&&define.amd?define("caret",["jquery"],t):t(window.jQuery)}(function(t){"use strict";var e,n,i,r,o,a,s,l,c,u,h;return u="caret",e=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.setPos=function(){return this.domInputor},e.prototype.getIEPosition=function(){return t.noop()},e.prototype.getPosition=function(){return t.noop()},e.prototype.getOldIEPos=function(){var t,e;return e=s.selection.createRange(),t=s.body.createTextRange(),t.moveToElementText(this.domInputor),t.setEndPoint("EndToEnd",e),t.text.length},e.prototype.getPos=function(){var t,e,n;return(n=this.range())?(t=n.cloneRange(),t.selectNodeContents(this.domInputor),t.setEnd(n.endContainer,n.endOffset),e=t.toString().length,t.detach(),e):s.selection?this.getOldIEPos():void 0},e.prototype.getOldIEOffset=function(){var t,e;return t=s.selection.createRange().duplicate(),t.moveStart("character",-1),e=t.getBoundingClientRect(),{height:e.bottom-e.top,left:e.left,top:e.top}},e.prototype.getOffset=function(){var e,n,i,r;if(c.getSelection&&(i=this.range())){if(i.endOffset-1<0)return null;e=i.cloneRange(),e.setStart(i.endContainer,i.endOffset-1),e.setEnd(i.endContainer,i.endOffset),r=e.getBoundingClientRect(),n={height:r.height,left:r.left+r.width,top:r.top},e.detach()}else s.selection&&(n=this.getOldIEOffset());return n&&!l&&(n.top+=t(c).scrollTop(),n.left+=t(c).scrollLeft()),n},e.prototype.range=function(){var t;if(c.getSelection)return t=c.getSelection(),t.rangeCount>0?t.getRangeAt(0):null},e}(),n=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.getIEPos=function(){var t,e,n,i,r,o,a;return e=this.domInputor,o=s.selection.createRange(),r=0,o&&o.parentElement()===e&&(i=e.value.replace(/\r\n/g,"\n"),n=i.length,a=e.createTextRange(),a.moveToBookmark(o.getBookmark()),t=e.createTextRange(),t.collapse(!1),r=a.compareEndPoints("StartToEnd",t)>-1?n:-a.moveStart("character",-n)),r},e.prototype.getPos=function(){return s.selection?this.getIEPos():this.domInputor.selectionStart},e.prototype.setPos=function(t){var e,n;return e=this.domInputor,s.selection?(n=e.createTextRange(),n.move("character",t),n.select()):e.setSelectionRange&&e.setSelectionRange(t,t),e},e.prototype.getIEOffset=function(t){var e,n,i,r;return n=this.domInputor.createTextRange(),t||(t=this.getPos()),n.move("character",t),i=n.boundingLeft,r=n.boundingTop,e=n.boundingHeight,{left:i,top:r,height:e}},e.prototype.getOffset=function(e){var n,i,r;return n=this.$inputor,s.selection?(i=this.getIEOffset(e),i.top+=t(c).scrollTop()+n.scrollTop(),i.left+=t(c).scrollLeft()+n.scrollLeft(),i):(i=n.offset(),r=this.getPosition(e),i={left:i.left+r.left-n.scrollLeft(),top:i.top+r.top-n.scrollTop(),height:r.height})},e.prototype.getPosition=function(t){var e,n,r,o,a,s,l;return e=this.$inputor,o=function(t){return t.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},void 0===t&&(t=this.getPos()),l=e.val().slice(0,t),r=e.val().slice(t),a="<span style='position: relative; display: inline;'>"+o(l)+"</span>",a+="<span id='caret' style='position: relative; display: inline;'>|</span>",a+="<span style='position: relative; display: inline;'>"+o(r)+"</span>",s=new i(e),n=s.create(a).rect()},e.prototype.getIEPosition=function(t){var e,n,i,r,o;return i=this.getIEOffset(t),n=this.$inputor.offset(),r=i.left-n.left,o=i.top-n.top,e=i.height,{left:r,top:o,height:e}},e}(),i=function(){function e(t){this.$inputor=t}return e.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],e.prototype.mirrorCss=function(){var e,n=this;return e={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"===this.$inputor.prop("tagName")&&this.css_attr.push("width"),t.each(this.css_attr,function(t,i){return e[i]=n.$inputor.css(i)}),e},e.prototype.create=function(e){return this.$mirror=t("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(e),this.$inputor.after(this.$mirror),this},e.prototype.rect=function(){var t,e,n;return t=this.$mirror.find("#caret"),e=t.position(),n={left:e.left,top:e.top,height:t.height()},this.$mirror.remove(),n},e}(),r={contentEditable:function(t){return!(!t[0].contentEditable||"true"!==t[0].contentEditable)}},a={pos:function(t){return t||0===t?this.setPos(t):this.getPos()},position:function(t){return s.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(e){var n,i;return i=this.getOffset(e),l&&(n=t(l).offset(),i.top+=n.top,i.left+=n.left),i}},s=null,c=null,l=null,h=function(t){var e;return(e=null!=t?t.iframe:void 0)?(l=e,c=e.contentWindow,s=e.contentDocument||c.document):(l=void 0,c=window,s=document)},o=function(t){var e;s=t[0].ownerDocument,c=s.defaultView||s.parentWindow;try{return l=c.frameElement}catch(t){e=t}},t.fn.caret=function(i,o,s){var l;return a[i]?(t.isPlainObject(o)?(h(o),o=void 0):h(s),l=r.contentEditable(this)?new e(this):new n(this),a[i].apply(l,[o])):t.error("Method "+i+" does not exist on jQuery.caret")},t.fn.caret.EditableCaret=e,t.fn.caret.InputCaret=n,t.fn.caret.Utils=r,t.fn.caret.apis=a})}.call(this),define("commentNews",["main","jquery_autosize","atwho","caret"],function(t){"use strict";return function(t){t||(t={}),this.page=1,this.box=$(".comments--news"),this.id=this.box.data("id"),this.mod=t.mod||"",this.publishUserText=t.publishUserText||"作者",this.replyPage={},this.sort="default",this.authorId=this.box.data("author-id"),this.userId=this.box.data("user-id"),this.isAdmin=this.box.data("is-admin"),this.form=$(".comments-box-content"),this.textarea=this.form.find("textarea"),this.commentBtn=this.form.find(".btn-primary"),this.eleStatNumber=$(".comments-stat"),this.container=$(".comments-list"),this.$loading=$(".comments-loading"),this.$more=$(".comments-more"),this.singleComment='\n            <div class="reply-item" data-id="<%- comment.id %>" >\n                <span class="pull-left comment-ops" style="position:absolute;">\n                    <span class="mr20 comments-zan  <%- comment.isLiked ? \'comments-zan--active\' : \'\' %> ">\n                        <span class="comments-zan-value <%- comment.votes == 0 ? \'comment-showhide\' : \'\' %>\n                            <% if (comment.votes < 10)                        { %>  islike0-10     <% } %>\n                            <% if (comment.votes >=10 && comment.votes <30)  { %>  islike10-30    <% } %>\n                            <% if (comment.votes >=30 && comment.votes <100) { %>  islike30-100   <% } %>\n                            <% if (comment.votes > 100)                       { %>  islike100-more <% } %> \n                        ">\n                            <%- comment.votes %>\n                        </span>\n                        <i class="fa fa-thumbs-up <%- comment.isLiked ? \'\' : \'comment-showhide\' %> ml5" aria-hidden="true"></i>\n                    </span>\n                </span>\n\n                <div class="reply-content-block" >\n                    <div class="reply-content"><%= comment.parsedText %></div>\n                    <form action="/api/comment/<%- comment.id %>/edit">\n                        <div class="form-group">\n                            <textarea class="editTextarea mono form-control mb10 hidden" name="text" rows="1" style="height: 28px; overflow: hidden; word-wrap: break-word;"><%= comment.originalText %></textarea>\n                        </div>\n                    </fomr>\n                    <div class="comment-func inline-block">\n                        \n                        <span class="pull-right commentTools ml15">\n                            \n                                <a href="javascript:void(0);" class="comment-reply-btn comments-reply-user-btn" data-username="<%- comment.user.name %>" data-userslug="<%- comment.user.slug %>">\n                                    <span class="glyphicon glyphicon-share-alt flipx" aria-hidden="true"></span>\n                                </a>\n                            \n                            <% if (comment.canEdit) { %>\n                                <a href="javascript:void(0);" class="comment-edit-btn ml10" >\n                                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>\n                                </a>\n                            <% }%>\n\n                            <% if (comment.canDelete) { %>\n                                <a href="javascript:void(0);" class="comment-delete-btn ml10" >\n                                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>\n                                </a>\n                            <% } %>\n\n                            <a href="#911" class="ml10" data-toggle="modal" data-target="#911" data-module="comment"\n                               data-id="<%- comment.id %>" data-action=\'report\' data-typetext="评论" data-placement="top" title="举报">\n                                <span class="glyphicon glyphicon-flag" aria-hidden="true"></span>\n                            </a>\n                        </span>\n\n                        <span class="comment-meta inline-block">\n                            <span> — </span>\n                            <a target="_blank" href="<%- comment.user.url %>">\n                                <strong><%- comment.user.name %></strong>\n                            </a> \n                            <span class="comments-isAuthor <%- comment.publishUserText ?\'\':\'hide\' %>">\n                                <%- comment.publishUserText ? comment.publishUserText : "" %>\n                            </span> \n                            <span class="text-muted-plus">  ·  <%- comment.createdDate %></span>\n                            <% if (comment.canEdit) { %>\n                                <span class="pull-right editBtns hidden">\n                                  <button class="btn btn-link btn-xs cancel" type="button">取消</button>\n                                  <button class="btn btn-primary btn-xs edit ml10" type="button">保存</button>\n                                </span> \n                            <% } %>\n                        </span>\n                    </div>\n                </div>\n            </div>\n        ',this.tpl='\n            <div class="comments-item" data-id="<%- id %>">\n                <div class="pull-left">\n                    <a target="_blank" href="<%- user.url %>" ><img class="avatar-32 " src="<%- user.avatarUrl %>" alt=""></a>\n                </div>\n                <div class="comments-content">\n                    <div class="comment-trigger">\n                        <div class="pull-right comment-option">\n                            <a class="<%- commentDeleteClass(canEdit) %>" href="javascript:;"><span class="ml10 comment-edit-btn"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></span>\n                            </a>\n\n                            <a href="#911" class="ml10" data-toggle="modal" data-target="#911" data-action="report" data-action-text="举报" data-module="comment" data-id="<%- id %>" data-typetext="评论" data-placement="top" title="举报"><span class="glyphicon glyphicon-flag" aria-hidden="true"></span>\n                            </a>\n                          \n                            <a class="<%- commentDeleteClass(canDelete) %>" href="javascript:;"><span class="ml10 comment-delete-btn"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></span>\n                            </a>\n                           \n                        </div>\n                        <strong><a target="_blank" href="<%- user.url %>" ><%- user.name %></a></strong>\n                        <span class="comments-isAuthor <%- publishUserText ?\'\':\'hide\' %>"><%- publishUserText ?publishUserText:"" %></span> <span>  ·  <%- createdDate %></span>\n                    </div>\n\n                    <div class="fmt mb10"><%= parsedText %></div>\n                    <form action="/api/comment/<%- id %>/edit">\n                        <div class="form-group">\n                            <textarea class="editTextarea mono form-control mb10 hidden" name="text" rows="1" style="height: 28px; overflow: hidden; word-wrap: break-word;"><%= originalText %></textarea>\n                        </div>\n                    </form>\n                    <p class="comment-ops">\n                        <span class="comments-zan <%- isLiked ?\'comments-zan--active\':\'\'%>">\n                            <i class="fa fa-thumbs-up" aria-hidden="true"></i>\n                            <span class="comments-zan-text"><%- isLiked?\'已\':\'\' %>赞</span>\n                            <span class="comments-zan-value"><%- votes>0?\'+\'+votes:\'\' %></span>\n                        </span>\n                        <span class="ml15 comments-reply-btn">回复</span>\n\n                        <span class="pull-right editBtns hidden">\n                          <button class="btn btn-link btn-xs cancel" type="button">取消</button>\n                          <button class="btn btn-primary btn-xs edit ml10" type="button">保存</button>\n                        </span>\n                    </p>\n\n                    <div class="reply-list <%- repliedComments?\'\':\'reply-list--empty\'%>">\n\n                        <%  _.each(repliedComments,function(comment){ %>\n                        '+this.singleComment+'\n                        <% }) %>\n\n                        <div class="reply-item reply-item--ops">\n                            <a class="reply-inner-btn" href="javascript:;">添加回复</a>\n\n                            <% if(repliedCommentCount>3) { %>\n                            <span class="reply-more">\n                                <span class="text-muted-plus-plus mr5 ml5">|</span>\n                                <a class="reply-more-btn" href="javascript:;">显示更多</a>\n                            </span>\n                            <% } %>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n        ',this.subTpl='\n            <form class="reply-form" action="/api/comment/<%- id %>/reply">\n                <button type="button" class="btn btn-default pull-right reply-btn">添加回复</button>\n                <button class="hide" type="button"></button>\n                <div class="form-group">\n                    <textarea style="min-height: 35px;max-height: 132px;" name="text" class="form-control reply-text" rows="1" placeholder="文明社会，理性评论"></textarea>\n                </div>\n            </form>\n        ';var e=this;this.unfoldCommentArea=function(t,n,i){var r=$("[data-id="+t+"]").find(".reply-more-btn"),o=r.closest(".reply-more"),a=r.closest(".reply-item--ops"),s=r.closest(".comments-item").data("id");e.replyPage[s]=e.replyPage[s]||0;var l=++e.replyPage[s],c="/api/comment/"+s+"/more?page="+l;r.addClass("disabled"),$.get(c,function(t){if(r.removeClass("disabled"),!t.status){var s=t.data,l=e.singleComment,c=_.reduce(s.row,function(t,n){return t+_.template(l)({comment:n,authorId:e.authorId})},"");a.before(c),s.hasMore||o.remove(),n(i)}})},this.render=function(t,n,i){if(n=n||!1,i=i||"html",n){parseInt(e.authorId)!=parseInt(t.user.id)?t.publishUserText="":t.publishUserText=e.publishUserText;var r=_.template(e.tpl)(t);"news"===e.mod?e.container.prepend(r):e.container.append(r)}else{_.each(t,function(t){parseInt(e.authorId)!=parseInt(t.user.id)?t.publishUserText="":t.publishUserText=e.publishUserText,t.repliedComments&&_.each(t.repliedComments,function(t){parseInt(e.authorId)!=parseInt(t.user.id)?t.publishUserText="":t.publishUserText=e.publishUserText})});var o=_.reduce(t,function(t,n){return t+_.template(e.tpl)(n)},"");e.container[i](o)}$("textarea").autosize()},this.fetch=function(t){t=t||void 0,e.$loading.removeClass("hide"),"more"===t&&(e.page=e.page+1),"grapevineDetail"==e.mod&&(e.mod="grapevine"),$.get("/api/"+e.mod+"/"+e.id+"/comments?sort="+e.sort+"&page="+e.page,function(n){if(e.$loading.addClass("hide"),!n.status&&n.data.total>0){var i=n.data.rows,r=n.data.total;e.eleStatNumber.text(r+" 条评论"),"more"===t?e.render(i,void 0,"append"):e.render(i),n.data.hasMore&&e.$more.removeClass("hide")}})},this.init=function(){window.commentDeleteClass=function(t){return t?"":"hide"},e.textarea.atwho({at:"@",callbacks:{remote_filter:function(t,n){var i=void 0;if(i=e.box.data("id")+"",t){if(t)return $.getJSON("/api/users/search",{q:t},function(t){t.status||n(t.data)})}else if(i.match(/^11|^12|^13/))return $.getJSON("/api/users/search",{objectId:i},function(t){t.status||n(t.data)})},tpl_eval:function(t,e){return'<li data-value="@'+e.name+"["+e.slug+']">'+(e.avatarUrl?'<img class="avatar-24 mr10" src="'+e.avatarUrl+'" />':"")+e.name+" &nbsp; <small>@"+e.slug+"</small></li>"}}}),"news"===e.mod||"article"===e.mod||"grapevineDetail"===e.mod?e.box.on("click",".btn-group-menu a",function(){var t=$(this).data("sort"),n=$(this).text();e.sort!=t&&(e.sort=t,e.page=1,e.replyPage={},e.box.find(".comments-sort-text").text(n),e.fetch()),$(this).addClass("active"),$(this).siblings().removeClass("active")}):e.box.on("click",".dropdown-menu a",function(){var t=$(this).data("sort"),n=$(this).text();e.sort!=t&&(e.sort=t,e.page=1,e.replyPage={},e.box.find(".comments-sort-text").text(n),e.fetch())}),e.$more.on("click","a",function(){e.$more.addClass("hide"),e.$loading.removeClass("hide"),e.fetch("more")}),e.id>0&&(e.commentBtn.on("click",function(t){t.preventDefault();var n=e.textarea.val();e.commentBtn.prop("disabled",!0),"grapevineDetail"==e.mod&&(e.mod="grapevine"),$.post("/api/"+e.mod+"/"+e.id+"/comments/add",{text:n},function(t){if(e.commentBtn.prop("disabled",!1),!t.status){t.data.comment.repliedComments=null,t.data.comment.repliedCommentCount=0;var n=t.data.total,i=t.data.comment;e.eleStatNumber.text(n+" 条评论"),e.render(i,"single"),e.textarea.val("")}})}),e.container.on("click",".reply-btn",function(t){t.preventDefault();var n=$(this),i=$(this).closest(".comments-item"),r=n.closest(".reply-list"),o=i.find("textarea"),a=i.find(".reply-item--ops"),s=i.data("id"),l=i.find(".reply-text").val(),c="/api/comment/"+s+"/reply";n.prop("disabled",!0),$.post(c,{text:l},function(t){if(n.prop("disabled",!1),!t.status){r.find(".reply-more").remove();var i=t.data;i.authorId=e.authorId;var s=t.data.total;e.eleStatNumber.text(s+" 条评论");var l=e.singleComment,c=_.template(l)(i);a.before(c),o.last().val("")}})}),e.showCommentTextarea=function(t){var n=t.closest(".comments-content").find(".reply-list");$(".reply-list--empty").hide(),n.hasClass("reply-list--empty")&&n.show(),$(".reply-form").remove(),$(".reply-inner-btn").removeClass("hide"),$(".reply-item--ops").removeClass("hide");var i={};i.id=t.closest(".comments-item").data("id");var r=_.template(e.subTpl)(i);n.append(r),n.find(".reply-inner-btn").addClass("hide"),n.find(".reply-item--ops").addClass("hide"),n.find("textarea").focus(),$("textarea").autosize(),$(".reply-text").atwho({at:"@",callbacks:{remote_filter:function(t,n){var i=void 0;if(i=e.box.data("id")+"",t){if(t)return $.getJSON("/api/users/search",{q:t},function(t){t.status||n(t.data)})}else if(i.match(/^11|^12|^13/))return $.getJSON("/api/users/search",{objectId:i},function(t){t.status||n(t.data)})},tpl_eval:function(t,e){return'<li data-value="@'+e.name+"["+e.slug+']">'+(e.avatarUrl?'<img class="avatar-24 mr10" src="'+e.avatarUrl+'" />':"")+e.name+" &nbsp; <small>@"+e.slug+"</small></li>"}}})},e.container.on("click",".comments-reply-btn",function(){e.showCommentTextarea($(this))}),e.container.on("click",".comments-reply-user-btn",function(){e.showCommentTextarea($(this));var t=$(this).data("username"),n=$(this).data("userslug");$(this).closest(".reply-list").find("textarea").val("@"+t+"["+n+"] ")}),e.container.on("click",".comment-edit-btn",function(t){var e=$(this).closest(".reply-item").length>0?"reply":"comments",n=$(this).closest("."+e+"-item"),i=n.data("id"),r=n.find("."+e+"-item").height(),o=("reply"==e?n.find(".reply-content"):n.find(".comments-content .fmt")).addClass("hidden"),a=n.find(".editBtns").first().removeClass("hidden"),s=a.find(".cancel").first(),l=a.find(".edit").first(),c=n.find(".comment-edit-btn").first().addClass("hidden"),u=n.find(".editTextarea").first().css("height",r).removeClass("hidden").autosize().focus();n.find("."+e+"-content p").first().addClass("hidden"),"comments"==e?n.find(".comment-option").addClass("hidden"):n.find(".commentTools").addClass("hidden"),u.on("keydown",function(t){return(t.ctrlKey||t.metaKey)&&13===t.keyCode?($(this).siblings(".comment-func").find("button.edit").click(),!1):27===t.keyCode?($(this).siblings(".comment-func").find("button.cancel").click(),!1):9===t.keyCode?($(this).siblings(".comment-func").find("button.edit").focus(),!1):void 0}),s.click(function(){return u.addClass("hidden"),a.addClass("hidden"),o.removeClass("hidden"),c.removeClass("hidden"),n.find("."+e+"-content p").first().removeClass("hidden"),n.find(".commentTools").removeClass("hidden"),n.find(".comment-option").removeClass("hidden"),n.find(".editTextarea").removeClass("error"),n.find(".error--msg").remove(),!1}).on("keydown",function(t){if(9===t.keyCode)return $(this).parent().siblings(".commentDel").focus(),n.find(".commentTools").removeClass("hidden"),n.find(".comment-option").removeClass("hidden"),!1}),l.unbind("click").click(function(t){t.preventDefault(),$.post("/api/comment/"+i+"/edit",{text:u.val()},function(t){0===t.status&&(o.html(t.data.parsedText),n.find(".createdDate").text(t.data.createdDate),s.click(),n.find(".commentTools").removeClass("hidden"),n.find(".comment-option").removeClass("hidden"),n.find("."+e+"-content p").first().removeClass("hidden"))})}).on("keydown",function(t){if(9===t.keyCode)return $(this).siblings("button.cancel").focus(),!1})}),e.container.on("click",".comment-delete-btn",function(){var t=$(this).closest(".reply-item");t.length||(t=$(this).closest(".comments-item"));var n=t.data("id");confirm("真的要删除该评论？")&&$.post("/api/comment/"+n+"/delete",function(t){if(t.status){if("form"!==t.data[0])return sfModal({title:t.data[0],content:t.data[1]})}else e.fetch()})}),e.container.on("click",".reply-inner-btn",function(){e.showCommentTextarea($(this))}),e.container.on("click",".reply-more-btn:not(.disabled)",function(){var t=$(this),n=$(this).closest(".reply-more"),i=$(this).closest(".reply-item--ops"),r=$(this).closest(".comments-item").data("id");e.replyPage[r]=e.replyPage[r]||0;var o=++e.replyPage[r],a="/api/comment/"+r+"/more?page="+o;t.addClass("disabled"),$.get(a,function(r){if(t.removeClass("disabled"),!r.status){var o=r.data,a=e.singleComment,s=_.reduce(o.row,function(t,n){return t+_.template(a)({comment:n,authorId:e.authorId})},"");i.before(s),o.hasMore||n.remove()}})}),e.container.on("click",".comments-zan",function(t){t.preventDefault();var e=$(this),n=$(this).closest(".reply-item");0==n.length&&(n=$(this).closest(".comments-item"));var i=n.data("id"),r=e.hasClass("comments-zan--active")?"/cancel":"",o=!(0==e.parents(".not-reply").length);$.post("/api/comment/"+i+"/like"+r,function(t){if(!t.status){var n=t.data;r?(e.find(".comments-zan-text").text("赞"),e.removeClass("comments-zan--active")):(e.find(".comments-zan-text").text("已赞"),e.addClass("comments-zan--active")),o?n>0?e.find(".comments-zan-value").text("+"+n):e.find(".comments-zan-value").text(""):(e.find(".comments-zan-value").text(n),e.find(".comments-zan-value").text()>0&&(e.find(".comments-zan-value").removeClass("comment-showhide"),e.find(".fa-thumbs-up").removeClass("comment-showhide")))}})}))},this.init()}}),define("bookmark",["jquery","sfModal","main","jquery_tmpl"],function(t,e,n){"use strict";var i,r;return i='<form class="bookmarklist-form" id="bookmarkArchives"><div class="form-group"><label for="bookmarkArchiveName" class="required">名称</label>    <input type="text" name="name" id="name" id="bookmarkArchiveName" class="form-control" value="${name}" placeholder="最多输入32个字" maxlength="32"></div><div class="form-group"><label for="bookmarkArchiveDescription">描述</label>    <textarea name="description" id="bookmarkArchiveDescription" class="form-control" placeholder="最多输入256个字">${description}</textarea></div><div class="form-group"><input type="radio" name="isPrivate" class="mt10" value="0" id="bookmark-public"{{if !isPrivate}} checked{{/if}}/><label class="ml10" for="bookmark-public">公开</label>    <span class="text-muted">&mdash; 公开后不可再设置为私密</span><br />    <input type="radio" name="isPrivate" value="1" id="bookmark-private"{{if isPrivate}} checked{{/if}}{{if !isPrivate}} disabled{{/if}}/><label class="ml10" for="bookmark-private">私密</label>    <span class="text-muted">&mdash; 仅自己可见</span></div>    </form>',r='<form class="bookmarklist-form"><p class="required">添加到收藏夹</p><ul class="bookmarklist list-unstyled mb0">    {{each list}}<li data-id="${id}"{{if isBookmarked}}class="active"{{/if}}><input type="checkbox" {{if isBookmarked}}checked{{/if}}>${name}{{if ~~isPrivate}}<span class="text-muted label label-default ml10">私密</span>{{/if}}</li>{{/each}}</ul>    <div class="mt20"><a href="#" class="new-bookmark">+ 创建新收藏夹</a></div></form>',{createArchive:function(n,r,o){var a;a=this,e({title:"创建收藏夹",content:t.tmpl(i,{name:"",description:"",isPrivate:!0}),doneText:"提交",doneFn:function(){var e;e=t(".bookmarklist-form"),t.post("/api/bookmarkArchives/add",{name:e.find("[name=name]").val(),description:e.find("[name=description]").val(),isPrivate:e.find("[name=isPrivate]:checked").val()},function(t){0===t.status&&("edit"===r?a.editBookmark(n,o):"bookmark"===r?a.addBookmark(n,o,t.data.id):"other"===r?o(t):window.location.reload())})},hide:function(){"edit"===r?a.editBookmark(n,o):"bookmark"===r&&a.addBookmark(n,o)}})},editArchive:function(n){e({title:"编辑收藏夹",$content:t.tmpl(i,{name:n.data("name"),description:n.data("desc"),isPrivate:n.data("isprivate")}),doneText:"提交",doneFn:function(){var e;e=t(".bookmarklist-form"),t.post("/api/bookmarkArchive/"+n.data("id")+"/edit",{name:e.find("[name=name]").val(),description:e.find("[name=description]").val(),isPrivate:e.find("[name=isPrivate]:checked").val()},function(t){0===t.status&&window.location.reload()})}})},deleteArchive:function(n){e({title:"删除收藏夹",content:'确认要删除收藏夹「<span class="fuckXss"></span>」么？<br /><span class="text-danger">注意：收藏夹下的收藏也会被删除！</span>',doneText:"删除",doneClass:"btn-danger",closeText:"取消",show:function(){t(".fuckXss").text(n.data("name"))},doneFn:function(){t.post("/api/bookmarkArchive/"+n.data("id")+"/delete",function(t){t.status||(location.href=t.data)})}})},addBookmark:function(t,e,n){this.getArchive(t,e,"bookmark",n)},editBookmark:function(t,e){this.getArchive(t,e,"edit")},successFn:null,getArchive:function(n,i,o,a){var s;s=this,s.successFn=i,t.get("/api/user/bookmarkArchives",{objectId:n.data("id")},function(l){var c;c="",0===l.status&&(e({title:"收藏",content:t.tmpl(r),doneText:"提交",show:function(){return setTimeout(function(){var e;if(e=t(".sfmodal input[type=checkbox]").length,1===e&&!l.data[0].isBookmarked)return t(".sfmodal input[type=checkbox]").trigger("click")},100)},doneFn:function(){var r,o,a;o=t(this),t(".bookmarklist").removeClass("error").siblings(".error--msg").remove(),a=[],r=t(".bookmarklist-form").length>1?t(".bookmarklist-form").eq(1):t(".bookmarklist-form"),r.find("li.active").each(function(){a.push(t(this).data("id"))}),t(".sfmodal").find(".done-btn").text("加载中").attr("disabled","disabled"),t.post("/api/"+n.data("type")+"/"+n.data("id")+"/bookmark",{archiveIds:a},function(n){var r;0===n.status?("false"===n.data&&window.location.reload(),i&&i(n,a.length),e("hide"),r=location.pathname.split("/"),"bookmark"===r[1]&&a.indexOf(r[2])===-1&&location.reload()):(t(".bookmarklist").addClass("error").after('<span class="error--msg">必须选择收藏夹</span>'),t(".sfmodal").find(".done-btn").text("提交").removeAttr("disabled"))})}}),t(".sfModal-content").html(t.tmpl(r,[{list:l.data}])),t(".bookmarklist").delegate("li","click",function(){var e;e=t(this).find("input[type=checkbox]"),t(this).toggleClass("active"),t(this).hasClass("active")?e.prop("checked",!0):e.prop("checked",!1)}),a&&t(".bookmarklist li[data-id="+a+"]").click(),t(".sfmodal .new-bookmark").click(function(){return s.createArchive(n,o,i),!1}))})},deleteBookmark:function(n){e({title:"删除收藏",content:'确认要从收藏夹「<span class="delete-archivemodal"></span>」中删除收藏「<span class="delete-bookmarkmodal"></span>」么？',doneText:"删除",doneClass:"btn-danger",closeText:"取消",show:function(){t(".delete-archivemodal").text(n.data("archive")),t(".delete-bookmarkmodal").text(n.data("title"))},doneFn:function(){t.post("/api/"+n.data("type")+"/"+n.data("id")+"/bookmark",{archiveId:null},function(t){0===t.status&&(n.parents(".stream-list__item").fadeOut().remove(),e("hide"))})}})}}}),define("statusToggle",[],function(){"use strict";return function(t){t.data("toggle","false"),t.data("toggle")&&(t.on("active",function(e,n){t.data("toggle","true"),n.call(this)}),t.on("unactive",function(e,n){t.data("toggle","true"),n.call(this)}))}}),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("sf_share",e):"object"==typeof exports?exports.WidgetShare=e():t.WidgetShare=e();
}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";var i=n(4);t.exports=i},function(t,e){"use strict";function n(){}function i(t,e){var n;return this.element=document.querySelector(t),this.el={head:document.getElementsByTagName("head")[0],body:document.getElementsByTagName("body")[0]},this.config={enabled_networks:0,protocol:-1===["http","https"].indexOf(window.location.href.split(":")[0])?"https://":"//",url:$(t).parent().data("url")||location.href,text:this.data(this.element,"text"),caption:null,title:this.data(this.element,"text")?this.data(this.element,"text"):(n=document.querySelector('meta[property="og:title"]')||document.querySelector('meta[name="twitter:title"]'))?n.getAttribute("content"):(n=document.querySelector("title"))?n.innerText:void 0,image:this.data(this.element,"image")||"http://s.segmentfault.com/img/sf-114.png",pic:this.data(this.element,"pic")||"http://static.segmentfault.com/global/img/touch-icon.png",description:(n=document.querySelector('meta[property="og:description"]')||document.querySelector('meta[name="twitter:description"]')||document.querySelector('meta[name="description"]'))?n.getAttribute("content"):"",networks:{weibo:{enabled:!0,url:null,title:null,text:null,caption:null,description:null,image:null,pic:null,appkey:"1742025894"},wechart:{enabled:!0,url:null},renren:{enabled:!0,url:null,title:null,text:null,description:null,image:null,comment:null},tqq:{enabled:!0,url:null,appkey:"",title:null,text:null,image:null},douban:{enabled:!0,url:null,href:null,appkey:null,text:null,title:null,caption:null,description:null,image:null,comment:null},google_plus:{enabled:!1,url:null},twitter:{enabled:!0,url:null,text:null,description:null},facebook:{enabled:!0,load_sdk:!0,url:null,app_id:null,title:null,caption:null,description:null,image:null},pinterest:{enabled:!1,url:null,image:null,description:null},email:{enabled:!1,title:null,description:null}}},this.setup(t,e),this}"classList"in document.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){var t,e,n;return n=function(t){return function(n){var i,r;i=e.className.split(/\s+/),r=i.indexOf(n),t(i,r,n),e.className=i.join(" ")}},e=this,t={add:n(function(t,e,n){~e||t.push(n)}),remove:n(function(t,e){~e&&t.splice(e,1)}),toggle:n(function(t,e,n){~e?t.splice(e,1):t.push(n)}),contains:function(t){return!!~e.className.split(/\s+/).indexOf(t)},item:function(t){return e.className.split(/\s+/)[t]||null}},Object.defineProperty(t,"length",{get:function(){return e.className.split(/\s+/).length}}),t}});var r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n.prototype.extend=function(t,e,n){var i,r;for(r in e)i=void 0!==t[r],i&&"object"==typeof e[r]?this.extend(t[r],e[r],n):(n||!i)&&(t[r]=e[r])},n.prototype.hide=function(t){return t.style.display="none"},n.prototype.show=function(t){return t.style.display="block"},n.prototype.has_class=function(t,e){return t.classList.contains(e)},n.prototype.add_class=function(t,e){return t.classList.add(e)},n.prototype.remove_class=function(t,e){return t.classList.remove(e)},n.prototype.is_encoded=function(t){return t?(t=t.replace(/\%/g,""),decodeURIComponent(t)!==t):void 0},n.prototype.encode=function(t){return this.is_encoded(t)?t:encodeURIComponent(t)},n.prototype.data=function(t,e){return t?t.getAttribute("data-"+e):void 0},n.prototype.popover=function(t){var e=document.createElement("div");e.innerHTML='<div class="share-modal"> <div class="share-modal-content"> <p class="share-modal-title">打开微信“扫一扫”，打开网页后点击屏幕右上角分享按钮</p> <button type="button" class="share-modal-close">×</button> <div id="shareQrcode"></div> </div> </div>',document.body.appendChild(e),$("#shareQrcode").qrcode({width:300,height:300,text:t});var n=document.getElementsByClassName("share-modal")[0],i=document.getElementsByClassName("share-modal-close")[0];i.onclick=function(){n.parentNode.removeChild(n),i.onclick=null}},n.prototype.popup=function(t,e){var n,i,r,o;return null==e&&(e={}),i={width:500,height:350},i.top=screen.height/2-i.height/2,i.left=screen.width/2-i.width/2,r=function(){var t;t=[];for(n in e)o=e[n],t.push(n+"="+this.encode(o));return t}.call(this).join("&"),r&&(r="?"+r),window.open(t+r,"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=550,height=500")},o(i,n),i.prototype.setup=function(t,e){var n,i,r,o,a;for(r=document.querySelectorAll(t),this.extend(this.config,e,!0),this.set_global_configuration(),this.normalize_network_configuration(),n=o=0,a=r.length;a>o;n=++o)i=r[n],this.setup_instance(t,n);this.config.callback()},i.prototype.setup_instance=function(t,e){var n,i,r,o,a,s,l;for(n=document.querySelectorAll(t)[e],this.hide(n),this.add_class(n,"sharer-"+e),this.inject_html(n),this.show(n),r=n.getElementsByTagName("li"),l=this,s=[],e=o=0,a=r.length;a>o;e=++o)i=r[e],s.push(i.addEventListener("click",function(){return l.event_network(n,this)}));return s},i.prototype.event_network=function(t,e){var n;return n=e.getAttribute("data-network"),this["network_"+n]()},i.prototype.public=function(t){var e,n,i,r,o,a,s;for(a=document.querySelectorAll(this.element),s=[],n=r=0,o=a.length;o>r;n=++r)i=a[n],e=i.getElementsByClassName("social")[0],s.push(this["event_"+t](e));return s},i.prototype.network_facebook=function(){return this.config.networks.facebook.load_sdk?window.FB?FB.ui({method:"feed",name:this.config.networks.facebook.title,link:this.config.networks.facebook.url,picture:this.config.networks.facebook.image,caption:this.config.networks.facebook.caption,description:this.config.networks.facebook.description}):console.error("The Facebook JS SDK hasn't loaded yet."):this.popup("https://www.facebook.com/sharer/sharer.php",{u:this.config.networks.facebook.url})},i.prototype.network_twitter=function(){return this.popup("https://twitter.com/intent/tweet",{text:this.config.networks.twitter.text,url:this.config.networks.twitter.url+"?utm_source=Twitter&utm_medium=shareLink&utm_campaign=socialShare"})},i.prototype.network_google_plus=function(){return this.popup("https://plus.google.com/share",{url:this.config.networks.google_plus.url})},i.prototype.network_pinterest=function(){return this.popup("https://www.pinterest.com/pin/create/button",{url:this.config.networks.pinterest.url,media:this.config.networks.pinterest.image,description:this.config.networks.pinterest.description})},i.prototype.network_email=function(){return this.popup("mailto:",{subject:this.config.networks.email.title,body:this.config.networks.email.description})},i.prototype.network_weibo=function(){var t="";return t=-1!==this.config.networks.weibo.url.indexOf("?")?this.config.networks.weibo.url+"&utm_source=Weibo&utm_medium=shareLink&utm_campaign=socialShare":this.config.networks.weibo.url+"?utm_source=Weibo&utm_medium=shareLink&utm_campaign=socialShare",this.popup("http://service.weibo.com/share/share.php",{title:this.config.networks.weibo.title.replace(/"/g,"%2522"),url:t,pic:this.config.networks.weibo.image,appkey:this.config.networks.weibo.appkey,searchPic:"false"})},i.prototype.network_wechart=function(){return this.popover(this.config.networks.wechart.url+"?utm_source=Wechat&utm_medium=shareLink&utm_campaign=socialShare")},i.prototype.network_renren=function(){return this.popup("http://widget.renren.com/dialog/share",{resourceUrl:this.config.networks.renren.image,pic:this.config.networks.renren.image,srcUrl:this.config.networks.renren.url+"?utm_source=Renren&utm_medium=shareLink&utm_campaign=socialShare",title:this.config.networks.renren.title,description:this.config.networks.renren.description,comment:this.config.networks.renren.comment||""})},i.prototype.network_tqq=function(){return this.popup("http://share.v.t.qq.com/index.php",{c:"share",a:"index",url:this.config.networks.tqq.url+"?utm_source=Tqq&utm_medium=shareLink&utm_campaign=socialShare",title:this.config.networks.tqq.title,appkey:this.config.networks.tqq.appkey,pic:this.config.networks.tqq.image})},i.prototype.network_douban=function(){return this.popup("http://www.douban.com/share/service",{href:this.config.networks.douban.url+"?utm_source=Douban&utm_medium=shareLink&utm_campaign=socialShare",name:this.config.networks.douban.title,image:this.config.networks.douban.image,text:this.config.networks.douban.description,comment:this.config.networks.douban.comment||""})},i.prototype.inject_html=function(t){t.innerHTML='<ul class="sn-inline"><li data-network="weibo"><a href="javascript:void(0);" class="entypo-weibo icon-sn-weibo share-1" data-toggle="tooltip" data-placement="top" title="分享至新浪微博">新浪微博</a></li><li data-network="wechart"><a href="javascript:void(0);" class="entypo-wechart icon-sn-weixin share-2" data-toggle="tooltip" data-placement="top" title="分享至微信">微信</a></li><li data-network="twitter"><a href="javascript:void(0);" class="entypo-twitter icon-sn-twitter share-3" data-toggle="tooltip" data-placement="top" title="分享至 Twitter">Twitter</a></li><li data-network="facebook"><a href="javascript:void(0);" class="entypo-facebook icon-sn-facebook share-4" data-toggle="tooltip" data-placement="top" title="分享至 Facebook">Facebook</a></li></ul>'},i.prototype.hook=function(t,e,n){var i,r;i=this.config.networks[e][t],"function"==typeof i&&(r=i.call(this.config.networks[e],n),void 0!==r&&(r=this.normalize_filter_config_updates(r),this.extend(this.config.networks[e],r,!0),this.normalize_network_configuration()))},i.prototype.set_global_configuration=function(){var t,e,n,i,r,o;for(n in i)n||(this.config[n]=i[n]);r=this.config.networks,o=[];for(e in r){i=r[e];for(n in i)null==this.config.networks[e][n]&&(this.config.networks[e][n]=this.config[n]);this.config.networks[e].enabled?(t="block",this.config.enabled_networks+=1):t="none",o.push(this.config.networks[e].display=t)}return o},i.prototype.normalize_network_configuration=function(){return this.config.networks.facebook.app_id||(this.config.networks.facebook.load_sdk=!1),this.is_encoded(this.config.networks.twitter.description)||(this.config.networks.twitter.description=encodeURIComponent(this.config.networks.twitter.description)),"number"==typeof this.config.networks.facebook.app_id?this.config.networks.facebook.app_id=this.config.networks.facebook.app_id.toString():void 0},i.prototype.normalize_filter_config_updates=function(t){return this.config.networks.facebook.app_id!==t.app_id&&(console.warn("You are unable to change the Facebook app_id after the button has been initialized. Please update your Facebook filters accordingly."),delete t.app_id),this.config.networks.facebook.load_sdk!==t.load_sdk&&(console.warn("You are unable to change the Facebook load_sdk option after the button has been initialized. Please update your Facebook filters accordingly."),delete t.app_id),t},t.exports=i},function(t,e){"use strict";function n(t,e){this.setup(t,e)}n.prototype={constructor:n,setup:function(t,e){this.initAttr(t,e),this.initDom()},initAttr:function(t,e){this.element=$(t),this.options=$.extend({url:this.element.data("url"),shorturl:this.element.data("shorturl"),widgetScript:this.element.data("widgetscript")},e)},initDom:function(){var t=this.options.url,e=this.options.shorturl,n=this.options.widgetScript,i='<div class="form-group mt5 mb10">            <label style="font-size:13px; font-weight:normal;">永久链接</label>            <div class="input-group shareUrl">                <input type="text" class="form-control input-sm" readonly="readonly" data-url="{{url}}" data-shorturl="{{shorturl}}" value="{{url}}">                <span class="input-group-btn">                    <button class="btn btn-default btn-sm" style="box-shadow: none;" type="button" data-share-target="shorturl">缩短</button>                    <button class="btn btn-default btn-sm copy copyUrl" style="box-shadow: none;" type="button" data-toggle="tooltip" data-placement="top" data-clipboard-text="">复制</button>                </span>            </div>        </div>'.replace(/{{url}}/g,t).replace(/{{shorturl}}/g,e);n&&(i+='<div class="form-group mb10">            <label style="font-size:13px; font-weight:normal;">嵌入其他网站</label>            <div class="input-group shareWidgetScript">                <input type="text" class="form-control input-sm" readonly="readonly" value="">                <span class="input-group-btn">                    <button class="btn btn-default btn-sm copy copyWidgetScript" style="box-shadow: none;" type="button" data-toggle="tooltip" data-placement="top" data-clipboard-text="">复制</button>                </span>            </div>            <p class="help-block mb0" style="color: #999;">将以上代码粘贴到其它支持嵌入 &lt;script&gt; 标签的网站</p>        </div>');var r=this.element.find(".icon-sn-dotted");r.popover({html:!0,placement:"top",trigger:"manual",container:"body",content:i}),r.click(function(){$(this).popover("toggle")}),$("body").on("click",function(t){$(t.target).parents(".popover").length||t.target===r[0]||r.popover("hide")}),r.on("shown.bs.popover",function(){"undefined"===e&&$('[data-share-target="shorturl"]').hide(),$(".shareUrl, .shareWidgetScript").on("mouseenter",function(t){$(this).find("input").select()}),$(".shareWidgetScript input").val(n),$(".shareWidgetScript .copyUrl").data("clipboard-text",n),$(".shareUrl .copyWidgetScript").data("clipboard-text",t),$(".shareUrl [data-share-target]").click(function(n){var i=$(".shareUrl input");i.val()===t?(i.val(e),$(this).text("还原")):(i.val(t),$(this).text("缩短"))}),$('[data-toggle="tooltip"]').tooltip();var i=$(".copy");i.mouseout(function(){i.attr("title",""),i.attr("data-original-title","")}),i.click(function(t){try{$(this).parents(".input-group").find("input").select(),document.execCommand("copy"),$(this).attr("title","已复制").attr("data-original-title","已复制").tooltip("show")}catch(t){$(this).attr("title","无法复制!").attr("data-original-title","无法复制!").tooltip("show")}})})},destroy:function(){this.element.off().remove()}},t.exports=n},function(t,e,n){"use strict";function i(t,e,n){this.setup(t,e,n)}var r=n(3),o=n(2);i.prototype={constructor:i,setup:function(t,e,n){return this.initAttr(t,e),n?(this.initDom(),this.initShareMore(),void this.initNetwork()):void this.initNetwork(t)},initAttr:function(t,e){this.element=$(t),this.options=$.extend({url:this.element.data("url"),shorturl:this.element.data("shorturl"),title:this.element.data("title"),text:this.element.data("text"),image:this.element.data("image"),widgetScript:this.element.data("widgetscript")},e)},initDom:function(){var t=this.options.url,e=this.options.shorturl,n=this.options.widgetScript,i='<div style="margin-bottom:10px;">分享扩散：</div><div class="widget-share-network"></div><a type="button" class="btn btn-sm shareMore btn-sn-more" data-toggle="popover" data-placement="top" data-url="{{url}}" data-shorturl="{{shorturl}}"><span class="icon-sn-dotted"></span><strong class="visible-xs-inline">•••</strong></a>'.replace(/{{url}}/g,t).replace(/{{shorturl}}/g,e);this.element.html(i),this.element.find(".shareMore").data("widgetscript",n)},initShareMore:function(){this.more=new r(".shareMore")},initNetwork:function(t){this.network=new o(t||".widget-share-network",{image:this.options.image,title:this.options.title,text:this.options.text,callback:function(){$((t||".widget-share-network")+" .sn-inline a").tooltip()},networks:this.options.networks||{}})},destroy:function(){this.element.empty(),this.switchUrl&&this.switchUrl.destroy(),this.network.destroy()}},t.exports=i}])}),define("math",["jquery","main"],function(t,e){"use strict";return function(n){var i,r;i=n||t(".fmt"),"undefined"!=typeof MathJax?i.each(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,t(this).get(0)])}):(r=e.staticUrl+"/3rd/MathJax/MathJax.js",t.getScript(r,function(){MathJax.Hub.Config({extensions:["tex2jax.js"],jax:["input/TeX","output/HTML-CSS"],tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,ignoreClass:"side"}}),i.each(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,t(this).get(0)])})}))}}),function(t){var e,n,i="0.4.2",r="hasOwnProperty",o=/[\.\/]/,a="*",s=function(){},l=function(t,e){return t-e},c={n:{}},u=function(t,i){t=String(t);var r,o=n,a=Array.prototype.slice.call(arguments,2),s=u.listeners(t),c=0,h=[],d={},p=[],f=e;e=t,n=0;for(var m=0,g=s.length;m<g;m++)"zIndex"in s[m]&&(h.push(s[m].zIndex),s[m].zIndex<0&&(d[s[m].zIndex]=s[m]));for(h.sort(l);h[c]<0;)if(r=d[h[c++]],p.push(r.apply(i,a)),n)return n=o,p;for(m=0;m<g;m++)if(r=s[m],"zIndex"in r)if(r.zIndex==h[c]){if(p.push(r.apply(i,a)),n)break;do if(c++,r=d[h[c]],r&&p.push(r.apply(i,a)),n)break;while(r)}else d[r.zIndex]=r;else if(p.push(r.apply(i,a)),n)break;return n=o,e=f,p.length?p:null};u._events=c,u.listeners=function(t){var e,n,i,r,s,l,u,h,d=t.split(o),p=c,f=[p],m=[];for(r=0,s=d.length;r<s;r++){for(h=[],l=0,u=f.length;l<u;l++)for(p=f[l].n,n=[p[d[r]],p[a]],i=2;i--;)e=n[i],e&&(h.push(e),m=m.concat(e.f||[]));f=h}return m},u.on=function(t,e){if(t=String(t),"function"!=typeof e)return function(){};for(var n=t.split(o),i=c,r=0,a=n.length;r<a;r++)i=i.n,i=i.hasOwnProperty(n[r])&&i[n[r]]||(i[n[r]]={n:{}});for(i.f=i.f||[],r=0,a=i.f.length;r<a;r++)if(i.f[r]==e)return s;return i.f.push(e),function(t){+t==+t&&(e.zIndex=+t)}},u.f=function(t){var e=[].slice.call(arguments,1);return function(){u.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},u.stop=function(){n=1},u.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},u.nts=function(){return e.split(o)},u.off=u.unbind=function(t,e){if(!t)return void(u._events=c={n:{}});var n,i,s,l,h,d,p,f=t.split(o),m=[c];for(l=0,h=f.length;l<h;l++)for(d=0;d<m.length;d+=s.length-2){if(s=[d,1],n=m[d].n,f[l]!=a)n[f[l]]&&s.push(n[f[l]]);else for(i in n)n[r](i)&&s.push(n[i]);m.splice.apply(m,s)}for(l=0,h=m.length;l<h;l++)for(n=m[l];n.n;){if(e){if(n.f){for(d=0,p=n.f.length;d<p;d++)if(n.f[d]==e){n.f.splice(d,1);break}!n.f.length&&delete n.f}for(i in n.n)if(n.n[r](i)&&n.n[i].f){var g=n.n[i].f;for(d=0,p=g.length;d<p;d++)if(g[d]==e){g.splice(d,1);break}!g.length&&delete n.n[i].f}}else{delete n.f;for(i in n.n)n.n[r](i)&&n.n[i].f&&delete n.n[i].f}n=n.n}},u.once=function(t,e){var n=function(){return u.unbind(t,n),e.apply(this,arguments)};return u.on(t,n)},u.version=i,u.toString=function(){return"You are running Eve "+i},"undefined"!=typeof module&&module.exports?module.exports=u:"undefined"!=typeof define?define("eve",[],function(){return u}):t.eve=u}(this),function(t,e){"function"==typeof define&&define.amd?define("Raphael",["eve"],function(n){return e(t,n)}):e(t,t.eve)}(this,function(t,e){function n(t){if(n.is(t,"function"))return _?t():e.on("raphael.DOMload",t);if(n.is(t,X))return n._engine.create[T](n,t.splice(0,3+n.is(t[0],W))).add(t);var i=Array.prototype.slice.call(arguments,0);if(n.is(i[i.length-1],"function")){var r=i.pop();return _?r.call(n._engine.create[T](n,i)):e.on("raphael.DOMload",function(){r.call(n._engine.create[T](n,i))})}return n._engine.create[T](n,arguments)}function i(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[D](n)&&(e[n]=i(t[n]));return e}function r(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}function o(t,e,n){function i(){var o=Array.prototype.slice.call(arguments,0),a=o.join("␀"),s=i.cache=i.cache||{},l=i.count=i.count||[];return s[D](a)?(r(l,a),n?n(s[a]):s[a]):(l.length>=1e3&&delete s[l.shift()],l.push(a),s[a]=t[T](e,o),n?n(s[a]):s[a])}return i}function a(){return this.hex}function s(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var o=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4==i?o[3]={x:+t[0],y:+t[1]}:r-2==i&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[r-2],y:+t[r-1]}:r-4==i?o[3]=o[2]:i||(o[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}function l(t,e,n,i,r){var o=-3*e+9*n-9*i+3*r,a=t*o+6*e-12*n+6*i;return t*a-3*e+3*n}function c(t,e,n,i,r,o,a,s,c){null==c&&(c=1),c=c>1?1:c<0?0:c;for(var u=c/2,h=12,d=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,m=0;m<h;m++){var g=u*d[m]+u,v=l(g,t,n,r,a),y=l(g,e,i,o,s),b=v*v+y*y;f+=p[m]*R.sqrt(b)}return u*f}function u(t,e,n,i,r,o,a,s,l){if(!(l<0||c(t,e,n,i,r,o,a,s)<l)){var u,h=1,d=h/2,p=h-d,f=.01;for(u=c(t,e,n,i,r,o,a,s,p);z(u-l)>f;)d/=2,p+=(u<l?1:-1)*d,u=c(t,e,n,i,r,o,a,s,p);return p}}function h(t,e,n,i,r,o,a,s){if(!(N(t,n)<q(r,a)||q(t,n)>N(r,a)||N(e,i)<q(o,s)||q(e,i)>N(o,s))){var l=(t*i-e*n)*(r-a)-(t-n)*(r*s-o*a),c=(t*i-e*n)*(o-s)-(e-i)*(r*s-o*a),u=(t-n)*(o-s)-(e-i)*(r-a);if(u){var h=l/u,d=c/u,p=+h.toFixed(2),f=+d.toFixed(2);if(!(p<+q(t,n).toFixed(2)||p>+N(t,n).toFixed(2)||p<+q(r,a).toFixed(2)||p>+N(r,a).toFixed(2)||f<+q(e,i).toFixed(2)||f>+N(e,i).toFixed(2)||f<+q(o,s).toFixed(2)||f>+N(o,s).toFixed(2)))return{x:h,y:d}}}}function d(t,e,i){var r=n.bezierBBox(t),o=n.bezierBBox(e);if(!n.isBBoxIntersect(r,o))return i?0:[];for(var a=c.apply(0,t),s=c.apply(0,e),l=N(~~(a/5),1),u=N(~~(s/5),1),d=[],p=[],f={},m=i?0:[],g=0;g<l+1;g++){var v=n.findDotsAtSegment.apply(n,t.concat(g/l));d.push({x:v.x,y:v.y,t:g/l})}for(g=0;g<u+1;g++)v=n.findDotsAtSegment.apply(n,e.concat(g/u)),p.push({x:v.x,y:v.y,t:g/u});for(g=0;g<l;g++)for(var y=0;y<u;y++){var b=d[g],_=d[g+1],x=p[y],w=p[y+1],k=z(_.x-b.x)<.001?"y":"x",C=z(w.x-x.x)<.001?"y":"x",D=h(b.x,b.y,_.x,_.y,x.x,x.y,w.x,w.y);if(D){if(f[D.x.toFixed(4)]==D.y.toFixed(4))continue;f[D.x.toFixed(4)]=D.y.toFixed(4);var S=b.t+z((D[k]-b[k])/(_[k]-b[k]))*(_.t-b.t),$=x.t+z((D[C]-x[C])/(w[C]-x[C]))*(w.t-x.t);S>=0&&S<=1.001&&$>=0&&$<=1.001&&(i?m++:m.push({x:D.x,y:D.y,t1:q(S,1),t2:q($,1)}))}}return m}function p(t,e,i){t=n._path2curve(t),e=n._path2curve(e);for(var r,o,a,s,l,c,u,h,p,f,m=i?0:[],g=0,v=t.length;g<v;g++){var y=t[g];if("M"==y[0])r=l=y[1],o=c=y[2];else{"C"==y[0]?(p=[r,o].concat(y.slice(1)),r=p[6],o=p[7]):(p=[r,o,r,o,l,c,l,c],r=l,o=c);for(var b=0,_=e.length;b<_;b++){var x=e[b];if("M"==x[0])a=u=x[1],s=h=x[2];else{"C"==x[0]?(f=[a,s].concat(x.slice(1)),a=f[6],s=f[7]):(f=[a,s,a,s,u,h,u,h],a=u,s=h);var w=d(p,f,i);if(i)m+=w;else{for(var k=0,C=w.length;k<C;k++)w[k].segment1=g,w[k].segment2=b,w[k].bez1=p,w[k].bez2=f;m=m.concat(w)}}}}}return m}function f(t,e,n,i,r,o){null!=t?(this.a=+t,this.b=+e,this.c=+n,this.d=+i,this.e=+r,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function m(){return this.x+L+this.y+L+this.width+" × "+this.height}function g(t,e,n,i,r,o){function a(t){return((h*t+u)*t+c)*t}function s(t,e){var n=l(t,e);return((f*n+p)*n+d)*n}function l(t,e){var n,i,r,o,s,l;for(r=t,l=0;l<8;l++){if(o=a(r)-t,z(o)<e)return r;if(s=(3*h*r+2*u)*r+c,z(s)<1e-6)break;r-=o/s}if(n=0,i=1,r=t,r<n)return n;if(r>i)return i;for(;n<i;){if(o=a(r),z(o-t)<e)return r;t>o?n=r:i=r,r=(i-n)/2+n}return r}var c=3*e,u=3*(i-e)-c,h=1-c-u,d=3*n,p=3*(r-n)-d,f=1-d-p;return s(t,1/(200*o))}function v(t,e){var n=[],i={};if(this.ms=e,this.times=1,t){for(var r in t)t[D](r)&&(i[Z(r)]=t[r],n.push(Z(r)));n.sort(ht)}this.anim=i,this.top=n[n.length-1],this.percents=n}function y(t,i,r,o,a,s){r=Z(r);var l,c,u,h,d,p,m=t.ms,v={},y={},b={};if(o)for(x=0,k=le.length;x<k;x++){var _=le[x];if(_.el.id==i.id&&_.anim==t){_.percent!=r?(le.splice(x,1),u=1):c=_,i.attr(_.totalOrigin);break}}else o=+y;for(var x=0,k=t.percents.length;x<k;x++){if(t.percents[x]==r||t.percents[x]>o*t.top){r=t.percents[x],d=t.percents[x-1]||0,m=m/t.top*(r-d),h=t.percents[x+1],l=t.anim[r];break}o&&i.attr(t.anim[t.percents[x]])}if(l){if(c)c.initstatus=o,c.start=new Date-c.ms*o;else{for(var C in l)if(l[D](C)&&(it[D](C)||i.paper.customAttributes[D](C)))switch(v[C]=i.attr(C),null==v[C]&&(v[C]=nt[C]),y[C]=l[C],it[C]){case W:b[C]=(y[C]-v[C])/m;break;case"colour":v[C]=n.getRGB(v[C]);var S=n.getRGB(y[C]);b[C]={r:(S.r-v[C].r)/m,g:(S.g-v[C].g)/m,b:(S.b-v[C].b)/m};break;case"path":var $=Mt(v[C],y[C]),E=$[1];for(v[C]=$[0],b[C]=[],x=0,k=v[C].length;x<k;x++){b[C][x]=[0];for(var T=1,A=v[C][x].length;T<A;T++)b[C][x][T]=(E[x][T]-v[C][x][T])/m}break;case"transform":var P=i._,L=qt(P[C],y[C]);if(L)for(v[C]=L.from,y[C]=L.to,b[C]=[],b[C].real=!0,x=0,k=v[C].length;x<k;x++)for(b[C][x]=[v[C][x][0]],T=1,A=v[C][x].length;T<A;T++)b[C][x][T]=(y[C][x][T]-v[C][x][T])/m;else{var M=i.matrix||new f,O={_:{transform:P.transform},getBBox:function(){return i.getBBox(1)}};v[C]=[M.a,M.b,M.c,M.d,M.e,M.f],Rt(O,y[C]),y[C]=O._.transform,b[C]=[(O.matrix.a-M.a)/m,(O.matrix.b-M.b)/m,(O.matrix.c-M.c)/m,(O.matrix.d-M.d)/m,(O.matrix.e-M.e)/m,(O.matrix.f-M.f)/m]}break;case"csv":var j=I(l[C])[F](w),R=I(v[C])[F](w);if("clip-rect"==C)for(v[C]=R,b[C]=[],x=R.length;x--;)b[C][x]=(j[x]-v[C][x])/m;y[C]=j;break;default:for(j=[][B](l[C]),R=[][B](v[C]),b[C]=[],x=i.paper.customAttributes[C].length;x--;)b[C][x]=((j[x]||0)-(R[x]||0))/m}var N=l.easing,q=n.easing_formulas[N];if(!q)if(q=I(N).match(J),q&&5==q.length){var z=q;q=function(t){return g(t,+z[1],+z[2],+z[3],+z[4],m)}}else q=pt;if(p=l.start||t.start||+new Date,_={anim:t,percent:r,timestamp:p,start:p+(t.del||0),status:0,initstatus:o||0,stop:!1,ms:m,easing:q,from:v,diff:b,to:y,el:i,callback:l.callback,prev:d,next:h,repeat:s||t.times,origin:i.attr(),totalOrigin:a},le.push(_),o&&!c&&!u&&(_.stop=!0,_.start=new Date-m*o,1==le.length))return ue();u&&(_.start=new Date-_.ms*o),1==le.length&&ce(ue)}e("raphael.anim.start."+i.id,i,t)}}function b(t){for(var e=0;e<le.length;e++)le[e].el.paper==t&&le.splice(e--,1)}n.version="2.1.0",n.eve=e;var _,x,w=/[, ]+/,k={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},C=/\{(\d+)\}/g,D="hasOwnProperty",S={doc:document,win:t},$={was:Object.prototype[D].call(S.win,"Raphael"),is:S.win.Raphael},E=function(){this.ca=this.customAttributes={}},T="apply",B="concat",A="ontouchstart"in S.win||S.win.DocumentTouch&&S.doc instanceof DocumentTouch,P="",L=" ",I=String,F="split",M="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[F](L),O={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},j=I.prototype.toLowerCase,R=Math,N=R.max,q=R.min,z=R.abs,H=R.pow,U=R.PI,W="number",Y="string",X="array",V=Object.prototype.toString,G=(n._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),K={NaN:1,Infinity:1,"-Infinity":1},J=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Q=R.round,Z=parseFloat,tt=parseInt,et=I.prototype.toUpperCase,nt=n._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},it=n._availableAnimAttrs={blur:W,"clip-rect":"csv",cx:W,cy:W,fill:"colour","fill-opacity":W,"font-size":W,height:W,opacity:W,path:"path",r:W,rx:W,ry:W,stroke:"colour","stroke-opacity":W,"stroke-width":W,transform:"transform",width:W,x:W,y:W},rt=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,ot={hs:1,rg:1},at=/,?([achlmqrstvxz]),?/gi,st=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,lt=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,ct=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,ut=(n._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ht=function(t,e){return Z(t)-Z(e)},dt=function(){},pt=function(t){return t},ft=n._rectPath=function(t,e,n,i,r){return r?[["M",t+r,e],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,i-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-i],["a",r,r,0,0,1,r,-r],["z"]]:[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]]},mt=function(t,e,n,i){return null==i&&(i=n),[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]]},gt=n._getPath={path:function(t){return t.attr("path")},circle:function(t){var e=t.attrs;return mt(e.cx,e.cy,e.r)},ellipse:function(t){var e=t.attrs;return mt(e.cx,e.cy,e.rx,e.ry)},rect:function(t){var e=t.attrs;return ft(e.x,e.y,e.width,e.height,e.r)},image:function(t){var e=t.attrs;return ft(e.x,e.y,e.width,e.height)},text:function(t){var e=t._getBBox();return ft(e.x,e.y,e.width,e.height)},set:function(t){var e=t._getBBox();return ft(e.x,e.y,e.width,e.height)}},vt=n.mapPath=function(t,e){if(!e)return t;var n,i,r,o,a,s,l;for(t=Mt(t),r=0,a=t.length;r<a;r++)for(l=t[r],o=1,s=l.length;o<s;o+=2)n=e.x(l[o],l[o+1]),i=e.y(l[o],l[o+1]),l[o]=n,l[o+1]=i;return t};if(n._g=S,n.type=S.win.SVGAngle||S.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==n.type){var yt,bt=S.doc.createElement("div");if(bt.innerHTML='<v:shape adj="1"/>',yt=bt.firstChild,yt.style.behavior="url(#default#VML)",!yt||"object"!=typeof yt.adj)return n.type=P;bt=null}n.svg=!(n.vml="VML"==n.type),n._Paper=E,n.fn=x=E.prototype=n.prototype,n._id=0,n._oid=0,n.is=function(t,e){return e=j.call(e),"finite"==e?!K[D](+t):"array"==e?t instanceof Array:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||"array"==e&&Array.isArray&&Array.isArray(t)||V.call(t).slice(8,-1).toLowerCase()==e},n.angle=function(t,e,i,r,o,a){if(null==o){var s=t-i,l=e-r;return s||l?(180+180*R.atan2(-l,-s)/U+360)%360:0}return n.angle(t,e,o,a)-n.angle(i,r,o,a)},n.rad=function(t){return t%360*U/180},n.deg=function(t){return 180*t/U%360},n.snapTo=function(t,e,i){if(i=n.is(i,"finite")?i:10,n.is(t,X)){for(var r=t.length;r--;)if(z(t[r]-e)<=i)return t[r]}else{t=+t;var o=e%t;if(o<i)return e-o;if(o>t-i)return e-o+t}return e};n.createUUID=function(t,e){
return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(t,e).toUpperCase()}}(/[xy]/g,function(t){var e=16*R.random()|0,n="x"==t?e:3&e|8;return n.toString(16)});n.setWindow=function(t){e("raphael.setWindow",n,S.win,t),S.win=t,S.doc=S.win.document,n._engine.initWin&&n._engine.initWin(S.win)};var _t=function(t){if(n.vml){var e,i=/^\s+|\s+$/g;try{var r=new ActiveXObject("htmlfile");r.write("<body>"),r.close(),e=r.body}catch(t){e=createPopup().document.body}var a=e.createTextRange();_t=o(function(t){try{e.style.color=I(t).replace(i,P);var n=a.queryCommandValue("ForeColor");return n=(255&n)<<16|65280&n|(16711680&n)>>>16,"#"+("000000"+n.toString(16)).slice(-6)}catch(t){return"none"}})}else{var s=S.doc.createElement("i");s.title="Raphaël Colour Picker",s.style.display="none",S.doc.body.appendChild(s),_t=o(function(t){return s.style.color=t,S.doc.defaultView.getComputedStyle(s,P).getPropertyValue("color")})}return _t(t)},xt=function(){return"hsb("+[this.h,this.s,this.b]+")"},wt=function(){return"hsl("+[this.h,this.s,this.l]+")"},kt=function(){return this.hex},Ct=function(t,e,i){if(null==e&&n.is(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(i=t.b,e=t.g,t=t.r),null==e&&n.is(t,Y)){var r=n.getRGB(t);t=r.r,e=r.g,i=r.b}return(t>1||e>1||i>1)&&(t/=255,e/=255,i/=255),[t,e,i]},Dt=function(t,e,i,r){t*=255,e*=255,i*=255;var o={r:t,g:e,b:i,hex:n.rgb(t,e,i),toString:kt};return n.is(r,"finite")&&(o.opacity=r),o};n.color=function(t){var e;return n.is(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=n.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):n.is(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=n.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.hex=e.hex):(n.is(t,"string")&&(t=n.getRGB(t)),n.is(t,"object")&&"r"in t&&"g"in t&&"b"in t?(e=n.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=n.rgb2hsb(t),t.v=e.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1)),t.toString=kt,t},n.hsb2rgb=function(t,e,n,i){this.is(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(n=t.b,e=t.s,t=t.h,i=t.o),t*=360;var r,o,a,s,l;return t=t%360/60,l=n*e,s=l*(1-z(t%2-1)),r=o=a=n-l,t=~~t,r+=[l,s,0,0,s,l][t],o+=[s,l,l,s,0,0][t],a+=[0,0,s,l,l,s][t],Dt(r,o,a,i)},n.hsl2rgb=function(t,e,n,i){this.is(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(n=t.l,e=t.s,t=t.h),(t>1||e>1||n>1)&&(t/=360,e/=100,n/=100),t*=360;var r,o,a,s,l;return t=t%360/60,l=2*e*(n<.5?n:1-n),s=l*(1-z(t%2-1)),r=o=a=n-l/2,t=~~t,r+=[l,s,0,0,s,l][t],o+=[s,l,l,s,0,0][t],a+=[0,0,s,l,l,s][t],Dt(r,o,a,i)},n.rgb2hsb=function(t,e,n){n=Ct(t,e,n),t=n[0],e=n[1],n=n[2];var i,r,o,a;return o=N(t,e,n),a=o-q(t,e,n),i=0==a?null:o==t?(e-n)/a:o==e?(n-t)/a+2:(t-e)/a+4,i=(i+360)%6*60/360,r=0==a?0:a/o,{h:i,s:r,b:o,toString:xt}},n.rgb2hsl=function(t,e,n){n=Ct(t,e,n),t=n[0],e=n[1],n=n[2];var i,r,o,a,s,l;return a=N(t,e,n),s=q(t,e,n),l=a-s,i=0==l?null:a==t?(e-n)/l:a==e?(n-t)/l+2:(t-e)/l+4,i=(i+360)%6*60/360,o=(a+s)/2,r=0==l?0:o<.5?l/(2*o):l/(2-2*o),{h:i,s:r,l:o,toString:wt}},n._path2string=function(){return this.join(",").replace(at,"$1")};n._preload=function(t,e){var n=S.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){e.call(this),this.onload=null,S.doc.body.removeChild(this)},n.onerror=function(){S.doc.body.removeChild(this)},S.doc.body.appendChild(n),n.src=t};n.getRGB=o(function(t){if(!t||(t=I(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:a};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:a};!(ot[D](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=_t(t));var e,i,r,o,s,l,c=t.match(G);return c?(c[2]&&(r=tt(c[2].substring(5),16),i=tt(c[2].substring(3,5),16),e=tt(c[2].substring(1,3),16)),c[3]&&(r=tt((s=c[3].charAt(3))+s,16),i=tt((s=c[3].charAt(2))+s,16),e=tt((s=c[3].charAt(1))+s,16)),c[4]&&(l=c[4][F](rt),e=Z(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),i=Z(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),r=Z(l[2]),"%"==l[2].slice(-1)&&(r*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(o=Z(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100)),c[5]?(l=c[5][F](rt),e=Z(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),i=Z(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),r=Z(l[2]),"%"==l[2].slice(-1)&&(r*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(e/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(o=Z(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),n.hsb2rgb(e,i,r,o)):c[6]?(l=c[6][F](rt),e=Z(l[0]),"%"==l[0].slice(-1)&&(e*=2.55),i=Z(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),r=Z(l[2]),"%"==l[2].slice(-1)&&(r*=2.55),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(e/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(o=Z(l[3])),l[3]&&"%"==l[3].slice(-1)&&(o/=100),n.hsl2rgb(e,i,r,o)):(c={r:e,g:i,b:r,toString:a},c.hex="#"+(16777216|r|i<<8|e<<16).toString(16).slice(1),n.is(o,"finite")&&(c.opacity=o),c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:a}},n),n.hsb=o(function(t,e,i){return n.hsb2rgb(t,e,i).hex}),n.hsl=o(function(t,e,i){return n.hsl2rgb(t,e,i).hex}),n.rgb=o(function(t,e,n){return"#"+(16777216|n|e<<8|t<<16).toString(16).slice(1)}),n.getColor=function(t){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:t||.75},n=this.hsb2rgb(e.h,e.s,e.b);return e.h+=.075,e.h>1&&(e.h=0,e.s-=.2,e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})),n.hex},n.getColor.reset=function(){delete this.start},n.parsePathString=function(t){if(!t)return null;var e=St(t);if(e.arr)return Et(e.arr);var i={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},r=[];return n.is(t,X)&&n.is(t[0],X)&&(r=Et(t)),r.length||I(t).replace(st,function(t,e,n){var o=[],a=e.toLowerCase();if(n.replace(ct,function(t,e){e&&o.push(+e)}),"m"==a&&o.length>2&&(r.push([e][B](o.splice(0,2))),a="l",e="m"==e?"l":"L"),"r"==a)r.push([e][B](o));else for(;o.length>=i[a]&&(r.push([e][B](o.splice(0,i[a]))),i[a]););}),r.toString=n._path2string,e.arr=Et(r),r},n.parseTransformString=o(function(t){if(!t)return null;var e=[];return n.is(t,X)&&n.is(t[0],X)&&(e=Et(t)),e.length||I(t).replace(lt,function(t,n,i){var r=[];j.call(n);i.replace(ct,function(t,e){e&&r.push(+e)}),e.push([n][B](r))}),e.toString=n._path2string,e});var St=function(t){var e=St.ps=St.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var n in e)e[D](n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])}),e[t]};n.findDotsAtSegment=function(t,e,n,i,r,o,a,s,l){var c=1-l,u=H(c,3),h=H(c,2),d=l*l,p=d*l,f=u*t+3*h*l*n+3*c*l*l*r+p*a,m=u*e+3*h*l*i+3*c*l*l*o+p*s,g=t+2*l*(n-t)+d*(r-2*n+t),v=e+2*l*(i-e)+d*(o-2*i+e),y=n+2*l*(r-n)+d*(a-2*r+n),b=i+2*l*(o-i)+d*(s-2*o+i),_=c*t+l*n,x=c*e+l*i,w=c*r+l*a,k=c*o+l*s,C=90-180*R.atan2(g-y,v-b)/U;return(g>y||v<b)&&(C+=180),{x:f,y:m,m:{x:g,y:v},n:{x:y,y:b},start:{x:_,y:x},end:{x:w,y:k},alpha:C}},n.bezierBBox=function(t,e,i,r,o,a,s,l){n.is(t,"array")||(t=[t,e,i,r,o,a,s,l]);var c=Ft.apply(null,t);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}},n.isPointInsideBBox=function(t,e,n){return e>=t.x&&e<=t.x2&&n>=t.y&&n<=t.y2},n.isBBoxIntersect=function(t,e){var i=n.isPointInsideBBox;return i(e,t.x,t.y)||i(e,t.x2,t.y)||i(e,t.x,t.y2)||i(e,t.x2,t.y2)||i(t,e.x,e.y)||i(t,e.x2,e.y)||i(t,e.x,e.y2)||i(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)},n.pathIntersection=function(t,e){return p(t,e)},n.pathIntersectionNumber=function(t,e){return p(t,e,1)},n.isPointInsidePath=function(t,e,i){var r=n.pathBBox(t);return n.isPointInsideBBox(r,e,i)&&p(t,[["M",e,i],["H",r.x2+10]],1)%2==1},n._removedFactory=function(t){return function(){e("raphael.log",null,"Raphaël: you are calling to method “"+t+"” of removed object",t)}};var $t=n.pathBBox=function(t){var e=St(t);if(e.bbox)return i(e.bbox);if(!t)return{x:0,y:0,width:0,height:0,x2:0,y2:0};t=Mt(t);for(var n,r=0,o=0,a=[],s=[],l=0,c=t.length;l<c;l++)if(n=t[l],"M"==n[0])r=n[1],o=n[2],a.push(r),s.push(o);else{var u=Ft(r,o,n[1],n[2],n[3],n[4],n[5],n[6]);a=a[B](u.min.x,u.max.x),s=s[B](u.min.y,u.max.y),r=n[5],o=n[6]}var h=q[T](0,a),d=q[T](0,s),p=N[T](0,a),f=N[T](0,s),m=p-h,g=f-d,v={x:h,y:d,x2:p,y2:f,width:m,height:g,cx:h+m/2,cy:d+g/2};return e.bbox=i(v),v},Et=function(t){var e=i(t);return e.toString=n._path2string,e},Tt=n._pathToRelative=function(t){var e=St(t);if(e.rel)return Et(e.rel);n.is(t,X)&&n.is(t&&t[0],X)||(t=n.parsePathString(t));var i=[],r=0,o=0,a=0,s=0,l=0;"M"==t[0][0]&&(r=t[0][1],o=t[0][2],a=r,s=o,l++,i.push(["M",r,o]));for(var c=l,u=t.length;c<u;c++){var h=i[c]=[],d=t[c];if(d[0]!=j.call(d[0]))switch(h[0]=j.call(d[0]),h[0]){case"a":h[1]=d[1],h[2]=d[2],h[3]=d[3],h[4]=d[4],h[5]=d[5],h[6]=+(d[6]-r).toFixed(3),h[7]=+(d[7]-o).toFixed(3);break;case"v":h[1]=+(d[1]-o).toFixed(3);break;case"m":a=d[1],s=d[2];default:for(var p=1,f=d.length;p<f;p++)h[p]=+(d[p]-(p%2?r:o)).toFixed(3)}else{h=i[c]=[],"m"==d[0]&&(a=d[1]+r,s=d[2]+o);for(var m=0,g=d.length;m<g;m++)i[c][m]=d[m]}var v=i[c].length;switch(i[c][0]){case"z":r=a,o=s;break;case"h":r+=+i[c][v-1];break;case"v":o+=+i[c][v-1];break;default:r+=+i[c][v-2],o+=+i[c][v-1]}}return i.toString=n._path2string,e.rel=Et(i),i},Bt=n._pathToAbsolute=function(t){var e=St(t);if(e.abs)return Et(e.abs);if(n.is(t,X)&&n.is(t&&t[0],X)||(t=n.parsePathString(t)),!t||!t.length)return[["M",0,0]];var i=[],r=0,o=0,a=0,l=0,c=0;"M"==t[0][0]&&(r=+t[0][1],o=+t[0][2],a=r,l=o,c++,i[0]=["M",r,o]);for(var u,h,d=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),p=c,f=t.length;p<f;p++){if(i.push(u=[]),h=t[p],h[0]!=et.call(h[0]))switch(u[0]=et.call(h[0]),u[0]){case"A":u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=+(h[6]+r),u[7]=+(h[7]+o);break;case"V":u[1]=+h[1]+o;break;case"H":u[1]=+h[1]+r;break;case"R":for(var m=[r,o][B](h.slice(1)),g=2,v=m.length;g<v;g++)m[g]=+m[g]+r,m[++g]=+m[g]+o;i.pop(),i=i[B](s(m,d));break;case"M":a=+h[1]+r,l=+h[2]+o;default:for(g=1,v=h.length;g<v;g++)u[g]=+h[g]+(g%2?r:o)}else if("R"==h[0])m=[r,o][B](h.slice(1)),i.pop(),i=i[B](s(m,d)),u=["R"][B](h.slice(-2));else for(var y=0,b=h.length;y<b;y++)u[y]=h[y];switch(u[0]){case"Z":r=a,o=l;break;case"H":r=u[1];break;case"V":o=u[1];break;case"M":a=u[u.length-2],l=u[u.length-1];default:r=u[u.length-2],o=u[u.length-1]}}return i.toString=n._path2string,e.abs=Et(i),i},At=function(t,e,n,i){return[t,e,n,i,n,i]},Pt=function(t,e,n,i,r,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*i,a*r+s*n,a*o+s*i,r,o]},Lt=function(t,e,n,i,r,a,s,l,c,u){var h,d=120*U/180,p=U/180*(+r||0),f=[],m=o(function(t,e,n){var i=t*R.cos(n)-e*R.sin(n),r=t*R.sin(n)+e*R.cos(n);return{x:i,y:r}});if(u)C=u[0],D=u[1],w=u[2],k=u[3];else{h=m(t,e,-p),t=h.x,e=h.y,h=m(l,c,-p),l=h.x,c=h.y;var g=(R.cos(U/180*r),R.sin(U/180*r),(t-l)/2),v=(e-c)/2,y=g*g/(n*n)+v*v/(i*i);y>1&&(y=R.sqrt(y),n*=y,i*=y);var b=n*n,_=i*i,x=(a==s?-1:1)*R.sqrt(z((b*_-b*v*v-_*g*g)/(b*v*v+_*g*g))),w=x*n*v/i+(t+l)/2,k=x*-i*g/n+(e+c)/2,C=R.asin(((e-k)/i).toFixed(9)),D=R.asin(((c-k)/i).toFixed(9));C=t<w?U-C:C,D=l<w?U-D:D,C<0&&(C=2*U+C),D<0&&(D=2*U+D),s&&C>D&&(C-=2*U),!s&&D>C&&(D-=2*U)}var S=D-C;if(z(S)>d){var $=D,E=l,T=c;D=C+d*(s&&D>C?1:-1),l=w+n*R.cos(D),c=k+i*R.sin(D),f=Lt(l,c,n,i,r,0,s,E,T,[D,$,w,k])}S=D-C;var A=R.cos(C),P=R.sin(C),L=R.cos(D),I=R.sin(D),M=R.tan(S/4),O=4/3*n*M,j=4/3*i*M,N=[t,e],q=[t+O*P,e-j*A],H=[l+O*I,c-j*L],W=[l,c];if(q[0]=2*N[0]-q[0],q[1]=2*N[1]-q[1],u)return[q,H,W][B](f);f=[q,H,W][B](f).join()[F](",");for(var Y=[],X=0,V=f.length;X<V;X++)Y[X]=X%2?m(f[X-1],f[X],p).y:m(f[X],f[X+1],p).x;return Y},It=function(t,e,n,i,r,o,a,s,l){var c=1-l;return{x:H(c,3)*t+3*H(c,2)*l*n+3*c*l*l*r+H(l,3)*a,y:H(c,3)*e+3*H(c,2)*l*i+3*c*l*l*o+H(l,3)*s}},Ft=o(function(t,e,n,i,r,o,a,s){var l,c=r-2*n+t-(a-2*r+n),u=2*(n-t)-2*(r-n),h=t-n,d=(-u+R.sqrt(u*u-4*c*h))/2/c,p=(-u-R.sqrt(u*u-4*c*h))/2/c,f=[e,s],m=[t,a];return z(d)>"1e12"&&(d=.5),z(p)>"1e12"&&(p=.5),d>0&&d<1&&(l=It(t,e,n,i,r,o,a,s,d),m.push(l.x),f.push(l.y)),p>0&&p<1&&(l=It(t,e,n,i,r,o,a,s,p),m.push(l.x),f.push(l.y)),c=o-2*i+e-(s-2*o+i),u=2*(i-e)-2*(o-i),h=e-i,d=(-u+R.sqrt(u*u-4*c*h))/2/c,p=(-u-R.sqrt(u*u-4*c*h))/2/c,z(d)>"1e12"&&(d=.5),z(p)>"1e12"&&(p=.5),d>0&&d<1&&(l=It(t,e,n,i,r,o,a,s,d),m.push(l.x),f.push(l.y)),p>0&&p<1&&(l=It(t,e,n,i,r,o,a,s,p),m.push(l.x),f.push(l.y)),{min:{x:q[T](0,m),y:q[T](0,f)},max:{x:N[T](0,m),y:N[T](0,f)}}}),Mt=n._path2curve=o(function(t,e){var n=!e&&St(t);if(!e&&n.curve)return Et(n.curve);for(var i=Bt(t),r=e&&Bt(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=(function(t,e,n){var i,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"][B](Lt[T](0,[e.x,e.y][B](t.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*e.x-e.bx,r=2*e.y-e.by):(i=e.x,r=e.y),t=["C",i,r][B](t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"][B](Pt(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"][B](Pt(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"][B](At(e.x,e.y,t[1],t[2]));break;case"H":t=["C"][B](At(e.x,e.y,t[1],e.y));break;case"V":t=["C"][B](At(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"][B](At(e.x,e.y,e.X,e.Y))}return t}),l=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)t.splice(e++,0,["C"][B](n.splice(0,6)));t.splice(e,1),h=N(i.length,r&&r.length||0)}},c=function(t,e,n,o,a){t&&e&&"M"==t[a][0]&&"M"!=e[a][0]&&(e.splice(a,0,["M",o.x,o.y]),n.bx=0,n.by=0,n.x=t[a][1],n.y=t[a][2],h=N(i.length,r&&r.length||0))},u=0,h=N(i.length,r&&r.length||0);u<h;u++){i[u]=s(i[u],o),l(i,u),r&&(r[u]=s(r[u],a)),r&&l(r,u),c(i,r,o,a,u),c(r,i,a,o,u);var d=i[u],p=r&&r[u],f=d.length,m=r&&p.length;o.x=d[f-2],o.y=d[f-1],o.bx=Z(d[f-4])||o.x,o.by=Z(d[f-3])||o.y,a.bx=r&&(Z(p[m-4])||a.x),a.by=r&&(Z(p[m-3])||a.y),a.x=r&&p[m-2],a.y=r&&p[m-1]}return r||(n.curve=Et(i)),r?[i,r]:i},null,Et),Ot=(n._parseDots=o(function(t){for(var e=[],i=0,r=t.length;i<r;i++){var o={},a=t[i].match(/^([^:]*):?([\d\.]*)/);if(o.color=n.getRGB(a[1]),o.color.error)return null;o.color=o.color.hex,a[2]&&(o.offset=a[2]+"%"),e.push(o)}for(i=1,r=e.length-1;i<r;i++)if(!e[i].offset){for(var s=Z(e[i-1].offset||0),l=0,c=i+1;c<r;c++)if(e[c].offset){l=e[c].offset;break}l||(l=100,c=r),l=Z(l);for(var u=(l-s)/(c-i+1);i<c;i++)s+=u,e[i].offset=s+"%"}return e}),n._tear=function(t,e){t==e.top&&(e.top=t.prev),t==e.bottom&&(e.bottom=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next)}),jt=(n._tofront=function(t,e){e.top!==t&&(Ot(t,e),t.next=null,t.prev=e.top,e.top.next=t,e.top=t)},n._toback=function(t,e){e.bottom!==t&&(Ot(t,e),t.next=e.bottom,t.prev=null,e.bottom.prev=t,e.bottom=t)},n._insertafter=function(t,e,n){Ot(t,n),e==n.top&&(n.top=t),e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t},n._insertbefore=function(t,e,n){Ot(t,n),e==n.bottom&&(n.bottom=t),e.prev&&(e.prev.next=t),t.prev=e.prev,e.prev=t,t.next=e},n.toMatrix=function(t,e){var n=$t(t),i={_:{transform:P},getBBox:function(){return n}};return Rt(i,e),i.matrix}),Rt=(n.transformPath=function(t,e){return vt(t,jt(t,e))},n._extractTransform=function(t,e){if(null==e)return t._.transform;e=I(e).replace(/\.{3}|\u2026/g,t._.transform||P);var i=n.parseTransformString(e),r=0,o=0,a=0,s=1,l=1,c=t._,u=new f;if(c.transform=i||[],i)for(var h=0,d=i.length;h<d;h++){var p,m,g,v,y,b=i[h],_=b.length,x=I(b[0]).toLowerCase(),w=b[0]!=x,k=w?u.invert():0;"t"==x&&3==_?w?(p=k.x(0,0),m=k.y(0,0),g=k.x(b[1],b[2]),v=k.y(b[1],b[2]),u.translate(g-p,v-m)):u.translate(b[1],b[2]):"r"==x?2==_?(y=y||t.getBBox(1),u.rotate(b[1],y.x+y.width/2,y.y+y.height/2),r+=b[1]):4==_&&(w?(g=k.x(b[2],b[3]),v=k.y(b[2],b[3]),u.rotate(b[1],g,v)):u.rotate(b[1],b[2],b[3]),r+=b[1]):"s"==x?2==_||3==_?(y=y||t.getBBox(1),u.scale(b[1],b[_-1],y.x+y.width/2,y.y+y.height/2),s*=b[1],l*=b[_-1]):5==_&&(w?(g=k.x(b[3],b[4]),v=k.y(b[3],b[4]),u.scale(b[1],b[2],g,v)):u.scale(b[1],b[2],b[3],b[4]),s*=b[1],l*=b[2]):"m"==x&&7==_&&u.add(b[1],b[2],b[3],b[4],b[5],b[6]),c.dirtyT=1,t.matrix=u}t.matrix=u,c.sx=s,c.sy=l,c.deg=r,c.dx=o=u.e,c.dy=a=u.f,1==s&&1==l&&!r&&c.bbox?(c.bbox.x+=+o,c.bbox.y+=+a):c.dirtyT=1}),Nt=function(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}},qt=n._equaliseTransform=function(t,e){e=I(e).replace(/\.{3}|\u2026/g,t),t=n.parseTransformString(t)||[],e=n.parseTransformString(e)||[];for(var i,r,o,a,s=N(t.length,e.length),l=[],c=[],u=0;u<s;u++){if(o=t[u]||Nt(e[u]),a=e[u]||Nt(o),o[0]!=a[0]||"r"==o[0].toLowerCase()&&(o[2]!=a[2]||o[3]!=a[3])||"s"==o[0].toLowerCase()&&(o[3]!=a[3]||o[4]!=a[4]))return;for(l[u]=[],c[u]=[],i=0,r=N(o.length,a.length);i<r;i++)i in o&&(l[u][i]=o[i]),i in a&&(c[u][i]=a[i])}return{from:l,to:c}};n._getContainer=function(t,e,i,r){var o;if(o=null!=r||n.is(t,"object")?t:S.doc.getElementById(t),null!=o)return o.tagName?null==e?{container:o,width:o.style.pixelWidth||o.offsetWidth,height:o.style.pixelHeight||o.offsetHeight}:{container:o,width:e,height:i}:{container:1,x:t,y:e,width:i,height:r}},n.pathToRelative=Tt,n._engine={},n.path2curve=Mt,n.matrix=function(t,e,n,i,r,o){return new f(t,e,n,i,r,o)},function(t){function e(t){return t[0]*t[0]+t[1]*t[1]}function i(t){var n=R.sqrt(e(t));t[0]&&(t[0]/=n),t[1]&&(t[1]/=n)}t.add=function(t,e,n,i,r,o){var a,s,l,c,u=[[],[],[]],h=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],d=[[t,n,r],[e,i,o],[0,0,1]];for(t&&t instanceof f&&(d=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),a=0;a<3;a++)for(s=0;s<3;s++){for(c=0,l=0;l<3;l++)c+=h[a][l]*d[l][s];u[a][s]=c}this.a=u[0][0],this.b=u[1][0],this.c=u[0][1],this.d=u[1][1],this.e=u[0][2],this.f=u[1][2]},t.invert=function(){var t=this,e=t.a*t.d-t.b*t.c;return new f(t.d/e,-t.b/e,-t.c/e,t.a/e,(t.c*t.f-t.d*t.e)/e,(t.b*t.e-t.a*t.f)/e)},t.clone=function(){return new f(this.a,this.b,this.c,this.d,this.e,this.f)},t.translate=function(t,e){this.add(1,0,0,1,t,e)},t.scale=function(t,e,n,i){null==e&&(e=t),(n||i)&&this.add(1,0,0,1,n,i),this.add(t,0,0,e,0,0),(n||i)&&this.add(1,0,0,1,-n,-i)},t.rotate=function(t,e,i){t=n.rad(t),e=e||0,i=i||0;var r=+R.cos(t).toFixed(9),o=+R.sin(t).toFixed(9);this.add(r,o,-o,r,e,i),this.add(1,0,0,1,-e,-i)},t.x=function(t,e){return t*this.a+e*this.c+this.e},t.y=function(t,e){return t*this.b+e*this.d+this.f},t.get=function(t){return+this[I.fromCharCode(97+t)].toFixed(4)},t.toString=function(){return n.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},t.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},t.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},t.split=function(){var t={};t.dx=this.e,t.dy=this.f;var r=[[this.a,this.c],[this.b,this.d]];t.scalex=R.sqrt(e(r[0])),i(r[0]),t.shear=r[0][0]*r[1][0]+r[0][1]*r[1][1],r[1]=[r[1][0]-r[0][0]*t.shear,r[1][1]-r[0][1]*t.shear],t.scaley=R.sqrt(e(r[1])),i(r[1]),t.shear/=t.scaley;var o=-r[0][1],a=r[1][1];return a<0?(t.rotate=n.deg(R.acos(a)),o<0&&(t.rotate=360-t.rotate)):t.rotate=n.deg(R.asin(o)),t.isSimple=!(+t.shear.toFixed(9)||t.scalex.toFixed(9)!=t.scaley.toFixed(9)&&t.rotate),t.isSuperSimple=!+t.shear.toFixed(9)&&t.scalex.toFixed(9)==t.scaley.toFixed(9)&&!t.rotate,t.noRotation=!+t.shear.toFixed(9)&&!t.rotate,t},t.toTransformString=function(t){var e=t||this[F]();return e.isSimple?(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[e.dx,e.dy]:P)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:P)+(e.rotate?"r"+[e.rotate,0,0]:P)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(f.prototype);var zt=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(zt&&zt[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&zt&&zt[1]<8?x.safari=function(){var t=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){t.remove()})}:x.safari=dt;for(var Ht=function(){this.returnValue=!1},Ut=function(){return this.originalEvent.preventDefault()},Wt=function(){this.cancelBubble=!0},Yt=function(){return this.originalEvent.stopPropagation()},Xt=function(t){var e=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,n=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft;return{x:t.clientX+n,y:t.clientY+e}},Vt=function(){return S.doc.addEventListener?function(t,e,n,i){var r=function(t){var e=Xt(t);return n.call(i,t,e.x,e.y)};if(t.addEventListener(e,r,!1),A&&O[e]){var o=function(e){for(var r=Xt(e),o=e,a=0,s=e.targetTouches&&e.targetTouches.length;a<s;a++)if(e.targetTouches[a].target==t){e=e.targetTouches[a],e.originalEvent=o,e.preventDefault=Ut,e.stopPropagation=Yt;break}return n.call(i,e,r.x,r.y)};t.addEventListener(O[e],o,!1)}return function(){return t.removeEventListener(e,r,!1),A&&O[e]&&t.removeEventListener(O[e],r,!1),!0}}:S.doc.attachEvent?function(t,e,n,i){var r=function(t){t=t||S.win.event;var e=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,r=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft,o=t.clientX+r,a=t.clientY+e;return t.preventDefault=t.preventDefault||Ht,t.stopPropagation=t.stopPropagation||Wt,n.call(i,t,o,a)};t.attachEvent("on"+e,r);var o=function(){return t.detachEvent("on"+e,r),!0};return o}:void 0}(),Gt=[],Kt=function(t){for(var n,i=t.clientX,r=t.clientY,o=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,a=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft,s=Gt.length;s--;){if(n=Gt[s],A&&t.touches){for(var l,c=t.touches.length;c--;)if(l=t.touches[c],l.identifier==n.el._drag.id){i=l.clientX,r=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var u,h=n.el.node,d=h.nextSibling,p=h.parentNode,f=h.style.display;S.win.opera&&p.removeChild(h),h.style.display="none",u=n.el.paper.getElementByPoint(i,r),h.style.display=f,S.win.opera&&(d?p.insertBefore(h,d):p.appendChild(h)),u&&e("raphael.drag.over."+n.el.id,n.el,u),i+=a,r+=o,e("raphael.drag.move."+n.el.id,n.move_scope||n.el,i-n.el._drag.x,r-n.el._drag.y,i,r,t)}},Jt=function(t){n.unmousemove(Kt).unmouseup(Jt);for(var i,r=Gt.length;r--;)i=Gt[r],i.el._drag={},e("raphael.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,t);Gt=[]},Qt=n.el={},Zt=M.length;Zt--;)!function(t){n[t]=Qt[t]=function(e,i){return n.is(e,"function")&&(this.events=this.events||[],this.events.push({name:t,f:e,unbind:Vt(this.shape||this.node||S.doc,t,e,i||this)})),this},n["un"+t]=Qt["un"+t]=function(e){for(var i=this.events||[],r=i.length;r--;)i[r].name!=t||!n.is(e,"undefined")&&i[r].f!=e||(i[r].unbind(),i.splice(r,1),!i.length&&delete this.events);return this}}(M[Zt]);Qt.data=function(t,i){var r=ut[this.id]=ut[this.id]||{};if(0==arguments.length)return r;if(1==arguments.length){if(n.is(t,"object")){for(var o in t)t[D](o)&&this.data(o,t[o]);return this}return e("raphael.data.get."+this.id,this,r[t],t),r[t]}return r[t]=i,e("raphael.data.set."+this.id,this,i,t),this},Qt.removeData=function(t){return null==t?ut[this.id]={}:ut[this.id]&&delete ut[this.id][t],this},Qt.getData=function(){return i(ut[this.id]||{})},Qt.hover=function(t,e,n,i){return this.mouseover(t,n).mouseout(e,i||n)},Qt.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var te=[];Qt.drag=function(t,i,r,o,a,s){function l(l){(l.originalEvent||l).preventDefault();var c=l.clientX,u=l.clientY,h=S.doc.documentElement.scrollTop||S.doc.body.scrollTop,d=S.doc.documentElement.scrollLeft||S.doc.body.scrollLeft;if(this._drag.id=l.identifier,A&&l.touches)for(var p,f=l.touches.length;f--;)if(p=l.touches[f],this._drag.id=p.identifier,p.identifier==this._drag.id){c=p.clientX,u=p.clientY;break}this._drag.x=c+d,this._drag.y=u+h,!Gt.length&&n.mousemove(Kt).mouseup(Jt),Gt.push({el:this,move_scope:o,start_scope:a,end_scope:s}),i&&e.on("raphael.drag.start."+this.id,i),t&&e.on("raphael.drag.move."+this.id,t),r&&e.on("raphael.drag.end."+this.id,r),e("raphael.drag.start."+this.id,a||o||this,l.clientX+d,l.clientY+h,l)}return this._drag={},te.push({el:this,start:l}),this.mousedown(l),this},Qt.onDragOver=function(t){t?e.on("raphael.drag.over."+this.id,t):e.unbind("raphael.drag.over."+this.id)},Qt.undrag=function(){for(var t=te.length;t--;)te[t].el==this&&(this.unmousedown(te[t].start),te.splice(t,1),e.unbind("raphael.drag.*."+this.id));!te.length&&n.unmousemove(Kt).unmouseup(Jt),Gt=[]},x.circle=function(t,e,i){var r=n._engine.circle(this,t||0,e||0,i||0);return this.__set__&&this.__set__.push(r),r},x.rect=function(t,e,i,r,o){var a=n._engine.rect(this,t||0,e||0,i||0,r||0,o||0);return this.__set__&&this.__set__.push(a),a},x.ellipse=function(t,e,i,r){var o=n._engine.ellipse(this,t||0,e||0,i||0,r||0);return this.__set__&&this.__set__.push(o),o},x.path=function(t){t&&!n.is(t,Y)&&!n.is(t[0],X)&&(t+=P);var e=n._engine.path(n.format[T](n,arguments),this);return this.__set__&&this.__set__.push(e),e},x.image=function(t,e,i,r,o){var a=n._engine.image(this,t||"about:blank",e||0,i||0,r||0,o||0);return this.__set__&&this.__set__.push(a),a},x.text=function(t,e,i){var r=n._engine.text(this,t||0,e||0,I(i));return this.__set__&&this.__set__.push(r),r},x.set=function(t){!n.is(t,"array")&&(t=Array.prototype.splice.call(arguments,0,arguments.length));var e=new de(t);return this.__set__&&this.__set__.push(e),e.paper=this,e.type="set",e},x.setStart=function(t){this.__set__=t||this.set()},x.setFinish=function(t){var e=this.__set__;return delete this.__set__,e},x.setSize=function(t,e){return n._engine.setSize.call(this,t,e)},x.setViewBox=function(t,e,i,r,o){return n._engine.setViewBox.call(this,t,e,i,r,o)},x.top=x.bottom=null,x.raphael=n;var ee=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,i=n.body,r=n.documentElement,o=r.clientTop||i.clientTop||0,a=r.clientLeft||i.clientLeft||0,s=e.top+(S.win.pageYOffset||r.scrollTop||i.scrollTop)-o,l=e.left+(S.win.pageXOffset||r.scrollLeft||i.scrollLeft)-a;return{y:s,x:l}};x.getElementByPoint=function(t,e){var n=this,i=n.canvas,r=S.doc.elementFromPoint(t,e);if(S.win.opera&&"svg"==r.tagName){var o=ee(i),a=i.createSVGRect();a.x=t-o.x,a.y=e-o.y,a.width=a.height=1;var s=i.getIntersectionList(a,null);s.length&&(r=s[s.length-1])}if(!r)return null;for(;r.parentNode&&r!=i.parentNode&&!r.raphael;)r=r.parentNode;return r==n.canvas.parentNode&&(r=i),r=r&&r.raphael?n.getById(r.raphaelid):null},x.getElementsByBBox=function(t){var e=this.set();return this.forEach(function(i){n.isBBoxIntersect(i.getBBox(),t)&&e.push(i)}),e},x.getById=function(t){for(var e=this.bottom;e;){if(e.id==t)return e;e=e.next}return null},x.forEach=function(t,e){for(var n=this.bottom;n;){if(t.call(e,n)===!1)return this;n=n.next}return this},x.getElementsByPoint=function(t,e){var n=this.set();return this.forEach(function(i){i.isPointInside(t,e)&&n.push(i)}),n},Qt.isPointInside=function(t,e){var i=this.realPath=gt[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(i=n.transformPath(i,this.attr("transform"))),n.isPointInsidePath(i,t,e)},Qt.getBBox=function(t){if(this.removed)return{};var e=this._;return t?(!e.dirty&&e.bboxwt||(this.realPath=gt[this.type](this),e.bboxwt=$t(this.realPath),e.bboxwt.toString=m,e.dirty=0),e.bboxwt):((e.dirty||e.dirtyT||!e.bbox)&&(!e.dirty&&this.realPath||(e.bboxwt=0,this.realPath=gt[this.type](this)),e.bbox=$t(vt(this.realPath,this.matrix)),e.bbox.toString=m,e.dirty=e.dirtyT=0),e.bbox)},Qt.clone=function(){if(this.removed)return null;var t=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(t),t},Qt.glow=function(t){if("text"==this.type)return null;t=t||{};var e={width:(t.width||10)+(+this.attr("stroke-width")||1),fill:t.fill||!1,opacity:t.opacity||.5,offsetx:t.offsetx||0,offsety:t.offsety||0,color:t.color||"#000"},n=e.width/2,i=this.paper,r=i.set(),o=this.realPath||gt[this.type](this);o=this.matrix?vt(o,this.matrix):o;for(var a=1;a<n+1;a++)r.push(i.path(o).attr({stroke:e.color,fill:e.fill?e.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(e.width/n*a).toFixed(3),opacity:+(e.opacity/n).toFixed(3)}));return r.insertBefore(this).translate(e.offsetx,e.offsety)};var ne=function(t,e,i,r,o,a,s,l,h){return null==h?c(t,e,i,r,o,a,s,l):n.findDotsAtSegment(t,e,i,r,o,a,s,l,u(t,e,i,r,o,a,s,l,h))},ie=function(t,e){return function(i,r,o){i=Mt(i);for(var a,s,l,c,u,h="",d={},p=0,f=0,m=i.length;f<m;f++){if(l=i[f],"M"==l[0])a=+l[1],s=+l[2];else{if(c=ne(a,s,l[1],l[2],l[3],l[4],l[5],l[6]),p+c>r){if(e&&!d.start){if(u=ne(a,s,l[1],l[2],l[3],l[4],l[5],l[6],r-p),h+=["C"+u.start.x,u.start.y,u.m.x,u.m.y,u.x,u.y],o)return h;d.start=h,h=["M"+u.x,u.y+"C"+u.n.x,u.n.y,u.end.x,u.end.y,l[5],l[6]].join(),p+=c,a=+l[5],s=+l[6];continue}if(!t&&!e)return u=ne(a,s,l[1],l[2],l[3],l[4],l[5],l[6],r-p),{x:u.x,y:u.y,alpha:u.alpha}}p+=c,a=+l[5],s=+l[6]}h+=l.shift()+l}return d.end=h,u=t?p:e?d:n.findDotsAtSegment(a,s,l[0],l[1],l[2],l[3],l[4],l[5],1),u.alpha&&(u={x:u.x,y:u.y,alpha:u.alpha}),u}},re=ie(1),oe=ie(),ae=ie(0,1);n.getTotalLength=re,n.getPointAtLength=oe,n.getSubpath=function(t,e,n){if(this.getTotalLength(t)-n<1e-6)return ae(t,e).end;var i=ae(t,n,1);return e?ae(i,e).end:i},Qt.getTotalLength=function(){var t=this.getPath();if(t)return this.node.getTotalLength?this.node.getTotalLength():re(t)},Qt.getPointAtLength=function(t){var e=this.getPath();if(e)return oe(e,t)},Qt.getPath=function(){var t,e=n._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return e&&(t=e(this)),t},Qt.getSubpath=function(t,e){var i=this.getPath();if(i)return n.getSubpath(i,t,e)};var se=n.easing_formulas={linear:function(t){return t},"<":function(t){return H(t,1.7)},">":function(t){return H(t,.48)},"<>":function(t){var e=.48-t/1.04,n=R.sqrt(.1734+e*e),i=n-e,r=H(z(i),1/3)*(i<0?-1:1),o=-n-e,a=H(z(o),1/3)*(o<0?-1:1),s=r+a+.5;return 3*(1-s)*s*s+s*s*s},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},elastic:function(t){return t==!!t?t:H(2,-10*t)*R.sin((t-.075)*(2*U)/.3)+1},bounce:function(t){var e,n=7.5625,i=2.75;return t<1/i?e=n*t*t:t<2/i?(t-=1.5/i,e=n*t*t+.75):t<2.5/i?(t-=2.25/i,e=n*t*t+.9375):(t-=2.625/i,e=n*t*t+.984375),e}};se.easeIn=se["ease-in"]=se["<"],se.easeOut=se["ease-out"]=se[">"],se.easeInOut=se["ease-in-out"]=se["<>"],se["back-in"]=se.backIn,se["back-out"]=se.backOut;var le=[],ce=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,16)},ue=function(){for(var t=+new Date,i=0;i<le.length;i++){var r=le[i];if(!r.el.removed&&!r.paused){var o,a,s=t-r.start,l=r.ms,c=r.easing,u=r.from,h=r.diff,d=r.to,p=(r.t,r.el),f={},m={};if(r.initstatus?(s=(r.initstatus*r.anim.top-r.prev)/(r.percent-r.prev)*l,r.status=r.initstatus,delete r.initstatus,r.stop&&le.splice(i--,1)):r.status=(r.prev+(r.percent-r.prev)*(s/l))/r.anim.top,!(s<0))if(s<l){var g=c(s/l);for(var v in u)if(u[D](v)){switch(it[v]){case W:o=+u[v]+g*l*h[v];break;case"colour":o="rgb("+[he(Q(u[v].r+g*l*h[v].r)),he(Q(u[v].g+g*l*h[v].g)),he(Q(u[v].b+g*l*h[v].b))].join(",")+")";break;case"path":o=[];for(var b=0,_=u[v].length;b<_;b++){o[b]=[u[v][b][0]];for(var x=1,w=u[v][b].length;x<w;x++)o[b][x]=+u[v][b][x]+g*l*h[v][b][x];o[b]=o[b].join(L)}o=o.join(L);break;case"transform":if(h[v].real)for(o=[],b=0,_=u[v].length;b<_;b++)for(o[b]=[u[v][b][0]],x=1,w=u[v][b].length;x<w;x++)o[b][x]=u[v][b][x]+g*l*h[v][b][x];else{var k=function(t){return+u[v][t]+g*l*h[v][t]};o=[["m",k(0),k(1),k(2),k(3),k(4),k(5)]]}break;case"csv":if("clip-rect"==v)for(o=[],b=4;b--;)o[b]=+u[v][b]+g*l*h[v][b];break;default:var C=[][B](u[v]);for(o=[],b=p.paper.customAttributes[v].length;b--;)o[b]=+C[b]+g*l*h[v][b]}f[v]=o}p.attr(f),function(t,n,i){setTimeout(function(){e("raphael.anim.frame."+t,n,i)})}(p.id,p,r.anim)}else{if(function(t,i,r){setTimeout(function(){e("raphael.anim.frame."+i.id,i,r),e("raphael.anim.finish."+i.id,i,r),n.is(t,"function")&&t.call(i)})}(r.callback,p,r.anim),p.attr(d),le.splice(i--,1),r.repeat>1&&!r.next){for(a in d)d[D](a)&&(m[a]=r.totalOrigin[a]);r.el.attr(m),y(r.anim,r.el,r.anim.percents[0],null,r.totalOrigin,r.repeat-1)}r.next&&!r.stop&&y(r.anim,r.el,r.next,null,r.totalOrigin,r.repeat);
}}}n.svg&&p&&p.paper&&p.paper.safari(),le.length&&ce(ue)},he=function(t){return t>255?255:t<0?0:t};Qt.animateWith=function(t,e,i,r,o,a){var s=this;if(s.removed)return a&&a.call(s),s;var l=i instanceof v?i:n.animation(i,r,o,a);y(l,s,l.percents[0],null,s.attr());for(var c=0,u=le.length;c<u;c++)if(le[c].anim==e&&le[c].el==t){le[u-1].start=le[c].start;break}return s},Qt.onAnimation=function(t){return t?e.on("raphael.anim.frame."+this.id,t):e.unbind("raphael.anim.frame."+this.id),this},v.prototype.delay=function(t){var e=new v(this.anim,this.ms);return e.times=this.times,e.del=+t||0,e},v.prototype.repeat=function(t){var e=new v(this.anim,this.ms);return e.del=this.del,e.times=R.floor(N(t,0))||1,e},n.animation=function(t,e,i,r){if(t instanceof v)return t;!n.is(i,"function")&&i||(r=r||i||null,i=null),t=Object(t),e=+e||0;var o,a,s={};for(a in t)t[D](a)&&Z(a)!=a&&Z(a)+"%"!=a&&(o=!0,s[a]=t[a]);return o?(i&&(s.easing=i),r&&(s.callback=r),new v({100:s},e)):new v(t,e)},Qt.animate=function(t,e,i,r){var o=this;if(o.removed)return r&&r.call(o),o;var a=t instanceof v?t:n.animation(t,e,i,r);return y(a,o,a.percents[0],null,o.attr()),o},Qt.setTime=function(t,e){return t&&null!=e&&this.status(t,q(e,t.ms)/t.ms),this},Qt.status=function(t,e){var n,i,r=[],o=0;if(null!=e)return y(t,this,-1,q(e,1)),this;for(n=le.length;o<n;o++)if(i=le[o],i.el.id==this.id&&(!t||i.anim==t)){if(t)return i.status;r.push({anim:i.anim,status:i.status})}return t?0:r},Qt.pause=function(t){for(var n=0;n<le.length;n++)le[n].el.id!=this.id||t&&le[n].anim!=t||e("raphael.anim.pause."+this.id,this,le[n].anim)!==!1&&(le[n].paused=!0);return this},Qt.resume=function(t){for(var n=0;n<le.length;n++)if(le[n].el.id==this.id&&(!t||le[n].anim==t)){var i=le[n];e("raphael.anim.resume."+this.id,this,i.anim)!==!1&&(delete i.paused,this.status(i.anim,i.status))}return this},Qt.stop=function(t){for(var n=0;n<le.length;n++)le[n].el.id!=this.id||t&&le[n].anim!=t||e("raphael.anim.stop."+this.id,this,le[n].anim)!==!1&&le.splice(n--,1);return this},e.on("raphael.remove",b),e.on("raphael.clear",b),Qt.toString=function(){return"Raphaël’s object"};var de=function(t){if(this.items=[],this.length=0,this.type="set",t)for(var e=0,n=t.length;e<n;e++)!t[e]||t[e].constructor!=Qt.constructor&&t[e].constructor!=de||(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},pe=de.prototype;pe.push=function(){for(var t,e,n=0,i=arguments.length;n<i;n++)t=arguments[n],!t||t.constructor!=Qt.constructor&&t.constructor!=de||(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},pe.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},pe.forEach=function(t,e){for(var n=0,i=this.items.length;n<i;n++)if(t.call(e,this.items[n],n)===!1)return this;return this};for(var fe in Qt)Qt[D](fe)&&(pe[fe]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t][T](n,e)})}}(fe));return pe.attr=function(t,e){if(t&&n.is(t,X)&&n.is(t[0],"object"))for(var i=0,r=t.length;i<r;i++)this.items[i].attr(t[i]);else for(var o=0,a=this.items.length;o<a;o++)this.items[o].attr(t,e);return this},pe.clear=function(){for(;this.length;)this.pop()},pe.splice=function(t,e,n){t=t<0?N(this.length+t,0):t,e=N(0,q(this.length-t,e));var i,r=[],o=[],a=[];for(i=2;i<arguments.length;i++)a.push(arguments[i]);for(i=0;i<e;i++)o.push(this[t+i]);for(;i<this.length-t;i++)r.push(this[t+i]);var s=a.length;for(i=0;i<s+r.length;i++)this.items[t+i]=this[t+i]=i<s?a[i]:r[i-s];for(i=this.items.length=this.length-=e-s;this[i];)delete this[i++];return new de(o)},pe.exclude=function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]==t)return this.splice(e,1),!0},pe.animate=function(t,e,i,r){(n.is(i,"function")||!i)&&(r=i||null);var o,a,s=this.items.length,l=s,c=this;if(!s)return this;r&&(a=function(){!--s&&r.call(c)}),i=n.is(i,Y)?i:a;var u=n.animation(t,e,i,a);for(o=this.items[--l].animate(u);l--;)this.items[l]&&!this.items[l].removed&&this.items[l].animateWith(o,u,u),this.items[l]&&!this.items[l].removed||s--;return this},pe.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},pe.getBBox=function(){for(var t=[],e=[],n=[],i=[],r=this.items.length;r--;)if(!this.items[r].removed){var o=this.items[r].getBBox();t.push(o.x),e.push(o.y),n.push(o.x+o.width),i.push(o.y+o.height)}return t=q[T](0,t),e=q[T](0,e),n=N[T](0,n),i=N[T](0,i),{x:t,y:e,x2:n,y2:i,width:n-t,height:i-e}},pe.clone=function(t){t=this.paper.set();for(var e=0,n=this.items.length;e<n;e++)t.push(this.items[e].clone());return t},pe.toString=function(){return"Raphaël‘s set"},pe.glow=function(t){var e=this.paper.set();return this.forEach(function(n,i){var r=n.glow(t);null!=r&&r.forEach(function(t,n){e.push(t)})}),e},pe.isPointInside=function(t,e){var n=!1;return this.forEach(function(i){if(i.isPointInside(t,e))return console.log("runned"),n=!0,!1}),n},n.registerFont=function(t){if(!t.face)return t;this.fonts=this.fonts||{};var e={w:t.w,face:{},glyphs:{}},n=t.face["font-family"];for(var i in t.face)t.face[D](i)&&(e.face[i]=t.face[i]);if(this.fonts[n]?this.fonts[n].push(e):this.fonts[n]=[e],!t.svg){e.face["units-per-em"]=tt(t.face["units-per-em"],10);for(var r in t.glyphs)if(t.glyphs[D](r)){var o=t.glyphs[r];if(e.glyphs[r]={w:o.w,k:{},d:o.d&&"M"+o.d.replace(/[mlcxtrv]/g,function(t){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[t]||"M"})+"z"},o.k)for(var a in o.k)o[D](a)&&(e.glyphs[r].k[a]=o.k[a])}}return t},x.getFont=function(t,e,i,r){if(r=r||"normal",i=i||"normal",e=+e||{normal:400,bold:700,lighter:300,bolder:800}[e]||400,n.fonts){var o=n.fonts[t];if(!o){var a=new RegExp("(^|\\s)"+t.replace(/[^\w\d\s+!~.:_-]/g,P)+"(\\s|$)","i");for(var s in n.fonts)if(n.fonts[D](s)&&a.test(s)){o=n.fonts[s];break}}var l;if(o)for(var c=0,u=o.length;c<u&&(l=o[c],l.face["font-weight"]!=e||l.face["font-style"]!=i&&l.face["font-style"]||l.face["font-stretch"]!=r);c++);return l}},x.print=function(t,e,i,r,o,a,s,l){a=a||"middle",s=N(q(s||0,1),-1),l=N(q(l||1,3),1);var c,u=I(i)[F](P),h=0,d=0,p=P;if(n.is(r,"string")&&(r=this.getFont(r)),r){c=(o||16)/r.face["units-per-em"];for(var f=r.face.bbox[F](w),m=+f[0],g=f[3]-f[1],v=0,y=+f[1]+("baseline"==a?g+ +r.face.descent:g/2),b=0,_=u.length;b<_;b++){if("\n"==u[b])h=0,k=0,d=0,v+=g*l;else{var x=d&&r.glyphs[u[b-1]]||{},k=r.glyphs[u[b]];h+=d?(x.w||r.w)+(x.k&&x.k[u[b]]||0)+r.w*s:0,d=1}k&&k.d&&(p+=n.transformPath(k.d,["t",h*c,v*c,"s",c,c,m,y,"t",(t-m)/c,(e-y)/c]))}}return this.path(p).attr({fill:"#000",stroke:"none"})},x.add=function(t){if(n.is(t,"array"))for(var e,i=this.set(),r=0,o=t.length;r<o;r++)e=t[r]||{},k[D](e.type)&&i.push(this[e.type]().attr(e));return i},n.format=function(t,e){var i=n.is(e,X)?[0][B](e):arguments;return t&&n.is(t,Y)&&i.length-1&&(t=t.replace(C,function(t,e){return null==i[++e]?P:i[e]})),t||P},n.fullfill=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(t,n,i){var r=i;return n.replace(e,function(t,e,n,i,o){e=e||i,r&&(e in r&&(r=r[e]),"function"==typeof r&&o&&(r=r()))}),r=(null==r||r==i?t:r)+""};return function(e,i){return String(e).replace(t,function(t,e){return n(t,e,i)})}}(),n.ninja=function(){return $.was?S.win.Raphael=$.is:delete Raphael,n},n.st=pe,function(t,e,i){function r(){/in/.test(t.readyState)?setTimeout(r,9):n.eve("raphael.DOMload")}null==t.readyState&&t.addEventListener&&(t.addEventListener(e,i=function(){t.removeEventListener(e,i,!1),t.readyState="complete"},!1),t.readyState="loading"),r()}(document,"DOMContentLoaded"),e.on("raphael.DOMload",function(){_=!0}),function(){if(n.svg){var t="hasOwnProperty",e=String,i=parseFloat,r=parseInt,o=Math,a=o.max,s=o.abs,l=o.pow,c=/[, ]+/,u=n.eve,h="",d=" ",p="http://www.w3.org/1999/xlink",f={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},m={};n.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var g=function(i,r){if(r){"string"==typeof i&&(i=g(i));for(var o in r)r[t](o)&&("xlink:"==o.substring(0,6)?i.setAttributeNS(p,o.substring(6),e(r[o])):i.setAttribute(o,e(r[o])))}else i=n._g.doc.createElementNS("http://www.w3.org/2000/svg",i),i.style&&(i.style.webkitTapHighlightColor="rgba(0,0,0,0)");return i},v=function(t,r){var c="linear",u=t.id+r,d=.5,p=.5,f=t.node,m=t.paper,v=f.style,y=n._g.doc.getElementById(u);if(!y){if(r=e(r).replace(n._radial_gradient,function(t,e,n){if(c="radial",e&&n){d=i(e),p=i(n);var r=2*(p>.5)-1;l(d-.5,2)+l(p-.5,2)>.25&&(p=o.sqrt(.25-l(d-.5,2))*r+.5)&&.5!=p&&(p=p.toFixed(5)-1e-5*r)}return h}),r=r.split(/\s*\-\s*/),"linear"==c){var b=r.shift();if(b=-i(b),isNaN(b))return null;var _=[0,0,o.cos(n.rad(b)),o.sin(n.rad(b))],x=1/(a(s(_[2]),s(_[3]))||1);_[2]*=x,_[3]*=x,_[2]<0&&(_[0]=-_[2],_[2]=0),_[3]<0&&(_[1]=-_[3],_[3]=0)}var w=n._parseDots(r);if(!w)return null;if(u=u.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&u!=t.gradient.id&&(m.defs.removeChild(t.gradient),delete t.gradient),!t.gradient){y=g(c+"Gradient",{id:u}),t.gradient=y,g(y,"radial"==c?{fx:d,fy:p}:{x1:_[0],y1:_[1],x2:_[2],y2:_[3],gradientTransform:t.matrix.invert()}),m.defs.appendChild(y);for(var k=0,C=w.length;k<C;k++)y.appendChild(g("stop",{offset:w[k].offset?w[k].offset:k?"100%":"0%","stop-color":w[k].color||"#fff"}))}}return g(f,{fill:"url(#"+u+")",opacity:1,"fill-opacity":1}),v.fill=h,v.opacity=1,v.fillOpacity=1,1},y=function(t){var e=t.getBBox(1);g(t.pattern,{patternTransform:t.matrix.invert()+" translate("+e.x+","+e.y+")"})},b=function(i,r,o){if("path"==i.type){for(var a,s,l,c,u,d=e(r).toLowerCase().split("-"),p=i.paper,v=o?"end":"start",y=i.node,b=i.attrs,_=b["stroke-width"],x=d.length,w="classic",k=3,C=3,D=5;x--;)switch(d[x]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=d[x];break;case"wide":C=5;break;case"narrow":C=2;break;case"long":k=5;break;case"short":k=2}if("open"==w?(k+=2,C+=2,D+=2,l=1,c=o?4:1,u={fill:"none",stroke:b.stroke}):(c=l=k/2,u={fill:b.stroke,stroke:"none"}),i._.arrows?o?(i._.arrows.endPath&&m[i._.arrows.endPath]--,i._.arrows.endMarker&&m[i._.arrows.endMarker]--):(i._.arrows.startPath&&m[i._.arrows.startPath]--,i._.arrows.startMarker&&m[i._.arrows.startMarker]--):i._.arrows={},"none"!=w){var S="raphael-marker-"+w,$="raphael-marker-"+v+w+k+C;n._g.doc.getElementById(S)?m[S]++:(p.defs.appendChild(g(g("path"),{"stroke-linecap":"round",d:f[w],id:S})),m[S]=1);var E,T=n._g.doc.getElementById($);T?(m[$]++,E=T.getElementsByTagName("use")[0]):(T=g(g("marker"),{id:$,markerHeight:C,markerWidth:k,orient:"auto",refX:c,refY:C/2}),E=g(g("use"),{"xlink:href":"#"+S,transform:(o?"rotate(180 "+k/2+" "+C/2+") ":h)+"scale("+k/D+","+C/D+")","stroke-width":(1/((k/D+C/D)/2)).toFixed(4)}),T.appendChild(E),p.defs.appendChild(T),m[$]=1),g(E,u);var B=l*("diamond"!=w&&"oval"!=w);o?(a=i._.arrows.startdx*_||0,s=n.getTotalLength(b.path)-B*_):(a=B*_,s=n.getTotalLength(b.path)-(i._.arrows.enddx*_||0)),u={},u["marker-"+v]="url(#"+$+")",(s||a)&&(u.d=n.getSubpath(b.path,a,s)),g(y,u),i._.arrows[v+"Path"]=S,i._.arrows[v+"Marker"]=$,i._.arrows[v+"dx"]=B,i._.arrows[v+"Type"]=w,i._.arrows[v+"String"]=r}else o?(a=i._.arrows.startdx*_||0,s=n.getTotalLength(b.path)-a):(a=0,s=n.getTotalLength(b.path)-(i._.arrows.enddx*_||0)),i._.arrows[v+"Path"]&&g(y,{d:n.getSubpath(b.path,a,s)}),delete i._.arrows[v+"Path"],delete i._.arrows[v+"Marker"],delete i._.arrows[v+"dx"],delete i._.arrows[v+"Type"],delete i._.arrows[v+"String"];for(u in m)if(m[t](u)&&!m[u]){var A=n._g.doc.getElementById(u);A&&A.parentNode.removeChild(A)}}},_={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},x=function(t,n,i){if(n=_[e(n).toLowerCase()]){for(var r=t.attrs["stroke-width"]||"1",o={round:r,square:r,butt:0}[t.attrs["stroke-linecap"]||i["stroke-linecap"]]||0,a=[],s=n.length;s--;)a[s]=n[s]*r+(s%2?1:-1)*o;g(t.node,{"stroke-dasharray":a.join(",")})}},w=function(i,o){var l=i.node,u=i.attrs,d=l.style.visibility;l.style.visibility="hidden";for(var f in o)if(o[t](f)){if(!n._availableAttrs[t](f))continue;var m=o[f];switch(u[f]=m,f){case"blur":i.blur(m);break;case"href":case"title":var _=g("title"),w=n._g.doc.createTextNode(m);_.appendChild(w),l.appendChild(_);break;case"target":var k=l.parentNode;if("a"!=k.tagName.toLowerCase()){var _=g("a");k.insertBefore(_,l),_.appendChild(l),k=_}"target"==f?k.setAttributeNS(p,"show","blank"==m?"new":m):k.setAttributeNS(p,f,m);break;case"cursor":l.style.cursor=m;break;case"transform":i.transform(m);break;case"arrow-start":b(i,m);break;case"arrow-end":b(i,m,1);break;case"clip-rect":var D=e(m).split(c);if(4==D.length){i.clip&&i.clip.parentNode.parentNode.removeChild(i.clip.parentNode);var S=g("clipPath"),$=g("rect");S.id=n.createUUID(),g($,{x:D[0],y:D[1],width:D[2],height:D[3]}),S.appendChild($),i.paper.defs.appendChild(S),g(l,{"clip-path":"url(#"+S.id+")"}),i.clip=$}if(!m){var E=l.getAttribute("clip-path");if(E){var T=n._g.doc.getElementById(E.replace(/(^url\(#|\)$)/g,h));T&&T.parentNode.removeChild(T),g(l,{"clip-path":h}),delete i.clip}}break;case"path":"path"==i.type&&(g(l,{d:m?u.path=n._pathToAbsolute(m):"M0,0"}),i._.dirty=1,i._.arrows&&("startString"in i._.arrows&&b(i,i._.arrows.startString),"endString"in i._.arrows&&b(i,i._.arrows.endString,1)));break;case"width":if(l.setAttribute(f,m),i._.dirty=1,!u.fx)break;f="x",m=u.x;case"x":u.fx&&(m=-u.x-(u.width||0));case"rx":if("rx"==f&&"rect"==i.type)break;case"cx":l.setAttribute(f,m),i.pattern&&y(i),i._.dirty=1;break;case"height":if(l.setAttribute(f,m),i._.dirty=1,!u.fy)break;f="y",m=u.y;case"y":u.fy&&(m=-u.y-(u.height||0));case"ry":if("ry"==f&&"rect"==i.type)break;case"cy":l.setAttribute(f,m),i.pattern&&y(i),i._.dirty=1;break;case"r":"rect"==i.type?g(l,{rx:m,ry:m}):l.setAttribute(f,m),i._.dirty=1;break;case"src":"image"==i.type&&l.setAttributeNS(p,"href",m);break;case"stroke-width":1==i._.sx&&1==i._.sy||(m/=a(s(i._.sx),s(i._.sy))||1),i.paper._vbSize&&(m*=i.paper._vbSize),l.setAttribute(f,m),u["stroke-dasharray"]&&x(i,u["stroke-dasharray"],o),i._.arrows&&("startString"in i._.arrows&&b(i,i._.arrows.startString),"endString"in i._.arrows&&b(i,i._.arrows.endString,1));break;case"stroke-dasharray":x(i,m,o);break;case"fill":var B=e(m).match(n._ISURL);if(B){S=g("pattern");var A=g("image");S.id=n.createUUID(),g(S,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),g(A,{x:0,y:0,"xlink:href":B[1]}),S.appendChild(A),function(t){n._preload(B[1],function(){var e=this.offsetWidth,n=this.offsetHeight;g(t,{width:e,height:n}),g(A,{width:e,height:n}),i.paper.safari()})}(S),i.paper.defs.appendChild(S),g(l,{fill:"url(#"+S.id+")"}),i.pattern=S,i.pattern&&y(i);break}var P=n.getRGB(m);if(P.error){if(("circle"==i.type||"ellipse"==i.type||"r"!=e(m).charAt())&&v(i,m)){if("opacity"in u||"fill-opacity"in u){var L=n._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h));if(L){var I=L.getElementsByTagName("stop");g(I[I.length-1],{"stop-opacity":("opacity"in u?u.opacity:1)*("fill-opacity"in u?u["fill-opacity"]:1)})}}u.gradient=m,u.fill="none";break}}else delete o.gradient,delete u.gradient,!n.is(u.opacity,"undefined")&&n.is(o.opacity,"undefined")&&g(l,{opacity:u.opacity}),!n.is(u["fill-opacity"],"undefined")&&n.is(o["fill-opacity"],"undefined")&&g(l,{"fill-opacity":u["fill-opacity"]});P[t]("opacity")&&g(l,{"fill-opacity":P.opacity>1?P.opacity/100:P.opacity});case"stroke":P=n.getRGB(m),l.setAttribute(f,P.hex),"stroke"==f&&P[t]("opacity")&&g(l,{"stroke-opacity":P.opacity>1?P.opacity/100:P.opacity}),"stroke"==f&&i._.arrows&&("startString"in i._.arrows&&b(i,i._.arrows.startString),"endString"in i._.arrows&&b(i,i._.arrows.endString,1));break;case"gradient":("circle"==i.type||"ellipse"==i.type||"r"!=e(m).charAt())&&v(i,m);break;case"opacity":u.gradient&&!u[t]("stroke-opacity")&&g(l,{"stroke-opacity":m>1?m/100:m});case"fill-opacity":if(u.gradient){L=n._g.doc.getElementById(l.getAttribute("fill").replace(/^url\(#|\)$/g,h)),L&&(I=L.getElementsByTagName("stop"),g(I[I.length-1],{"stop-opacity":m}));break}default:"font-size"==f&&(m=r(m,10)+"px");var F=f.replace(/(\-.)/g,function(t){return t.substring(1).toUpperCase()});l.style[F]=m,i._.dirty=1,l.setAttribute(f,m)}}C(i,o),l.style.visibility=d},k=1.2,C=function(i,o){if("text"==i.type&&(o[t]("text")||o[t]("font")||o[t]("font-size")||o[t]("x")||o[t]("y"))){var a=i.attrs,s=i.node,l=s.firstChild?r(n._g.doc.defaultView.getComputedStyle(s.firstChild,h).getPropertyValue("font-size"),10):10;if(o[t]("text")){for(a.text=o.text;s.firstChild;)s.removeChild(s.firstChild);for(var c,u=e(o.text).split("\n"),d=[],p=0,f=u.length;p<f;p++)c=g("tspan"),p&&g(c,{dy:l*k,x:a.x}),c.appendChild(n._g.doc.createTextNode(u[p])),s.appendChild(c),d[p]=c}else for(d=s.getElementsByTagName("tspan"),p=0,f=d.length;p<f;p++)p?g(d[p],{dy:l*k,x:a.x}):g(d[0],{dy:0});g(s,{x:a.x,y:a.y}),i._.dirty=1;var m=i._getBBox(),v=a.y-(m.y+m.height/2);v&&n.is(v,"finite")&&g(d[0],{dy:v})}},D=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=n._oid++,t.raphaelid=this.id,this.matrix=n.matrix(),this.realPath=null,this.paper=e,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},S=n.el;D.prototype=S,S.constructor=D,n._engine.path=function(t,e){var n=g("path");e.canvas&&e.canvas.appendChild(n);var i=new D(n,e);return i.type="path",w(i,{fill:"none",stroke:"#000",path:t}),i},S.rotate=function(t,n,r){if(this.removed)return this;if(t=e(t).split(c),t.length-1&&(n=i(t[1]),r=i(t[2])),t=i(t[0]),null==r&&(n=r),null==n||null==r){var o=this.getBBox(1);n=o.x+o.width/2,r=o.y+o.height/2}return this.transform(this._.transform.concat([["r",t,n,r]])),this},S.scale=function(t,n,r,o){if(this.removed)return this;if(t=e(t).split(c),t.length-1&&(n=i(t[1]),r=i(t[2]),o=i(t[3])),t=i(t[0]),null==n&&(n=t),null==o&&(r=o),null==r||null==o)var a=this.getBBox(1);return r=null==r?a.x+a.width/2:r,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",t,n,r,o]])),this},S.translate=function(t,n){return this.removed?this:(t=e(t).split(c),t.length-1&&(n=i(t[1])),t=i(t[0])||0,n=+n||0,this.transform(this._.transform.concat([["t",t,n]])),this)},S.transform=function(e){var i=this._;if(null==e)return i.transform;if(n._extractTransform(this,e),this.clip&&g(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&g(this.node,{transform:this.matrix}),1!=i.sx||1!=i.sy){var r=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":r})}return this},S.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},S.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},S.remove=function(){if(!this.removed&&this.node.parentNode){var t=this.paper;t.__set__&&t.__set__.exclude(this),u.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),n._tear(this,t),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var e in this)this[e]="function"==typeof this[e]?n._removedFactory(e):null;this.removed=!0}},S._getBBox=function(){if("none"==this.node.style.display){this.show();var t=!0}var e={};try{e=this.node.getBBox()}catch(t){}finally{e=e||{}}return t&&this.hide(),e},S.attr=function(e,i){if(this.removed)return this;if(null==e){var r={};for(var o in this.attrs)this.attrs[t](o)&&(r[o]=this.attrs[o]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==i&&n.is(e,"string")){if("fill"==e&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==e)return this._.transform;for(var a=e.split(c),s={},l=0,h=a.length;l<h;l++)e=a[l],e in this.attrs?s[e]=this.attrs[e]:n.is(this.paper.customAttributes[e],"function")?s[e]=this.paper.customAttributes[e].def:s[e]=n._availableAttrs[e];return h-1?s:s[a[0]]}if(null==i&&n.is(e,"array")){for(s={},l=0,h=e.length;l<h;l++)s[e[l]]=this.attr(e[l]);return s}if(null!=i){var d={};d[e]=i}else null!=e&&n.is(e,"object")&&(d=e);for(var p in d)u("raphael.attr."+p+"."+this.id,this,d[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&d[t](p)&&n.is(this.paper.customAttributes[p],"function")){var f=this.paper.customAttributes[p].apply(this,[].concat(d[p]));this.attrs[p]=d[p];for(var m in f)f[t](m)&&(d[m]=f[m])}return w(this,d),this},S.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&n._tofront(this,t),this},S.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;"a"==t.tagName.toLowerCase()?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),n._toback(this,this.paper);this.paper;return this},S.insertAfter=function(t){if(this.removed)return this;var e=t.node||t[t.length-1].node;return e.nextSibling?e.parentNode.insertBefore(this.node,e.nextSibling):e.parentNode.appendChild(this.node),n._insertafter(this,t,this.paper),this},S.insertBefore=function(t){if(this.removed)return this;var e=t.node||t[0].node;return e.parentNode.insertBefore(this.node,e),n._insertbefore(this,t,this.paper),this},S.blur=function(t){var e=this;if(0!==+t){var i=g("filter"),r=g("feGaussianBlur");e.attrs.blur=t,i.id=n.createUUID(),g(r,{stdDeviation:+t||1.5}),i.appendChild(r),e.paper.defs.appendChild(i),e._blur=i,g(e.node,{filter:"url(#"+i.id+")"})}else e._blur&&(e._blur.parentNode.removeChild(e._blur),delete e._blur,delete e.attrs.blur),e.node.removeAttribute("filter");return e},n._engine.circle=function(t,e,n,i){var r=g("circle");t.canvas&&t.canvas.appendChild(r);var o=new D(r,t);return o.attrs={cx:e,cy:n,r:i,fill:"none",stroke:"#000"},o.type="circle",g(r,o.attrs),o},n._engine.rect=function(t,e,n,i,r,o){var a=g("rect");t.canvas&&t.canvas.appendChild(a);var s=new D(a,t);return s.attrs={x:e,y:n,width:i,height:r,r:o||0,rx:o||0,ry:o||0,fill:"none",stroke:"#000"},s.type="rect",g(a,s.attrs),s},n._engine.ellipse=function(t,e,n,i,r){var o=g("ellipse");t.canvas&&t.canvas.appendChild(o);var a=new D(o,t);return a.attrs={cx:e,cy:n,rx:i,ry:r,fill:"none",stroke:"#000"},a.type="ellipse",g(o,a.attrs),a},n._engine.image=function(t,e,n,i,r,o){var a=g("image");g(a,{x:n,y:i,width:r,height:o,preserveAspectRatio:"none"}),a.setAttributeNS(p,"href",e),t.canvas&&t.canvas.appendChild(a);var s=new D(a,t);return s.attrs={x:n,y:i,width:r,height:o,src:e},s.type="image",s},n._engine.text=function(t,e,i,r){var o=g("text");t.canvas&&t.canvas.appendChild(o);var a=new D(o,t);return a.attrs={x:e,y:i,"text-anchor":"middle",text:r,font:n._availableAttrs.font,stroke:"none",fill:"#000"},a.type="text",w(a,a.attrs),a},n._engine.setSize=function(t,e){return this.width=t||this.width,this.height=e||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},n._engine.create=function(){var t=n._getContainer.apply(0,arguments),e=t&&t.container,i=t.x,r=t.y,o=t.width,a=t.height;if(!e)throw new Error("SVG container not found.");var s,l=g("svg"),c="overflow:hidden;";return i=i||0,r=r||0,o=o||512,a=a||342,g(l,{height:a,version:1.1,width:o,xmlns:"http://www.w3.org/2000/svg"}),1==e?(l.style.cssText=c+"position:absolute;left:"+i+"px;top:"+r+"px",n._g.doc.body.appendChild(l),s=1):(l.style.cssText=c+"position:relative",e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l)),e=new n._Paper,e.width=o,e.height=a,e.canvas=l,e.clear(),e._left=e._top=0,s&&(e.renderfix=function(){}),e.renderfix(),e},n._engine.setViewBox=function(t,e,n,i,r){u("raphael.setViewBox",this,this._viewBox,[t,e,n,i,r]);var o,s,l=a(n/this.width,i/this.height),c=this.top,h=r?"meet":"xMinYMin";for(null==t?(this._vbSize&&(l=1),delete this._vbSize,o="0 0 "+this.width+d+this.height):(this._vbSize=l,o=t+d+e+d+n+d+i),g(this.canvas,{viewBox:o,preserveAspectRatio:h});l&&c;)s="stroke-width"in c.attrs?c.attrs["stroke-width"]:1,c.attr({"stroke-width":s}),c._.dirty=1,c._.dirtyT=1,c=c.prev;return this._viewBox=[t,e,n,i,!!r],this},n.prototype.renderfix=function(){var t,e=this.canvas,n=e.style;try{t=e.getScreenCTM()||e.createSVGMatrix()}catch(n){t=e.createSVGMatrix()}var i=-t.e%1,r=-t.f%1;(i||r)&&(i&&(this._left=(this._left+i)%1,n.left=this._left+"px"),r&&(this._top=(this._top+r)%1,n.top=this._top+"px"))},n.prototype.clear=function(){n.eve("raphael.clear",this);for(var t=this.canvas;t.firstChild;)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=g("desc")).appendChild(n._g.doc.createTextNode("Created with Raphaël "+n.version)),t.appendChild(this.desc),t.appendChild(this.defs=g("defs"))},n.prototype.remove=function(){u("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]="function"==typeof this[t]?n._removedFactory(t):null};var $=n.st;for(var E in S)S[t](E)&&!$[t](E)&&($[E]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t].apply(n,e)})}}(E))}}(),function(){if(n.vml){var t="hasOwnProperty",e=String,i=parseFloat,r=Math,o=r.round,a=r.max,s=r.min,l=r.abs,c="fill",u=/[, ]+/,h=n.eve,d=" progid:DXImageTransform.Microsoft",p=" ",f="",m={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},g=/([clmz]),?([^clmz]*)/gi,v=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,b="position:absolute;left:0;top:0;width:1px;height:1px",_=21600,x={path:1,rect:1,image:1},w={circle:1,ellipse:1},k=function(t){var i=/[ahqstv]/gi,r=n._pathToAbsolute;if(e(t).match(i)&&(r=n._path2curve),i=/[clmz]/g,r==n._pathToAbsolute&&!e(t).match(i)){var a=e(t).replace(g,function(t,e,n){var i=[],r="m"==e.toLowerCase(),a=m[e];return n.replace(y,function(t){r&&2==i.length&&(a+=i+m["m"==e?"l":"L"],i=[]),i.push(o(t*_))}),a+i});return a}var s,l,c=r(t);a=[];for(var u=0,h=c.length;u<h;u++){s=c[u],l=c[u][0].toLowerCase(),"z"==l&&(l="x");for(var d=1,v=s.length;d<v;d++)l+=o(s[d]*_)+(d!=v-1?",":f);a.push(l)}return a.join(p)},C=function(t,e,i){var r=n.matrix();return r.rotate(-t,.5,.5),{dx:r.x(e,i),dy:r.y(e,i)}},D=function(t,e,n,i,r,o){var a=t._,s=t.matrix,u=a.fillpos,h=t.node,d=h.style,f=1,m="",g=_/e,v=_/n;if(d.visibility="hidden",e&&n){if(h.coordsize=l(g)+p+l(v),d.rotation=o*(e*n<0?-1:1),o){var y=C(o,i,r);i=y.dx,r=y.dy}if(e<0&&(m+="x"),n<0&&(m+=" y")&&(f=-1),d.flip=m,h.coordorigin=i*-g+p+r*-v,u||a.fillsize){var b=h.getElementsByTagName(c);b=b&&b[0],h.removeChild(b),u&&(y=C(o,s.x(u[0],u[1]),s.y(u[0],u[1])),b.position=y.dx*f+p+y.dy*f),a.fillsize&&(b.size=a.fillsize[0]*l(e)+p+a.fillsize[1]*l(n)),h.appendChild(b)}d.visibility="visible"}};n.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var S=function(t,n,i){for(var r=e(n).toLowerCase().split("-"),o=i?"end":"start",a=r.length,s="classic",l="medium",c="medium";a--;)switch(r[a]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":s=r[a];break;case"wide":case"narrow":c=r[a];break;case"long":case"short":l=r[a]}var u=t.node.getElementsByTagName("stroke")[0];u[o+"arrow"]=s,u[o+"arrowlength"]=l,u[o+"arrowwidth"]=c},$=function(r,l){r.attrs=r.attrs||{};var h=r.node,d=r.attrs,m=h.style,g=x[r.type]&&(l.x!=d.x||l.y!=d.y||l.width!=d.width||l.height!=d.height||l.cx!=d.cx||l.cy!=d.cy||l.rx!=d.rx||l.ry!=d.ry||l.r!=d.r),v=w[r.type]&&(d.cx!=l.cx||d.cy!=l.cy||d.r!=l.r||d.rx!=l.rx||d.ry!=l.ry),y=r;for(var b in l)l[t](b)&&(d[b]=l[b]);if(g&&(d.path=n._getPath[r.type](r),r._.dirty=1),l.href&&(h.href=l.href),l.title&&(h.title=l.title),l.target&&(h.target=l.target),l.cursor&&(m.cursor=l.cursor),"blur"in l&&r.blur(l.blur),(l.path&&"path"==r.type||g)&&(h.path=k(~e(d.path).toLowerCase().indexOf("r")?n._pathToAbsolute(d.path):d.path),"image"==r.type&&(r._.fillpos=[d.x,d.y],r._.fillsize=[d.width,d.height],D(r,1,1,0,0,0))),"transform"in l&&r.transform(l.transform),v){var C=+d.cx,$=+d.cy,T=+d.rx||+d.r||0,B=+d.ry||+d.r||0;h.path=n.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",o((C-T)*_),o(($-B)*_),o((C+T)*_),o(($+B)*_),o(C*_)),r._.dirty=1}if("clip-rect"in l){var P=e(l["clip-rect"]).split(u);if(4==P.length){P[2]=+P[2]+ +P[0],P[3]=+P[3]+ +P[1];var L=h.clipRect||n._g.doc.createElement("div"),I=L.style;I.clip=n.format("rect({1}px {2}px {3}px {0}px)",P),h.clipRect||(I.position="absolute",I.top=0,I.left=0,I.width=r.paper.width+"px",I.height=r.paper.height+"px",h.parentNode.insertBefore(L,h),L.appendChild(h),h.clipRect=L)}l["clip-rect"]||h.clipRect&&(h.clipRect.style.clip="auto")}if(r.textpath){var F=r.textpath.style;l.font&&(F.font=l.font),l["font-family"]&&(F.fontFamily='"'+l["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,f)+'"'),l["font-size"]&&(F.fontSize=l["font-size"]),l["font-weight"]&&(F.fontWeight=l["font-weight"]),l["font-style"]&&(F.fontStyle=l["font-style"])}if("arrow-start"in l&&S(y,l["arrow-start"]),"arrow-end"in l&&S(y,l["arrow-end"],1),null!=l.opacity||null!=l["stroke-width"]||null!=l.fill||null!=l.src||null!=l.stroke||null!=l["stroke-width"]||null!=l["stroke-opacity"]||null!=l["fill-opacity"]||null!=l["stroke-dasharray"]||null!=l["stroke-miterlimit"]||null!=l["stroke-linejoin"]||null!=l["stroke-linecap"]){var M=h.getElementsByTagName(c),O=!1;if(M=M&&M[0],!M&&(O=M=A(c)),"image"==r.type&&l.src&&(M.src=l.src),l.fill&&(M.on=!0),null!=M.on&&"none"!=l.fill&&null!==l.fill||(M.on=!1),M.on&&l.fill){var j=e(l.fill).match(n._ISURL);if(j){M.parentNode==h&&h.removeChild(M),M.rotate=!0,M.src=j[1],M.type="tile";var R=r.getBBox(1);M.position=R.x+p+R.y,r._.fillpos=[R.x,R.y],n._preload(j[1],function(){r._.fillsize=[this.offsetWidth,this.offsetHeight]})}else M.color=n.getRGB(l.fill).hex,M.src=f,M.type="solid",n.getRGB(l.fill).error&&(y.type in{circle:1,ellipse:1}||"r"!=e(l.fill).charAt())&&E(y,l.fill,M)&&(d.fill="none",d.gradient=l.fill,M.rotate=!1)}if("fill-opacity"in l||"opacity"in l){var N=((+d["fill-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+n.getRGB(l.fill).o+1||2)-1);N=s(a(N,0),1),M.opacity=N,M.src&&(M.color="none")}h.appendChild(M);var q=h.getElementsByTagName("stroke")&&h.getElementsByTagName("stroke")[0],z=!1;!q&&(z=q=A("stroke")),(l.stroke&&"none"!=l.stroke||l["stroke-width"]||null!=l["stroke-opacity"]||l["stroke-dasharray"]||l["stroke-miterlimit"]||l["stroke-linejoin"]||l["stroke-linecap"])&&(q.on=!0),("none"==l.stroke||null===l.stroke||null==q.on||0==l.stroke||0==l["stroke-width"])&&(q.on=!1);var H=n.getRGB(l.stroke);q.on&&l.stroke&&(q.color=H.hex),N=((+d["stroke-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+H.o+1||2)-1);var U=.75*(i(l["stroke-width"])||1);if(N=s(a(N,0),1),null==l["stroke-width"]&&(U=d["stroke-width"]),l["stroke-width"]&&(q.weight=U),U&&U<1&&(N*=U)&&(q.weight=1),q.opacity=N,l["stroke-linejoin"]&&(q.joinstyle=l["stroke-linejoin"]||"miter"),q.miterlimit=l["stroke-miterlimit"]||8,l["stroke-linecap"]&&(q.endcap="butt"==l["stroke-linecap"]?"flat":"square"==l["stroke-linecap"]?"square":"round"),l["stroke-dasharray"]){var W={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};q.dashstyle=W[t](l["stroke-dasharray"])?W[l["stroke-dasharray"]]:f}z&&h.appendChild(q)}if("text"==y.type){y.paper.canvas.style.display=f;var Y=y.paper.span,X=100,V=d.font&&d.font.match(/\d+(?:\.\d*)?(?=px)/);m=Y.style,d.font&&(m.font=d.font),d["font-family"]&&(m.fontFamily=d["font-family"]),d["font-weight"]&&(m.fontWeight=d["font-weight"]),d["font-style"]&&(m.fontStyle=d["font-style"]),V=i(d["font-size"]||V&&V[0])||10,m.fontSize=V*X+"px",y.textpath.string&&(Y.innerHTML=e(y.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var G=Y.getBoundingClientRect();y.W=d.w=(G.right-G.left)/X,y.H=d.h=(G.bottom-G.top)/X,
y.X=d.x,y.Y=d.y+y.H/2,("x"in l||"y"in l)&&(y.path.v=n.format("m{0},{1}l{2},{1}",o(d.x*_),o(d.y*_),o(d.x*_)+1));for(var K=["x","y","text","font","font-family","font-weight","font-style","font-size"],J=0,Q=K.length;J<Q;J++)if(K[J]in l){y._.dirty=1;break}switch(d["text-anchor"]){case"start":y.textpath.style["v-text-align"]="left",y.bbx=y.W/2;break;case"end":y.textpath.style["v-text-align"]="right",y.bbx=-y.W/2;break;default:y.textpath.style["v-text-align"]="center",y.bbx=0}y.textpath.style["v-text-kern"]=!0}},E=function(t,o,a){t.attrs=t.attrs||{};var s=(t.attrs,Math.pow),l="linear",c=".5 .5";if(t.attrs.gradient=o,o=e(o).replace(n._radial_gradient,function(t,e,n){return l="radial",e&&n&&(e=i(e),n=i(n),s(e-.5,2)+s(n-.5,2)>.25&&(n=r.sqrt(.25-s(e-.5,2))*(2*(n>.5)-1)+.5),c=e+p+n),f}),o=o.split(/\s*\-\s*/),"linear"==l){var u=o.shift();if(u=-i(u),isNaN(u))return null}var h=n._parseDots(o);if(!h)return null;if(t=t.shape||t.node,h.length){t.removeChild(a),a.on=!0,a.method="none",a.color=h[0].color,a.color2=h[h.length-1].color;for(var d=[],m=0,g=h.length;m<g;m++)h[m].offset&&d.push(h[m].offset+p+h[m].color);a.colors=d.length?d.join():"0% "+a.color,"radial"==l?(a.type="gradientTitle",a.focus="100%",a.focussize="0 0",a.focusposition=c,a.angle=0):(a.type="gradient",a.angle=(270-u)%360),t.appendChild(a)}return 1},T=function(t,e){this[0]=this.node=t,t.raphael=!0,this.id=n._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=e,this.matrix=n.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!e.bottom&&(e.bottom=this),this.prev=e.top,e.top&&(e.top.next=this),e.top=this,this.next=null},B=n.el;T.prototype=B,B.constructor=T,B.transform=function(t){if(null==t)return this._.transform;var i,r=this.paper._viewBoxShift,o=r?"s"+[r.scale,r.scale]+"-1-1t"+[r.dx,r.dy]:f;r&&(i=t=e(t).replace(/\.{3}|\u2026/g,this._.transform||f)),n._extractTransform(this,o+t);var a,s=this.matrix.clone(),l=this.skew,c=this.node,u=~e(this.attrs.fill).indexOf("-"),h=!e(this.attrs.fill).indexOf("url(");if(s.translate(1,1),h||u||"image"==this.type)if(l.matrix="1 0 0 1",l.offset="0 0",a=s.split(),u&&a.noRotation||!a.isSimple){c.style.filter=s.toFilter();var d=this.getBBox(),m=this.getBBox(1),g=d.x-m.x,v=d.y-m.y;c.coordorigin=g*-_+p+v*-_,D(this,1,1,g,v,0)}else c.style.filter=f,D(this,a.scalex,a.scaley,a.dx,a.dy,a.rotate);else c.style.filter=f,l.matrix=e(s),l.offset=s.offset();return i&&(this._.transform=i),this},B.rotate=function(t,n,r){if(this.removed)return this;if(null!=t){if(t=e(t).split(u),t.length-1&&(n=i(t[1]),r=i(t[2])),t=i(t[0]),null==r&&(n=r),null==n||null==r){var o=this.getBBox(1);n=o.x+o.width/2,r=o.y+o.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",t,n,r]])),this}},B.translate=function(t,n){return this.removed?this:(t=e(t).split(u),t.length-1&&(n=i(t[1])),t=i(t[0])||0,n=+n||0,this._.bbox&&(this._.bbox.x+=t,this._.bbox.y+=n),this.transform(this._.transform.concat([["t",t,n]])),this)},B.scale=function(t,n,r,o){if(this.removed)return this;if(t=e(t).split(u),t.length-1&&(n=i(t[1]),r=i(t[2]),o=i(t[3]),isNaN(r)&&(r=null),isNaN(o)&&(o=null)),t=i(t[0]),null==n&&(n=t),null==o&&(r=o),null==r||null==o)var a=this.getBBox(1);return r=null==r?a.x+a.width/2:r,o=null==o?a.y+a.height/2:o,this.transform(this._.transform.concat([["s",t,n,r,o]])),this._.dirtyT=1,this},B.hide=function(){return!this.removed&&(this.node.style.display="none"),this},B.show=function(){return!this.removed&&(this.node.style.display=f),this},B._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},B.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),n.eve.unbind("raphael.*.*."+this.id),n._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var t in this)this[t]="function"==typeof this[t]?n._removedFactory(t):null;this.removed=!0}},B.attr=function(e,i){if(this.removed)return this;if(null==e){var r={};for(var o in this.attrs)this.attrs[t](o)&&(r[o]=this.attrs[o]);return r.gradient&&"none"==r.fill&&(r.fill=r.gradient)&&delete r.gradient,r.transform=this._.transform,r}if(null==i&&n.is(e,"string")){if(e==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var a=e.split(u),s={},l=0,d=a.length;l<d;l++)e=a[l],e in this.attrs?s[e]=this.attrs[e]:n.is(this.paper.customAttributes[e],"function")?s[e]=this.paper.customAttributes[e].def:s[e]=n._availableAttrs[e];return d-1?s:s[a[0]]}if(this.attrs&&null==i&&n.is(e,"array")){for(s={},l=0,d=e.length;l<d;l++)s[e[l]]=this.attr(e[l]);return s}var p;null!=i&&(p={},p[e]=i),null==i&&n.is(e,"object")&&(p=e);for(var f in p)h("raphael.attr."+f+"."+this.id,this,p[f]);if(p){for(f in this.paper.customAttributes)if(this.paper.customAttributes[t](f)&&p[t](f)&&n.is(this.paper.customAttributes[f],"function")){var m=this.paper.customAttributes[f].apply(this,[].concat(p[f]));this.attrs[f]=p[f];for(var g in m)m[t](g)&&(p[g]=m[g])}p.text&&"text"==this.type&&(this.textpath.string=p.text),$(this,p)}return this},B.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&n._tofront(this,this.paper),this},B.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),n._toback(this,this.paper)),this)},B.insertAfter=function(t){return this.removed?this:(t.constructor==n.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),n._insertafter(this,t,this.paper),this)},B.insertBefore=function(t){return this.removed?this:(t.constructor==n.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),n._insertbefore(this,t,this.paper),this)},B.blur=function(t){var e=this.node.runtimeStyle,i=e.filter;return i=i.replace(v,f),0!==+t?(this.attrs.blur=t,e.filter=i+p+d+".Blur(pixelradius="+(+t||1.5)+")",e.margin=n.format("-{0}px 0 0 -{0}px",o(+t||1.5))):(e.filter=i,e.margin=0,delete this.attrs.blur),this},n._engine.path=function(t,e){var n=A("shape");n.style.cssText=b,n.coordsize=_+p+_,n.coordorigin=e.coordorigin;var i=new T(n,e),r={fill:"none",stroke:"#000"};t&&(r.path=t),i.type="path",i.path=[],i.Path=f,$(i,r),e.canvas.appendChild(n);var o=A("skew");return o.on=!0,n.appendChild(o),i.skew=o,i.transform(f),i},n._engine.rect=function(t,e,i,r,o,a){var s=n._rectPath(e,i,r,o,a),l=t.path(s),c=l.attrs;return l.X=c.x=e,l.Y=c.y=i,l.W=c.width=r,l.H=c.height=o,c.r=a,c.path=s,l.type="rect",l},n._engine.ellipse=function(t,e,n,i,r){var o=t.path();o.attrs;return o.X=e-i,o.Y=n-r,o.W=2*i,o.H=2*r,o.type="ellipse",$(o,{cx:e,cy:n,rx:i,ry:r}),o},n._engine.circle=function(t,e,n,i){var r=t.path();r.attrs;return r.X=e-i,r.Y=n-i,r.W=r.H=2*i,r.type="circle",$(r,{cx:e,cy:n,r:i}),r},n._engine.image=function(t,e,i,r,o,a){var s=n._rectPath(i,r,o,a),l=t.path(s).attr({stroke:"none"}),u=l.attrs,h=l.node,d=h.getElementsByTagName(c)[0];return u.src=e,l.X=u.x=i,l.Y=u.y=r,l.W=u.width=o,l.H=u.height=a,u.path=s,l.type="image",d.parentNode==h&&h.removeChild(d),d.rotate=!0,d.src=e,d.type="tile",l._.fillpos=[i,r],l._.fillsize=[o,a],h.appendChild(d),D(l,1,1,0,0,0),l},n._engine.text=function(t,i,r,a){var s=A("shape"),l=A("path"),c=A("textpath");i=i||0,r=r||0,a=a||"",l.v=n.format("m{0},{1}l{2},{1}",o(i*_),o(r*_),o(i*_)+1),l.textpathok=!0,c.string=e(a),c.on=!0,s.style.cssText=b,s.coordsize=_+p+_,s.coordorigin="0 0";var u=new T(s,t),h={fill:"#000",stroke:"none",font:n._availableAttrs.font,text:a};u.shape=s,u.path=l,u.textpath=c,u.type="text",u.attrs.text=e(a),u.attrs.x=i,u.attrs.y=r,u.attrs.w=1,u.attrs.h=1,$(u,h),s.appendChild(c),s.appendChild(l),t.canvas.appendChild(s);var d=A("skew");return d.on=!0,s.appendChild(d),u.skew=d,u.transform(f),u},n._engine.setSize=function(t,e){var i=this.canvas.style;return this.width=t,this.height=e,t==+t&&(t+="px"),e==+e&&(e+="px"),i.width=t,i.height=e,i.clip="rect(0 "+t+" "+e+" 0)",this._viewBox&&n._engine.setViewBox.apply(this,this._viewBox),this},n._engine.setViewBox=function(t,e,i,r,o){n.eve("raphael.setViewBox",this,this._viewBox,[t,e,i,r,o]);var s,l,c=this.width,u=this.height,h=1/a(i/c,r/u);return o&&(s=u/r,l=c/i,i*s<c&&(t-=(c-i*s)/2/s),r*l<u&&(e-=(u-r*l)/2/l)),this._viewBox=[t,e,i,r,!!o],this._viewBoxShift={dx:-t,dy:-e,scale:h},this.forEach(function(t){t.transform("...")}),this};var A;n._engine.initWin=function(t){var e=t.document;e.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!e.namespaces.rvml&&e.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),A=function(t){return e.createElement("<rvml:"+t+' class="rvml">')}}catch(t){A=function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},n._engine.initWin(n._g.win),n._engine.create=function(){var t=n._getContainer.apply(0,arguments),e=t.container,i=t.height,r=t.width,o=t.x,a=t.y;if(!e)throw new Error("VML container not found.");var s=new n._Paper,l=s.canvas=n._g.doc.createElement("div"),c=l.style;return o=o||0,a=a||0,r=r||512,i=i||342,s.width=r,s.height=i,r==+r&&(r+="px"),i==+i&&(i+="px"),s.coordsize=1e3*_+p+1e3*_,s.coordorigin="0 0",s.span=n._g.doc.createElement("span"),s.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",l.appendChild(s.span),c.cssText=n.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",r,i),1==e?(n._g.doc.body.appendChild(l),c.left=o+"px",c.top=a+"px",c.position="absolute"):e.firstChild?e.insertBefore(l,e.firstChild):e.appendChild(l),s.renderfix=function(){},s},n.prototype.clear=function(){n.eve("raphael.clear",this),this.canvas.innerHTML=f,this.span=n._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},n.prototype.remove=function(){n.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]="function"==typeof this[t]?n._removedFactory(t):null;return!0};var P=n.st;for(var L in B)B[t](L)&&!P[t](L)&&(P[L]=function(t){return function(){var e=arguments;return this.forEach(function(n){n[t].apply(n,e)})}}(L))}}(),$.was?S.win.Raphael=n:Raphael=n,n}),!function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd&&define("flow_diagram",[],e)}(this,function(){function t(e,n){if(!e||"function"==typeof e)return n;var i={};for(var r in n)i[r]=n[r];for(r in e)e[r]&&(i[r]="object"==typeof i[r]?t(i[r],e[r]):e[r]);return i}function e(t,e){if("function"==typeof Object.create)t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});else{t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}function n(t,e,n){var i,r,o="M{0},{1}";for(i=2,r=2*n.length+2;r>i;i+=2)o+=" L{"+i+"},{"+(i+1)+"}";var a=[e.x,e.y];for(i=0,r=n.length;r>i;i++)a.push(n[i].x),a.push(n[i].y);var s=t.paper.path(o,a);s.attr("stroke",t.options["element-color"]),s.attr("stroke-width",t.options["line-width"]);var l=t.options.font,c=t.options["font-family"],u=t.options["font-weight"];return l&&s.attr({font:l}),c&&s.attr({"font-family":c}),u&&s.attr({"font-weight":u}),s}function i(t,e,n,i){var r,o;"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]);var a="M{0},{1}";for(r=2,o=2*n.length+2;o>r;r+=2)a+=" L{"+r+"},{"+(r+1)+"}";var s=[e.x,e.y];for(r=0,o=n.length;o>r;r++)s.push(n[r].x),s.push(n[r].y);var l=t.paper.path(a,s);l.attr({stroke:t.options["line-color"],"stroke-width":t.options["line-width"],"arrow-end":t.options["arrow-end"]});var c=t.options.font,u=t.options["font-family"],h=t.options["font-weight"];if(c&&l.attr({font:c}),u&&l.attr({"font-family":u}),h&&l.attr({"font-weight":h}),i){var d=!1,p=t.paper.text(0,0,i),f=!1,m=n[0];e.y===m.y&&(f=!0);var g=0,v=0;d?(g=e.x>m.x?e.x-(e.x-m.x)/2:m.x-(m.x-e.x)/2,v=e.y>m.y?e.y-(e.y-m.y)/2:m.y-(m.y-e.y)/2,f?(g-=p.getBBox().width/2,v-=t.options["text-margin"]):(g+=t.options["text-margin"],v-=p.getBBox().height/2)):(g=e.x,v=e.y,f?(g+=t.options["text-margin"]/2,v-=t.options["text-margin"]):(g+=t.options["text-margin"]/2,v+=t.options["text-margin"])),p.attr({"text-anchor":"start","font-size":t.options["font-size"],fill:t.options["font-color"],x:g,y:v}),c&&p.attr({font:c}),u&&p.attr({"font-family":u}),h&&p.attr({"font-weight":h})}return l}function r(t,e,n,i,r,o,a,s){var l,c,u,h,d,p={x:null,y:null,onLine1:!1,onLine2:!1};return l=(s-o)*(n-t)-(a-r)*(i-e),0===l?p:(c=e-o,u=t-r,h=(a-r)*c-(s-o)*u,d=(n-t)*c-(i-e)*u,c=h/l,u=d/l,p.x=t+c*(n-t),p.y=e+c*(i-e),c>0&&1>c&&(p.onLine1=!0),u>0&&1>u&&(p.onLine2=!0),p)}function o(t,e){e=e||{},this.paper=new Raphael(t),this.options=g.defaults(e,m),this.symbols=[],this.lines=[],this.start=null}function a(t,e,n){this.chart=t,this.group=this.chart.paper.set(),this.symbol=n,this.connectedTo=[],this.symbolType=e.symbolType,this.flowstate=e.flowstate||"future",this.next_direction=e.next&&e.direction_next?e.direction_next:void 0,this.text=this.chart.paper.text(0,0,e.text),e.key&&(this.text.node.id=e.key+"t"),this.text.node.setAttribute("class",this.getAttr("class")+"t"),this.text.attr({"text-anchor":"start",x:this.getAttr("text-margin"),fill:this.getAttr("font-color"),"font-size":this.getAttr("font-size")});var i=this.getAttr("font"),r=this.getAttr("font-family"),o=this.getAttr("font-weight");i&&this.text.attr({font:i}),r&&this.text.attr({"font-family":r}),o&&this.text.attr({"font-weight":o}),e.link&&this.text.attr("href",e.link),e.target&&this.text.attr("target",e.target);var a=this.getAttr("maxWidth");if(a){for(var s=e.text.split(" "),l="",c=0,u=s.length;u>c;c++){var h=s[c];this.text.attr("text",l+" "+h),l+=this.text.getBBox().width>a?"\n"+h:" "+h}this.text.attr("text",l.substring(1))}if(this.group.push(this.text),n){var d=this.getAttr("text-margin");n.attr({fill:this.getAttr("fill"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*d,height:this.text.getBBox().height+2*d}),n.node.setAttribute("class",this.getAttr("class")),e.link&&n.attr("href",e.link),e.target&&n.attr("target",e.target),e.key&&(n.node.id=e.key),this.group.push(n),n.insertBefore(this.text),this.text.attr({y:n.getBBox().height/2}),this.initialize()}}function s(t,e){var n=t.paper.rect(0,0,0,0,20);e=e||{},e.text=e.text||"Start",a.call(this,t,e,n)}function l(t,e){var n=t.paper.rect(0,0,0,0,20);e=e||{},e.text=e.text||"End",a.call(this,t,e,n)}function c(t,e){var n=t.paper.rect(0,0,0,0);e=e||{},a.call(this,t,e,n)}function u(t,e){var n=t.paper.rect(0,0,0,0);e=e||{},a.call(this,t,e,n),n.attr({width:this.text.getBBox().width+4*this.getAttr("text-margin")}),this.text.attr({x:2*this.getAttr("text-margin")});var i=t.paper.rect(0,0,0,0);i.attr({x:this.getAttr("text-margin"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*this.getAttr("text-margin"),height:this.text.getBBox().height+2*this.getAttr("text-margin"),fill:this.getAttr("fill")}),e.key&&(i.node.id=e.key+"i");var r=this.getAttr("font"),o=this.getAttr("font-family"),s=this.getAttr("font-weight");r&&i.attr({font:r}),o&&i.attr({"font-family":o}),s&&i.attr({"font-weight":s}),e.link&&i.attr("href",e.link),e.target&&i.attr("target",e.target),this.group.push(i),i.insertBefore(this.text),this.initialize()}function h(t,e){e=e||{},a.call(this,t,e),this.textMargin=this.getAttr("text-margin"),this.text.attr({x:3*this.textMargin});var i=this.text.getBBox().width+4*this.textMargin,r=this.text.getBBox().height+2*this.textMargin,o=this.textMargin,s=r/2,l={x:o,y:s},c=[{x:o-this.textMargin,y:r},{x:o-this.textMargin+i,y:r},{x:o-this.textMargin+i+2*this.textMargin,y:0},{x:o-this.textMargin+2*this.textMargin,y:0},{x:o,y:s}],u=n(t,l,c);u.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),e.link&&u.attr("href",e.link),e.target&&u.attr("target",e.target),e.key&&(u.node.id=e.key),u.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:u.getBBox().height/2}),this.group.push(u),u.insertBefore(this.text),this.initialize()}function d(t,e){e=e||{},a.call(this,t,e),this.textMargin=this.getAttr("text-margin"),this.yes_direction="bottom",this.no_direction="right",e.yes&&e.direction_yes&&e.no&&!e.direction_no?"right"===e.direction_yes?(this.no_direction="bottom",this.yes_direction="right"):(this.no_direction="right",this.yes_direction="bottom"):e.yes&&!e.direction_yes&&e.no&&e.direction_no?"right"===e.direction_no?(this.yes_direction="bottom",this.no_direction="right"):(this.yes_direction="right",this.no_direction="bottom"):(this.yes_direction="bottom",this.no_direction="right"),this.yes_direction=this.yes_direction||"bottom",this.no_direction=this.no_direction||"right",this.text.attr({x:2*this.textMargin});var i=this.text.getBBox().width+3*this.textMargin;i+=i/2;var r=this.text.getBBox().height+2*this.textMargin;r+=r/2,r=Math.max(.5*i,r);var o=i/4,s=r/4;this.text.attr({x:o+this.textMargin/2});var l={x:o,y:s},c=[{x:o-i/4,y:s+r/4},{x:o-i/4+i/2,y:s+r/4+r/2},{x:o-i/4+i,y:s+r/4},{x:o-i/4+i/2,y:s+r/4-r/2},{x:o-i/4,y:s+r/4}],u=n(t,l,c);u.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),e.link&&u.attr("href",e.link),e.target&&u.attr("target",e.target),e.key&&(u.node.id=e.key),u.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:u.getBBox().height/2}),this.group.push(u),u.insertBefore(this.text),this.initialize()}function p(t){function e(t){var e=t.indexOf("(")+1,n=t.indexOf(")");return e>=0&&n>=0?i.symbols[t.substring(0,e-1)]:i.symbols[t]}function n(t){var e="next",n=t.indexOf("(")+1,i=t.indexOf(")");return n>=0&&i>=0&&(e=T.substring(n,i),e.indexOf(",")<0&&"yes"!==e&&"no"!==e&&(e="next, "+e)),e}t=t||"",t=t.trim();for(var i={symbols:{},start:null,drawSVG:function(t,e){function n(t){if(a[t.key])return a[t.key];switch(t.symbolType){case"start":a[t.key]=new s(r,t);break;case"end":a[t.key]=new l(r,t);break;case"operation":a[t.key]=new c(r,t);break;case"inputoutput":a[t.key]=new h(r,t);break;case"subroutine":a[t.key]=new u(r,t);break;case"condition":a[t.key]=new d(r,t);break;default:return new Error("Wrong symbol type!")}return a[t.key]}var i=this;this.diagram&&this.diagram.clean();var r=new o(t,e);this.diagram=r;var a={};!function t(e,o,a){var s=n(e);return i.start===e?r.startWith(s):o&&a&&!o.pathOk&&(o instanceof d?(a.yes===e&&o.yes(s),a.no===e&&o.no(s)):o.then(s)),s.pathOk?s:(s instanceof d?(e.yes&&t(e.yes,s,e),e.no&&t(e.no,s,e)):e.next&&t(e.next,s,e),s)}(this.start),r.render()},clean:function(){this.diagram.clean()}},r=[],a=0,p=1,f=t.length;f>p;p++)if("\n"===t[p]&&"\\"!==t[p-1]){var m=t.substring(a,p);a=p+1,r.push(m.replace(/\\\n/g,"\n"))}a<t.length&&r.push(t.substr(a));for(var g=1,v=r.length;v>g;){var y=r[g];y.indexOf(": ")<0&&y.indexOf("(")<0&&y.indexOf(")")<0&&y.indexOf("->")<0&&y.indexOf("=>")<0?(r[g-1]+="\n"+y,r.splice(g,1),v--):g++}for(;r.length>0;){var b=r.splice(0,1)[0];if(b.indexOf("=>")>=0){var _,x=b.split("=>"),w={key:x[0],symbolType:x[1],text:null,link:null,target:null,flowstate:null};if(w.symbolType.indexOf(": ")>=0&&(_=w.symbolType.split(": "),w.symbolType=_[0],w.text=_[1]),w.text&&w.text.indexOf(":>")>=0?(_=w.text.split(":>"),w.text=_[0],w.link=_[1]):w.symbolType.indexOf(":>")>=0&&(_=w.symbolType.split(":>"),w.symbolType=_[0],w.link=_[1]),w.symbolType.indexOf("\n")>=0&&(w.symbolType=w.symbolType.split("\n")[0]),w.link){var k=w.link.indexOf("[")+1,C=w.link.indexOf("]");k>=0&&C>=0&&(w.target=w.link.substring(k,C),w.link=w.link.substring(0,k-1))}if(w.text&&w.text.indexOf("|")>=0){var D=w.text.split("|");w.text=D[0],w.flowstate=D[1].trim()}i.symbols[w.key]=w}else if(b.indexOf("->")>=0)for(var S=b.split("->"),$=0,E=S.length;E>$;$++){var T=S[$],B=e(T),A=n(T),P=null;if(A.indexOf(",")>=0){var L=A.split(",");A=L[0],P=L[1].trim()}if(i.start||(i.start=B),E>$+1){var I=S[$+1];B[A]=e(I),B["direction_"+A]=P,P=null}}}return i}Array.prototype.indexOf||(Array.prototype.indexOf=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>0&&(i=Number(arguments[1]),i!=i?i=0:0!==i&&1/0!=i&&i!=-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var r=i>=0?i:Math.max(n-Math.abs(i),0);n>r;r++)if(r in e&&e[r]===t)return r;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var i=n;arguments.length>1&&(i=Number(arguments[1]),i!=i?i=0:0!==i&&i!=1/0&&i!=-(1/0)&&(i=(i>0||-1)*Math.floor(Math.abs(i))));for(var r=i>=0?Math.min(i,n-1):n-Math.abs(i);r>=0;r--)if(r in e&&e[r]===t)return r;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var f={},m={x:0,y:0,"line-width":3,"line-length":50,"text-margin":10,"font-size":14,"font-color":"black","line-color":"black","element-color":"black",fill:"white","yes-text":"yes","no-text":"no","arrow-end":"block",class:"flowchart",symbols:{start:{},end:{},condition:{},inputoutput:{},operation:{},subroutine:{}}},g={defaults:t,inherits:e};return o.prototype.handle=function(t){this.symbols.indexOf(t)<=-1&&this.symbols.push(t);var e=this;return t instanceof d?(t.yes=function(n){return t.yes_symbol=n,t.no_symbol&&(t.pathOk=!0),e.handle(n)},t.no=function(n){return t.no_symbol=n,t.yes_symbol&&(t.pathOk=!0),e.handle(n)}):t.then=function(n){return t.next=n,t.pathOk=!0,e.handle(n)},t},o.prototype.startWith=function(t){return this.start=t,this.handle(t)},o.prototype.render=function(){var t,e=0,n=0,i=0,r=0,o=0,a=0;for(i=0,r=this.symbols.length;r>i;i++)t=this.symbols[i],t.width>e&&(e=t.width),t.height>n&&(n=t.height);for(i=0,r=this.symbols.length;r>i;i++)t=this.symbols[i],t.shiftX(this.options.x+(e-t.width)/2+this.options["line-width"]),t.shiftY(this.options.y+(n-t.height)/2+this.options["line-width"]);for(this.start.render(),i=0,r=this.symbols.length;r>i;i++)t=this.symbols[i],t.renderLines();for(o=this.maxXFromLine,i=0,r=this.symbols.length;r>i;i++){t=this.symbols[i];var s=t.getX()+t.width,l=t.getY()+t.height;s>o&&(o=s),l>a&&(a=l)}this.paper.setSize(o+this.options["line-width"],a+this.options["line-width"])},o.prototype.clean=function(){if(this.paper){var t=this.paper.canvas;t.parentNode.removeChild(t)}},a.prototype.getAttr=function(t){if(this.chart){var e,n=this.chart.options?this.chart.options[t]:void 0,i=this.chart.options.symbols?this.chart.options.symbols[this.symbolType][t]:void 0;return this.chart.options.flowstate&&this.chart.options.flowstate[this.flowstate]&&(e=this.chart.options.flowstate[this.flowstate][t]),e||i||n}},a.prototype.initialize=function(){this.group.transform("t"+this.getAttr("line-width")+","+this.getAttr("line-width")),this.width=this.group.getBBox().width,this.height=this.group.getBBox().height},a.prototype.getCenter=function(){return{x:this.getX()+this.width/2,y:this.getY()+this.height/2}},a.prototype.getX=function(){return this.group.getBBox().x},a.prototype.getY=function(){return this.group.getBBox().y},a.prototype.shiftX=function(t){this.group.transform("t"+(this.getX()+t)+","+this.getY())},a.prototype.setX=function(t){this.group.transform("t"+t+","+this.getY())},a.prototype.shiftY=function(t){this.group.transform("t"+this.getX()+","+(this.getY()+t))},a.prototype.setY=function(t){this.group.transform("t"+this.getX()+","+t)},a.prototype.getTop=function(){var t=this.getY(),e=this.getX()+this.width/2;return{x:e,y:t}},a.prototype.getBottom=function(){var t=this.getY()+this.height,e=this.getX()+this.width/2;return{x:e,y:t}},a.prototype.getLeft=function(){var t=this.getY()+this.group.getBBox().height/2,e=this.getX();return{x:e,y:t}},a.prototype.getRight=function(){var t=this.getY()+this.group.getBBox().height/2,e=this.getX()+this.group.getBBox().width;return{x:e,y:t}},a.prototype.render=function(){if(this.next){var t=this.getAttr("line-length");if("right"===this.next_direction){var e=this.getRight();if(this.next.getLeft(),!this.next.isPositioned){this.next.setY(e.y-this.next.height/2),this.next.shiftX(this.group.getBBox().x+this.width+t);var n=this;!function e(){for(var i,r=!1,o=0,a=n.chart.symbols.length;a>o;o++){i=n.chart.symbols[o];var s=Math.abs(i.getCenter().x-n.next.getCenter().x);if(i.getCenter().y>n.next.getCenter().y&&s<=n.next.width/2){r=!0;break}}r&&(n.next.setX(i.getX()+i.width+t),e())}(),this.next.isPositioned=!0,this.next.render()}}else{var i=this.getBottom();this.next.getTop(),this.next.isPositioned||(this.next.shiftY(this.getY()+this.height+t),this.next.setX(i.x-this.next.width/2),this.next.isPositioned=!0,this.next.render())}}},a.prototype.renderLines=function(){this.next&&(this.next_direction?this.drawLineTo(this.next,"",this.next_direction):this.drawLineTo(this.next))},a.prototype.drawLineTo=function(t,e,n){this.connectedTo.indexOf(t)<0&&this.connectedTo.push(t);var o,a=this.getCenter().x,s=this.getCenter().y,l=(this.getTop(),this.getRight()),c=this.getBottom(),u=this.getLeft(),h=t.getCenter().x,d=t.getCenter().y,p=t.getTop(),f=t.getRight(),m=(t.getBottom(),t.getLeft()),g=a===h,v=s===d,y=d>s,b=s>d,_=a>h,x=h>a,w=0,k=this.getAttr("line-length"),C=this.getAttr("line-width");if(n&&"bottom"!==n||!g||!y)if(n&&"right"!==n||!v||!x)if(n&&"left"!==n||!v||!_)if(n&&"right"!==n||!g||!b)if(n&&"right"!==n||!g||!y)if(n&&"bottom"!==n||!_)if(n&&"bottom"!==n||!x)if(n&&"right"===n&&_)o=i(this.chart,l,[{x:l.x+k/2,y:l.y},{x:l.x+k/2,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.rightStart=!0,t.topEnd=!0,w=l.x+k/2;else if(n&&"right"===n&&x)o=i(this.chart,l,[{x:p.x,y:l.y},{x:p.x,y:p.y}],e),this.rightStart=!0,t.topEnd=!0,w=l.x+k/2;else if(n&&"bottom"===n&&g&&b)o=i(this.chart,c,[{x:c.x,y:c.y+k/2},{x:l.x+k/2,y:c.y+k/2},{x:l.x+k/2,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.bottomStart=!0,t.topEnd=!0,w=c.x+k/2;else if("left"===n&&g&&b){var D=u.x-k/2;m.x<u.x&&(D=m.x-k/2),o=i(this.chart,u,[{x:D,y:u.y},{x:D,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.leftStart=!0,t.topEnd=!0,w=u.x}else"left"===n&&(o=i(this.chart,u,[{x:p.x+(u.x-p.x)/2,y:u.y},{x:p.x+(u.x-p.x)/2,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.leftStart=!0,t.topEnd=!0,w=u.x);else o=i(this.chart,c,[{x:c.x,y:c.y+k/2},{x:c.x+(c.x-p.x)/2,y:c.y+k/2},{x:c.x+(c.x-p.x)/2,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.bottomStart=!0,t.topEnd=!0,w=c.x+(c.x-p.x)/2;else o=this.leftEnd&&b?i(this.chart,c,[{x:c.x,y:c.y+k/2},{x:c.x+(c.x-p.x)/2,y:c.y+k/2},{x:c.x+(c.x-p.x)/2,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e):i(this.chart,c,[{x:c.x,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.bottomStart=!0,t.topEnd=!0,w=c.x+(c.x-p.x)/2;else o=i(this.chart,l,[{x:l.x+k/2,y:l.y},{x:l.x+k/2,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.rightStart=!0,t.topEnd=!0,w=l.x+k/2;else o=i(this.chart,l,[{x:l.x+k/2,y:l.y},{x:l.x+k/2,y:p.y-k/2},{x:p.x,y:p.y-k/2},{x:p.x,y:p.y}],e),this.rightStart=!0,t.topEnd=!0,w=l.x+k/2;else o=i(this.chart,u,f,e),this.leftStart=!0,t.rightEnd=!0,w=f.x;else o=i(this.chart,l,m,e),this.rightStart=!0,t.leftEnd=!0,w=m.x;else o=i(this.chart,c,p,e),this.bottomStart=!0,t.topEnd=!0,w=c.x;if(o){for(var S=0,$=this.chart.lines.length;$>S;S++)for(var E,T=this.chart.lines[S],B=T.attr("path"),A=o.attr("path"),P=0,L=B.length-1;L>P;P++){var I=[];I.push(["M",B[P][1],B[P][2]]),I.push(["L",B[P+1][1],B[P+1][2]]);for(var F=I[0][1],M=I[0][2],O=I[1][1],j=I[1][2],R=0,N=A.length-1;N>R;R++){var q=[];q.push(["M",A[R][1],A[R][2]]),q.push(["L",A[R+1][1],A[R+1][2]]);var z=q[0][1],H=q[0][2],U=q[1][1],W=q[1][2],Y=r(F,M,O,j,z,H,U,W);if(Y.onLine1&&Y.onLine2){var X;H===W?z>U?(X=["L",Y.x+2*C,H],A.splice(R+1,0,X),X=["C",Y.x+2*C,H,Y.x,H-4*C,Y.x-2*C,H],A.splice(R+2,0,X),o.attr("path",A)):(X=["L",Y.x-2*C,H],A.splice(R+1,0,X),X=["C",Y.x-2*C,H,Y.x,H-4*C,Y.x+2*C,H],A.splice(R+2,0,X),o.attr("path",A)):H>W?(X=["L",z,Y.y+2*C],A.splice(R+1,0,X),X=["C",z,Y.y+2*C,z+4*C,Y.y,z,Y.y-2*C],A.splice(R+2,0,X),o.attr("path",A)):(X=["L",z,Y.y-2*C],A.splice(R+1,0,X),X=["C",z,Y.y-2*C,z+4*C,Y.y,z,Y.y+2*C],A.splice(R+2,0,X),o.attr("path",A)),R+=2,E+=2}}}this.chart.lines.push(o)}(!this.chart.maxXFromLine||this.chart.maxXFromLine&&w>this.chart.maxXFromLine)&&(this.chart.maxXFromLine=w)},g.inherits(s,a),g.inherits(l,a),g.inherits(c,a),g.inherits(u,a),g.inherits(h,a),h.prototype.getLeft=function(){var t=this.getY()+this.group.getBBox().height/2,e=this.getX()+this.textMargin;return{x:e,y:t}},h.prototype.getRight=function(){var t=this.getY()+this.group.getBBox().height/2,e=this.getX()+this.group.getBBox().width-this.textMargin;return{x:e,y:t}},g.inherits(d,a),d.prototype.render=function(){this.yes_direction&&(this[this.yes_direction+"_symbol"]=this.yes_symbol),this.no_direction&&(this[this.no_direction+"_symbol"]=this.no_symbol);var t=this.getAttr("line-length");if(this.bottom_symbol){var e=this.getBottom();this.bottom_symbol.getTop(),this.bottom_symbol.isPositioned||(this.bottom_symbol.shiftY(this.getY()+this.height+t),this.bottom_symbol.setX(e.x-this.bottom_symbol.width/2),this.bottom_symbol.isPositioned=!0,this.bottom_symbol.render())}if(this.right_symbol){var n=this.getRight();if(this.right_symbol.getLeft(),!this.right_symbol.isPositioned){this.right_symbol.setY(n.y-this.right_symbol.height/2),this.right_symbol.shiftX(this.group.getBBox().x+this.width+t);var i=this;!function e(){for(var n,r=!1,o=0,a=i.chart.symbols.length;a>o;o++){n=i.chart.symbols[o];var s=Math.abs(n.getCenter().x-i.right_symbol.getCenter().x);if(n.getCenter().y>i.right_symbol.getCenter().y&&s<=i.right_symbol.width/2){r=!0;break}}r&&(i.right_symbol.setX(n.getX()+n.width+t),e())}(),this.right_symbol.isPositioned=!0,this.right_symbol.render()}}},d.prototype.renderLines=function(){this.yes_symbol&&this.drawLineTo(this.yes_symbol,this.getAttr("yes-text"),this.yes_direction),this.no_symbol&&this.drawLineTo(this.no_symbol,this.getAttr("no-text"),this.no_direction)},f.parse=p,f}),define("flowChart",["jquery","Raphael","flow_diagram"],function(t,e,n){return function(t,e){var i;i=n.parse(t),i.drawSVG(e)}}),define("sequenceChart",[],function(){"use strict";return function(t){require(["jquery","Raphael","underscore","sequence_diagram"],function(e,n,i,r){t.sequenceDiagram({theme:"simple"})})}}),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define("Clipboard",[],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Clipboard=t()}}(function(){var t;return function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){var i=t("matches-selector");e.exports=function(t,e,n){for(var r=n?t:t.parentNode;r&&r!==document;){if(i(r,e))return r;r=r.parentNode}}},{"matches-selector":5}],2:[function(t,e,n){function i(t,e,n,i,o){var a=r.apply(this,arguments);return t.addEventListener(n,a,o),{destroy:function(){t.removeEventListener(n,a,o)}}}function r(t,e,n,i){return function(n){n.delegateTarget=o(n.target,e,!0),n.delegateTarget&&i.call(t,n)}}var o=t("closest");e.exports=i},{closest:1}],3:[function(t,e,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){
return"string"==typeof t||t instanceof String},n.fn=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e}},{}],4:[function(t,e,n){function i(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!s.string(e))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(t))return r(t,e,n);if(s.nodeList(t))return o(t,e,n);if(s.string(t))return a(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function r(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function o(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function a(t,e,n){return l(document.body,t,e,n)}var s=t("./is"),l=t("delegate");e.exports=i},{"./is":3,delegate:2}],5:[function(t,e,n){function i(t,e){if(o)return o.call(t,e);for(var n=t.parentNode.querySelectorAll(e),i=0;i<n.length;++i)if(n[i]==t)return!0;return!1}var r=Element.prototype,o=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;e.exports=i},{}],6:[function(t,e,n){function i(t){var e;if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName)t.focus(),t.setSelectionRange(0,t.value.length),e=t.value;else{t.hasAttribute("contenteditable")&&t.focus();var n=window.getSelection(),i=document.createRange();i.selectNodeContents(t),n.removeAllRanges(),n.addRange(i),e=n.toString()}return e}e.exports=i},{}],7:[function(t,e,n){function i(){}i.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function i(){r.off(t,i),e.apply(n,arguments)}var r=this;return i._=e,this.on(t,i,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;for(i;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var o=0,a=i.length;o<a;o++)i[o].fn!==e&&i[o].fn._!==e&&r.push(i[o]);return r.length?n[t]=r:delete n[t],this}},e.exports=i},{}],8:[function(e,n,i){!function(r,o){if("function"==typeof t&&t.amd)t(["module","select"],o);else if("undefined"!=typeof i)o(n,e("select"));else{var a={exports:{}};o(a,r.select),r.clipboardAction=a.exports}}(this,function(t,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(e),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e){i(this,t),this.resolveOptions(e),this.initSelection()}return t.prototype.resolveOptions=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action=t.action,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""},t.prototype.initSelection=function(){this.text?this.selectFake():this.target&&this.selectTarget()},t.prototype.selectFake=function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px",this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()},t.prototype.removeFake=function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},t.prototype.selectTarget=function(){this.selectedText=(0,r.default)(this.target),this.copyText()},t.prototype.copyText=function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)},t.prototype.handleResult=function(t){t?this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},t.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},t.prototype.destroy=function(){this.removeFake()},a(t,[{key:"action",set:function(){var t=arguments.length<=0||void 0===arguments[0]?"copy":arguments[0];if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==("undefined"==typeof t?"undefined":o(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=s})},{select:6}],9:[function(e,n,i){!function(r,o){if("function"==typeof t&&t.amd)t(["module","./clipboard-action","tiny-emitter","good-listener"],o);else if("undefined"!=typeof i)o(n,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"));else{var a={exports:{}};o(a,r.clipboardAction,r.tinyEmitter,r.goodListener),r.clipboard=a.exports}}(this,function(t,e,n,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var c=r(e),u=r(n),h=r(i),d=function(t){function e(n,i){o(this,e);var r=a(this,t.call(this));return r.resolveOptions(i),r.listenClick(n),r}return s(e,t),e.prototype.resolveOptions=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText},e.prototype.listenClick=function(t){var e=this;this.listener=(0,h.default)(t,"click",function(t){return e.onClick(t)})},e.prototype.onClick=function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c.default({action:this.action(e),target:this.target(e),text:this.text(e),trigger:e,emitter:this})},e.prototype.defaultAction=function(t){return l("action",t)},e.prototype.defaultTarget=function(t){var e=l("target",t);if(e)return document.querySelector(e)},e.prototype.defaultText=function(t){return l("text",t)},e.prototype.destroy=function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)},e}(u.default);t.exports=d})},{"./clipboard-action":8,"good-listener":4,"tiny-emitter":7}]},{},[9])(9)}),define("emojiList",[],function(){return["+1","-1","100","1234","8ball","a","ab","abc","abcd","accept","aerial_tramway","airplane","alarm_clock","alien","ambulance","anchor","angel","anger","angry","anguished","ant","apple","aquarius","aries","arrow_backward","arrow_double_down","arrow_double_up","arrow_down","arrow_down_small","arrow_forward","arrow_heading_down","arrow_heading_up","arrow_left","arrow_lower_left","arrow_lower_right","arrow_right","arrow_right_hook","arrow_up","arrow_up_down","arrow_up_small","arrow_upper_left","arrow_upper_right","arrows_clockwise","arrows_counterclockwise","art","articulated_lorry","astonished","atm","b","baby","baby_bottle","baby_chick","baby_symbol","back","baggage_claim","balloon","ballot_box_with_check","bamboo","banana","bangbang","bank","bar_chart","barber","baseball","basketball","bath","bathtub","battery","bear","bee","beer","beers","beetle","beginner","bell","bento","bicyclist","bike","bikini","bird","birthday","black_circle","black_joker","black_medium_small_square","black_medium_square","black_nib","black_small_square","black_square","black_square_button","blossom","blowfish","blue_book","blue_car","blue_heart","blush","boar","boat","bomb","book","bookmark","bookmark_tabs","books","boom","boot","bouquet","bow","bowling","bowtie","boy","bread","bride_with_veil","bridge_at_night","briefcase","broken_heart","bug","bulb","bullettrain_front","bullettrain_side","bus","busstop","bust_in_silhouette","busts_in_silhouette","cactus","cake","calendar","calling","camel","camera","cancer","candy","capital_abcd","capricorn","car","card_index","carousel_horse","cat","cat2","cd","chart","chart_with_downwards_trend","chart_with_upwards_trend","checkered_flag","cherries","cherry_blossom","chestnut","chicken","children_crossing","chocolate_bar","christmas_tree","church","cinema","circus_tent","city_sunrise","city_sunset","cl","clap","clapper","clipboard","clock1","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","closed_book","closed_lock_with_key","closed_umbrella","cloud","clubs","cn","cocktail","coffee","cold_sweat","collision","computer","confetti_ball","confounded","confused","congratulations","construction","construction_worker","convenience_store","cookie","cool","cop","copyright","corn","couple","couple_with_heart","couplekiss","cow","cow2","credit_card","crescent_moon","crocodile","crossed_flags","crown","cry","crying_cat_face","crystal_ball","cupid","curly_loop","currency_exchange","curry","custard","customs","cyclone","dancer","dancers","dango","dart","dash","date","de","deciduous_tree","department_store","diamond_shape_with_a_dot_inside","diamonds","disappointed","disappointed_relieved","dizzy","dizzy_face","do_not_litter","dog","dog2","dollar","dolls","dolphin","donut","door","doughnut","dragon","dragon_face","dress","dromedary_camel","droplet","dvd","e-mail","ear","ear_of_rice","earth_africa","earth_americas","earth_asia","egg","eggplant","eight","eight_pointed_black_star","eight_spoked_asterisk","electric_plug","elephant","email","end","envelope","es","euro","european_castle","european_post_office","evergreen_tree","exclamation","expressionless","eyeglasses","eyes","facepunch","factory","fallen_leaf","family","fast_forward","fax","fearful","feelsgood","feet","ferris_wheel","file_folder","finnadie","fire","fire_engine","fireworks","first_quarter_moon","first_quarter_moon_with_face","fish","fish_cake","fishing_pole_and_fish","fist","five","flags","flashlight","floppy_disk","flower_playing_cards","flushed","foggy","football","fork_and_knife","fountain","four","four_leaf_clover","fr","free","fried_shrimp","fries","frog","frowning","fu","fuelpump","full_moon","full_moon_with_face","game_die","gb","gem","gemini","ghost","gift","gift_heart","girl","globe_with_meridians","goat","goberserk","godmode","golf","grapes","green_apple","green_book","green_heart","grey_exclamation","grey_question","grimacing","grin","grinning","guardsman","guitar","gun","haircut","hamburger","hammer","hamster","hand","handbag","hankey","hash","hatched_chick","hatching_chick","headphones","hear_no_evil","heart","heart_decoration","heart_eyes","heart_eyes_cat","heartbeat","heartpulse","hearts","heavy_check_mark","heavy_division_sign","heavy_dollar_sign","heavy_exclamation_mark","heavy_minus_sign","heavy_multiplication_x","heavy_plus_sign","helicopter","herb","hibiscus","high_brightness","high_heel","hocho","honey_pot","honeybee","horse","horse_racing","hospital","hotel","hotsprings","hourglass","hourglass_flowing_sand","house","house_with_garden","hurtrealbad","hushed","ice_cream","icecream","id","ideograph_advantage","imp","inbox_tray","incoming_envelope","information_desk_person","information_source","innocent","interrobang","iphone","it","izakaya_lantern","jack_o_lantern","japan","japanese_castle","japanese_goblin","japanese_ogre","jeans","joy","joy_cat","jp","key","keycap_ten","kimono","kiss","kissing","kissing_cat","kissing_closed_eyes","kissing_face","kissing_heart","kissing_smiling_eyes","koala","koko","kr","large_blue_circle","large_blue_diamond","large_orange_diamond","last_quarter_moon","last_quarter_moon_with_face","laughing","leaves","ledger","left_luggage","left_right_arrow","leftwards_arrow_with_hook","lemon","leo","leopard","libra","light_rail","link","lips","lipstick","lock","lock_with_ink_pen","lollipop","loop","loudspeaker","love_hotel","love_letter","low_brightness","m","mag","mag_right","mahjong","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","man","man_with_gua_pi_mao","man_with_turban","mans_shoe","maple_leaf","mask","massage","meat_on_bone","mega","melon","memo","mens","metal","metro","microphone","microscope","milky_way","minibus","minidisc","mobile_phone_off","money_with_wings","moneybag","monkey","monkey_face","monorail","mortar_board","mount_fuji","mountain_bicyclist","mountain_cableway","mountain_railway","mouse","mouse2","movie_camera","moyai","muscle","mushroom","musical_keyboard","musical_note","musical_score","mute","nail_care","name_badge","neckbeard","necktie","negative_squared_cross_mark","neutral_face","new","new_moon","new_moon_with_face","newspaper","ng","nine","no_bell","no_bicycles","no_entry","no_entry_sign","no_good","no_mobile_phones","no_mouth","no_pedestrians","no_smoking","non-potable_water","nose","notebook","notebook_with_decorative_cover","notes","nut_and_bolt","o","o2","ocean","octocat","octopus","oden","office","ok","ok_hand","ok_woman","older_man","older_woman","on","oncoming_automobile","oncoming_bus","oncoming_police_car","oncoming_taxi","one","open_file_folder","open_hands","open_mouth","ophiuchus","orange_book","outbox_tray","ox","package","page_facing_up","page_with_curl","pager","palm_tree","panda_face","paperclip","parking","part_alternation_mark","partly_sunny","passport_control","paw_prints","peach","pear","pencil","pencil2","penguin","pensive","performing_arts","persevere","person_frowning","person_with_blond_hair","person_with_pouting_face","phone","pig","pig2","pig_nose","pill","pineapple","pisces","pizza","plus1","point_down","point_left","point_right","point_up","point_up_2","police_car","poodle","poop","post_office","postal_horn","postbox","potable_water","pouch","poultry_leg","pound","pouting_cat","pray","princess","punch","purple_heart","purse","pushpin","put_litter_in_its_place","question","rabbit","rabbit2","racehorse","radio","radio_button","rage","rage1","rage2","rage3","rage4","railway_car","rainbow","raised_hand","raised_hands","raising_hand","ram","ramen","rat","recycle","red_car","red_circle","registered","relaxed","relieved","repeat","repeat_one","restroom","revolving_hearts","rewind","ribbon","rice","rice_ball","rice_cracker","rice_scene","ring","rocket","roller_coaster","rooster","rose","rotating_light","round_pushpin","rowboat","ru","rugby_football","runner","running","running_shirt_with_sash","sa","sagittarius","sailboat","sake","sandal","santa","satellite","satisfied","saxophone","school","school_satchel","scissors","scorpius","scream","scream_cat","scroll","seat","secret","see_no_evil","seedling","seven","shaved_ice","sheep","shell","ship","shipit","shirt","shit","shoe","shower","signal_strength","six","six_pointed_star","ski","skull","sleeping","sleepy","slot_machine","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","smile","smile_cat","smiley","smiley_cat","smiling_imp","smirk","smirk_cat","smoking","snail","snake","snowboarder","snowflake","snowman","sob","soccer","soon","sos","sound","space_invader","spades","spaghetti","sparkle","sparkler","sparkles","sparkling_heart","speak_no_evil","speaker","speech_balloon","speedboat","squirrel","star","star2","stars","station","statue_of_liberty","steam_locomotive","stew","straight_ruler","strawberry","stuck_out_tongue","stuck_out_tongue_closed_eyes","stuck_out_tongue_winking_eye","sun_with_face","sunflower","sunglasses","sunny","sunrise","sunrise_over_mountains","surfer","sushi","suspect","suspension_railway","sweat","sweat_drops","sweat_smile","sweet_potato","swimmer","symbols","syringe","tada","tanabata_tree","tangerine","taurus","taxi","tea","telephone","telephone_receiver","telescope","tennis","tent","thought_balloon","three","thumbsdown","thumbsup","ticket","tiger","tiger2","tired_face","tm","toilet","tokyo_tower","tomato","tongue","top","tophat","tractor","traffic_light","train","train2","tram","triangular_flag_on_post","triangular_ruler","trident","triumph","trolleybus","trollface","trophy","tropical_drink","tropical_fish","truck","trumpet","tshirt","tulip","turtle","tv","twisted_rightwards_arrows","two","two_hearts","two_men_holding_hands","two_women_holding_hands","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7981","u7a7a","uk","umbrella","unamused","underage","unlock","up","us","v","vertical_traffic_light","vhs","vibration_mode","video_camera","video_game","violin","virgo","volcano","vs","walking","waning_crescent_moon","waning_gibbous_moon","warning","watch","water_buffalo","watermelon","wave","wavy_dash","waxing_crescent_moon","waxing_gibbous_moon","wc","weary","wedding","whale","whale2","wheelchair","white_check_mark","white_circle","white_flower","white_large_square","white_medium_small_square","white_medium_square","white_small_square","white_square_button","wind_chime","wine_glass","wink","wolf","woman","womans_clothes","womans_hat","womens","worried","wrench","x","yellow_heart","yen","yum","zap","zero","zzz"]}),define("highLight",["main","math","flowChart","sequenceChart","Clipboard","emojiList","jquery_hoverIntent"],function(t,e,n,i,r,o){"use strict";var a=function(){function e(){t.loadScript(t.staticUrl+"/3rd/highlightjs/highlight.pack.js",function(){i=!0;for(var t=0;t<n.length;t++)hljs.highlightBlock(n[t])})}var n=[],i=!1;return function(t){return i?void hljs.highlightBlock(t):(n.push(t),e())}}();return function(s){var l,c,u,h,d,p;d=function(e){var n;if(n=e.attr("class").trim().replace(/emoji[ \-]/g,""),o.indexOf(n)!==-1)return e.after('<img src="'+t.staticUrl+"/global/img/emojis/"+n+'.png" class="emoji" alt="'+n+'" title="'+n+'" />'),e.remove()},u=/((?:0\u20E3|1\u20E3|2\u20E3|3\u20E3|4\u20E3|5\u20E3|6\u20E3|7\u20E3|8\u20E3|9\u20E3|#\u20E3|\*\u20E3|\uD83C(?:\uDDE6\uD83C(?:\uDDE8|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDEE|\uDDF1|\uDDF2|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFC|\uDDFD|\uDDFF)|\uDDE7\uD83C(?:\uDDE6|\uDDE7|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDEF|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFB|\uDDFC|\uDDFE|\uDDFF)|\uDDE8\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF5|\uDDF7|\uDDFA|\uDDFB|\uDDFC|\uDDFD|\uDDFE|\uDDFF)|\uDDE9\uD83C(?:\uDDEA|\uDDEC|\uDDEF|\uDDF0|\uDDF2|\uDDF4|\uDDFF)|\uDDEA\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEC|\uDDED|\uDDF7|\uDDF8|\uDDF9|\uDDFA)|\uDDEB\uD83C(?:\uDDEE|\uDDEF|\uDDF0|\uDDF2|\uDDF4|\uDDF7)|\uDDEC\uD83C(?:\uDDE6|\uDDE7|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDEE|\uDDF1|\uDDF2|\uDDF3|\uDDF5|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFC|\uDDFE)|\uDDED\uD83C(?:\uDDF0|\uDDF2|\uDDF3|\uDDF7|\uDDF9|\uDDFA)|\uDDEE\uD83C(?:\uDDE8|\uDDE9|\uDDEA|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF6|\uDDF7|\uDDF8|\uDDF9)|\uDDEF\uD83C(?:\uDDEA|\uDDF2|\uDDF4|\uDDF5)|\uDDF0\uD83C(?:\uDDEA|\uDDEC|\uDDED|\uDDEE|\uDDF2|\uDDF3|\uDDF5|\uDDF7|\uDDFC|\uDDFE|\uDDFF)|\uDDF1\uD83C(?:\uDDE6|\uDDE7|\uDDE8|\uDDEE|\uDDF0|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFB|\uDDFE)|\uDDF2\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF5|\uDDF6|\uDDF7|\uDDF8|\uDDF9|\uDDFA|\uDDFB|\uDDFC|\uDDFD|\uDDFE|\uDDFF)|\uDDF3\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEB|\uDDEC|\uDDEE|\uDDF1|\uDDF4|\uDDF5|\uDDF7|\uDDFA|\uDDFF)|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C(?:\uDDE6|\uDDEA|\uDDEB|\uDDEC|\uDDED|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF7|\uDDF8|\uDDF9|\uDDFC|\uDDFE)|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C(?:\uDDEA|\uDDF4|\uDDF8|\uDDFA|\uDDFC)|\uDDF8\uD83C(?:\uDDE6|\uDDE7|\uDDE8|\uDDE9|\uDDEA|\uDDEC|\uDDED|\uDDEE|\uDDEF|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF7|\uDDF8|\uDDF9|\uDDFB|\uDDFD|\uDDFE|\uDDFF)|\uDDF9\uD83C(?:\uDDE6|\uDDE8|\uDDE9|\uDDEB|\uDDEC|\uDDED|\uDDEF|\uDDF0|\uDDF1|\uDDF2|\uDDF3|\uDDF4|\uDDF7|\uDDF9|\uDDFB|\uDDFC|\uDDFF)|\uDDFA\uD83C(?:\uDDE6|\uDDEC|\uDDF2|\uDDF8|\uDDFE|\uDDFF)|\uDDFB\uD83C(?:\uDDE6|\uDDE8|\uDDEA|\uDDEC|\uDDEE|\uDDF3|\uDDFA)|\uDDFC\uD83C(?:\uDDEB|\uDDF8)|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C(?:\uDDEA|\uDDF9)|\uDDFF\uD83C(?:\uDDE6|\uDDF2|\uDDFC)))|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2694\u2696\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD79\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED0\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3]|\uD83E[\uDD10-\uDD18\uDD80-\uDD84\uDDC0])/g,s?(s.find("h1, h2, h3, strong").each(function(){return $(this).html($(this).html().replace(u,'<span style="font-weight:normal;">$1</span>'))}),s.find("span.emoji").each(function(){return d($(this))})):($("h1, h2, h3, strong").each(function(){return $(this).html($(this).html().replace(u,'<span style="font-weight:normal;">$1</span>'))}),$("span.emoji").each(function(){return d($(this))})),p=function(t){var e,n,i,r;return e=document,r=t.get(0),e.body.createTextRange?(n=e.body.createTextRange(),n.moveToElementText(r),n.select()):window.getSelection?(i=window.getSelection(),n=e.createRange(),n.selectNodeContents(r),i.removeAllRanges(),i.addRange(n)):void 0},c=function(t){var e,n,i,o;o='\n      <div class="widget-codetool" style="display:none;">\n      <div class="widget-codetool--inner">\n      <span class="selectCode code-tool" data-toggle="tooltip" data-placement="top" title="全选"></span>\n      <span type="button" class="copyCode code-tool" data-toggle="tooltip" data-placement="top"  data-clipboard-text="" title="复制"></span>\n      </div>\n      </div>\n      ',i=$(o),t.before(i),$('[data-toggle="tooltip"]').tooltip({container:"body"}),n=i.find(".copyCode"),e=t.children("code"),t.hoverIntent({interval:50,over:function(){i.show()},out:function(){i.is(":hover")||i.hide()}}),i.hoverIntent({interval:50,over:function(){},out:function(){t.is(":hover")||i.hide()}}),i.find(".selectCode").click(function(){return p(e)}),n.attr("data-clipboard-text",e.text());var a=new r(".copyCode");a.on("success",function(t){$(".copyCode").attr("data-original-title","复制"),$(t.trigger).attr("data-original-title","已复制").tooltip("show"),t.clearSelection()}),a.on("error",function(t){$(t.trigger).prev().trigger("click"),$(".copyCode").attr("data-original-title","复制"),$(t.trigger).attr("data-original-title","按 ⌘+c 复制").tooltip("show")})},h=function(t){var e,r,o,l,u,h,d,p,f,m,g,v;m=t,h={actionscript:/^as[1-3]$/i,cmake:/^(make|makefile)$/i,cs:/^csharp$/i,typescript:/^ts$/i,css:/^css[1-3]$/i,javascript:/^js$/i,markdown:/^md$/i,objectivec:/^(oc|objective-c)$/i,php:/^php[1-6]$/i,sql:/^mysql$/i,xml:/^(html|html5|xhtml)$/i,flow:/^flow$/i,sequence:/^sequence$/i},l=void 0,u=["objectivec","lisp","scala","typescript","groovy","sql","actionscript","xml","markdown","perl","java","bash","shell","clojure","kotlin","fortran","lua","swift","json","nginx","ini","css","javascript","makefile","ruby","basic","cs","coffeescript","go","php","erlang","cpp","haskell","properties","diff","apache","dart","rust","cmake","r","python"],o=void 0,e=void 0,f=!1,v=!1,2===m.children("code").length?(e=m.children("code").first().text(),m.children("code").first().remove(),o=m.children("code").addClass(e)):(o=m.children("code"),1===o.text().split("\n").length&&o.css({"word-break":"break-word","white-space":"initial"}),e=o.attr("class")),e&&(r=e.split(/\s+/),r.indexOf("nohighlight")!==-1&&(f=!0),r.forEach(function(t){var e,n;if(n=t.toLowerCase(),u.indexOf(n)!==-1)l=n;else for(e in h)n.match(h[e])&&(l=e)}),l&&m.attr("class",l)),l&&("flow"===l?(p=$(".flowChart").length,o.parent().after('<div id="flowDiagram'+p+'" class="flowChart"></div>'),n(o.text(),"flowDiagram"+p),o.parent().remove(),v=!0):"sequence"===l&&(s=o.parent(),g=o.text(),p=$(".sequenceChart").length,s.replaceWith('<div id="sequenceDiagram'+p+'" class="sequenceChart">'+g+"</div>"),i($("#sequenceDiagram"+p)),v=!0)),f||v||(d=m.html(),d.length<1e4&&a(m[0])),c(m)},s?(l=s.text().indexOf("$$"),l!==-1&&e(s),s.find("pre").each(function(){h($(this))})):(l=!1,$(".fmt").each(function(){$(this).text().indexOf("$$")!==-1&&(l=!0)}),l&&e(),$(".fmt pre").each(function(){h($(this))}))}}),function(t){t.fn.qrcode=function(e){function n(t){this.mode=s,this.data=t}function i(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function r(t,e){if(void 0==t.length)throw Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;this.num=Array(t.length-n+e);for(var i=0;i<t.length-n;i++)this.num[i]=t[i+n]}function o(t,e){this.totalCount=t,this.dataCount=e}function a(){this.buffer=[],this.length=0}var s;n.prototype={getLength:function(){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}},i.prototype={addData:function(t){this.dataList.push(new n(t)),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var t=1,t=1;40>t;t++){for(var e=o.getRSBlocks(t,this.errorCorrectLevel),n=new a,i=0,r=0;r<e.length;r++)i+=e[r].dataCount;for(r=0;r<this.dataList.length;r++)e=this.dataList[r],n.put(e.mode,4),n.put(e.getLength(),l.getLengthInBits(e.mode,t)),e.write(n);if(n.getLengthInBits()<=8*i)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),7<=this.typeNumber&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var n=-1;7>=n;n++)if(!(-1>=t+n||this.moduleCount<=t+n))for(var i=-1;7>=i;i++)-1>=e+i||this.moduleCount<=e+i||(this.modules[t+n][e+i]=0<=n&&6>=n&&(0==i||6==i)||0<=i&&6>=i&&(0==n||6==n)||2<=n&&4>=n&&2<=i&&4>=i)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;8>n;n++){this.makeImpl(!0,n);var i=l.getLostPoint(this);(0==n||t>i)&&(t=i,e=n)}return e},createMovieClip:function(t,e,n){for(t=t.createEmptyMovieClip(e,n),this.make(),e=0;e<this.modules.length;e++)for(var n=1*e,i=0;i<this.modules[e].length;i++){var r=1*i;this.modules[e][i]&&(t.beginFill(0,100),t.moveTo(r,n),t.lineTo(r+1,n),t.lineTo(r+1,n+1),t.lineTo(r,n+1),t.endFill())}return t},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=0==t%2);for(t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=0==t%2)},setupPositionAdjustPattern:function(){for(var t=l.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var i=t[e],r=t[n];if(null==this.modules[i][r])for(var o=-2;2>=o;o++)for(var a=-2;2>=a;a++)this.modules[i+o][r+a]=-2==o||2==o||-2==a||2==a||0==o&&0==a}},setupTypeNumber:function(t){for(var e=l.getBCHTypeNumber(this.typeNumber),n=0;18>n;n++){var i=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(n=0;18>n;n++)i=!t&&1==(e>>n&1),this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i},setupTypeInfo:function(t,e){for(var n=l.getBCHTypeInfo(this.errorCorrectLevel<<3|e),i=0;15>i;i++){var r=!t&&1==(n>>i&1);6>i?this.modules[i][8]=r:8>i?this.modules[i+1][8]=r:this.modules[this.moduleCount-15+i][8]=r}for(i=0;15>i;i++)r=!t&&1==(n>>i&1),8>i?this.modules[8][this.moduleCount-i-1]=r:9>i?this.modules[8][15-i-1+1]=r:this.modules[8][15-i-1]=r;this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,i=this.moduleCount-1,r=7,o=0,a=this.moduleCount-1;0<a;a-=2)for(6==a&&a--;;){for(var s=0;2>s;s++)if(null==this.modules[i][a-s]){var c=!1;o<t.length&&(c=1==(t[o]>>>r&1)),l.getMask(e,i,a-s)&&(c=!c),this.modules[i][a-s]=c,r--,-1==r&&(o++,r=7)}if(i+=n,0>i||this.moduleCount<=i){i-=n,n=-n;break}}}},i.PAD0=236,i.PAD1=17,i.createData=function(t,e,n){for(var e=o.getRSBlocks(t,e),r=new a,s=0;s<n.length;s++){var c=n[s];r.put(c.mode,4),r.put(c.getLength(),l.getLengthInBits(c.mode,t)),c.write(r)}for(s=t=0;s<e.length;s++)t+=e[s].dataCount;if(r.getLengthInBits()>8*t)throw Error("code length overflow. ("+r.getLengthInBits()+">"+8*t+")");for(r.getLengthInBits()+4<=8*t&&r.put(0,4);0!=r.getLengthInBits()%8;)r.putBit(!1);for(;!(r.getLengthInBits()>=8*t)&&(r.put(i.PAD0,8),!(r.getLengthInBits()>=8*t));)r.put(i.PAD1,8);return i.createBytes(r,e)},i.createBytes=function(t,e){for(var n=0,i=0,o=0,a=Array(e.length),s=Array(e.length),c=0;c<e.length;c++){var u=e[c].dataCount,h=e[c].totalCount-u,i=Math.max(i,u),o=Math.max(o,h);a[c]=Array(u);for(var d=0;d<a[c].length;d++)a[c][d]=255&t.buffer[d+n];for(n+=u,d=l.getErrorCorrectPolynomial(h),u=new r(a[c],d.getLength()-1).mod(d),s[c]=Array(d.getLength()-1),d=0;d<s[c].length;d++)h=d+u.getLength()-s[c].length,s[c][d]=0<=h?u.get(h):0}for(d=c=0;d<e.length;d++)c+=e[d].totalCount;
for(n=Array(c),d=u=0;d<i;d++)for(c=0;c<e.length;c++)d<a[c].length&&(n[u++]=a[c][d]);for(d=0;d<o;d++)for(c=0;c<e.length;c++)d<s[c].length&&(n[u++]=s[c][d]);return n},s=4;for(var l={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;0<=l.getBCHDigit(e)-l.getBCHDigit(l.G15);)e^=l.G15<<l.getBCHDigit(e)-l.getBCHDigit(l.G15);return(t<<10|e)^l.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;0<=l.getBCHDigit(e)-l.getBCHDigit(l.G18);)e^=l.G18<<l.getBCHDigit(e)-l.getBCHDigit(l.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return l.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,n){switch(t){case 0:return 0==(e+n)%2;case 1:return 0==e%2;case 2:return 0==n%3;case 3:return 0==(e+n)%3;case 4:return 0==(Math.floor(e/2)+Math.floor(n/3))%2;case 5:return 0==e*n%2+e*n%3;case 6:return 0==(e*n%2+e*n%3)%2;case 7:return 0==(e*n%3+(e+n)%2)%2;default:throw Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new r([1],0),n=0;n<t;n++)e=e.multiply(new r([1,c.gexp(n)],0));return e},getLengthInBits:function(t,e){if(1<=e&&10>e)switch(t){case 1:return 10;case 2:return 9;case s:return 8;case 8:return 8;default:throw Error("mode:"+t)}else if(27>e)switch(t){case 1:return 12;case 2:return 11;case s:return 16;case 8:return 10;default:throw Error("mode:"+t)}else{if(!(41>e))throw Error("type:"+e);switch(t){case 1:return 14;case 2:return 13;case s:return 16;case 8:return 12;default:throw Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),n=0,i=0;i<e;i++)for(var r=0;r<e;r++){for(var o=0,a=t.isDark(i,r),s=-1;1>=s;s++)if(!(0>i+s||e<=i+s))for(var l=-1;1>=l;l++)0>r+l||e<=r+l||0==s&&0==l||a==t.isDark(i+s,r+l)&&o++;5<o&&(n+=3+o-5)}for(i=0;i<e-1;i++)for(r=0;r<e-1;r++)o=0,t.isDark(i,r)&&o++,t.isDark(i+1,r)&&o++,t.isDark(i,r+1)&&o++,t.isDark(i+1,r+1)&&o++,(0==o||4==o)&&(n+=3);for(i=0;i<e;i++)for(r=0;r<e-6;r++)t.isDark(i,r)&&!t.isDark(i,r+1)&&t.isDark(i,r+2)&&t.isDark(i,r+3)&&t.isDark(i,r+4)&&!t.isDark(i,r+5)&&t.isDark(i,r+6)&&(n+=40);for(r=0;r<e;r++)for(i=0;i<e-6;i++)t.isDark(i,r)&&!t.isDark(i+1,r)&&t.isDark(i+2,r)&&t.isDark(i+3,r)&&t.isDark(i+4,r)&&!t.isDark(i+5,r)&&t.isDark(i+6,r)&&(n+=40);for(r=o=0;r<e;r++)for(i=0;i<e;i++)t.isDark(i,r)&&o++;return t=Math.abs(100*o/e/e-50)/5,n+10*t}},c={glog:function(t){if(1>t)throw Error("glog("+t+")");return c.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;256<=t;)t-=255;return c.EXP_TABLE[t]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},u=0;8>u;u++)c.EXP_TABLE[u]=1<<u;for(u=8;256>u;u++)c.EXP_TABLE[u]=c.EXP_TABLE[u-4]^c.EXP_TABLE[u-5]^c.EXP_TABLE[u-6]^c.EXP_TABLE[u-8];for(u=0;255>u;u++)c.LOG_TABLE[c.EXP_TABLE[u]]=u;return r.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=Array(this.getLength()+t.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<t.getLength();i++)e[n+i]^=c.gexp(c.glog(this.get(n))+c.glog(t.get(i)));return new r(e,0)},mod:function(t){if(0>this.getLength()-t.getLength())return this;for(var e=c.glog(this.get(0))-c.glog(t.get(0)),n=Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(i=0;i<t.getLength();i++)n[i]^=c.gexp(c.glog(t.get(i))+e);return new r(n,0).mod(t)}},o.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],o.getRSBlocks=function(t,e){var n=o.getRsBlockTable(t,e);if(void 0==n)throw Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var i=n.length/3,r=[],a=0;a<i;a++)for(var s=n[3*a+0],l=n[3*a+1],c=n[3*a+2],u=0;u<s;u++)r.push(new o(l,c));return r},o.getRsBlockTable=function(t,e){switch(e){case 1:return o.RS_BLOCK_TABLE[4*(t-1)+0];case 0:return o.RS_BLOCK_TABLE[4*(t-1)+1];case 3:return o.RS_BLOCK_TABLE[4*(t-1)+2];case 2:return o.RS_BLOCK_TABLE[4*(t-1)+3]}},a.prototype={get:function(t){return 1==(this.buffer[Math.floor(t/8)]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},"string"==typeof e&&(e={text:e}),e=t.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},e),this.each(function(){var n;if("canvas"==e.render){n=new i(e.typeNumber,e.correctLevel),n.addData(e.text),n.make();var r=document.createElement("canvas");r.width=e.width,r.height=e.height;for(var o=r.getContext("2d"),a=e.width/n.getModuleCount(),s=e.height/n.getModuleCount(),l=0;l<n.getModuleCount();l++)for(var c=0;c<n.getModuleCount();c++){o.fillStyle=n.isDark(l,c)?e.foreground:e.background;var u=Math.ceil((c+1)*a)-Math.floor(c*a),h=Math.ceil((l+1)*a)-Math.floor(l*a);o.fillRect(Math.round(c*a),Math.round(l*s),u,h)}}else for(n=new i(e.typeNumber,e.correctLevel),n.addData(e.text),n.make(),r=t("<table></table>").css("width",e.width+"px").css("height",e.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",e.background),o=e.width/n.getModuleCount(),a=e.height/n.getModuleCount(),s=0;s<n.getModuleCount();s++)for(l=t("<tr></tr>").css("height",a+"px").appendTo(r),c=0;c<n.getModuleCount();c++)t("<td></td>").css("width",o+"px").css("background-color",n.isDark(s,c)?e.foreground:e.background).appendTo(l);n=r,jQuery(n).appendTo(this)})}}(jQuery),define("jquery_qrcode",["jquery"],function(t){return function(){var e;return e||t.$.fn.qrcode}}(this)),define("sf_pay",["jquery","sfModal","isMobile","pingpp","jquery_qrcode"],function(t,e,n,i){return function(r){var o=void 0;o=0===r.type?'\n          <style>.modal-footer{display:none;}</style>\n          <div class="sf__pay-tpl">\n              '+(r.isDiscounted?'                <p class="text-center mb4 sf__pay-discount">讲座价格 <span>￥'+r.originPrice+'</span></p>                <p class="text-center sf__pay-discount">优惠 <span>￥'+r.discountPrice+'</span></p>                <div class="sf__pay-discount-border"></div>              ':"")+'\n                \n              <strong class="sf__pay-title text-center">付款金额（元）</strong>\n              <p class="sf__pay-price text-center">\n                  <strong class="sf__pay-text">'+r.price+'</strong>\n              </p>\n              <p class="sf__pay-validate invisible"></p>\n              <button class="sf__pay-btn sf__pay-btn--alipay mb10 mt20 btn btn--alipay btn-lg hide">\n                  <span>支付宝支付</span>\n              </button>\n              <button class="sf__pay-btn sf__pay-btn--wechat btn btn--wechat btn-lg hide">\n                  <span>微信支付</span>\n              </button>\n              '+(r.isLive?'<p class="mb15 mt20 text-center text-muted">付款即表示你同意<a href="/live/proService" target="_blank">《讲堂服务协议》</a></p>':"")+"\n          </div>\n          ":'\n          <style>.modal-footer{display:none;}</style>\n          <div class="sf__pay-tpl text-center">\n              <p>\n                  <strong>付款金额（元）</strong>\n              </p>\n              <div class="text-center sf__pay-price-number" tabindex="-1"  hidefocus="true" contenteditable="true">\n                  '+r.price.toFixed(2)+'\n              </div>\n              <p class="sf__pay-validate invisible mt10"></p>\n              <div class="sf__pay-price-sample row mt20 mb10">\n                  <div class="col-sm-4"><button class="form-control btn btn-default active" data-price="'+r.prices[0].toFixed(2)+'">'+r.prices[0].toFixed(2)+' 元</button></div>\n                  <div class="col-sm-4"><button class="form-control btn btn-default" data-price="'+r.prices[1].toFixed(2)+'">'+r.prices[1].toFixed(2)+' 元</button></div>\n                  <div class="col-sm-4"><button class="form-control btn btn-default" data-price="'+r.prices[2].toFixed(2)+'">'+r.prices[2].toFixed(2)+' 元</button></div>\n                  <div class="col-sm-4"><button class="form-control btn btn-default" data-price="'+r.prices[3].toFixed(2)+'">'+r.prices[3].toFixed(2)+' 元</button></div>\n                  <div class="col-sm-4"><button class="form-control btn btn-default" data-price="'+r.prices[4].toFixed(2)+'">'+r.prices[4].toFixed(2)+' 元</button></div>\n                  <div class="col-sm-4"><button class="form-control btn btn-default" data-price="'+r.prices[5].toFixed(2)+'">'+r.prices[5].toFixed(2)+' 元</button></div>\n              </div>\n              <button class="sf__pay-btn sf__pay-btn--alipay mb10 btn btn--alipay btn-lg hide">\n                  <span>支付宝支付</span>\n              </button>\n              <button class="sf__pay-btn sf__pay-btn--wechat btn btn--wechat btn-lg hide">\n                  <span>微信支付</span>\n              </button>\n              '+(r.isLive?'<p class="mb15 mt20 text-center text-muted">付款即表示你同意<a href="/live/proService" target="_blank">《讲堂服务协议》</a></p>':"")+"\n          </div>\n        ",e({title:r.title,modalSize:"modal-sm",$content:o,hideClose:!0,hideDone:!0,show:function(){var o=navigator.userAgent.toLowerCase();n("any")?/micromessenger/.test(o)?t(".btn--wechat").removeClass("hide"):t(".btn--alipay").removeClass("hide"):(t(".btn--alipay").removeClass("hide"),t(".btn--wechat").removeClass("hide"));var a=function(n,o){if(r.formData.paymentMethod=n,1===r.type){var a=t(".sf__pay-price-number").html().trim();r.formData.amount=a,r.formData.price=a}var s=t(".sf__pay-validate"),l=t(this);l.prop("disabled",!0),s.addClass("invisible"),t.post(r.api,r.formData,function(a){if(l.prop("disabled",!1),a.status){if("form"===a.data[0]){var c=_.reduce(a.data[1],function(t,e){return t+e+"<br>"},"");s.html(c).removeClass("invisible")}}else{var u=a.data;switch(n){case"wx_pub":u.extra=o,i.createPayment(u,function(e,n){"success"==e?t.get("/api/pay/"+u.order_no+"/check",function(t){!t.status&&t.data&&(location.href=t.data)}):"fail"==e&&alert(n.msg)});break;case"wx_pub_qr":var h=u.credential?u.credential.wx_pub_qr:null,d="/pay/check?out_trade_no="+u.order_no;if(h){var p=function(){var t='\n                                          <style>.modal-footer{display: none;}</style>\n                                          <div class="text-center">\n                                              <div class="wx_pub_qr mt15 mb20"></div>\n                                              <h4 style="color: #00C800; font-weight: 400;">微信扫码支付</h4>\n                                              <p class="mb15">\n                                                  <a class="btn btn-default btn-xs" href="'+d+'">付款成功后点此刷新</a>\n                                              </p>\n                                          </div>';return t};e({title:r.title,hideClose:!0,hideDone:!0,modalSize:"modal-sm",$content:p(),show:function(){t(".wx_pub_qr").qrcode({text:h,width:180,height:180});var e=setInterval(function(){t.get("/api/pay/"+u.order_no+"/check",function(t){!t.status&&t.data&&(clearInterval(e),location.href=t.data)})},5e3)}})}break;case"alipay_qr":var h=u.credential?u.credential.alipay_qr:null,d="/pay/check?out_trade_no="+u.order_no;if(h){var f=function(){var t='\n                                              <style>.modal-footer{display: none;}</style>\n                                              <div class="text-center">\n                                                  <div class="wx_pub_qr mt15 mb20"></div>\n                                                  <h4 style="color: #00AAEE; font-weight: 400;">支付宝扫码支付</h4>\n                                                  <p class="mb15">\n                                                      <a class="btn btn-default btn-xs" href="'+d+'">付款成功后点此刷新</a>\n                                                  </p>\n                                              </div>';return t};e({title:r.title,hideClose:!0,hideDone:!0,modalSize:"modal-sm",$content:f(),show:function(){t(".wx_pub_qr").qrcode({text:h,height:180,width:180});var e=setInterval(function(){t.get("/api/pay/"+u.order_no+"/check",function(t){!t.status&&t.data&&(clearInterval(e),location.href=t.data)})},5e3)}})}break;default:i.createPayment(u,function(t,e){"success"==t||"fail"==t&&s.html("支付暂不可用 "+e.msg).removeClass("invisible")})}}})};t(".sfmodal").on("click",".sf__pay-btn--alipay",function(){if(n("any")){var t={app_pay:!0};a.call(this,"alipay_wap",t)}else a.call(this,"alipay_qr")}),t(".sfmodal").on("click",".sf__pay-btn--wechat",function(){var e=this,i="wx_pub_qr";/micromessenger/.test(o)?(i="wx_pub",t.get("/api/user/weixin/openid",function(t){if(t.data.match(/^https?/i))location.href=t.data;else{var n={open_id:t.data};a.call(e,i,n)}})):n("any")?a.call(e,i):a.call(e,i)})}}),1===r.type&&(t("body").on("click",".sf__pay-price-sample .btn",function(){var e=t(this),n=e.data("price"),i=t(".sf__pay-price-number");i.html(n),t(".sf__pay-price-sample .btn.active").removeClass("active"),e.addClass("active")}),t("body").on("focus",".sf__pay-price-number",function(){t(".sf__pay-price-sample .btn.active").removeClass("active")}),t("body").on("input",".sf__pay-price-number",function(){var e=t(this).html();isNaN(e)?t(this).html(""):Number.isInteger(Number(e))||e.split(".")[1].length>2&&t(this).html(Number(e).toFixed(2))}))}}),define("specialUrl",["jquery","jquery_tmpl"],function(t){var e,n,i,r,o,a,s,l,c,u;c=function(e,n){var i,r;i=t(".v_"+e),r=i.after(t.tmpl(l,n)).next(".video-prev"),r.click(function(){r.hide(),r.after(t.tmpl(s,n)).next(".video-body").find(".hide-video").click(function(){r.show(),t(this).parent().remove()})}),i.remove()},r=0,o=[{reg:/^https?:\/\/jsfiddle\.net\/([_a-z0-9-\/,]+)$/i,fn:function(e){e.indexOf("embedded")<0&&(e+=/\/$/.test(e)?"embedded":"/embedded"),e="https://jsfiddle.net/"+e,t('<iframe style="width: 100%; height: 300px" src="'+e+'" allowfullscreen="allowfullscreen" frameborder="0"></iframe>').insertAfter(this)}},{reg:/^https?:\/\/gist\.github\.com\/([_a-z0-9-\/]+)$/i,fn:function(e){var n,i,o,a,s,l,c;c="https://gist.github.com/"+e+".json?callback=special_"+r,o=t('<iframe id="special-gist'+e+'" style="width: 100%;" src="about:blank" frameborder="0"></iframe>').insertAfter(this),s=o[0],a=s.contentWindow?s.contentWindow.document:s.contentDocument?s.contentDocument:s.document,l=a.createElement("script"),i=t(a),n=t("body",i),o.ready(function(){o.height(i.height())}),s.contentWindow["special_"+r]=function(t){n.append(t.div).css({padding:0,margin:0}),i.find("head").append('<link rel="stylesheet" href="'+t.stylesheet+'" />'),i.find("head").append("<style>html{background:#fff;}.gist .gist-file .gist-data{background:none;}                .gist .gist-file .gist-meta{background:#eee;text-shadow:none;}.gist .gist-file .gist-meta a{color:#017e66}                </style>"),setTimeout(function(){o.height(i.height())},5e3)},l.type="text/javascript",l.src=c,a.body.appendChild(l),r++}},{reg:/^https?:\/\/runjs\.cn\/detail\/([_0-9a-z-]+)$/i,fn:function(e){var n,i,r,o,a,s,l;n=function(){t("body",i).css("margin",0),t(".runjs_gist",i).css("border","none"),t(".gist_content",i).css("font-size","14px")},t("#special-runjs"+e).length>0||(l="https://runjs.cn/gist/"+e+"/all",r=t('<iframe id="special-runjs'+e+'" style="width: 100%; height: 300px" src="about:blank" frameborder="0"></iframe>').insertAfter(this),o=r[0],i=o.contentWindow?o.contentWindow.document:o.contentDocument?o.contentDocument:o.document,s=i.createElement("script"),a=i||i.__proto__,a.write=function(e){t(e).appendTo(i.body)},s.type="text/javascript",s.src=l,i.body.appendChild(s),s.onreadystatechange=n,s.onload=n)}},{reg:/^https?:\/\/codepen\.io\/([_a-zA-Z0-9-\/,]+)$/i,fn:function(e){e.indexOf("embed")<0&&(e=e.replace("pen","embed")),e="https://codepen.io/"+e,t('<iframe style="width: 100%; height: 300px" src="'+e+'" allowfullscreen="allowfullscreen" frameborder="0"></iframe>').insertAfter(this)}},{reg:/^https?:\/\/segmentfault\.com\/n\/([_a-zA-Z0-9-\/,\.]+)$/i,fn:function(e){return e="https://segmentfault.com/n/"+e+"/widget",t('<iframe style="width: 100%;height: 300px;" src="'+e+'" allowfullscreen="allowfullscreen" frameborder="0"></iframe>').insertAfter(this),t(this).prev("a").remove()}}],l='<div class="video-prev vp_${id}"><div class="clearfix video-header"><img class="pull-left" src="${thumbnail}"><div class="pull-left"><h5>${title}</h5><span class="text-muted">${link}</span></div></div>',s='<div class="video-body"><embed class="player" src="${player}" type="application/x-shockwave-flash" /><br /><a href="javascript:void(0)" class="hide-video text-muted"><span class="glyphicon glyphicon-open mr5"></span>收起视频</a></div>',e=void 0,i=void 0,a=void 0,u=void 0;var h=!1;return n=new RegExp(window.location.host,"ig"),function(){t(".fmt a").each(function(e){var r,a,s=!1,l=t(this),r=l.attr("href"),u=/^https?:\/\//.test(r);if(!n.test(r)&&u){l.attr("target","_blank");var d=r.indexOf("?"),p=r;d>0&&(r=r.substring(0,d));var f=r.indexOf("#");if(f>0&&(r=r.substring(0,f)),t.each(o,function(t,e){s||(i=r.match(e.reg),i&&(l.after('<button class="btn btn-xs btn-default ml10 preview" data-url="'+i[1]+'" data-typeid="'+t+'">点击预览</button>'),s=!0))}),!s)if(!h&&r.match(/\.(mp3|m3u)$/i)){var m=t('<audio src="'+p+'" preload="auto" />'),g=document.createElement("link");t("<div></div>").append(m).insertBefore(l),g.type="text/css",g.rel="stylesheet",g.href="//cdn.staticfile.org/mediaelement/4.2.9/mediaelementplayer.min.css",document.getElementsByTagName("head")[0].appendChild(g),h=!0,l.html("下载音频").attr("download",r.substring(r.lastIndexOf("/")+1)),require.config({paths:{mediaelement:"//cdn.staticfile.org/mediaelement/4.2.9/mediaelement-and-player.min"}}),require(["mediaelement"],function(){mejs.i18n.language("zh-CN"),m.mediaelementplayer({stretching:"responsive"})})}else r.match(/youku\.com/g)?(a=r.match(/id_\w+/),a&&(a=a[0].slice(3),l.addClass("v_"+a+"_"+e),t.get("https://openapi.youku.com/v2/videos/show_basic.json?video_id="+a+"&client_id=8fdab46779dd5d25",function(t){c(a+"_"+e,t)}))):r.match(/tudou\.com/g)&&(/albumplay/.test(r)||/listplay/.test(r))&&(a=r.match(/http:\/\/www\.tudou\.com\/.+\/.+\/(.+)\.html/)[1],a&&(l.addClass("v_"+a+"_"+e),t.get("/api/util/video/info?app_key=269fe846bb7a17ec&format=json&itemCodes="+a,function(t){var n;t=t.data[0],n={thumbnail:t.picUrl,title:t.title,link:t.playUrl,player:t.outerPlayerUrl},c(a+"_"+e,n)})))}}),t(".fmt").delegate(".preview","click",function(){o[t(this).data("typeid")].fn.call(this,t(this).data("url")),t(this).siblings("iframe").addClass("loading"),t(this).remove()}),t(".fmt img").not(".emoji").each(function(e){var n,i;i=new RegExp(window.location.origin,"i"),n=t(this).data("src"),t(this).css("cursor","pointer"),t(this).click(function(){if(0===t("#previewImg").length){if(t("body").addClass("isPreviewing").append('<div id="previewImg"><div class="loadingDot"><span class="glyphicon glyphicon-refresh rotate white"></span></div><div class="imgWrapper"><img></div><div class="menu"><a target="_blank" href="javascript:void(0);" class="link-orign">查看原图</a></div></div>'),i.test(n)||/^\/img\//i.test(n)){var e=t(this).attr("src"),r=e.indexOf("?"),o=void 0;o=r!=-1?e.slice(0,r)+"/view"+e.slice(r,e.length):e+"/view",t("#previewImg img")[0].src=e,t("#previewImg .link-orign").attr("href",o)}else t("#previewImg img")[0].src=t(this).attr("src"),t("#previewImg .link-orign").attr("href",t(this).attr("src"));t("#previewImg img")[0].onload=function(){t("#previewImg .loadingDot").remove(),this.height>window.innerHeight&&(t("#previewImg .imgWrapper").css({lineHeight:window.innerHeight+"px"}),t("#previewImg").css("overflow-y","scroll")),this.width>window.innerWidth&&(t("#previewImg img").css("width","100%"),t("#previewImg .imgWrapper").css({lineHeight:"initial"}))},t("#previewImg").click(function(e){t(this).remove(),t("body").removeClass("isPreviewing")})}})})}}),define("contentIndex",[],function(){var t;return t=function(t,e,n){var i,r,o,a,s,l,c,u,h,d;i=$(t),r=i.find(".collapse"),a=i.find(".panel-collapse"),o=i.find("h1, h2, h3"),$(e).parents(".side").length&&($(".side").find(".post-nav").addClass("side-outline hidden-sm").data("width",$(".side-outline").width()).data("top",$(".side-outline").offset().top),l=$(".side-outline"),s=l.find(".highlight-title"),u=l.offset().top,$(".nav-body").css("top",0),$(".post-nav").css("position","sticky"),$(".post-nav").css("top","238px"),$(".side").height($(".main").height()),$(".nav-body").height($(window).height()-300),$.fn.scrollUnique=function(){return $(this).each(function(){var t="mousewheel";void 0!==document.mozHidden&&(t="DOMMouseScroll"),$(this).on(t,function(t){var e=this.scrollTop,n=this.scrollHeight,i=this.clientHeight,r=t.originalEvent.wheelDelta?t.originalEvent.wheelDelta:-(t.originalEvent.detail||0);(r>0&&e<=r||r<0&&n-i-e<=-1*r)&&(this.scrollTop=r>0?0:n,t.preventDefault())})})},document.querySelector(".nav-body").scrollHeight>$(".nav-body").height()&&$(".nav-body").scrollUnique(),$(window).scroll(function(){$(".side").height($(".main").height());var t,n,i,r;n=$(this).scrollTop(),r=void 0,t=void 0,i=void 0,o.eq(0).offset().top<n+40?(s.show(),o.each(function(a,c){if(t=l.find("[href='#"+$(this).attr("id")+"']"),i=o.last().offset().top-n,o.eq(Math.min(Math.max(0,a+1),o.length-1)).offset().top>n+20||i<20){if(i<20&&(t=l.find("a").last()),t.offset()&&(r=t.offset().top-t.parents(".nav-body").offset().top+$(".nav-body").scrollTop()),t.parents(e).find("li").removeClass("active"),t.parent().addClass("active"),s.css("top",r).height(t.outerHeight()),r+40>$(window).height()/2){var u=-(t.parent().offset().top-t.parents(".nav-body").offset().top+$(".nav-body").scrollTop()-$(window).height()/2);u<0&&$(".nav-body").scrollTop(-u)}else $(".nav-body").scrollTop(0);return!1}})):($(e).find("li").removeClass("active"),s.hide())})),h=1,c=$(e),o.each(function(t){var n,i,r;r=$(this).text().trim(),""!==r&&($(this).attr("id","articleHeader"+t),i=parseInt($(this)[0].tagName.slice(1)),n=null,0===t||i===h?(n=$('<li><a href="#articleHeader'+t+'"></a></li>'),n.find("a").text(r),c.append(n)):i>h?(n=$("<li style='list-style:none;'><ul><li><a href=\"#articleHeader"+t+'"></a></li></ul></li>'),n.find("a").text(r),c.append(n),c=n.find("ul")):i<h&&(1===i?(n=$('<li><a href="#articleHeader'+t+'"></a></li>'),n.find("a").text(r),$(e).append(n),c=$(e)):(n=$("<li style='list-style:none;'><ul><li><a href=\"#articleHeader"+t+'"></a></li></ul></li>'),n.find("a").text(r),c.parents("ul").parents("ul").length?(c.parents("ul").parents("ul").append(n),c=n.find("ul")):(n=$('<li><a href="#articleHeader'+t+'"></a></li>'),n.find("a").text(r),$(e).append(n),c=$(e)))),h=i)}),n&&n(r,a),d=location.hash,d.split("?").length>0&&"#shareToWeibo"!==d.split("?")[0]&&$(d).length>0&&$(window).scrollTop($(d).offset().top)}}),!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("handlebars",e):"object"==typeof exports?exports.Handlebars=e():t.Handlebars=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(){var t=v();return t.compile=function(e,n){return u.compile(e,n,t)},t.precompile=function(e,n){return u.precompile(e,n,t)},t.AST=l.default,t.Compiler=u.Compiler,t.JavaScriptCompiler=d.default,t.Parser=c.parser,t.parse=c.parse,t}var r=n(8).default;e.__esModule=!0;var o=n(1),a=r(o),s=n(2),l=r(s),c=n(3),u=n(4),h=n(5),d=r(h),p=n(6),f=r(p),m=n(7),g=r(m),v=a.default.create,y=i();y.create=i,g.default(y),y.Visitor=f.default,y.default=y,e.default=y,t.exports=e.default},function(t,e,n){"use strict";function i(){var t=new s.HandlebarsEnvironment;return p.extend(t,s),t.SafeString=c.default,t.Exception=h.default,t.Utils=p,t.escapeExpression=p.escapeExpression,t.VM=m,t.template=function(e){return m.template(e,t)},t}var r=n(9).default,o=n(8).default;e.__esModule=!0;var a=n(10),s=r(a),l=n(11),c=o(l),u=n(12),h=o(u),d=n(13),p=r(d),f=n(14),m=r(f),g=n(7),v=o(g),y=i();y.create=i,v.default(y),y.default=y,e.default=y,t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var i={helpers:{helperExpression:function(t){return"SubExpression"===t.type||("MustacheStatement"===t.type||"BlockStatement"===t.type)&&!!(t.params&&t.params.length||t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!i.helpers.scopedId(t)&&!t.depth}}};e.default=i,t.exports=e.default},function(t,e,n){"use strict";function i(t,e){if("Program"===t.type)return t;s.default.yy=p,p.locInfo=function(t){return new p.SourceLocation(e&&e.srcName,t)};var n=new c.default(e);return n.accept(s.default.parse(t))}var r=n(8).default,o=n(9).default;e.__esModule=!0,e.parse=i;var a=n(15),s=r(a),l=n(16),c=r(l),u=n(17),h=o(u),d=n(13);e.parser=s.default;var p={};d.extend(p,h)},function(t,e,n){"use strict";function i(){}function r(t,e,n){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var i=n.parse(t,e),r=(new n.Compiler).compile(i,e);return(new n.JavaScriptCompiler).compile(r,e)}function o(t,e,n){function i(){var i=n.parse(t,e),r=(new n.Compiler).compile(i,e),o=(new n.JavaScriptCompiler).compile(r,e,void 0,!0);return n.template(o)}function r(t,e){return o||(o=i()),o.call(this,t,e)}if(void 0===e&&(e={}),null==t||"string"!=typeof t&&"Program"!==t.type)throw new u.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var o=void 0;return r._setup=function(t){return o||(o=i()),o._setup(t)},r._child=function(t,e,n,r){return o||(o=i()),o._child(t,e,n,r)},r}function a(t,e){if(t===e)return!0;if(h.isArray(t)&&h.isArray(e)&&t.length===e.length){for(var n=0;n<t.length;n++)if(!a(t[n],e[n]))return!1;return!0}}function s(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}var l=n(8).default;e.__esModule=!0,e.Compiler=i,e.precompile=r,e.compile=o;var c=n(12),u=l(c),h=n(13),d=n(2),p=l(d),f=[].slice;i.prototype={compiler:i,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;e>n;n++){var i=this.opcodes[n],r=t.opcodes[n];if(i.opcode!==r.opcode||!a(i.args,r.args))return!1}e=this.children.length;for(var n=0;e>n;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[];var n=e.knownHelpers;if(e.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},n)for(var i in n)i in n&&(e.knownHelpers[i]=n[i]);return this.accept(t)},compileProgram:function(t){var e=new this.compiler,n=e.compile(t,this.options),i=this.guid++;return this.usePartial=this.usePartial||n.usePartial,this.children[i]=n,this.useDepths=this.useDepths||n.useDepths,i},accept:function(t){if(!this[t.type])throw new u.default("Unknown type: "+t.type,t);this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,n=e.length,i=0;n>i;i++)this.accept(e[i]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){s(t);var e=t.program,n=t.inverse;e=e&&this.compileProgram(e),n=n&&this.compileProgram(n);var i=this.classifySexpr(t);"helper"===i?this.helperSexpr(t,e,n):"simple"===i?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,n),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(t){var e=t.program&&this.compileProgram(t.program),n=this.setupFullMustacheParams(t,e,void 0),i=t.path;this.useDecorators=!0,this.opcode("registerDecorator",n.length,i.original)},PartialStatement:function(t){this.usePartial=!0;var e=t.program;e&&(e=this.compileProgram(t.program));var n=t.params;if(n.length>1)throw new u.default("Unsupported number of partial arguments: "+n.length,t);n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}));var i=t.name.original,r="SubExpression"===t.name.type;r&&this.accept(t.name),this.setupFullMustacheParams(t,e,void 0,!0);
var o=t.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",r,i,o),this.opcode("append")},PartialBlockStatement:function(t){this.PartialStatement(t)},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(t){this.DecoratorBlock(t)},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){s(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,n){var i=t.path,r=i.parts[0],o=null!=e||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),i.strict=!0,this.accept(i),this.opcode("invokeAmbiguous",r,o)},simpleSexpr:function(t){var e=t.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,n){var i=this.setupFullMustacheParams(t,e,n),r=t.path,o=r.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",i.length,o);else{if(this.options.knownHelpersOnly)throw new u.default("You specified knownHelpersOnly, but used the unknown helper "+o,t);r.strict=!0,r.falsy=!0,this.accept(r),this.opcode("invokeHelper",i.length,r.original,p.default.helpers.simpleId(r))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],n=p.default.helpers.scopedId(t),i=!t.depth&&!n&&this.blockParamIndex(e);i?this.opcode("lookupBlockParam",i,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts,t.strict)):this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,n):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,n=0,i=e.length;for(this.opcode("pushHash");i>n;n++)this.pushParam(e[n].value);for(;n--;)this.opcode("assignToHash",e[n].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:f.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=p.default.helpers.simpleId(t.path),n=e&&!!this.blockParamIndex(t.path.parts[0]),i=!n&&p.default.helpers.helperExpression(t),r=!n&&(i||e);if(r&&!i){var o=t.path.parts[0],a=this.options;a.knownHelpers[o]?i=!0:a.knownHelpersOnly&&(r=!1)}return i?"helper":r?"ambiguous":"simple"},pushParams:function(t){for(var e=0,n=t.length;n>e;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var n=void 0;if(!t.parts||p.default.helpers.scopedId(t)||t.depth||(n=this.blockParamIndex(t.parts[0])),n){var i=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,i)}else e=t.original||e,e.replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,n,i){var r=t.params;return this.pushParams(r),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.accept(t.hash):this.opcode("emptyHash",i),r},blockParamIndex:function(t){for(var e=0,n=this.options.blockParams.length;n>e;e++){var i=this.options.blockParams[e],r=i&&h.indexOf(i,t);if(i&&r>=0)return[e,r]}}}},function(t,e,n){"use strict";function i(t){this.value=t}function r(){}function o(t,e,n,i){var r=e.popStack(),o=0,a=n.length;for(t&&a--;a>o;o++)r=e.nameLookup(r,n[o],i);return t?[e.aliasable("container.strict"),"(",r,", ",e.quotedString(n[o]),")"]:r}var a=n(8).default;e.__esModule=!0;var s=n(10),l=n(12),c=a(l),u=n(13),h=n(18),d=a(h);r.prototype={nameLookup:function(t,e){return r.isValidJavaScriptVariableName(e)?[t,".",e]:[t,"[",JSON.stringify(e),"]"]},depthedLookup:function(t){return[this.aliasable("container.lookup"),'(depths, "',t,'")']},compilerInfo:function(){var t=s.COMPILER_REVISION,e=s.REVISION_CHANGES[t];return[t,e]},appendToBuffer:function(t,e,n){return u.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:n?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},compile:function(t,e,n,i){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!i,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var r=t.opcodes,o=void 0,a=void 0,s=void 0,l=void 0;for(s=0,l=r.length;l>s;s++)o=r[s],this.source.currentLocation=o.loc,a=a||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new c.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),i?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var u=this.createFunctionContext(i);if(this.isChild)return u;var h={compiler:this.compilerInfo(),main:u};this.decorators&&(h.main_d=this.decorators,h.useDecorators=!0);var d=this.context,p=d.programs,f=d.decorators;for(s=0,l=p.length;l>s;s++)p[s]&&(h[s]=p[s],f[s]&&(h[s+"_d"]=f[s],h.useDecorators=!0));return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),i?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),e.srcName?(h=h.toStringWithSourceMap({file:e.destName}),h.map=h.map&&h.map.toString()):h=h.toString()),h},preamble:function(){this.lastContext=0,this.source=new d.default(this.options.srcName),this.decorators=new d.default(this.options.srcName)},createFunctionContext:function(t){var e="",n=this.stackVars.concat(this.registers.list);n.length>0&&(e+=", "+n.join(", "));var i=0;for(var r in this.aliases){var o=this.aliases[r];this.aliases.hasOwnProperty(r)&&o.children&&o.referenceCount>1&&(e+=", alias"+ ++i+"="+r,o.children[0]="alias"+i)}var a=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&a.push("blockParams"),this.useDepths&&a.push("depths");var s=this.mergeSource(e);return t?(a.push(s),Function.apply(this,a)):this.source.wrap(["function(",a.join(","),") {\n  ",s,"}"])},mergeSource:function(t){var e=this.environment.isSimple,n=!this.forceBuffer,i=void 0,r=void 0,o=void 0,a=void 0;return this.source.each(function(t){t.appendToBuffer?(o?t.prepend("  + "):o=t,a=t):(o&&(r?o.prepend("buffer += "):i=!0,a.add(";"),o=a=void 0),r=!0,e||(n=!1))}),n?o?(o.prepend("return "),a.add(";")):r||this.source.push('return "";'):(t+=", buffer = "+(i?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),a.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(i?"":";\n")),this.source.merge()},blockValue:function(t){var e=this.aliasable("helpers.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(t,0,n);var i=this.popStack();n.splice(1,0,i),this.push(this.source.functionCall(e,"call",n))},ambiguousBlockValue:function(){var t=this.aliasable("helpers.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var n=this.topStack();e.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack(function(t){return[" != null ? ",t,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,n,i){var r=0;i||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[r++])),this.resolvePath("context",t,r,e,n)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e,n){t?this.pushStackLiteral("container.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,n)},resolvePath:function(t,e,n,i,r){var a=this;if(this.options.strict||this.options.assumeObjects)return void this.push(o(this.options.strict&&r,this,e,t));for(var s=e.length;s>n;n++)this.replaceStack(function(r){var o=a.nameLookup(r,e[n],t);return i?[" && ",o]:[" != null ? ",o," : ",r]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},registerDecorator:function(t,e){var n=this.nameLookup("decorators",e,"decorator"),i=this.setupHelperArgs(e,t);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",i])," || fn;"])},invokeHelper:function(t,e,n){var i=this.popStack(),r=this.setupHelper(t,e),o=n?[r.name," || "]:"",a=["("].concat(o,i);this.options.strict||a.push(" || ",this.aliasable("helpers.helperMissing")),a.push(")"),this.push(this.source.functionCall(a,"call",r.callParams))},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var n=this.popStack();this.emptyHash();var i=this.setupHelper(0,t,e),r=this.lastHelper=this.nameLookup("helpers",t,"helper"),o=["(","(helper = ",r," || ",n,")"];this.options.strict||(o[0]="(helper = ",o.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",o,i.paramsInit?["),(",i.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",i.callParams)," : helper))"])},invokePartial:function(t,e,n){var i=[],r=this.setupParams(e,1,i);t&&(e=this.popStack(),delete r.name),n&&(r.indent=JSON.stringify(n)),r.helpers="helpers",r.partials="partials",t?i.unshift(e):i.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(r.depths="depths"),r=this.objectLiteral(r),i.push(r),this.push(this.source.functionCall("container.invokePartial","",i))},assignToHash:function(t){var e=this.popStack(),n=void 0,i=void 0,r=void 0;this.trackIds&&(r=this.popStack()),this.stringParams&&(i=this.popStack(),n=this.popStack());var o=this.hash;n&&(o.contexts[t]=n),i&&(o.types[t]=i),r&&(o.ids[t]=r),o.values[t]=e},pushId:function(t,e,n){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:r,compileChildren:function(t,e){for(var n=t.children,i=void 0,r=void 0,o=0,a=n.length;a>o;o++){i=n[o],r=new this.compiler;var s=this.matchExistingProgram(i);null==s?(this.context.programs.push(""),s=this.context.programs.length,i.index=s,i.name="program"+s,this.context.programs[s]=r.compile(i,e,this.context,!this.precompile),this.context.decorators[s]=r.decorators,this.context.environments[s]=i,this.useDepths=this.useDepths||r.useDepths,this.useBlockParams=this.useBlockParams||r.useBlockParams):(i.index=s,i.name="program"+s,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams)}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;n>e;e++){var i=this.context.environments[e];if(i&&i.equals(t))return e}},programExpression:function(t){var e=this.environment.children[t],n=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof i||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new i(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],n=void 0,r=void 0,o=void 0;if(!this.isInline())throw new c.default("replaceStack on non-inline");var a=this.popStack(!0);if(a instanceof i)n=[a.value],e=["(",n],o=!0;else{r=!0;var s=this.incrStack();e=["((",this.push(s)," = ",a,")"],n=this.topStack()}var l=t.call(this,n);o||this.popStack(),r&&this.stackSlot--,this.push(e.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,n=t.length;n>e;e++){var r=t[e];if(r instanceof i)this.compileStack.push(r);else{var o=this.incrStack();this.pushSource([o," = ",r,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();if(!t&&n instanceof i)return n.value;if(!e){if(!this.stackSlot)throw new c.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof i?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):(e=this.aliases[t]=this.source.wrap(t),e.aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,n){var i=[],r=this.setupHelperArgs(e,t,i,n),o=this.nameLookup("helpers",e,"helper");return{params:i,paramsInit:r,name:o,callParams:[this.contextName(0)].concat(i)}},setupParams:function(t,e,n){var i={},r=[],o=[],a=[],s=!n,l=void 0;s&&(n=[]),i.name=this.quotedString(t),i.hash=this.popStack(),this.trackIds&&(i.hashIds=this.popStack()),this.stringParams&&(i.hashTypes=this.popStack(),i.hashContexts=this.popStack());var c=this.popStack(),u=this.popStack();(u||c)&&(i.fn=u||"container.noop",i.inverse=c||"container.noop");for(var h=e;h--;)l=this.popStack(),n[h]=l,this.trackIds&&(a[h]=this.popStack()),this.stringParams&&(o[h]=this.popStack(),r[h]=this.popStack());return s&&(i.args=this.source.generateArray(n)),this.trackIds&&(i.ids=this.source.generateArray(a)),this.stringParams&&(i.types=this.source.generateArray(o),i.contexts=this.source.generateArray(r)),this.options.data&&(i.data="data"),this.useBlockParams&&(i.blockParams="blockParams"),i},setupHelperArgs:function(t,e,n,i){var r=this.setupParams(t,e,n);return r=this.objectLiteral(r),i?(this.useRegister("options"),n.push("options"),["options=",r]):n?(n.push(r),""):r}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=r.RESERVED_WORDS={},n=0,i=t.length;i>n;n++)e[t[n]]=!0}(),r.isValidJavaScriptVariableName=function(t){return!r.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e.default=r,t.exports=e.default},function(t,e,n){"use strict";function i(){this.parents=[]}function r(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function o(t){r.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function a(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}var s=n(8).default;e.__esModule=!0;var l=n(12),c=s(l);i.prototype={constructor:i,mutating:!1,acceptKey:function(t,e){var n=this.accept(t[e]);if(this.mutating){if(n&&!i.prototype[n.type])throw new c.default('Unexpected node type "'+n.type+'" found when accepting '+e+" on "+t.type);t[e]=n}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new c.default(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,n=t.length;n>e;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,n--)},accept:function(t){if(t){if(!this[t.type])throw new c.default("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:e!==!1?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:r,Decorator:r,BlockStatement:o,DecoratorBlock:o,PartialStatement:a,PartialBlockStatement:function(t){a.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:r,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e.default=i,t.exports=e.default},function(t,e,n){(function(n){"use strict";e.__esModule=!0,e.default=function(t){var e="undefined"!=typeof n?n:window,i=e.Handlebars;t.noConflict=function(){e.Handlebars===t&&(e.Handlebars=i)}},t.exports=e.default}).call(e,function(){return this}())},function(t,e,n){"use strict";e.default=function(t){return t&&t.__esModule?t:{default:t}},e.__esModule=!0},function(t,e,n){"use strict";e.default=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},e.__esModule=!0},function(t,e,n){"use strict";function i(t,e,n){this.helpers=t||{},this.partials=e||{},this.decorators=n||{},l.registerDefaultHelpers(this),c.registerDefaultDecorators(this)}var r=n(8).default;e.__esModule=!0,e.HandlebarsEnvironment=i;var o=n(13),a=n(12),s=r(a),l=n(19),c=n(20),u=n(21),h=r(u),d="4.0.0";e.VERSION=d;var p=7;e.COMPILER_REVISION=p;var f={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};e.REVISION_CHANGES=f;var m="[object Object]";i.prototype={constructor:i,logger:h.default,log:h.default.log,registerHelper:function(t,e){if(o.toString.call(t)===m){if(e)throw new s.default("Arg not supported with multiple helpers");o.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(o.toString.call(t)===m)o.extend(this.partials,t);else{if("undefined"==typeof e)throw new s.default("Attempting to register a partial as undefined");this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(o.toString.call(t)===m){if(e)throw new s.default("Arg not supported with multiple decorators");o.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]}};var g=h.default.log;e.log=g,e.createFrame=o.createFrame,e.logger=h.default},function(t,e,n){"use strict";function i(t){this.string=t}e.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},e.default=i,t.exports=e.default},function(t,e,n){"use strict";function i(t,e){var n=e&&e.loc,o=void 0,a=void 0;n&&(o=n.start.line,a=n.start.column,t+=" - "+o+":"+a);for(var s=Error.prototype.constructor.call(this,t),l=0;l<r.length;l++)this[r[l]]=s[r[l]];Error.captureStackTrace&&Error.captureStackTrace(this,i),n&&(this.lineNumber=o,this.column=a)}e.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error,e.default=i,t.exports=e.default},function(t,e,n){"use strict";function i(t){return h[t]}function r(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function o(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1}function a(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return p.test(t)?t.replace(d,i):t}function s(t){return!t&&0!==t||!(!g(t)||0!==t.length)}function l(t){var e=r({},t);return e._parent=t,e}function c(t,e){return t.path=e,t}function u(t,e){return(t?t+".":"")+e}e.__esModule=!0,e.extend=r,e.indexOf=o,e.escapeExpression=a,e.isEmpty=s,e.createFrame=l,e.blockParams=c,e.appendContextPath=u;var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},d=/[&<>"'`=]/g,p=/[&<>"'`=]/,f=Object.prototype.toString;e.toString=f;var m=function(t){return"function"==typeof t};m(/x/)&&(e.isFunction=m=function(t){return"function"==typeof t&&"[object Function]"===f.call(t)}),e.isFunction=m;var g=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===f.call(t)};e.isArray=g},function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=v.COMPILER_REVISION;if(e!==n){if(n>e){var i=v.REVISION_CHANGES[n],r=v.REVISION_CHANGES[e];throw new g.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new g.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function r(t,e){function n(n,i,r){r.hash&&(i=f.extend({},i,r.hash),r.ids&&(r.ids[0]=!0)),n=e.VM.resolvePartial.call(this,n,i,r);var o=e.VM.invokePartial.call(this,n,i,r);if(null==o&&e.compile&&(r.partials[r.name]=e.compile(n,t.compilerOptions,e),o=r.partials[r.name](i,r)),null!=o){if(r.indent){for(var a=o.split("\n"),s=0,l=a.length;l>s&&(a[s]||s+1!==l);s++)a[s]=r.indent+a[s];o=a.join("\n")}return o}throw new g.default("The partial "+r.name+" could not be compiled when running in runtime-only mode")}function i(e){function n(e){return""+t.main(r,e,r.helpers,r.partials,a,l,s)}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o.data;i._setup(o),!o.partial&&t.useData&&(a=c(e,a));var s=void 0,l=t.useBlockParams?[]:void 0;return t.useDepths&&(s=o.depths?e!==o.depths[0]?[e].concat(o.depths):o.depths:[e]),(n=u(t.main,n,r,o.depths||[],a,l))(e,o)}if(!e)throw new g.default("No environment passed to template");if(!t||!t.main)throw new g.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var r={strict:function(t,e){if(!(e in t))throw new g.default('"'+e+'" not defined in '+t);return t[e]},lookup:function(t,e){for(var n=t.length,i=0;n>i;i++)if(t[i]&&null!=t[i][e])return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:f.escapeExpression,invokePartial:n,fn:function(e){var n=t[e];return n.decorator=t[e+"_d"],n},programs:[],program:function(t,e,n,i,r){var a=this.programs[t],s=this.fn(t);return e||r||i||n?a=o(this,t,s,e,n,i,r):a||(a=this.programs[t]=o(this,t,s)),a},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=f.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler};return i.isTop=!0,i._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials,r.decorators=n.decorators):(r.helpers=r.merge(n.helpers,e.helpers),t.usePartial&&(r.partials=r.merge(n.partials,e.partials)),t.useDecorators&&(r.decorators=r.merge(n.decorators,e.decorators)))},i._child=function(e,n,i,a){if(t.useBlockParams&&!i)throw new g.default("must pass block params");if(t.useDepths&&!a)throw new g.default("must pass parent depths");return o(r,e,t[e],n,0,i,a)},i}function o(t,e,n,i,r,o,a){function s(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a;return a&&e!==a[0]&&(s=[e].concat(a)),n(t,e,t.helpers,t.partials,r.data||i,o&&[r.blockParams].concat(o),s)}return s=u(n,s,t,a,i,o),s.program=e,s.depth=a?a.length:0,s.blockParams=r||0,s}function a(t,e,n){return t?t.call||n.name||(n.name=t,t=n.partials[t]):t="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],t}function s(t,e,n){n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var i=void 0;if(n.fn&&n.fn!==l&&(i=n.data["partial-block"]=n.fn,i.partials&&(n.partials=f.extend({},n.partials,i.partials))),void 0===t&&i&&(t=i),void 0===t)throw new g.default("The partial "+n.name+" could not be found");return t instanceof Function?t(e,n):void 0}function l(){return""}function c(t,e){return e&&"root"in e||(e=e?v.createFrame(e):{},e.root=t),e}function u(t,e,n,i,r,o){if(t.decorator){var a={};e=t.decorator(e,a,n,i&&i[0],r,o,i),f.extend(e,a)}return e}var h=n(9).default,d=n(8).default;e.__esModule=!0,e.checkRevision=i,e.template=r,e.wrapProgram=o,e.resolvePartial=a,e.invokePartial=s,e.noop=l;var p=n(13),f=h(p),m=n(12),g=d(m),v=n(10)},function(t,e,n){"use strict";var i=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(t,e,n,i,r,o,a){var s=o.length-1;switch(r){case 1:return o[s-1];case 2:this.$=i.prepareProgram(o[s]);break;case 3:this.$=o[s];break;case 4:this.$=o[s];break;case 5:this.$=o[s];break;case 6:this.$=o[s];break;case 7:this.$=o[s];break;case 8:this.$=o[s];break;case 9:this.$={type:"CommentStatement",value:i.stripComment(o[s]),strip:i.stripFlags(o[s],o[s]),loc:i.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:o[s],value:o[s],loc:i.locInfo(this._$)};break;case 11:this.$=i.prepareRawBlock(o[s-2],o[s-1],o[s],this._$);break;case 12:this.$={path:o[s-3],params:o[s-2],hash:o[s-1]};break;case 13:this.$=i.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!1,this._$);break;case 14:this.$=i.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!0,this._$);break;case 15:this.$={open:o[s-5],path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:i.stripFlags(o[s-5],o[s])};break;case 16:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:i.stripFlags(o[s-5],o[s])};break;case 17:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:i.stripFlags(o[s-5],o[s])};break;case 18:this.$={strip:i.stripFlags(o[s-1],o[s-1]),program:o[s]};break;case 19:var l=i.prepareBlock(o[s-2],o[s-1],o[s],o[s],!1,this._$),c=i.prepareProgram([l],o[s-1].loc);c.chained=!0,this.$={strip:o[s-2].strip,program:c,chain:!0};break;case 20:this.$=o[s];break;case 21:this.$={path:o[s-1],strip:i.stripFlags(o[s-2],o[s])};break;case 22:this.$=i.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],i.stripFlags(o[s-4],o[s]),this._$);break;case 23:this.$=i.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],i.stripFlags(o[s-4],o[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:o[s-3],params:o[s-2],hash:o[s-1],indent:"",strip:i.stripFlags(o[s-4],o[s]),loc:i.locInfo(this._$)
};break;case 25:this.$=i.preparePartialBlock(o[s-2],o[s-1],o[s],this._$);break;case 26:this.$={path:o[s-3],params:o[s-2],hash:o[s-1],strip:i.stripFlags(o[s-4],o[s])};break;case 27:this.$=o[s];break;case 28:this.$=o[s];break;case 29:this.$={type:"SubExpression",path:o[s-3],params:o[s-2],hash:o[s-1],loc:i.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:o[s],loc:i.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:i.id(o[s-2]),value:o[s],loc:i.locInfo(this._$)};break;case 32:this.$=i.id(o[s-1]);break;case 33:this.$=o[s];break;case 34:this.$=o[s];break;case 35:this.$={type:"StringLiteral",value:o[s],original:o[s],loc:i.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(o[s]),original:Number(o[s]),loc:i.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===o[s],original:"true"===o[s],loc:i.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:i.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:i.locInfo(this._$)};break;case 40:this.$=o[s];break;case 41:this.$=o[s];break;case 42:this.$=i.preparePath(!0,o[s],this._$);break;case 43:this.$=i.preparePath(!1,o[s],this._$);break;case 44:o[s-2].push({part:i.id(o[s]),original:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 45:this.$=[{part:i.id(o[s]),original:o[s]}];break;case 46:this.$=[];break;case 47:o[s-1].push(o[s]);break;case 48:this.$=[o[s]];break;case 49:o[s-1].push(o[s]);break;case 50:this.$=[];break;case 51:o[s-1].push(o[s]);break;case 58:this.$=[];break;case 59:o[s-1].push(o[s]);break;case 64:this.$=[];break;case 65:o[s-1].push(o[s]);break;case 70:this.$=[];break;case 71:o[s-1].push(o[s]);break;case 78:this.$=[];break;case 79:o[s-1].push(o[s]);break;case 82:this.$=[];break;case 83:o[s-1].push(o[s]);break;case 86:this.$=[];break;case 87:o[s-1].push(o[s]);break;case 90:this.$=[];break;case 91:o[s-1].push(o[s]);break;case 94:this.$=[];break;case 95:o[s-1].push(o[s]);break;case 98:this.$=[o[s]];break;case 99:o[s-1].push(o[s]);break;case 100:this.$=[o[s]];break;case 101:o[s-1].push(o[s])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(t,e){throw new Error(t)},parse:function(t){function e(){var t;return t=n.lexer.lex()||1,"number"!=typeof t&&(t=n.symbols_[t]||t),t}var n=this,i=[0],r=[null],o=[],a=this.table,s="",l=0,c=0,u=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,y,b,_,x,w={};;){if(m=i[i.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===p||"undefined"==typeof p)&&(p=e()),g=a[m]&&a[m][p]),"undefined"==typeof g||!g.length||!g[0]){var k="";if(!u){x=[];for(y in a[m])this.terminals_[y]&&y>2&&x.push("'"+this.terminals_[y]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+x.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:x})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:i.push(p),r.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(g[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,s=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[g[1]][1],w.$=r[r.length-b],w._$={first_line:o[o.length-(b||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(b||1)].first_column,last_column:o[o.length-1].last_column},d&&(w._$.range=[o[o.length-(b||1)].range[0],o[o.length-1].range[1]]),v=this.performAction.call(w,s,c,l,this.yy,g[1],r,o),"undefined"!=typeof v)return v;b&&(i=i.slice(0,-1*b*2),r=r.slice(0,-1*b),o=o.slice(0,-1*b)),i.push(this.productions_[g[1]][0]),r.push(w.$),o.push(w._$),_=a[i[i.length-2]][i[i.length-1]],i.push(_);break;case 3:return!0}}return!0}},n=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,n,i,r;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),a=0;a<o.length&&(n=this._input.match(this.rules[o[a]]),!n||e&&!(n[0].length>e[0].length)||(e=n,i=a,this.options.flex));a++);return e?(r=e[0].match(/(?:\r\n?|\n).*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,n,i){function r(t,n){return e.yytext=e.yytext.substr(t,e.yyleng-n)}switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(r(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(r(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(e.yytext=e.yytext.substr(5,e.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(e.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return e.yytext=r(1,2).replace(/\\"/g,'"'),80;case 32:return e.yytext=r(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return 72;case 43:return"INVALID";case 44:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},t}();return e.lexer=n,t.prototype=e,e.Parser=t,new t}();e.__esModule=!0,e.default=i},function(t,e,n){"use strict";function i(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}function r(t,e,n){void 0===e&&(e=t.length);var i=t[e-1],r=t[e-2];return i?"ContentStatement"===i.type?(r||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(i.original):void 0:n}function o(t,e,n){void 0===e&&(e=-1);var i=t[e+1],r=t[e+2];return i?"ContentStatement"===i.type?(r||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(i.original):void 0:n}function a(t,e,n){var i=t[null==e?0:e+1];if(i&&"ContentStatement"===i.type&&(n||!i.rightStripped)){var r=i.value;i.value=i.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),i.rightStripped=i.value!==r}}function s(t,e,n){var i=t[null==e?t.length-1:e-1];if(i&&"ContentStatement"===i.type&&(n||!i.leftStripped)){var r=i.value;return i.value=i.value.replace(n?/\s+$/:/[ \t]+$/,""),i.leftStripped=i.value!==r,i.leftStripped}}var l=n(8).default;e.__esModule=!0;var c=n(6),u=l(c);i.prototype=new u.default,i.prototype.Program=function(t){var e=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var i=t.body,l=0,c=i.length;c>l;l++){var u=i[l],h=this.accept(u);if(h){var d=r(i,l,n),p=o(i,l,n),f=h.openStandalone&&d,m=h.closeStandalone&&p,g=h.inlineStandalone&&d&&p;h.close&&a(i,l,!0),h.open&&s(i,l,!0),e&&g&&(a(i,l),s(i,l)&&"PartialStatement"===u.type&&(u.indent=/([ \t]+$)/.exec(i[l-1].original)[1])),e&&f&&(a((u.program||u.inverse).body),s(i,l)),e&&m&&(a(i,l),s((u.inverse||u.program).body))}}return t},i.prototype.BlockStatement=i.prototype.DecoratorBlock=i.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,n=t.program&&t.inverse,i=n,l=n;if(n&&n.chained)for(i=n.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var c={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:o(e.body),closeStandalone:r((i||e).body)};if(t.openStrip.close&&a(e.body,null,!0),n){var u=t.inverseStrip;u.open&&s(e.body,null,!0),u.close&&a(i.body,null,!0),t.closeStrip.open&&s(l.body,null,!0),!this.options.ignoreStandalone&&r(e.body)&&o(i.body)&&(s(e.body),a(i.body))}else t.closeStrip.open&&s(e.body,null,!0);return c},i.prototype.Decorator=i.prototype.MustacheStatement=function(t){return t.strip},i.prototype.PartialStatement=i.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=i,t.exports=e.default},function(t,e,n){"use strict";function i(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var n={loc:t.path.loc};throw new g.default(t.path.original+" doesn't match "+e,n)}}function r(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}}function o(t){return/^\[.*\]$/.test(t)?t.substr(1,t.length-2):t}function a(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}}function s(t){return t.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function l(t,e,n){n=this.locInfo(n);for(var i=t?"@":"",r=[],o=0,a="",s=0,l=e.length;l>s;s++){var c=e[s].part,u=e[s].original!==c;if(i+=(e[s].separator||"")+c,u||".."!==c&&"."!==c&&"this"!==c)r.push(c);else{if(r.length>0)throw new g.default("Invalid path: "+i,{loc:n});".."===c&&(o++,a+="../")}}return{type:"PathExpression",data:t,depth:o,parts:r,original:i,loc:n}}function c(t,e,n,i,r,o){var a=i.charAt(3)||i.charAt(2),s="{"!==a&&"&"!==a,l=/\*/.test(i);return{type:l?"Decorator":"MustacheStatement",path:t,params:e,hash:n,escaped:s,strip:r,loc:this.locInfo(o)}}function u(t,e,n,r){i(t,n),r=this.locInfo(r);var o={type:"Program",body:e,strip:{},loc:r};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:o,openStrip:{},inverseStrip:{},closeStrip:{},loc:r}}function h(t,e,n,r,o,a){r&&r.path&&i(t,r);var s=/\*/.test(t.open);e.blockParams=t.blockParams;var l=void 0,c=void 0;if(n){if(s)throw new g.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=r.strip),c=n.strip,l=n.program}return o&&(o=l,l=e,e=o),{type:s?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:l,openStrip:t.strip,inverseStrip:c,closeStrip:r&&r.strip,loc:this.locInfo(a)}}function d(t,e){if(!e&&t.length){var n=t[0].loc,i=t[t.length-1].loc;n&&i&&(e={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:i.end.line,column:i.end.column}})}return{type:"Program",body:t,strip:{},loc:e}}function p(t,e,n,r){return i(t,n),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:n&&n.strip,loc:this.locInfo(r)}}var f=n(8).default;e.__esModule=!0,e.SourceLocation=r,e.id=o,e.stripFlags=a,e.stripComment=s,e.preparePath=l,e.prepareMustache=c,e.prepareRawBlock=u,e.prepareBlock=h,e.prepareProgram=d,e.preparePartialBlock=p;var m=n(12),g=f(m)},function(t,e,n){"use strict";function i(t,e,n){if(o.isArray(t)){for(var i=[],r=0,a=t.length;a>r;r++)i.push(e.wrap(t[r],n));return i}return"boolean"==typeof t||"number"==typeof t?t+"":t}function r(t){this.srcFile=t,this.source=[]}e.__esModule=!0;var o=n(13),a=void 0;try{}catch(t){}a||(a=function(t,e,n,i){this.src="",i&&this.add(i)},a.prototype={add:function(t){o.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){o.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),r.prototype={isEmpty:function(){return!this.source.length},prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each(function(e){t.add(["  ",e,"\n"])}),t},each:function(t){for(var e=0,n=this.source.length;n>e;e++)t(this.source[e])},empty:function(){var t=this.currentLocation||{start:{}};return new a(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof a?t:(t=i(t,this,e),new a(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,n){return n=this.generateList(n),this.wrap([t,e?"."+e+"(":"(",n,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=[];for(var n in t)if(t.hasOwnProperty(n)){var r=i(t[n],this);"undefined"!==r&&e.push([this.quotedString(n),":",r])}var o=this.generateList(e);return o.prepend("{"),o.add("}"),o},generateList:function(t){for(var e=this.empty(),n=0,r=t.length;r>n;n++)n&&e.add(","),e.add(i(t[n],this));return e},generateArray:function(t){var e=this.generateList(t);return e.prepend("["),e.add("]"),e}},e.default=r,t.exports=e.default},function(t,e,n){"use strict";function i(t){a.default(t),l.default(t),u.default(t),d.default(t),f.default(t),g.default(t),y.default(t)}var r=n(8).default;e.__esModule=!0,e.registerDefaultHelpers=i;var o=n(22),a=r(o),s=n(23),l=r(s),c=n(24),u=r(c),h=n(25),d=r(h),p=n(26),f=r(p),m=n(27),g=r(m),v=n(28),y=r(v)},function(t,e,n){"use strict";function i(t){a.default(t)}var r=n(8).default;e.__esModule=!0,e.registerDefaultDecorators=i;var o=n(29),a=r(o)},function(t,e,n){"use strict";e.__esModule=!0;var i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=i.methodMap.indexOf(t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=i.lookupLevel(t),"undefined"!=typeof console&&i.lookupLevel(i.level)<=t){var e=i.methodMap[t];console[e]||(e="log");for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];console[e].apply(console,r)}}};e.default=i,t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var i=n(13);e.default=function(t){t.registerHelper("blockHelperMissing",function(e,n){var r=n.inverse,o=n.fn;if(e===!0)return o(this);if(e===!1||null==e)return r(this);if(i.isArray(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):r(this);if(n.data&&n.ids){var a=i.createFrame(n.data);a.contextPath=i.appendContextPath(n.data.contextPath,n.name),n={data:a}}return o(e,n)})},t.exports=e.default},function(t,e,n){"use strict";var i=n(8).default;e.__esModule=!0;var r=n(13),o=n(12),a=i(o);e.default=function(t){t.registerHelper("each",function(t,e){function n(e,n,o){null!=t[e]&&(c&&(c.key=e,c.index=n,c.first=0===n,c.last=!!o,u&&(c.contextPath=u+e)),l+=i(t[e],{data:c,blockParams:r.blockParams([t[e],e],[u+e,null])}))}if(!e)throw new a.default("Must pass iterator to #each");var i=e.fn,o=e.inverse,s=0,l="",c=void 0,u=void 0;if(e.data&&e.ids&&(u=r.appendContextPath(e.data.contextPath,e.ids[0])+"."),r.isFunction(t)&&(t=t.call(this)),e.data&&(c=r.createFrame(e.data)),t&&"object"==typeof t)if(r.isArray(t))for(var h=t.length;h>s;s++)n(s,s,s===t.length-1);else{var d=void 0;for(var p in t)t.hasOwnProperty(p)&&(void 0!==d&&n(d,s-1),d=p,s++);void 0!==d&&n(d,s-1,!0)}return 0===s&&(l=o(this)),l})},t.exports=e.default},function(t,e,n){"use strict";var i=n(8).default;e.__esModule=!0;var r=n(12),o=i(r);e.default=function(t){t.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var i=n(13);e.default=function(t){t.registerHelper("if",function(t,e){return i.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||i.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers.if.call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",function(){for(var e=[void 0],n=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)e.push(arguments[i]);var r=1;null!=n.hash.level?r=n.hash.level:n.data&&null!=n.data.level&&(r=n.data.level),e[0]=r,t.log.apply(t,e)});
},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",function(t,e){return t&&t[e]})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var i=n(13);e.default=function(t){t.registerHelper("with",function(t,e){i.isFunction(t)&&(t=t.call(this));var n=e.fn;if(i.isEmpty(t))return e.inverse(this);var r=e.data;return e.data&&e.ids&&(r=i.createFrame(e.data),r.contextPath=i.appendContextPath(e.data.contextPath,e.ids[0])),n(t,{data:r,blockParams:i.blockParams([t],[r&&r.contextPath])})})},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var i=n(13);e.default=function(t){t.registerDecorator("inline",function(t,e,n,r){var o=t;return e.partials||(e.partials={},o=function(r,o){var a=n.partials;n.partials=i.extend({},a,e.partials);var s=t(r,o);return n.partials=a,s}),e.partials[r.args[0]]=r.fn,o})},t.exports=e.default}])}),define("sf_tagpopup",[],function(){var t={},e=function(e,r){var o,a=function(){var t=r.options.animation;r.options.content=o,r.options.animation=!1,r.show(),r.options.animation=t};null!=t[e]?(o=t[e],a(),i(r,e)):$.ajax({url:"/api/tag/"+e,async:!0,dataType:"json",success:function(s){o=n(s),a(),t[e]=o,i(r,e)}})},n=function(t){var e=t.data;if(0!=e.length){e.isFollowed?(e.isFollowedBtn="已关注",e.isFollowedClass="active"):(e.isFollowedBtn="加关注",e.isFollowedClass=""),e.excerpt||(e.excerpt="目前还没有关于这个标签的解释");var n=_.template('<p><%- excerpt %></p> <div class="operation"> <a href="<%- url %>">查看</a> <span class="text-muted">&middot;</span> <a href="<%- editUrl %>">编辑</a> <span class="text-muted">&middot;</span> <a href="/feeds/tag/<%- name %>">订阅</a> <div class="pull-right"> <span class="text-muted followers"><%- followers %> 人</span> <button class="btn btn-default btn-xs tagfollow <%- isFollowedClass %>" data-id="<%- id %>"><%- isFollowedBtn %></button> </div></div>'),i=n(e);return i}},i=function(e,n){var i=e.tip(),r=i.find(".popover-content"),o=i.find("button");r.on("click",".tagfollow",function(i){o=$(i.target),o.hasClass("active")?(o.text("加关注").removeClass("active").attr("disabled","disabled"),$.post("/api/tag/"+n+"/follow/cancel",function(i){0===i.status&&e.tip().find(".followers").text(i.data+" 人"),o.removeAttr("disabled"),e.options.content=r.html(),t[n]=r.html()})):(o.text("已关注").addClass("active").attr("disabled","disabled"),$.post("/api/tag/"+n+"/follow",function(i){0===i.status&&e.tip().find(".followers").text(i.data+" 人"),o.removeAttr("disabled"),e.options.content=r.html(),t[n]=r.html()}))})},r=function(t,n,i){t.popover({template:'<div class="popover tag-popup" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',content:"loading...",html:!0,placement:"top",trigger:"hover",container:"body",delay:{show:1e3,hide:1e3}},n),t.one("show.bs.popover",function(){var t=$(this).data("bs.popover"),n=$(t.tip()),i=$(this).data("id");n.on("mouseenter",function(){var e=t.options.animation;t.options.animation=!1,t.show.call(t),t.enter(t),t.options.animation=e}),n.on("mouseleave",function(){t.leave(t)}),e(i,t)})};return $.fn.tagpopup=function(t,e,n){r(this,t,e,n)},r}),define("follow",["statusToggle","sfModal"],function(t,e){"use strict";return function(n){var i,r;i=$.extend({element:null,event:"click",url:null,toggleClass:"active",loadText:"加载中",unActiveText:"加关注",activeText:"取消关注",do:"follow",successFn:function(t){if(t.data.isEachFollowed)return $(this).text("相互关注")},failFn:function(t){var n;return"form"===t.data[0]?(n=Object.keys(t.data[1])[0],e(t.data[1][n])):e(t.data[1])}},n),r=n.element,t(r),r.on(i.event,function(){r.hasClass(i.toggleClass)?r.trigger("unactive",function(){r.text(i.unActiveText).removeClass(i.toggleClass).attr("disabled","disabled"),$.post(i.url+"/"+i.element.data("id")+"/"+i.do+"/cancel",function(t){0===t.status?i.successFn.call(this,t):(r.text(i.activeText),i.failFn.call(this,t)),r.removeAttr("disabled")})}):r.trigger("active",function(){r.text(i.activeText).addClass(i.toggleClass).attr("disabled","disabled"),$.post(i.url+"/"+i.element.data("id")+"/"+i.do,function(t){0===t.status?i.successFn.call(this,t):(r.text(i.unActiveText),i.failFn.call(this,t)),r.removeAttr("disabled")})})})}}),define("userFollow",["jquery","follow"],function(t,e){"use strict";t(".userfollow").each(function(){var n;return n=t(this),e({element:n,url:"/api/user",successFn:function(e){if(t(".profile__heading-info .h3").last().text(e.data.followers||e.data),e.data.isEachFollowed&&n.text("相互关注"),n.data("refresh"))return location.reload()}})}),t(".questionfollow").each(function(){var n;return n=t(this),e({element:n,url:"/api/question",activeText:"取消关注",successFn:function(e){if(n.data("callback")&&(n.parent().siblings("li").find(".follows").text(e.data),t(".funsCount").text(e.data)),n.data("refresh"))return location.reload()}})}),t(".blogfollow").each(function(){var n;return n=t(this),e({element:n,url:"/api/blog",activeText:"取消关注",successFn:function(e){if(n.data("callback")&&(n.parent().siblings("li").find(".follows").text(e.data),t(".funsCount").text(e.data)),n.data("refresh"))return location.reload()}})}),t(".bookmarkfollow").each(function(){var n;return n=t(this),e({element:n,url:"/api/bookmarkArchive",activeText:"取消关注",successFn:function(e){if(n.data("callback")&&(n.parent().siblings("li").find(".follows").text(e.data),t(".funsCount").text(e.data)),n.data("refresh"))return location.reload()}})})}),define("911",["main"],function(t){"use strict";var e,n,i,r,o,a,s,l,c,u,h,d,p,f,m,g,v,y,b,_,x,w,k;o=$("#911"),i=$("#reportForm"),n=o.find('[data-role="base"]'),c=o.find('[data-model="type"]'),a=o.find('[data-model="returnMsg"]'),e=o.find('[data-role="back"]'),s=o.find('[data-role="submit"]'),l=o.find('[data-model="type"]');var C=o.find('[data-model="action"]');r=n.find('[data-model="list"]'),h="",d="";var D="";p="",u=[],w=function(t){var e;return null!=t.subReason&&(u[t.value]=t.subReason),e='<li class="radio">',e+="<label>",e+='<input name="reason"',e+=' type="radio" value="'+t.value+" - "+t.desc+'"',"duplicate"===t.short.split("-")[1]&&(t.short="duplicate"),"none-of-all"===t.short||"duplicate"===t.short?e+=' data-action="'+t.short+'"':t.hasOwnProperty("subReason")&&(e+=' data-action="subReason" data-reason='+JSON.stringify(t)),e+=">",e+=t.value+'：<span class="text-muted">'+t.desc+"</span>",e+="</label>",e+="</li>"},k=function(t){var e,n;return e=t.isAccepted?"[解决] ":"",n='<li class="radio">',n+="<label>",n+='<input name="q" type="radio" value="'+t.id+'">',n+='<a href="'+t.url+'" title="'+t.title+'" class="mr10" target="_blank"> ',n+=e+t.title,n+="</a>",n+='<span class="text-muted">'+t.answers+" 个回答</span>",n+="</label>",n+="</li>"},y=function(t,e){var n,i;if(null!=t)return n=function(){var n,r,o;for(o=[],n=0,r=t.length;n<r;n++)i=t[n],o.push(e(i));return o}().join(" ")},v=function(t,e){var n,i,r;return e?(i=" has-input",n='<input type="hidden" name="q">'):(i="",n=y(t.subReason,w)),r='<div class="overlay'+i+'">',e||(r+='<p><strong class="required">该问题'+t.value+"，理由是：</strong></p>"),e&&(r+='<input class="form-control" type="text" placeholder="请输入已有问题标题或网址" >'),r+='<ul class="list-unstyled" data-model="list">',r+=n,r+="</ul>",r+="</div>"},b=function(t){return'<textarea autocomplete="false" class="form-control" rows="3" data-role="custom" name="'+t+'" placeholder="请提供详尽的理由说明" ></textarea>'},g=function(t,e){return $.ajax({type:"get",url:"/api/question/search",async:!0,data:{q:t},dataType:"json",success:function(t){var n;return"login"===t.data[0]?void o.modal("hide"):(n=y(t.data,k),void e.html(n))}})},f={subReason:function(t){var e;return e=$(v(t)),i.append(e),e},duplicate:function(t){var n,r,o,a,s={value:t};return a=$(v(s,!0)),i.append(a),n=a.find("input"),r=a.find('[data-model="list"]'),o=null,n.on("input",function(t){var e;e=$(this).val(),clearTimeout(o),o=setTimeout(function(){g(e,r)},1e3)}),e.hide(),a},"none-of-all":function(){var t;return t=$(b("custom")),$(this).parent().after(t),e.hide(),t}},x={show:function(t,e){a.text(t).slideDown("fast"),setTimeout(function(){x.hide(),e&&e()},3e3)},hide:function(){a.slideUp("fast")},reset:function(){a.hide().empty()}},_=function(t){var e,n,i=(t.type,t.typeText),o=t.actionText,a=t.reason;if(l.text(i),C.text(o),x.reset(),n=a,e=y(n,w),r.html(e),m&&m(n),$(".js-911-delete-tips").remove(),("answer"===t.type||"question"===t.type)&&"删除"===o&&window.config){var s=window.config["delete_"+t.type][1];$("#reportForm").append('<p class="js-911-delete-tips text-danger">注意：删除'+i+"将 "+s+" 声望</p>"),$("#reportForm").append('<p class="text-danger">我们不建议删除带有答案的问题，因为这样做会剥夺未来读者的获取知识的权利。<br>经常删除已回答的问题可能会导致你的账户被降权。</p>')}},m=function(t){var n;n=[],o.on("click.911","input[type=radio]",function(t){var i;n.length>0&&(n[0]&&!$.contains(n[0][0],this)?(n[0].off().remove(),n.splice(0,2)):n[0]||n.splice(0,1)),i=$(this).data("action"),i?(n.unshift($(this)),"q-duplicate"===i?n.unshift(f[i]&&f[i].call(this,$(this).val())):n.unshift(f[i]&&f[i].call(this,$(this).data("reason")))):n.unshift(!1),n.some(function(t){return t})&&"none-of-all"!==i&&e.show()}),o.on("click.911",'[data-role="back"]',function(t){for(var e;!(e=n.shift()););e.off().remove(),n.shift().prop("checked",!1),0===n.length&&$(this).hide()}),o.on("click.911",'[data-role="submit"]',function(t){var e,n,r,a,s,l;if(e=i.serializeArray(),l=[],i.find("input[type=radio],textarea").each(function(t,e){var n;n=$(e).attr("name"),$.inArray(n,l)===-1&&l.push(n)}),e.length!==l.length)return void x.show("请完善理由");for(r=0,a=e.length;r<a;r++)if(n=e[r],!n.value)return void x.show("请完善理由");s=i.serialize(),0!==s.indexOf("reason=以上选项都不是 - 请补充说明")&&s.indexOf("custom=")==-1||(s={reason:$('textarea[name="custom"]').val()}),$.post("/api/"+d+"/"+h+"/"+D,s,function(t){if(0===t.status)location.reload();else if("login"===t.data[0])o.modal("hide");else{var e="";for(var n in t.data[1])e+=t.data[1][n];x.show(e)}},"json")})},o.on("shown.bs.modal",function(t){var e=$(t.relatedTarget),n=e.closest(".js__content-ops");n.length||(n=e),h=n.data("id"),p=n.data("typetext");var i=d=n.data("module"),r=n.data("action-text")?n.data("action-text"):e.text()?e.text():"处理";D=e.data("action"),$(".widget-911").css("visibility","hidden"),$(".modal-backdrop").css("visibility","hidden");var o="/api/reason/"+i+"/"+D,a=function(t){_({type:d,typeText:p,actionText:r,reason:t}),$(".widget-911").css("visibility","visible"),$(".modal-backdrop").css("visibility","visible")};$.get(o,{id:h},function(t){if(!t.status){var e=t.data;a(e)}})}),o.on("hidden.bs.modal",function(t){u=[],o.off("click.911").find(".overlay").remove(),r.empty(),e.hide()})}),define("openInApp",["isMobile","main"],function(t){$(".app-promotion-bar").remove();var e=window.location.origin,n=e.length,i=window.location.href,r=i.length,o=i.substring(n,r),a="https://app.segmentfault.com"+o,s="sfclient://segmentfault.com"+o,l=/openInApp=1/.test(i);if(t("iOS")&&!l){var c='<div class="app-open-in-bar">\n                        <a href="javascript:;"><i class="fa fa-close close"></i></a>\n                        <div class="icon"></div>\n                        <h5 class="title h5">SegmentFault</h5>\n                        <p class="describe">一起探索更多未知</p>\n                        <a class="download-btn btn btn-sm btn-primary" href="'+a+'">应用内打开</a>\n                    </div>';$("body").prepend(c),$("body").on("touchend",".fa-close",function(t){t.preventDefault(),$(".app-open-in-bar").remove()})}if(t("Android")&&!l){var u='<div class="app-open-in-bar">\n                        <a href="javascript:;"><i class="fa fa-close close"></i></a>\n                        <div class="icon"></div>\n                        <h5 class="title h5">SegmentFault</h5>\n                        <p class="describe">一起探索更多未知</p>\n                        <a class="download-btn btn btn-sm btn-primary" href="'+s+'">应用内打开</a>\n                    </div>';$("body").prepend(u);var h=navigator.userAgent.toLowerCase();/micromessenger/.test(h)?$(".download-btn").attr("href",a+"#android"):$("body").on("click",".download-btn",function(t){setTimeout(function(){location.href="/app"},1e3)}),$("body").on("touchend",".fa-close",function(t){t.preventDefault(),$(".app-open-in-bar").remove()})}}),requirejs(["main","pingpp","isMobile","commentNews","bookmark","statusToggle","sfModal","sf_share","highLight","sf_pay","template","specialUrl","contentIndex","sf_tagpopup","userFollow","911","jquery_cookie","jquery_lazyload","jquery_qrcode","underscore","openInApp","jquery_qrcode"],function(t,e,n,i,r,o,a,s,l,c,u,h,d){var p,f,m,g,v,y,b,_,x,w,k,C,D,S,E,T;l($(".article.fmt")),$(".tagPopup .tag").tagpopup(),$(".fmt").find("img").lazyload({data_attribute:"src"}),h(),function(){"undefined"!=typeof ParadigmSDK&&ParadigmSDK.getRecommItems("594",function(t){for(var e="",i=n("any"),r=0;r<t.length;r++){var o=t[r];o.title=o.title.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),e+='<li><a href="'+o.url+'" title="'+o.title+'"'+(i?"":' target="_blank"')+">"+o.title+'</a><span class="text-muted">'+o.publisher_id+"</span>";for(var a=o.tag.split(","),s=0;s<a.length;s++){var l=a[s];e+='<a class="tag" taget="_blank" href="/t/'+encodeURIComponent(l)+'">'+l+"</a>"}e+="</li>"}e.length>0&&$("#paradigm-article-related").html('<div class="recommend-post mb30"><ul class="widget-links">'+e+"</ul></div>")})}();var B=$("#articleTitle").data("id");$(document).scroll(function(){var t=$(".loginBanner").length>0?$(".loginBanner").eq(0).offset().top:$("#footer").offset().top,e=$(".ad-should-be-fixed").height()+$(".side-outline").height(),n=Math.min(e,window.innerHeight);document.documentElement.scrollTop+n+30>=t?$(".side-outline,.ad-should-be-fixed").css("display","none"):$(".side-outline,.ad-should-be-fixed").css("display","block")}),"nd"===$(".article.fmt").data("license")&&$(".article.fmt").mouseup(function(t){var e,n,i,r;if($(".license-tooltip").remove(),e=t.pageX-75,n=t.pageY-45,i=window.getSelection().toString(),i.length)return r=$("<div class='license-tooltip tooltip top' role='tooltip'\nstyle='opacity: 1; left: "+e+"px; top: "+n+"px'>\n<div class='tooltip-arrow'></div>\n<div class='tooltip-inner'>如需转载，请先联系作者</div></div>"),$("body").append(r)}),C=!0,D=function(){if("false"===$.cookie("showRegister")&&"false"!==$.cookie("showRegister2")&&$(".widget-register").hasClass("hidden"))return $(".widget-register .container").html($("#regNext").html()),$(".widget-register").removeClass("hidden"),$(".widget-register .tomorrow").on("click",function(){return $.cookie("showRegister2","false",{expires:1,path:"/"}),$(".widget-register").addClass("widget-register-slideDown"),setTimeout(function(){$(".widget-register").remove()},1e3)})},$(document).scroll(function(){D(),$.cookie("showRegister")||($(".widget-register").removeClass("hidden"),$(".widget-register .tomorrow").on("click",function(){$.cookie("showRegister2")||$.cookie("showRegister2","true",{expires:1,path:"/"}),$.cookie("showRegister","false",{expires:1,path:"/"}),$(".widget-register").addClass("widget-register-slideDown")}))}),w=$("#articleTitle").data("id"),$("#sideBookmark, #mainBookmark").each(function(){$(this).click(function(){var t=$(this);t.hasClass("active")?r.editBookmark(t,function(t,e){0===e&&($("#sideBookmark, #mainBookmark, #side-widget-bookmarks-btn").each(function(){$(this).removeClass("active")}),$("#sideBookmarkText").text("收藏"),$("#mainBookmarkText").text("收藏")),$("#sideBookmarkNum").text(t.data),$("#mainBookmarkNum").text(t.data)}):r.addBookmark(t,function(t){$("#sideBookmark, #mainBookmark, #side-widget-bookmarks-btn").each(function(){$(this).addClass("active")}),$("#sideBookmarkText").text("已收藏"),$("#mainBookmarkText").text("已收藏"),$("#sideBookmarkNum").text(t.data),$("#mainBookmarkNum").text(t.data)})})}),f=$("#mainLike"),m=$("#sideLike");var A=$("#side-widget-votes-btn");E=$("#sideLikeNum"),T=$("#mainLikeNum");$("#mainLikeText"),$("#sideLikeText");o(f),o(m),$("#mainLike, #sideLike").each(function(){$(this).click(function(){var t;t=$(this),t.hasClass("active")?t.trigger("unactive",function(){$.post("/api/article/"+t.data("id")+"/like/cancel",function(e){t.html(t.data("old")),0===e.status&&(f.removeClass("active"),m.removeClass("active"),A.removeClass("stream__item-zan--active active"),$("#sideLikeNum").text(e.data),$("#mainLikeNum").text(e.data),$("#side-widget-votes-num").text(e.data),$("#sideLikeText").text("赞"),$("#mainLikeText").text("赞"))})}):t.trigger("active",function(){$.post("/api/article/"+t.data("id")+"/like",function(e){t.html(t.data("old"));0===e.status&&(f.addClass("active"),m.addClass("active"),A.addClass("stream__item-zan--active active"),$("#sideLikeNum").text(e.data),$("#mainLikeNum").text(e.data),$("#side-widget-votes-num").text(e.data),$("#sideLikeText").text("已赞"),$("#mainLikeText").text("已赞"))})})})}),$(".js__ops-action").click(function(){var t,e,n,i;return t=$(this),i=t.data(),e=t.text(),n="/api/article/"+i.id+"/"+i.action,a({title:"确认"+e,content:"您确认要"+e+"文章「"+i.title+"」吗？",doneFn:function(){return $.post(n,function(t){if(0===t.status)return window.location.reload()})}})}),$("#articleShow").click(function(){var t;t=$(this),a({title:"确认隐藏",content:"您确认要显示文章「"+t.data("title")+"」吗？",closeText:"取消",doneText:"显示",doneFn:function(){$.post("/api/article/"+t.data("id")+"/hide/cancel",function(t){0===t.status&&window.location.reload()})}})}),$("#articleRecommend, #cancelDel").click(function(){var t;t=$(this),$.sfAjax(t,function(){location.reload()})}),$("#articlePublish").click(function(){var t;t=$(this),$.post("/api/article/"+$(this).data("id")+"/publish",function(t){t.status||location.reload()})}),x=$(".widget-share__full").data("text"),_=[],$(".article.fmt img").each(function(){var t;return t=$(this).data("src"),!t||0!==t.indexOf("/image?src")&&0!==t.indexOf("/img/")||(t=location.origin+t),_.push(t)}),$(".tagPopup .tag").each(function(){var t;t=$(this).data("img"),t&&_.push(t)}),0===_.length&&_.push("http://tp1.sinaimg.cn/2036070420/180/40003289296/0"),y=$('meta[name="description"]').attr("content"),new s(".widget-share__full",{image:_.join("||"),text:"【"+x+"】分享自 @SegmentFault，文章传送门：",title:"【"+x+"】分享自 @SegmentFault，文章传送门：",networks:{renren:{title:x+" - SegmentFault",description:y+"... ",comment:""},douban:{title:x+" - SegmentFault",description:y+"...  ",comment:""},twitter:{text:"【"+x+"】分享自@segment_fault，文章传送门：",title:"【"+x+"】分享自@segment_fault，文章传送门："}}},!0),$(".article").find("h1, h2, h3").length&&($(".post-nav").show(),d(".article",".articleIndex"),0===$(".articleIndex li").length&&$(".widget-outline").remove()),S=void 0,p=$(".dont-likeweibo"),p.click(function(t){$.cookie("dontlikeShare",!0,{path:"/"})}),"#shareToWeibo"===location.hash&&(S="http://service.weibo.com/share/share.php?url="+encodeURIComponent(location.origin+location.pathname)+"&title="+encodeURIComponent("我在 @SegmentFault 发布了文章【"+$("#articleTitle a").text().trim()+"】，传送门：")+"&appkey=1742025894",$("#shareToWeiboModal").find("#shareLink").attr("href",S),$("#shareToWeiboModal").modal("show")),$("#reloadCaptcha").click(function(){$(this).find("img").attr("src","/user/captcha?w=178&h=35")}),b=$("#mail").val(),$("#user").submit(function(t){var e,n,i,r,o,a;t.preventDefault(),e=$(this),n=e.find("input").not("input[disabled]"),r=n.index($("input:focus")),o=n.slice(r+1),i=!1,o.length&&o.each(function(){var t,e;if(e=$(this).attr("type"),t=["text","email","password","url"],!$(this).val()&&t.indexOf(e)!==-1)return $(this).focus(),i=!0,!1}),i||(e.find("button[type=submit]").attr("disabled","disabled"),b=$("input[name=mail]").val(),a={mail:b,name:$("input[name=name]").val(),password:$("input[name=password]").val(),captcha:$("#captcha").val(),ref:$("input[name=ref]").val()},$.post("/api/user/register",a,function(t){e.find("button[type=submit]").removeAttr("disabled"),0===t.status?location.reload():($("#captcha").val(""),$("#reloadCaptcha img").attr("src","/user/captcha?w=178&h=35"),t.data[1].captcha&&($("#captcha").removeAttr("disabled"),$("#captcha").parents(".captcha-part").show()))}))}),$(".blog-follow").click(function(t){var e;t.preventDefault(),e=$(this),e.attr("disabled","disabled"),$.sfAjax(e,function(t){e.hasClass("active")?e.removeClass("active").find(".blog-text").text("关注"):e.addClass("active").find(".blog-text").text("已关注"),e.find(".blog-followers").text(t.data),e.removeAttr("disabled")})}),$(".follow-user").click(function(t){var e;t.preventDefault(),e=$(this),e.attr("disabled","disabled"),$.sfAjax(e,function(){e.hasClass("active")?e.removeClass("active").text("关注作者"):e.addClass("active").text("取消关注"),e.removeAttr("disabled")})}),$(".follow-article").click(function(t){var e;t.preventDefault(),e=$(this),e.attr("disabled","disabled"),$.sfAjax(e,function(){e.hasClass("active")?e.removeClass("active").text("关注专栏"):e.addClass("active").text("取消关注"),e.removeAttr("disabled")})});$(".article__reward-btn").on("click",function(){var t=$(".article__reward-btn").data("id"),e={type:1,prices:[2,5,10,20,50,100],price:2,title:"赞赏作者",api:"/api/article/"+t+"/reward",formData:{}};c(e)}),location.search.split("?").length>1&&location.search.split("?")[1].indexOf("pay")!=-1&&$(".article__reward-btn").length&&$(".article__reward-btn").trigger("click"),$(".article__reward-list-btn").popover({html:!0}).on("shown.bs.popover",function(){$(".article__reward-item").tooltip()});var P=new i({mod:"article"});if($("#SFEventObject").length>0){k=JSON.parse($("#SFEventObject").attr("value")),v=k.current[0],g=k.current[1];var L=k.root[0],I=k.root[1],F=function(){g.forEach(function(t,e){$("[data-id="+t+"]").addClass("highlight"),setTimeout(function(){},3e3),e||setTimeout(function(){$("html, body").scrollTop($("[data-id="+t+"]").offset().top)},100)})};"article"===L?"comment"===v&&F():P.unfoldCommentArea(I,F)}var M='\n        <form class="form-horizontal form__reward-apply" action="/api/apply/reward" >\n            <div class="form-group">\n                <label class="required control-label col-sm-3">真实姓名</label>\n                <div class="col-sm-6">\n                    <input name="name" class="form-control">\n                </div>\n            </div>\n            <div class="form-group">\n                <label class="required control-label col-sm-3">申请理由</label>\n                <div class="col-sm-6">\n                    <textarea name="reason" class="form-control" placeholder="给我一个开通的理由"></textarea>\n                </div>\n            </div>\n        </form>\n        ',O=$(".wrap").data("blogid"),j=function(){a({title:"申请开通赞赏",$content:M,doneText:"提交",doneFn:function(){var t=$(".form__reward-apply").serializeArray(),e={};t.map(function(t){e[t.name]=t.value}),$.post("/api/apply/reward",e,function(t){t.status||(location.href="/user/settings?tab=blog&id="+O)})}})},R=function(){a({modalSize:"modal-lg",title:"登录",doneText:"登录",hideClose:!0,hideDone:!0,hideFooter:!0,content:$("#loginModal").text(),show:function(){return window.ga&&ga("send","event","login modal","show","login modal"),$("[name=mail]").first().focus(),$("#loginShowMore").click(function(t){t.preventDefault(),$(this).hide(),$(this).siblings().removeClass("hidden")}),$(".sfmodal .widget-login a").click(function(t){t.preventDefault(),window.open($(this).attr("href"),"_blank","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=500")}),$("#loginReloadCaptcha").click(function(){$(this).find("img").attr("src","/user/captcha?w=240&h=50")})}}),$(".register-mail").typeHelperOld({emailMode:!0,onlyResult:!1})};t={reward:j,login:R,userId:$("#SFUserId").attr("value")},$(".post__reward--application-btn").on("click",function(e){var n=Boolean($(this).data("phone"));n?t.reward():a({modalSize:"modal-md",title:"绑定手机号",doneText:"下一步",content:$("#bindPhoneModal").text(),doneFn:function(){var e=$(".form__bindphone-apply").serializeArray(),n={};e.map(function(t){n[t.name]=t.value}),$.post("/api/user/phone/bind/check",n,function(e){e.status||t.reward()})}})}),$(".widget-share__full > div:first").remove(),$("table,svg").each(function(t,e){var n=$(this),i=n.width()>n.closest(".row").children().first().width();0==n.closest(".table-wrap").length&&i&&n.wrap('<div class="table-wrap"></div>')}),$(".fa-weixin").popover({html:!0,content:'\n        <div id="side-widget-weixin-share" style="width:120px;height:120px"></div>\n      ',trigger:"hover"}),$(".fa-weixin").on("shown.bs.popover",function(){var t=$(".widget-share__full").data("url");t+=t.includes("share_user")?"&utm_source=Wechat&utm_medium=shareLink":"?utm_source=Wechat&utm_medium=shareLink",console.log(t),$("#side-widget-weixin-share").qrcode({text:t,width:120,height:120})}),$("#side-widget-votes-btn").on("click",function(){return $("#mainLike").trigger("click"),!1}),$("#side-widget-bookmarks-btn").on("click",function(){return $("#mainBookmark").trigger("click"),!1}),$(".fa-weibo").on("click",function(){return $('[data-network="weibo"]').trigger("click"),!1}),$(".fa-twitter").on("click",function(){return $('[data-network="twitter"]').trigger("click"),!1}),$(".fa-facebook").on("click",function(){return $('[data-network="facebook"]').trigger("click"),!1}),$(document).scroll(function(){$(document).scrollTop()>$(".article__content").height()+$(".article__content").offset().top?$(".side-widget").hide():$(".side-widget").show(),$(window).scrollTop()>$(window).height()?$(".fa-arrow-up").removeClass("hidden"):$(".fa-arrow-up").addClass("hidden")}),$(".fa-arrow-up").on("click",function(){$(window).scrollTop(0)});var N,q,z,H,U,W,Y;z=$("#seo"),N=z.find('[data-model="returnMsg"]'),H=$("#seoForm"),U=z.find("[name=title]"),W=z.find("[name=desc]"),Y=z.find("[name=keywords]"),q={show:function(t,e){N.text(t).slideDown("fast"),setTimeout(function(){q.hide(),e&&e()},3e3)},hide:function(){N.slideUp("fast")},reset:function(){N.hide().empty()}},q.hide(),z.on("shown.bs.modal",function(t){$.get("/api/article/"+w+"/seo",function(t){if(0===t.status){var e=t.data;U.val(e.title),W.val(e.desc),Y.val(e.keywords)}else if("login"===t.data[0])z.modal("hide");else{var n="";for(var i in t.data[1])n+=t.data[1][i];q.show(n)}},"json")}),z.on("click.seo",'[data-role="submit"]',function(t){var e,n,i,r,o,a;if(e=H.serializeArray(),a=[],H.find("textarea").each(function(t,e){var n;n=$(e).attr("name"),$.inArray(n,a)===-1&&a.push(n)}),e.length!==a.length)return void q.show("请完善填写数据");for(i=0,r=e.length;i<r;i++)if(n=e[i],!n.value)return void q.show("请完善填写数据");o=H.serialize(),$.post("/api/article/"+w+"/seo",o,function(t){if(0===t.status)z.modal("hide");else if("login"===t.data[0])z.modal("hide");else{var e="";for(var n in t.data[1])e+=t.data[1][n];q.show(e)}},"json")})}),define("blog_post",function(){});