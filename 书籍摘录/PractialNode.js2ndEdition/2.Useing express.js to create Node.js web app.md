# Useing express.js to create Node.js web app

In this chapter wo cover the follows topics: 

* What Express.js is 
* How Express.js work 
* Express.js installation
* Express.js scaffolding(command-line tool)
* The blog project overview
* Express.js hello worl example

# What is Express.js ?

Express.js is a web framework base on core node.js http module and [Connect](https://github.com/senchalabs/connect#readme) components. The components are called middlware are the cornerstones of the framework philosophy, which configuration over convention. In other words, Express.js system is highly configurable,which allow developers to freely pick whatever libraries they need for a particular project.For these reasons, the Express.js framework leads to flexibility and high customization in the development of web application.

If we write serious Node web apps using only core Node.js modules you most likely find yourself reinveting wheel by writing the same code continually over and over for similar boring mundane tasks, such as following:

* Parsing HTTP request bodies
* Parsing of cookie
* Getting information of URL
* Reading queryString data from URL and request body\
* Managing web session
* Organzing routes with a chain of if condition base on URL path and HTTP mehods of the request
* Determing proper response header base on data types

A good example is worth hundreds of words:
~~~js
const http = require('http')
const util = require('util')
const querystring = require('querystring')
const mongo = require('mongpdb')

const host = process.env.MONGOHQ_URL || 'mongodb://127.0.0.1:27017'

mongo.Db.connect(host, (error, client) => {
  if (error) throw error
  let collection = new mongo.Collection(
    client,
    'test_collection'
  )
  let app = http.createServer(
    (request, response) => {
      if (request.method === 'GET' && request.url === '/messages/list.json') {
        collection.find().toArray((error, results) => {
          response.writeHead(
            200,
            { 'Content-Type': 'text/plain' }
          )
          console.dir(results)
          response.end(JSON.stringify(results))
        })
      }
      if (request.method === 'POST' && request.url === '/message/create.json') {
        response.on('data', (data) => {
          collection.insert(
            querystring.parse(data.toString('utf-8')),
            { safe: true },
            (error, obj) => {
              if (error, obj) => {
                if (error) throw error
                response.end(JSON.stringify(obj))
              }
            }
          )
        })
      }
    }
  )
  const port = process.env.PORT || 5000
  app.listen(port)
})
~~~

# How Express.js Works

Express.js useually has an entry point, a.k.a, the main file. The names of this file typically `server.js`, `app.js` or `index.js`. Most of the time, this is the file that we start with the `node`commond, or export it as amodule, in some cases. And in theis file, we do the following:

1. Include third-party dependencies as well as our own modules, such as controllers, utilities, helpers, and models.
2. Configure Express.js app settings, such as template engine and its rile extensions
3. Define middleware such as error handlers, static file folder, cookies, and other parsers
4. Define routes
6. Start the app
7. Export the app as a module(optional)

When the Express.js app is running, it's listening to requests. Each incoming request is processed accodrding to defined chain of middleware and routes, starting from top to bottom. This aspect is important in controlling the execution flow.For example, routes/middleware that are higher in the file have precedence over the lower definitions.

# Express.js Installation

The Express.js app can be created using two methods:
1. express-generator: A global npm package that provides the command-line tool for rapid app creation(scaffolding)--recommended for quick prototyping and server-side rendering apps.

2. express: A local package module in your Node.js app's `node_modules` folder-- recommended foro any project which needs to import `express` with `require()` or `import`

# Express.js Generator Version

Here is the command to install the latest version:
~~~
npm install -g express-generator@latest
~~~
You can uninstall generator using `sudo npm uninstall -g express-generator` or `sudo npm uninstall -g express`.

# Express.js Generator Installation

