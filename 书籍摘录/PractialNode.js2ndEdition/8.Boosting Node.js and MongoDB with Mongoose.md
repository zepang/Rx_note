# Boosting Node.js and MongoDB with Mongoose

# DB connection in a standalone Mongoose script

~~~js
const mongoose = require('mongoose)

mongoose.connect('mongodb://localhost:27017/test', {useMongoClient: true})
mongoose.Promise = global.Promise
~~~

# Mongoose shcema

These are the Mongoose data types:

* String
* Number
* Boolean
* Buffer
* Date
* Array
* Schema.Types.ObjectId
* Schema.Types.Mixed

It's possible to create and use custom types that already have the rules for the ubiquitous email and URL types, e.g., there's a module [mongoose-types(http://github.com/bnoguchi/mongoose-types)](http://github.com/bnoguchi/mongoose-types)

Mongoose schemas are pluggable, which means, by creating a plugin,certain functionally can be extended across all schemas of the application.

# Hooks for Keeping code organized

```js
bookSchema.pre('save', (next) => {
  // Upload pdf
  return next()
})
```

# custom static and instance methods

instance methods
```js
bookSchema.method({
  buy: function (quantity, customer, callback) {
    const bookTopPurchase = this
    return callback(results)
  }
})
```
static methods
```js
bookSchema.static({
  getZeroInventoryReport: function (callback) {
    return callback(books)
  }
})
```

Hooks and methods must be added to the schemas before compiling them to models --- in other words, before calling the `mongoose.model()` method.

# Mongoose Models

To compile a schema into a module

~~~js
const Book = mongoose.model('Book', bookSchema)
~~~

The first paramerter is just a string, which we can use latter to pull an instance of this model.Usually, this string is the same as the object literal for the model.It's usually capitalized, e.g.,`Book`.By default, Mongoose will use the model name to tie it to a collection name by pluralizing it.For example, the `Book` model will use books collection.

Nodeks are used to create documents.Document is the instance of the Model.

```js
const practicalNodeBook = new Book({name: 'Practical Node.js'})
```


