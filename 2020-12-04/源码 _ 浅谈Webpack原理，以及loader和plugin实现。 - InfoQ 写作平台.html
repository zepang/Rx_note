
<!-- saved from url=(0054)https://xie.infoq.cn/article/5f463d1f0ec3598973714f44a -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- <geektime>1607907618904</geektime> -->
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    
        <link rel="icon" type="image/png" sizes="32x32" href="https://static001.infoq.cn/static/write/img/write-favicon.jpg">
        <link rel="icon" type="image/png" sizes="16x16" href="https://static001.infoq.cn/static/write/img/write-favicon.jpg">
    
    <meta name="keywords" content="语言 开发,Web框架,前端,原理,loader,plugin,源码,浅谈,Webpack,webpack5,构建,过程,raw,cros,插件,撸最,webpack" id="metakeywords">
    <meta name="description" content="一、初识Webpackwebpack是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)。当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个bundle。1、能做什么？webpack 通过 loader 可以支持各种语言和预处理器编写模块（通过" id="metadesc">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="format-detection" content="telephone=no">
    <meta name="applicable-device" content="pc,mobile">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <link rel="canonical" href="https://xie.infoq.cn/article/5f463d1f0ec3598973714f44a">
    <meta property="og:title" content="源码 | 浅谈Webpack原理，以及loader和plugin实现。">
    <meta property="og:url" content="https://xie.infoq.cn/article/5f463d1f0ec3598973714f44a">
    <meta property="og:image" content="https://static001.geekbang.org/infoq/bc/bc1c7606373299ca73c5a0461e467bdb.jpeg">
    <meta property="og:description" content="一、初识Webpackwebpack是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)。当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个bundle。1、能做什么？webpack 通过 loader 可以支持各种语言和预处理器编写模块（通过">
    <title>源码 | 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台</title>
    <script async="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/sensorsdata.min.js.下载" charset="UTF-8"></script><script src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/hm.js.下载"></script><script src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/hm.js(1).下载"></script><script async="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/analytics.js.下载"></script><script src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/push.js.下载"></script><script type="text/javascript" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/jweixin-1.4.0.js.下载"></script>
    <script type="text/javascript" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/bufferLogger.1.0.8.min.js.下载"></script>
    <script src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/dingtalk.open.js.下载"></script>
    
        <script type="text/javascript" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/aliplayer-min.js.下载"></script>
        <script type="text/javascript" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/hls.8361666e7e2690d988ff5fe775b62bbe.js.下载"></script>
    
    <script type="text/javascript">
        if (!('flex' in document.documentElement.style) && !navigator.userAgent.match(/spider|googlebot|bingbot|geekbang|yahoo! Slurp/i)) {
            window.location.href = '//static001.geekbang.org/static/common/browser_update/index.html'
        }
    </script>
    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https'){
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else{
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>
<link href="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/app.70ac74e4.css" rel="stylesheet"><style>._3emE9--dark-theme .-S-tR--ff-downloader{background:rgba(30,30,30,.93);border:1px solid rgba(82,82,82,.54);box-shadow:0 4px 7px rgba(30,30,30,.55);color:#fff}._3emE9--dark-theme .-S-tR--ff-downloader ._6_Mtt--header ._2VdJW--minimize-btn{background:#3d4b52}._3emE9--dark-theme .-S-tR--ff-downloader ._6_Mtt--header ._2VdJW--minimize-btn:hover{background:#131415}._3emE9--dark-theme .-S-tR--ff-downloader ._10vpG--footer{background:rgba(30,30,30,.93)}._2mDEx--white-theme .-S-tR--ff-downloader{background:#fff;border:1px solid rgba(82,82,82,.54);box-shadow:0 4px 7px rgba(30,30,30,.55);color:#314c75}._2mDEx--white-theme .-S-tR--ff-downloader ._6_Mtt--header{font-weight:700}._2mDEx--white-theme .-S-tR--ff-downloader ._2dFLA--container ._2bWNS--notice{border:0;color:rgba(0,0,0,.88)}._2mDEx--white-theme .-S-tR--ff-downloader ._10vpG--footer{background:#fff}.-S-tR--ff-downloader{display:block;overflow:hidden;position:fixed;bottom:20px;right:7.1%;width:330px;height:180px;background:rgba(30,30,30,.93);border-radius:2px;color:#fff;z-index:99999999;border:1px solid rgba(82,82,82,.54);box-shadow:0 4px 7px rgba(30,30,30,.55);transition:.5s}.-S-tR--ff-downloader._3M7UQ--minimize{height:62px}.-S-tR--ff-downloader._3M7UQ--minimize .nxuu4--file-info,.-S-tR--ff-downloader._3M7UQ--minimize ._6_Mtt--header{display:none}.-S-tR--ff-downloader ._6_Mtt--header{padding:10px;font-size:17px;font-family:sans-serif}.-S-tR--ff-downloader ._6_Mtt--header ._2VdJW--minimize-btn{float:right;background:#f1ecec;height:20px;width:20px;text-align:center;padding:2px;margin-top:-10px;cursor:pointer}.-S-tR--ff-downloader ._6_Mtt--header ._2VdJW--minimize-btn:hover{background:#e2dede}.-S-tR--ff-downloader ._13XQ2--error{color:red;padding:10px;font-size:12px;line-height:19px}.-S-tR--ff-downloader ._2dFLA--container{position:relative;height:100%}.-S-tR--ff-downloader ._2dFLA--container .nxuu4--file-info{padding:6px 15px 0;font-family:sans-serif}.-S-tR--ff-downloader ._2dFLA--container .nxuu4--file-info div{margin-bottom:5px;width:100%;overflow:hidden}.-S-tR--ff-downloader ._2dFLA--container ._2bWNS--notice{margin-top:21px;font-size:11px}.-S-tR--ff-downloader ._10vpG--footer{width:100%;bottom:0;position:absolute;font-weight:700}.-S-tR--ff-downloader ._10vpG--footer ._2V73d--loader{-webkit-animation:n0BD1--rotation 3.5s linear forwards;animation:n0BD1--rotation 3.5s linear forwards;position:absolute;top:-120px;left:calc(50% - 35px);border-radius:50%;border:5px solid #fff;border-top-color:#a29bfe;height:70px;width:70px;display:flex;justify-content:center;align-items:center}.-S-tR--ff-downloader ._10vpG--footer ._24wjw--loading-bar{width:100%;height:18px;background:#dfe6e9;border-radius:5px}.-S-tR--ff-downloader ._10vpG--footer ._24wjw--loading-bar ._1FVu9--progress-bar{height:100%;background:#8bc34a;border-radius:5px}.-S-tR--ff-downloader ._10vpG--footer ._2KztS--status{margin-top:10px}.-S-tR--ff-downloader ._10vpG--footer ._2KztS--status ._1XilH--state{float:left;font-size:.9em;letter-spacing:1pt;text-transform:uppercase;width:100px;height:20px;position:relative}.-S-tR--ff-downloader ._10vpG--footer ._2KztS--status ._1jiaj--percentage{float:right}</style><script charset="utf-8" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/chunk-geek-editor.efa5c18b.js.下载"></script><link rel="stylesheet" type="text/css" href="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/chunk-katex.26fbacea.css"><script charset="utf-8" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/chunk-katex.a956ad4c.js.下载"></script><script charset="utf-8" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/chunk-codemirror.89176e94.js.下载"></script><link rel="stylesheet" type="text/css" href="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/chunk-b4e633b8.5c5db179.css"><script charset="utf-8" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/chunk-b4e633b8.4d7f7378.js.下载"></script><link rel="stylesheet" type="text/css" href="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/PageArticle.3ac7c084.css"><script charset="utf-8" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/PageArticle.3dd777c7.js.下载"></script><style type="text/css">.ewAHQnkq {
  white-space: normal;
  position: relative;
  border-radius: 4px;
  margin-top: 5px;
  margin-bottom: 5px;
}
.ewAHQnkq:hover ._1QDKlxfV {
  display: flex;
}
._1QDKlxfV {
  user-select: none;
  position: absolute;
  z-index: 10;
  width: 200px;
  top: -30px;
  padding-bottom: 6px;
  left: 0px;
  display: none;
}
._314BQAa9 {
  line-height: 0;
  height: 0;
  width: 0;
  position: absolute;
  top: 0;
  left: 0;
  overflow: hidden;
}
._1ywKB5zQ {
  left: 50%;
  transform: translateX(-50%);
  justify-content: center;
}
.TZBEPzll {
  flex: 0 0 58px;
  text-align: center;
  height: 24px;
  line-height: 24px;
  color: #444;
  cursor: pointer;
  font-size: 12px;
  margin-right: 10px;
  background: #fff;
  border-radius: 4px;
  border: 1px solid #ddd;
}
._3C0zKJ2b {
  padding: 2px;
  position: relative;
  user-select: none;
  border-radius: 3px;
}
._3C0zKJ2b:hover {
  box-shadow: 0 0 1px 2px rgba(20,88,212,0.4);
}
._1sd45Sm0 {
  box-shadow: 0 0 1px 2px rgba(20,88,212,0.7);
}
._1sd45Sm0 ._1QDKlxfV {
  display: flex;
}
</style><style type="text/css">.CodeMirror {
/* Set height, width, borders, and global font properties here */
  font-family: monospace;
  height: auto;
  color: #000;
  direction: ltr;
}
.CodeMirror-lines {
  padding: 4px 0; /* Vertical padding around content */
}
.CodeMirror pre.CodeMirror-line, .CodeMirror pre.CodeMirror-line-like {
  padding: 0 4px 0 10px; /* Horizontal padding of content */
}
.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {
  background-color: #fff; /* The little square between H and V scrollbars */
}
.CodeMirror-gutters {
/* border-right: 1px solid #ddd; */
/* background-color: #f7f7f7; */
  white-space: nowrap;
}
.CodeMirror-linenumber {
  padding: 0 3px 0 5px;
  min-width: 20px;
  text-align: right;
  color: #c1c7cd;
  font-family: 'Source Code Pro', Courier;
  font-size: 13px;
  white-space: nowrap;
}
.CodeMirror-guttermarker {
  color: #000;
}
.CodeMirror-guttermarker-subtle {
  color: #999;
}
.CodeMirror-cursor {
  border-left: 1px solid #000;
  border-right: none;
  width: 0;
}
.CodeMirror div.CodeMirror-secondarycursor {
  border-left: 1px solid #c0c0c0;
}
.cm-fat-cursor .CodeMirror-cursor {
  width: auto;
  border: 0 !important;
  background: #7e7;
}
.cm-fat-cursor div.CodeMirror-cursors {
  z-index: 1;
}
.cm-fat-cursor-mark {
  background-color: rgba(20,255,20,0.5);
  -webkit-animation: blink 1.06s steps(1) infinite;
  -moz-animation: blink 1.06s steps(1) infinite;
  animation: blink 1.06s steps(1) infinite;
}
.cm-animate-fat-cursor {
  width: auto;
  border: 0;
  -webkit-animation: blink 1.06s steps(1) infinite;
  -moz-animation: blink 1.06s steps(1) infinite;
  animation: blink 1.06s steps(1) infinite;
  background-color: #7e7;
}
@-moz-keyframes _2qjs-l6C {
50% {
    background-color: transparent;
}
}
@-webkit-keyframes _2qjs-l6C {
50% {
    background-color: transparent;
}
}
.cm-tab {
  display: inline-block;
  text-decoration: inherit;
}
.CodeMirror-rulers {
  position: absolute;
  left: 0;
  right: 0;
  top: -50px;
  bottom: 0;
  overflow: hidden;
}
.CodeMirror-ruler {
  border-left: 1px solid #ccc;
  top: 0;
  bottom: 0;
  position: absolute;
}
.cm-s-default .cm-header {
  color: #00f;
}
.cm-s-default .cm-quote {
  color: #090;
}
.cm-negative {
  color: #d44;
}
.cm-positive {
  color: #292;
}
.cm-header, .cm-strong {
  font-weight: bold;
}
.cm-em {
  font-style: italic;
}
.cm-link {
  text-decoration: underline;
}
.cm-strikethrough {
  text-decoration: line-through;
}
.cm-s-default .cm-keyword {
  color: #708;
}
.cm-s-default .cm-atom {
  color: #219;
}
.cm-s-default .cm-number {
  color: #164;
}
.cm-s-default .cm-def {
  color: #00f;
}
.cm-s-default .cm-variable-2 {
  color: #05a;
}
.cm-s-default .cm-variable-3, .cm-s-default .cm-type {
  color: #085;
}
.cm-s-default .cm-comment {
  color: #a50;
}
.cm-s-default .cm-string {
  color: #a11;
}
.cm-s-default .cm-string-2 {
  color: #f50;
}
.cm-s-default .cm-meta {
  color: #555;
}
.cm-s-default .cm-qualifier {
  color: #555;
}
.cm-s-default .cm-builtin {
  color: #30a;
}
.cm-s-default .cm-bracket {
  color: #997;
}
.cm-s-default .cm-tag {
  color: #170;
}
.cm-s-default .cm-attribute {
  color: #00c;
}
.cm-s-default .cm-hr {
  color: #999;
}
.cm-s-default .cm-link {
  color: #00c;
}
.cm-s-default .cm-error {
  color: #f00;
}
.cm-invalidchar {
  color: #f00;
}
.CodeMirror-composing {
  border-bottom: 2px solid;
}
div.CodeMirror span.CodeMirror-matchingbracket {
  color: #0b0;
}
div.CodeMirror span.CodeMirror-nonmatchingbracket {
  color: #a22;
}
.CodeMirror-matchingtag {
  background: rgba(255,150,0,0.3);
}
.CodeMirror-activeline-background {
  background: #e8f2ff;
}
.CodeMirror {
  position: relative;
  overflow: hidden;
  background: #f8f9fa;
}
.CodeMirror-scroll {
  overflow: scroll !important; /* Things will break if this is overridden */
/* 30px is the magic margin used to hide the element's real scrollbars */
/* See overflow: hidden in .CodeMirror */
  margin-bottom: -30px;
  margin-right: -30px;
  padding-bottom: 30px;
  height: 100%;
  outline: none; /* Prevent dragging from highlighting the element */
  position: relative;
}
.CodeMirror-sizer {
  position: relative;
  border-right: 30px solid transparent;
}
.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {
  position: absolute;
  z-index: 6;
  display: none;
}
.CodeMirror-vscrollbar {
  right: 0;
  top: 0;
  overflow-x: hidden;
  overflow-y: scroll;
}
.CodeMirror-hscrollbar {
  bottom: 0;
  left: 0;
  overflow-y: hidden;
  overflow-x: scroll;
}
.CodeMirror-scrollbar-filler {
  right: 0;
  bottom: 0;
}
.CodeMirror-gutter-filler {
  left: 0;
  bottom: 0;
}
.CodeMirror-gutters {
  position: absolute;
  left: 0;
  top: 0;
  min-height: 100%;
  z-index: 3;
}
.CodeMirror-gutter {
  white-space: normal;
  height: 100%;
  display: inline-block;
  vertical-align: top;
  margin-bottom: -30px;
}
.CodeMirror-gutter-wrapper {
  position: absolute;
  z-index: 4;
  background: none !important;
  border: none !important;
}
.CodeMirror-gutter-background {
  position: absolute;
  top: 0;
  bottom: 0;
  z-index: 4;
}
.CodeMirror-gutter-elt {
  position: absolute;
  cursor: default;
  z-index: 4;
}
.CodeMirror-gutter-wrapper ::selection {
  background-color: transparent;
}
.CodeMirror-gutter-wrapper ::-moz-selection {
  background-color: transparent;
}
.CodeMirror-lines {
  cursor: text;
  min-height: 1px; /* prevents collapsing before first draw */
}
.CodeMirror pre.CodeMirror-line, .CodeMirror pre.CodeMirror-line-like {
/* Reset some styles that the rest of the page might have set */
  -moz-border-radius: 0;
  -webkit-border-radius: 0;
  border-radius: 0;
  border-width: 0;
  background: transparent;
  font-family: 'Source Code Pro', Courier;
  font-size: 13px;
  line-height: 20px;
  margin: 0;
  white-space: pre;
  word-wrap: normal;
  color: inherit;
  z-index: 2;
  position: relative;
  overflow: visible;
  -webkit-tap-highlight-color: transparent;
  -webkit-font-variant-ligatures: contextual;
  font-variant-ligatures: contextual;
}
.CodeMirror-wrap pre.CodeMirror-line, .CodeMirror-wrap pre.CodeMirror-line-like {
  word-wrap: break-word;
  white-space: pre-wrap;
  word-break: normal;
}
.CodeMirror-linebackground {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  z-index: 0;
}
.CodeMirror-linewidget {
  position: relative;
  z-index: 2;
  padding: 0.1px; /* Force widget margins to stay inside of the container */
}
.CodeMirror-rtl pre {
  direction: rtl;
}
.CodeMirror-code {
  outline: none;
}
.CodeMirror-scroll, .CodeMirror-sizer, .CodeMirror-gutter, .CodeMirror-gutters, .CodeMirror-linenumber {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
}
.CodeMirror-linenumber {
  background: #f8f9fa;
  line-height: 20px;
}
.CodeMirror-measure {
  position: absolute;
  width: 100%;
  height: 0;
  overflow: hidden;
  visibility: hidden;
}
.CodeMirror-cursor {
  position: absolute;
  pointer-events: none;
}
.CodeMirror-measure pre {
  position: static;
}
div.CodeMirror-cursors {
  visibility: hidden;
  position: relative;
  z-index: 3;
}
div.CodeMirror-dragcursors {
  visibility: visible;
}
.CodeMirror-focused div.CodeMirror-cursors {
  visibility: visible;
}
.CodeMirror-selected {
  background: #d9d9d9;
}
.CodeMirror-focused .CodeMirror-selected {
  background: #d7d4f0;
}
.CodeMirror-crosshair {
  cursor: crosshair;
}
.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection {
  background: #d7d4f0;
}
.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection {
  background: #d7d4f0;
}
.cm-searching {
  background-color: #ffa;
  background-color: rgba(255,255,0,0.4);
}
.cm-force-border {
  padding-right: 0.1px;
}
.cm-tab-wrap-hack:after {
  content: '';
}
span.CodeMirror-selectedtext {
  background: none;
}
@-moz-keyframes _2qjs-l6C {
50% {
    background-color: transparent;
}
}
@-webkit-keyframes _2qjs-l6C {
50% {
    background-color: transparent;
}
}
@-o-keyframes _2qjs-l6C {
50% {
    background-color: transparent;
}
}
@keyframes _2qjs-l6C {
50% {
    background-color: transparent;
}
}
._3aWaq2T7 {
  position: relative;
  padding-top: 60px;
  padding-bottom: 7px;
  background: #f8f9fa;
  border-radius: 4px;
}
._3aWaq2T7 img {
  user-select: none;
  width: 100%;
}
._12XeGTHc {
  border: 1px solid #00f;
}
._4PBtdVk4 {
  position: relative;
}
._3GPPXY0m {
  display: flex;
  position: absolute;
  top: 14px;
  left: 14px;
}
.CvR5NcCW {
  flex: 0 0 auto;
  position: relative;
  cursor: pointer;
}
._11g5bSiB {
  font-size: 14px;
  color: #353535;
  padding-left: 10px;
  padding-right: 25px;
  position: relative;
  border-radius: 4px;
  text-align: center;
  border: 1px solid #ccc;
  background: #fff;
}
._11g5bSiB:after {
  content: '';
  position: absolute;
  height: 0px;
  width: 0px;
  border: 3.5px solid transparent;
  border-top: 4px solid #828a92;
  top: 14px;
  right: 8px;
}
._11g5bSiB:hover {
  background: #f3f4f5;
}
._1FSUXkGV {
  position: absolute;
  border: 1px solid #eaeeef;
  box-shadow: 0px 3px 14px 0px rgba(214,216,218,0.3);
  border-radius: 4px;
  padding: 20px 0px;
  top: 37px;
  left: 0;
  z-index: 10;
  background: #fff;
}
._4vZlzcfw {
  font-size: 14px;
  white-space: nowrap;
  line-height: 1.2;
  padding: 8px 60px 8px 20px;
  position: relative;
}
._4vZlzcfw ._247SSKPm {
  margin-right: 5px;
}
._4vZlzcfw:hover {
  background: #f8f9fa;
}
</style><style type="text/css">._15-LPGLf {
  position: relative;
  text-align: center;
}
._15-LPGLf img {
  vertical-align: top;
  width: 75%;
}
._3kQMHLDw {
  user-select: none;
  font-size: 16px;
  color: #828a92;
  text-align: center;
  line-height: 24px;
  padding-top: 10px;
}
._1JhJpBXj {
  color: #828a92;
  height: 60px;
  line-height: 60px;
  background: #f9f9f9;
  font-size: 14px;
}
</style><style type="text/css">._1sOtPf0d {
  position: relative;
  width: 75%;
  margin: 0 auto;
}
._1sOtPf0d iframe {
  vertical-align: top;
}
._2lRDlbrr {
  z-index: 2;
  position: relative;
}
</style><style type="text/css">[data-simplebar] {
  position: relative;
  flex-direction: column;
  flex-wrap: wrap;
  justify-content: flex-start;
  align-content: flex-start;
  align-items: flex-start;
}
.simplebar-wrapper {
  overflow: hidden;
  width: inherit;
  height: inherit;
  max-width: inherit;
  max-height: inherit;
}
.simplebar-mask {
  direction: inherit;
  position: absolute;
  overflow: hidden;
  padding: 0;
  margin: 0;
  left: 0;
  top: 0;
  bottom: 0;
  right: 0;
  width: auto !important;
  height: auto !important;
  z-index: 0;
}
.simplebar-offset {
  direction: inherit !important;
  box-sizing: inherit !important;
  resize: none !important;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  padding: 0;
  margin: 0;
  -webkit-overflow-scrolling: touch;
}
.simplebar-content-wrapper {
  direction: inherit;
  box-sizing: border-box !important;
  position: relative;
  display: block;
  height: 100%; /* Required for horizontal native scrollbar to not appear if parent is taller than natural height */
  width: auto;
  visibility: visible;
  max-width: 100%; /* Not required for horizontal scroll to trigger */
  max-height: 100%; /* Needed for vertical scroll to trigger */
  scrollbar-width: none;
  -ms-overflow-style: none;
}
.simplebar-content-wrapper::-webkit-scrollbar, .simplebar-hide-scrollbar::-webkit-scrollbar {
  width: 0;
  height: 0;
}
.simplebar-content:before, .simplebar-content:after {
  content: ' ';
  display: table;
}
.simplebar-placeholder {
  max-height: 100%;
  max-width: 100%;
  width: 100%;
  pointer-events: none;
}
.simplebar-height-auto-observer-wrapper {
  box-sizing: inherit !important;
  height: 100%;
  width: 100%;
  max-width: 1px;
  position: relative;
  float: left;
  max-height: 1px;
  overflow: hidden;
  z-index: -1;
  padding: 0;
  margin: 0;
  pointer-events: none;
  flex-grow: inherit;
  flex-shrink: 0;
  flex-basis: 0;
}
.simplebar-height-auto-observer {
  box-sizing: inherit;
  display: block;
  opacity: 0;
  position: absolute;
  top: 0;
  left: 0;
  height: 1000%;
  width: 1000%;
  min-height: 1px;
  min-width: 1px;
  overflow: hidden;
  pointer-events: none;
  z-index: -1;
}
.simplebar-track {
  z-index: 1;
  position: absolute;
  right: 0;
  bottom: 0;
  pointer-events: none;
  overflow: hidden;
}
[data-simplebar].simplebar-dragging .simplebar-content {
  pointer-events: none;
  user-select: none;
  -webkit-user-select: none;
}
[data-simplebar].simplebar-dragging .simplebar-track {
  pointer-events: all;
}
.simplebar-scrollbar {
  position: absolute;
  left: 0;
  right: 0;
  min-height: 10px;
}
.simplebar-scrollbar:before {
  position: absolute;
  content: '';
  background: #000;
  border-radius: 7px;
  left: 2px;
  right: 2px;
  opacity: 0;
  transition: opacity 0.2s linear;
}
.simplebar-scrollbar.simplebar-visible:before {
/* When hovered, remove all transitions from drag handle */
  opacity: 0.5;
  transition: opacity 0s linear;
}
.simplebar-track.simplebar-vertical {
  top: 0;
  width: 11px;
}
.simplebar-track.simplebar-vertical .simplebar-scrollbar:before {
  top: 2px;
  bottom: 2px;
}
.simplebar-track.simplebar-horizontal {
  left: 0;
  height: 11px;
}
.simplebar-track.simplebar-horizontal .simplebar-scrollbar:before {
  height: 100%;
  left: 2px;
  right: 2px;
}
.simplebar-track.simplebar-horizontal .simplebar-scrollbar {
  right: auto;
  left: 0;
  top: 2px;
  height: 7px;
  min-height: 0;
  min-width: 10px;
  width: auto;
}
[data-simplebar-direction='rtl'] .simplebar-track.simplebar-vertical {
  right: auto;
  left: 0;
}
.hs-dummy-scrollbar-size {
  direction: rtl;
  position: fixed;
  opacity: 0;
  visibility: hidden;
  height: 500px;
  width: 500px;
  overflow-y: hidden;
  overflow-x: scroll;
}
.simplebar-hide-scrollbar {
  position: fixed;
  left: 0;
  visibility: hidden;
  overflow-y: scroll;
  scrollbar-width: none;
  -ms-overflow-style: none;
}
</style><style type="text/css">.cvOfxyzb {
  position: relative;
  margin-top: 8px;
  margin-bottom: 8px;
}
.cvOfxyzb .katex-display {
  margin-bottom: 0;
  margin-top: 0;
}
._2k7-6WJ9 {
  z-index: 2;
  position: relative;
}
</style><style type="text/css">._1hXuUPcV {
  position: relative;
  user-select: none;
  margin: 0 3px;
}
._1hXuUPcV:hover ._37ZanZsq {
  display: flex;
}
._37ZanZsq {
  position: absolute;
  z-index: 10;
  width: 200px;
  top: -26px;
  left: 0px;
  display: none;
}
._2mFjt23v {
  flex: 0 0 58px;
  text-align: center;
  height: 24px;
  line-height: 24px;
  color: #444;
  cursor: pointer;
  font-size: 12px;
  margin-right: 10px;
  background: #fff;
  border-radius: 4px;
  border: 1px solid #ddd;
}
._2RJvEdyN {
  border-radius: 3px;
  box-shadow: 0 0 1px 2px rgba(20,88,212,0.8);
}
._2RJvEdyN ._37ZanZsq {
  display: flex;
}
</style><style type="text/css">._2jAWMnVw {
  user-select: none;
}
</style><style type="text/css">* {
  margin: 0;
  padding: 0;
  list-style: none;
}
._154FkdSi {
  font-family: "PingFang SC", "Lantinghei SC", "Microsoft Yahei", "Hiragino Sans GB", "Microsoft Sans Serif", "WenQuanYi Micro Hei", Helvetica, sans-serif;
  -webkit-font-smoothing: antialiased;
  -webkit-tap-highlight-color: rgba(255,255,255,0);
  line-height: 30px;
  color: #353535;
}
._154FkdSi [data-size="9"] {
  font-size: 12px;
}
._154FkdSi [data-size="10"] {
  font-size: 14px;
}
._154FkdSi [data-size="11"] {
  font-size: 16px;
}
._154FkdSi [data-size="12"] {
  font-size: 18px;
}
._154FkdSi [data-size="14"] {
  font-size: 20px;
}
._154FkdSi [data-size="16"] {
  font-size: 22px;
}
._154FkdSi [data-size="18"] {
  font-size: 24px;
}
._154FkdSi [data-size="22"] {
  font-size: 26px;
}
._154FkdSi [data-size="24"] {
  font-size: 28px;
}
._154FkdSi [data-size="30"] {
  font-size: 30px;
}
._154FkdSi [data-size="36"] {
  font-size: 32px;
}
._154FkdSi p {
  line-height: 1.875;
  font-size: 16px;
  min-height: 30px;
}
._154FkdSi p[data-align-right] {
  text-align: right;
}
._154FkdSi p[data-align-center] {
  text-align: center;
}
._154FkdSi a[data-type="codeinline"] {
  color: #353535;
  text-decoration: none;
  font-family: 'Source Code Pro', Courier;
  background: #f1f3f5;
  border: 1px solid #eee;
  border-radius: 3px;
}
._154FkdSi a[data-type="codeinline"]:hover {
  text-decoration: none;
  color: #353535;
}
._154FkdSi a[data-type="codeinline"]:active {
  text-decoration: none;
  color: #353535;
}
._154FkdSi hr {
  padding-top: 30px;
  margin-bottom: 30px;
  border: 0;
  border-bottom: 2px solid #eaeeef;
}
._154FkdSi h1 {
  line-height: 48px;
  padding-top: 26px;
  padding-bottom: 4px;
  font-weight: 700;
  color: #353535;
  font-size: 32px;
}
._154FkdSi h1[data-align-right] {
  text-align: right;
}
._154FkdSi h1[data-align-center] {
  text-align: center;
}
._154FkdSi h2 {
  line-height: 44px;
  padding-top: 26px;
  padding-bottom: 4px;
  font-weight: 700;
  color: #353535;
  font-size: 28px;
}
._154FkdSi h2[data-align-right] {
  text-align: right;
}
._154FkdSi h2[data-align-center] {
  text-align: center;
}
._154FkdSi h3 {
  line-height: 40px;
  padding-top: 26px;
  padding-bottom: 4px;
  font-weight: 700;
  color: #353535;
  font-size: 24px;
}
._154FkdSi h3[data-align-right] {
  text-align: right;
}
._154FkdSi h3[data-align-center] {
  text-align: center;
}
._154FkdSi h4 {
  line-height: 36px;
  padding-top: 26px;
  padding-bottom: 4px;
  font-weight: 700;
  color: #353535;
  font-size: 20px;
}
._154FkdSi h4[data-align-right] {
  text-align: right;
}
._154FkdSi h4[data-align-center] {
  text-align: center;
}
._154FkdSi h5 {
  line-height: 32px;
  padding-top: 26px;
  padding-bottom: 4px;
  font-weight: 700;
  color: #353535;
  font-size: 16px;
}
._154FkdSi h5[data-align-right] {
  text-align: right;
}
._154FkdSi h5[data-align-center] {
  text-align: center;
}
._154FkdSi [data-indent-1] {
  margin-left: 24px;
}
._154FkdSi [data-indent-2] {
  margin-left: 48px;
}
._154FkdSi [data-indent-3] {
  margin-left: 72px;
}
._154FkdSi [data-indent-4] {
  margin-left: 96px;
}
._154FkdSi [data-indent-5] {
  margin-left: 120px;
}
._154FkdSi [data-indent-6] {
  margin-left: 144px;
}
._154FkdSi [data-indent-7] {
  margin-left: 168px;
}
._154FkdSi [data-indent-8] {
  margin-left: 192px;
}
._154FkdSi ul p {
  padding-left: 24px;
  position: relative;
}
._154FkdSi ul p:before {
  content: "";
  display: inline-block;
  font-size: 6px;
  margin-left: -19px;
  margin-right: 13px;
  transform: translate(0, -2px);
  height: 6px;
  width: 6px;
  background-color: #353535;
  border-radius: 50%;
}
._154FkdSi ul [data-indent-1]:before {
  height: 4px;
  width: 4px;
  border: 1px solid #353535;
  background-color: transparent;
}
._154FkdSi ul [data-indent-5]:before {
  height: 4px;
  width: 4px;
  border: 1px solid #353535;
  background-color: transparent;
}
._154FkdSi ul [data-indent-2]:before {
  border-radius: 0;
}
._154FkdSi ul [data-indent-6]:before {
  border-radius: 0;
}
._154FkdSi ul [data-indent-3]:before {
  height: 4px;
  width: 4px;
  border: 1px solid #353535;
  background-color: transparent;
  border-radius: 0;
}
._154FkdSi ul [data-indent-7]:before {
  height: 4px;
  width: 4px;
  border: 1px solid #353535;
  background-color: transparent;
  border-radius: 0;
}
._154FkdSi ol p {
  padding-left: 24px;
  position: relative;
}
._154FkdSi ol p:before {
  font-size: 16px;
  content: attr(data-number) ".";
  text-overflow: ellipsis;
  white-space: nowrap;
  text-align: right;
  line-height: 20px;
  box-sizing: border-box;
  min-width: 24px;
  margin-left: -24px;
  display: inline-block;
  padding-right: 8px;
  font-family: "Open Sans", "Helvetica Neue", sans-serif;
}
._154FkdSi blockquote {
  border-left: 3px solid #e3e5e8;
  margin-left: 7px;
  padding-left: 14px;
  color: #828a92;
}
._154FkdSi [data-border-type="border"] img {
  box-shadow: 0 0 0 2px #b4b5b6;
}
._154FkdSi [data-border-type="boxShadow"] img {
  box-shadow: 0 5px 14px rgba(166,166,166,0.6);
}
._154FkdSi code {
  font-family: 'Source Code Pro', Courier;
}
._154FkdSi i {
  font-style: italic;
}
._154FkdSi u {
  font-decoration: underline;
}
._154FkdSi strong {
  font-weight: 700;
}
._154FkdSi s {
  font-decoration: line-through;
}
._2xCu2OUY {
  height: 100%;
  position: relative;
  background: #fff;
  color: #333;
  font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
  -webkit-font-smoothing: antialiased;
  -webkit-tap-highlight-color: rgba(255,255,255,0);
}
._2xCu2OUY .ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  font-variant-ligatures: none;
  min-height: 800px;
  outline: none;
}
._3dcopcd6 {
  width: 100%;
  height: 100%;
  position: relative;
}
._154FkdSi {
  position: relative;
}
._39Sh0JWm {
  position: relative;
}
.YLUYWGeV {
  user-select: none;
  position: absolute;
  z-index: 10;
  width: 200px;
  top: 0px;
  padding-bottom: 6px;
  left: -3000px;
  display: flex;
}
._3DSA44lQ {
  flex: 0 0 58px;
  text-align: center;
  height: 24px;
  line-height: 24px;
  color: #444;
  cursor: pointer;
  font-size: 12px;
  margin-right: 10px;
  background: #fff;
  border-radius: 4px;
  border: 1px solid #ddd;
}
._2vz-RJlv {
  height: 30px;
  background: #fff;
  cursor: text;
}
</style><style type="text/css">/* 一些文章内的链接，复制之类的icon */
@font-face {
  font-family: 'iconfont'; /* project id 1164135 */
  src: url("//at.alicdn.com/t/font_1164135_8dyqq8fz1n5.eot");
  src: url("//at.alicdn.com/t/font_1164135_8dyqq8fz1n5.eot?#iefix") format('embedded-opentype'), url("//at.alicdn.com/t/font_1164135_8dyqq8fz1n5.woff2") format('woff2'), url("//at.alicdn.com/t/font_1164135_8dyqq8fz1n5.woff") format('woff'), url("//at.alicdn.com/t/font_1164135_8dyqq8fz1n5.ttf") format('truetype'), url("//at.alicdn.com/t/font_1164135_8dyqq8fz1n5.svg#iconfont") format('svg');
}
[data-slate-editor] {
  font-family: "PingFang SC", "Lantinghei SC", "Microsoft Yahei", "Hiragino Sans GB", "Microsoft Sans Serif", "WenQuanYi Micro Hei", Helvetica, sans-serif;
  -webkit-font-smoothing: antialiased;
  -webkit-tap-highlight-color: rgba(255,255,255,0);
  line-height: 30px;
  color: #353535;
}
[data-slate-editor] p {
  font-size: 16px;
  line-height: 30px;
  min-height: 30px;
}
[data-slate-editor] p[data-align-right] {
  text-align: right;
}
[data-slate-editor] p[data-align-center] {
  text-align: center;
}
[data-slate-editor] i {
  font-style: italic;
}
[data-slate-editor] hr {
  padding-top: 30px;
  margin-bottom: 30px;
  border: 0;
  border-bottom: 2px solid #eaeeef;
}
[data-slate-editor] h1 {
  line-height: 48px;
  padding-top: 24px;
  font-weight: 700;
  color: #353535;
  font-size: 32px;
}
[data-slate-editor] h1[data-align-right] {
  text-align: right;
}
[data-slate-editor] h1[data-align-center] {
  text-align: center;
}
[data-slate-editor] h2 {
  line-height: 44px;
  padding-top: 24px;
  font-weight: 700;
  color: #353535;
  font-size: 28px;
}
[data-slate-editor] h2[data-align-right] {
  text-align: right;
}
[data-slate-editor] h2[data-align-center] {
  text-align: center;
}
[data-slate-editor] h3 {
  line-height: 40px;
  padding-top: 24px;
  font-weight: 700;
  color: #353535;
  font-size: 24px;
}
[data-slate-editor] h3[data-align-right] {
  text-align: right;
}
[data-slate-editor] h3[data-align-center] {
  text-align: center;
}
[data-slate-editor] h4 {
  line-height: 36px;
  padding-top: 24px;
  font-weight: 700;
  color: #353535;
  font-size: 20px;
}
[data-slate-editor] h4[data-align-right] {
  text-align: right;
}
[data-slate-editor] h4[data-align-center] {
  text-align: center;
}
[data-slate-editor] h5 {
  line-height: 32px;
  padding-top: 24px;
  font-weight: 700;
  color: #353535;
  font-size: 16px;
}
[data-slate-editor] h5[data-align-right] {
  text-align: right;
}
[data-slate-editor] h5[data-align-center] {
  text-align: center;
}
[data-slate-editor] [data-indent-1] {
  margin-left: 24px;
}
[data-slate-editor] [data-indent-2] {
  margin-left: 48px;
}
[data-slate-editor] [data-indent-3] {
  margin-left: 72px;
}
[data-slate-editor] [data-indent-4] {
  margin-left: 96px;
}
[data-slate-editor] [data-indent-5] {
  margin-left: 120px;
}
[data-slate-editor] [data-indent-6] {
  margin-left: 144px;
}
[data-slate-editor] [data-indent-7] {
  margin-left: 168px;
}
[data-slate-editor] [data-indent-8] {
  margin-left: 192px;
}
[data-slate-editor] ul p {
  padding-left: 24px;
  position: relative;
}
[data-slate-editor] ul p:before {
  content: "";
  display: inline-block;
  font-size: 6px;
  margin-left: -19px;
  margin-right: 13px;
  transform: translate(0, -2px);
  height: 6px;
  width: 6px;
  background-color: #353535;
  border-radius: 50%;
}
[data-slate-editor] ul [data-indent-1]:before {
  height: 4px;
  width: 4px;
  border: 1px solid #353535;
  background-color: transparent;
}
[data-slate-editor] ul [data-indent-5]:before {
  height: 4px;
  width: 4px;
  border: 1px solid #353535;
  background-color: transparent;
}
[data-slate-editor] ul [data-indent-2]:before {
  border-radius: 0;
}
[data-slate-editor] ul [data-indent-6]:before {
  border-radius: 0;
}
[data-slate-editor] ul [data-indent-3]:before {
  height: 4px;
  width: 4px;
  border: 1px solid #353535;
  background-color: transparent;
  border-radius: 0;
}
[data-slate-editor] ul [data-indent-7]:before {
  height: 4px;
  width: 4px;
  border: 1px solid #353535;
  background-color: transparent;
  border-radius: 0;
}
[data-slate-editor] ol p {
  padding-left: 24px;
  position: relative;
}
[data-slate-editor] ol p:before {
  font-size: 16px;
  content: attr(data-number) ".";
  text-overflow: ellipsis;
  white-space: nowrap;
  text-align: right;
  line-height: 20px;
  box-sizing: border-box;
  min-width: 24px;
  margin-left: -24px;
  display: inline-block;
  padding-right: 8px;
  font-family: "Open Sans", "Helvetica Neue", sans-serif;
}
[data-slate-editor] blockquote {
  border-left: 3px solid #e3e5e8;
  margin-left: 7px;
  padding-left: 14px;
  color: #828a92;
}
[data-slate-editor] code {
  font-size: 16px;
  font-family: 'Source Code Pro', Courier;
  background: #f1f3f5;
  border: 1px solid #eee;
  border-radius: 3px;
}
[data-slate-editor] [data-slate-type="pm_image"] img {
  width: 100%;
}
[data-slate-editor] [data-slate-type="pm_linecode"] {
  overflow: visible;
  line-height: 20px;
  height: 20px;
  font-size: 13px;
  white-space: pre;
  word-wrap: normal;
}
[data-slate-editor] [data-slate-type="pm_linecode"] span[data-slate-string="true"] {
  font-family: 'Source Code Pro', Courier;
}
[data-slate-editor] [data-slate-type="pm_blockcode"] {
  padding: 0;
  color: #666;
  border: 1px solid #e6e8eb;
  border-radius: 3px;
  background: #f1f3f5;
  position: relative;
  padding-top: 30px;
  padding-bottom: 15px;
}
[data-slate-editor] [data-slate-type="pm_blockcode"] .simplebar-placeholder {
  max-height: none;
}
[data-slate-editor] [data-slate-type="pm_blockcode"] .simplebar-height-auto-observer {
  height: 1px;
}
[data-slate-editor] [data-slate-type="pm_blockcode"] [data-class-copy] {
  font-size: 13px;
  color: #888;
  position: absolute;
  right: 1em;
  top: 6px;
  cursor: pointer;
  user-select: none;
}
[data-slate-editor] [data-slate-type="pm_blockcode"] [data-class-copy]:after {
  content: '复制代码';
}
[data-slate-editor] [data-slate-type="pm_blockcode"] [data-class-copy] span {
  font-size: 13px;
  font-family: 'iconfont';
  margin-right: 3px;
}
[data-slate-editor] [data-slate-type="pm_blockcode"] [data-class-copy] span:before {
  content: '';
}
[data-slate-editor] [data-slate-type="pm_blockcode"] [data-class-line] {
  padding-right: 2px;
  height: 20px;
}
[data-slate-editor] [data-slate-type="pm_blockcode"] [data-class-line]:before {
  content: attr(data-line-number);
  font-weight: 400;
  font-family: 'Source Code Pro', Courier;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
  text-align: right;
  max-width: 30px;
  background-color: rgba(0,0,0,0);
  color: #c1c7cd;
  display: block;
  font-size: 13px;
  line-height: 20px;
}
[data-slate-editor] [data-slate-type="pm_blockcode"] [data-class-index] {
  position: absolute;
  left: 2px;
  width: 30px;
  top: 30px;
}
[data-slate-editor] [data-slate-type="pm_blockcode"] [data-class-list] {
  position: relative;
  overflow: hidden;
  margin-left: 42px;
  margin-right: 26px;
  padding-bottom: 10px;
}
.hljs-comment, .hljs-meta {
  color: #969896;
}
.hljs-variable, .hljs-template-variable, .hljs-strong, .hljs-emphasis, .hljs-quote {
  color: #df5000;
}
.hljs-keyword, .hljs-selector-tag, .hljs-type {
  color: #a71d5d;
}
.hljs-literal, .hljs-symbol, .hljs-bullet, .hljs-attribute {
  color: #0086b3;
}
.hljs-section, .hljs-name {
  color: #63a35c;
}
.hljs-tag {
  color: #333;
}
.hljs-title, .hljs-attr, .hljs-selector-id, .hljs-selector-class, .hljs-selector-attr, .hljs-selector-pseudo {
  color: #6f42c1;
}
.hljs-addition {
  color: #55a532;
  background-color: #eaffea;
}
.hljs-deletion {
  color: #bd2c00;
  background-color: #ffecec;
}
.hljs-link {
  text-decoration: underline;
}
.hljs-number {
  color: #005cc5;
}
.hljs-string {
  color: #df5000;
}
.hljs-built_in {
  color: #005cc5;
}
[data-simplebar] {
  position: relative;
  flex-direction: column;
  flex-wrap: wrap;
  justify-content: flex-start;
  align-content: flex-start;
  align-items: flex-start;
}
.simplebar-wrapper {
  overflow: hidden;
  width: inherit;
  height: inherit;
  max-width: inherit;
  max-height: inherit;
}
.simplebar-mask {
  direction: inherit;
  position: absolute;
  overflow: hidden;
  padding: 0;
  margin: 0;
  left: 0;
  top: 0;
  bottom: 0;
  right: 0;
  width: auto !important;
  height: auto !important;
  z-index: 0;
}
.simplebar-offset {
  direction: inherit !important;
  box-sizing: inherit !important;
  resize: none !important;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  padding: 0;
  margin: 0;
  -webkit-overflow-scrolling: touch;
}
.simplebar-content-wrapper {
  direction: inherit;
  box-sizing: border-box !important;
  position: relative;
  display: block;
  height: 100%; /* Required for horizontal native scrollbar to not appear if parent is taller than natural height */
  width: auto;
  visibility: visible;
  max-width: 100%; /* Not required for horizontal scroll to trigger */
  max-height: 100%; /* Needed for vertical scroll to trigger */
  scrollbar-width: none;
  -ms-overflow-style: none;
}
.simplebar-content-wrapper::-webkit-scrollbar, .simplebar-hide-scrollbar::-webkit-scrollbar {
  width: 0;
  height: 0;
}
.simplebar-content:before {
  content: ' ';
  display: table;
  line-height: 0;
  height: 0;
  overflow: hidden;
  width: 0;
  font-size: 0;
}
.simplebar-content:after {
  content: ' ';
  display: table;
  line-height: 0;
  height: 10px;
  overflow: hidden;
  width: 0;
  font-size: 0;
}
.simplebar-placeholder {
  max-height: 100%;
  max-width: 100%;
  width: 100%;
  pointer-events: none;
}
.simplebar-height-auto-observer-wrapper {
  box-sizing: inherit !important;
  height: 100%;
  width: 100%;
  max-width: 1px;
  position: relative;
  float: left;
  max-height: 1px;
  overflow: hidden;
  z-index: -1;
  padding: 0;
  margin: 0;
  pointer-events: none;
  flex-grow: inherit;
  flex-shrink: 0;
  flex-basis: 0;
}
.simplebar-height-auto-observer {
  box-sizing: inherit;
  display: block;
  opacity: 0;
  position: absolute;
  top: 0;
  left: 0;
  height: 1000%;
  width: 1000%;
  min-height: 1px;
  min-width: 1px;
  overflow: hidden;
  pointer-events: none;
  z-index: -1;
}
.simplebar-track {
  z-index: 1;
  position: absolute;
  right: 0;
  bottom: 0;
  pointer-events: none;
  overflow: hidden;
}
[data-simplebar].simplebar-dragging .simplebar-content {
  pointer-events: none;
  user-select: none;
  -webkit-user-select: none;
}
[data-simplebar].simplebar-dragging .simplebar-track {
  pointer-events: all;
}
.simplebar-scrollbar {
  position: absolute;
  left: 0;
  right: 0;
  min-height: 10px;
}
.simplebar-scrollbar:before {
  position: absolute;
  content: '';
  background: #000;
  border-radius: 7px;
  left: 2px;
  right: 2px;
  opacity: 0;
  transition: opacity 0.2s linear;
}
.simplebar-scrollbar.simplebar-visible:before {
/* When hovered, remove all transitions from drag handle */
  opacity: 0.5;
  transition: opacity 0s linear;
}
.simplebar-track.simplebar-vertical {
  top: 0;
  width: 11px;
}
.simplebar-track.simplebar-vertical .simplebar-scrollbar:before {
  top: 2px;
  bottom: 2px;
}
.simplebar-track.simplebar-horizontal {
  left: 0;
  height: 11px;
}
.simplebar-track.simplebar-horizontal .simplebar-scrollbar:before {
  height: 100%;
  left: 2px;
  right: 2px;
}
.simplebar-track.simplebar-horizontal .simplebar-scrollbar {
  right: auto;
  left: 0;
  top: 2px;
  height: 7px;
  min-height: 0;
  min-width: 10px;
  width: auto;
}
[data-simplebar-direction='rtl'] .simplebar-track.simplebar-vertical {
  right: auto;
  left: 0;
}
.hs-dummy-scrollbar-size {
  direction: rtl;
  position: fixed;
  opacity: 0;
  visibility: hidden;
  height: 500px;
  width: 500px;
  overflow-y: hidden;
  overflow-x: scroll;
}
.simplebar-hide-scrollbar {
  position: fixed;
  left: 0;
  visibility: hidden;
  overflow-y: scroll;
  scrollbar-width: none;
  -ms-overflow-style: none;
}
</style></head>

<body data-new-gr-c-s-check-loaded="14.987.0" data-gr-ext-installed="">
<div data-v-5dce9577="" data-v-600d9bfb="" id="layout" layout="" class="page-article-layout" style="padding-bottom: 0px;"><div data-v-5dce9577="" layout-header-wrap="" class="layout-header-wrap"><div data-v-3accfbba="" data-v-5dce9577="" class="common-header-pc"><div data-v-3accfbba="" class="shim"></div><div data-v-3accfbba="" class="header"><div data-v-3accfbba="" class="wrap"><div data-v-3accfbba="" class="layout-content header-content"><div data-v-3accfbba="" class="logo"><a data-v-3accfbba="" href="https://www.infoq.cn/" class="main-logo"><img data-v-3accfbba="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/logo.e453f6ab.png" alt="logo"></a><a data-v-3accfbba="" href="https://xie.infoq.cn/" class="sub-logo"><img data-v-3accfbba="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/sub-logo.60023501.png" alt="logo"></a></div><div data-v-3accfbba="" class="header-middle"><div data-v-3accfbba="" class="nav"><ul data-v-3accfbba=""><li data-v-3accfbba=""><a data-v-3accfbba="" href="https://xie.infoq.cn/" class="">首页</a></li><li data-v-3accfbba=""><!----><a data-v-3accfbba="" href="https://xie.infoq.cn/tag/4837" target="_blank" rel="" class=""> 活动专区 </a></li><li data-v-3accfbba=""><!----><a data-v-3accfbba="" href="https://xie.infoq.cn/tag/3154" target="_blank" rel="" class=""> 话题讨论 </a></li><li data-v-3accfbba=""><!----><a data-v-3accfbba="" href="https://xie.infoq.cn/tag/201" target="_blank" rel="" class=""> 读书笔记 </a></li><li data-v-3accfbba=""><!----><a data-v-3accfbba="" href="https://xie.infoq.cn/hot_recommend.html" target="_blank" rel="" class=""> 热点推荐 </a></li><li data-v-3accfbba=""><!----><a data-v-3accfbba="" href="https://xie.infoq.cn/tag/list" target="_blank" rel="" class=""> 全部标签 </a></li><!----><!----><!----><!----><!----><li data-v-3accfbba="" class="more"><span data-v-3accfbba="" class="dot"></span><!----></li></ul></div><div data-v-3accfbba="" class="search-container"><div data-v-3accfbba="" class="search-wrap"><input data-v-3accfbba="" type="text" placeholder="搜索" class="search-input"><span data-v-3accfbba="" class="search-btn iconfont"></span></div></div><div data-v-3accfbba="" class="message"><div data-v-3accfbba="" class="bell-icon"><span data-v-3accfbba="" class="iconfont"></span><!----><!----></div></div><div data-v-3accfbba="" gk-button="" gkbtn-color="green" gkbtn-size="small" class="write-btn Button_button_3onsJ"> 写点什么 </div></div><div data-v-3accfbba="" class="account"><div data-v-3accfbba="" class="user"><div data-v-954a0b28="" data-v-3accfbba="" class="com-avatar-wrap avatar"><img data-v-954a0b28="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/318950bb.jpg" alt="用户头像" class="com-avatar" style="width: 34px; height: 34px;"><!----></div><!----></div></div></div></div></div></div></div><div data-v-5dce9577="" inner-content="" class="inner-content"><!----><!----><!----><div data-v-600d9bfb="" data-v-5dce9577="" class="layout-content article-content"><div data-v-600d9bfb="" class="article-fixed-wrap" data-v-5dce9577="" style="width: 150px;"><div data-v-600d9bfb="" class="side-operation" style="top: 91px;"><div data-v-7fad60de="" data-v-600d9bfb="" class="widget-operation side" authorinfo="[object Object]"><div data-v-7fad60de="" class="toggle-menu btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" class="like btn"><i data-v-7fad60de="" class="iconfont"></i><i data-v-7fad60de="" class="like-num">8</i></div><div data-v-7fad60de="" class="favorite btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" class="comment btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" class="weixin btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" class="weibo btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" class="horde btn"><i data-v-7fad60de="" class="iconfont"></i></div><!----></div></div></div><div data-v-600d9bfb="" data-v-5dce9577="" class="main"><!----><h1 data-v-600d9bfb="" data-v-5dce9577="" class="article-title">源码 | 浅谈 Webpack 原理，以及 loader 和 plugin 实现。</h1><div data-v-600d9bfb="" data-v-5dce9577="" class="author-information"><div data-v-600d9bfb="" data-v-5dce9577="" class="row"><div data-v-600d9bfb="" data-v-5dce9577="" class="avatar"><div data-v-954a0b28="" data-v-600d9bfb="" class="com-avatar-wrap" uid="1068397" data-v-5dce9577=""><img data-v-954a0b28="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/40c33056.jpg" alt="用户头像" class="com-avatar" style="width: 32px; height: 32px;"><!----></div></div><a data-v-3824578a="" data-v-6281d13f="" data-v-600d9bfb="" rel="nofollow" com-author-name="" class="com-author-name" data-v-5dce9577="">梁龙先森</a><div data-v-d2847db8="" data-v-600d9bfb="" gk-button="" gkbtn-color="unfollow" gkbtn-size="normal" class="geek-foll-btn Button_button_3onsJ" follow-button="" data-follow="0" data-v-5dce9577=""><i data-v-600d9bfb="" class="iconfont"></i>关注</div></div><div data-v-600d9bfb="" data-v-5dce9577="" class="row"><span data-v-600d9bfb="" data-v-5dce9577="" class="date">发布于: 2020 年 11 月 30 日</span></div></div><div data-v-600d9bfb="" data-v-5dce9577="" class="article-cover"><img data-v-600d9bfb="" data-v-5dce9577="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/bc1c7606373299ca73c5a0461e467bdb.jpeg" alt="源码 | 浅谈Webpack原理，以及loader和plugin实现。"></div><div data-v-600d9bfb="" data-v-5dce9577="" class="article-detaile"><div data-v-8a30c550="" data-v-600d9bfb="" class="article-preview" data-v-5dce9577=""><div data-v-8a30c550="" class="preview-wrap"><div data-slate-editor="true" data-key="0" autocorrect="off" spellcheck="false" data-gramm="false" style="outline: none; white-space: pre-wrap; overflow-wrap: break-word;"><h3 data-id-heading0="" data-slate-type="pm_heading" data-slate-object="block" data-key="1"><span data-slate-object="text" data-key="2"><span data-slate-leaf="true" data-offset-key="2:0" data-first-offset="true"><span data-slate-string="true">一、初识Webpack</span></span></span></h3><blockquote data-slate-type="pm_blockquote" data-slate-object="block" data-key="3"><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="4"><span data-slate-object="text" data-key="5"><span data-slate-leaf="true" data-offset-key="5:0" data-first-offset="true"><i data-slate-type="pm_italic" data-slate-object="mark"><span data-slate-string="true">webpack</span></i></span></span><span data-slate-object="text" data-key="6"><span data-slate-leaf="true" data-offset-key="6:0" data-first-offset="true"><span data-slate-string="true">&nbsp;是一个现代 JavaScript 应用程序的</span></span></span><span data-slate-object="text" data-key="7"><span data-slate-leaf="true" data-offset-key="7:0" data-first-offset="true"><i data-slate-type="pm_italic" data-slate-object="mark"><span data-slate-string="true">静态模块打包器(module bundler)</span></i></span></span><span data-slate-object="text" data-key="8"><span data-slate-leaf="true" data-offset-key="8:0" data-first-offset="true"><span data-slate-string="true">。当 webpack 处理应用程序时，它会递归地构建一个</span></span></span><span data-slate-object="text" data-key="9"><span data-slate-leaf="true" data-offset-key="9:0" data-first-offset="true"><i data-slate-type="pm_italic" data-slate-object="mark"><span data-slate-string="true">依赖关系图(dependency graph)</span></i></span></span><span data-slate-object="text" data-key="10"><span data-slate-leaf="true" data-offset-key="10:0" data-first-offset="true"><span data-slate-string="true">，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个&nbsp;</span></span></span><span data-slate-object="text" data-key="11"><span data-slate-leaf="true" data-offset-key="11:0" data-first-offset="true"><i data-slate-type="pm_italic" data-slate-object="mark"><span data-slate-string="true">bundle。</span></i></span></span></p></blockquote><h5 data-id-heading1="" data-slate-type="pm_heading" data-slate-object="block" data-key="12"><span data-slate-object="text" data-key="13"><span data-slate-leaf="true" data-offset-key="13:0" data-first-offset="true"><span data-slate-string="true">1、能做什么？</span></span></span></h5><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="14"><span data-slate-object="text" data-key="15"><span data-slate-leaf="true" data-offset-key="15:0" data-first-offset="true"><span data-slate-string="true">webpack&nbsp;通过&nbsp;loader&nbsp;可以支持各种语言和预处理器编写模块（通过loader处理非JavaScript模块，并在bundle中引入依赖），模块可以通过以下方式来表达它们的依赖关系:</span></span></span></p><div data-lang="text" data-slate-type="pm_blockcode" data-slate-object="block" data-key="16"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="text" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="17"><span data-slate-object="text" data-key="18"><span data-slate-leaf="true" data-offset-key="18:0" data-first-offset="true"><span data-slate-string="true">1.&nbsp;ES2015&nbsp;import&nbsp;语句</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="19"><span data-slate-object="text" data-key="20"><span data-slate-leaf="true" data-offset-key="20:0" data-first-offset="true"><span data-slate-string="true">2.&nbsp;CommonJS&nbsp;require()&nbsp;语句</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="21"><span data-slate-object="text" data-key="22"><span data-slate-leaf="true" data-offset-key="22:0" data-first-offset="true"><span data-slate-string="true">3.&nbsp;AMD&nbsp;define&nbsp;和&nbsp;require&nbsp;语句</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="23"><span data-slate-object="text" data-key="24"><span data-slate-leaf="true" data-offset-key="24:0" data-first-offset="true"><span data-slate-string="true">4.&nbsp;css/sass/less&nbsp;文件中的@import语句</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="25"><span data-slate-object="text" data-key="26"><span data-slate-leaf="true" data-offset-key="26:0" data-first-offset="true"><span data-slate-string="true">5.&nbsp;样式(url(...))和HTML文件(&lt;img&nbsp;src=...&gt;)中的图片链接</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 110px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><h5 data-id-heading2="" data-slate-type="pm_heading" data-slate-object="block" data-key="27"><span data-slate-object="text" data-key="28"><span data-slate-leaf="true" data-offset-key="28:0" data-first-offset="true"><span data-slate-string="true">2、安装使用</span></span></span></h5><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="29"><span data-slate-object="text" data-key="30"><span data-slate-leaf="true" data-offset-key="30:0" data-first-offset="true"><span data-slate-string="true">文章是根据webpack&nbsp;5.6.0版本，webpack-cli&nbsp;3.1.0版本。</span></span></span></p><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="31"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="32"><span data-slate-object="text" data-key="33"><span data-slate-leaf="true" data-offset-key="33:0" data-first-offset="true"><span data-slate-string="true">npm&nbsp;install&nbsp;webpack&nbsp;webpack-cli&nbsp;--save-dev</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 30px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><h5 data-id-heading3="" data-slate-type="pm_heading" data-slate-object="block" data-key="34"><span data-slate-object="text" data-key="35"><span data-slate-leaf="true" data-offset-key="35:0" data-first-offset="true"><span data-slate-string="true">3、浅析webpack启动过程源码</span></span></span></h5><ol data-slate-type="pm_ol" data-slate-object="block" data-key="36"><li data-slate-type="pm_li" data-slate-object="block" data-key="37"><p data-number="1" data-slate-type="pm_paragraph" data-slate-object="block" data-key="38"><span data-slate-object="text" data-key="39"><span data-slate-leaf="true" data-offset-key="39:0" data-first-offset="true"><span data-slate-string="true">命令行运行以上命令，npm会让命令行工具进入node_modules/.bin目录查找是否存在webpack.sh或者webpack.cmd文件，如果存在，就执行，不存在就抛出错误。</span></span></span></p></li><li data-slate-type="pm_li" data-slate-object="block" data-key="40"><p data-number="2" data-slate-type="pm_paragraph" data-slate-object="block" data-key="41"><span data-slate-object="text" data-key="42"><span data-slate-leaf="true" data-offset-key="42:0" data-first-offset="true"><span data-slate-string="true">webpack.cmd执行会判断当前目录是否存在node执行程序，如果存在则使用当前node进程执行，否则使用全局node执行文件:node_modules/webpack/bin/webpack.js。</span></span></span></p></li></ol><p data-number="3" data-slate-type="pm_paragraph" data-slate-object="block" data-key="43"><span data-slate-object="text" data-key="44"><span data-slate-leaf="true" data-offset-key="44:0"><span data-slate-zero-width="n" data-slate-length="0">﻿</span></span></span></p><p data-number="3" data-slate-type="pm_paragraph" data-slate-object="block" data-key="45"><span data-slate-object="text" data-key="46"><span data-slate-leaf="true" data-offset-key="46:0" data-first-offset="true"><u data-slate-type="pm_underline" data-slate-object="mark"><span data-slate-string="true">webpack启动过程代码如下：</span></u></span></span></p><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="47"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div><div data-class-line="" data-line-number="9"></div><div data-class-line="" data-line-number="10"></div><div data-class-line="" data-line-number="11"></div><div data-class-line="" data-line-number="12"></div><div data-class-line="" data-line-number="13"></div><div data-class-line="" data-line-number="14"></div><div data-class-line="" data-line-number="15"></div><div data-class-line="" data-line-number="16"></div><div data-class-line="" data-line-number="17"></div><div data-class-line="" data-line-number="18"></div><div data-class-line="" data-line-number="19"></div><div data-class-line="" data-line-number="20"></div><div data-class-line="" data-line-number="21"></div><div data-class-line="" data-line-number="22"></div><div data-class-line="" data-line-number="23"></div><div data-class-line="" data-line-number="24"></div><div data-class-line="" data-line-number="25"></div><div data-class-line="" data-line-number="26"></div><div data-class-line="" data-line-number="27"></div><div data-class-line="" data-line-number="28"></div><div data-class-line="" data-line-number="29"></div><div data-class-line="" data-line-number="30"></div><div data-class-line="" data-line-number="31"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="48"><span data-slate-object="text" data-key="49"><span data-slate-leaf="true" data-offset-key="49:0" data-first-offset="true"><span data-slate-string="true">、</span></span></span><span data-slate-object="text" data-key="50"><span data-slate-leaf="true" data-offset-key="50:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// webpack/bin/webpack.js</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="51"><span data-slate-object="text" data-key="52"><span data-slate-leaf="true" data-offset-key="52:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="53"><span data-slate-leaf="true" data-offset-key="53:0" data-first-offset="true"><span data-slate-string="true"> cli = {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="54"><span data-slate-object="text" data-key="55"><span data-slate-leaf="true" data-offset-key="55:0" data-first-offset="true"><span data-slate-string="true">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span data-slate-object="text" data-key="56"><span data-slate-leaf="true" data-offset-key="56:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">name</span></span></span></span><span data-slate-object="text" data-key="57"><span data-slate-leaf="true" data-offset-key="57:0" data-first-offset="true"><span data-slate-string="true">:&nbsp;</span></span></span><span data-slate-object="text" data-key="58"><span data-slate-leaf="true" data-offset-key="58:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"webpack-cli"</span></span></span></span><span data-slate-object="text" data-key="59"><span data-slate-leaf="true" data-offset-key="59:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="60"><span data-slate-object="text" data-key="61"><span data-slate-leaf="true" data-offset-key="61:0" data-first-offset="true"><span data-slate-string="true">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span data-slate-object="text" data-key="62"><span data-slate-leaf="true" data-offset-key="62:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">package</span></span></span></span><span data-slate-object="text" data-key="63"><span data-slate-leaf="true" data-offset-key="63:0" data-first-offset="true"><span data-slate-string="true">:&nbsp;</span></span></span><span data-slate-object="text" data-key="64"><span data-slate-leaf="true" data-offset-key="64:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"webpack-cli"</span></span></span></span><span data-slate-object="text" data-key="65"><span data-slate-leaf="true" data-offset-key="65:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="66"><span data-slate-object="text" data-key="67"><span data-slate-leaf="true" data-offset-key="67:0" data-first-offset="true"><span data-slate-string="true">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span data-slate-object="text" data-key="68"><span data-slate-leaf="true" data-offset-key="68:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">binName</span></span></span></span><span data-slate-object="text" data-key="69"><span data-slate-leaf="true" data-offset-key="69:0" data-first-offset="true"><span data-slate-string="true">:&nbsp;</span></span></span><span data-slate-object="text" data-key="70"><span data-slate-leaf="true" data-offset-key="70:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"webpack-cli"</span></span></span></span><span data-slate-object="text" data-key="71"><span data-slate-leaf="true" data-offset-key="71:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="72"><span data-slate-object="text" data-key="73"><span data-slate-leaf="true" data-offset-key="73:0" data-first-offset="true"><span data-slate-string="true">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span data-slate-object="text" data-key="74"><span data-slate-leaf="true" data-offset-key="74:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">installed</span></span></span></span><span data-slate-object="text" data-key="75"><span data-slate-leaf="true" data-offset-key="75:0" data-first-offset="true"><span data-slate-string="true">:&nbsp;isInstalled(</span></span></span><span data-slate-object="text" data-key="76"><span data-slate-leaf="true" data-offset-key="76:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"webpack-cli"</span></span></span></span><span data-slate-object="text" data-key="77"><span data-slate-leaf="true" data-offset-key="77:0" data-first-offset="true"><span data-slate-string="true">),&nbsp;</span></span></span><span data-slate-object="text" data-key="78"><span data-slate-leaf="true" data-offset-key="78:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">//&nbsp;是否安装webpack-cli</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="79"><span data-slate-object="text" data-key="80"><span data-slate-leaf="true" data-offset-key="80:0" data-first-offset="true"><span data-slate-string="true">&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span><span data-slate-object="text" data-key="81"><span data-slate-leaf="true" data-offset-key="81:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">url</span></span></span></span><span data-slate-object="text" data-key="82"><span data-slate-leaf="true" data-offset-key="82:0" data-first-offset="true"><span data-slate-string="true">:&nbsp;</span></span></span><span data-slate-object="text" data-key="83"><span data-slate-leaf="true" data-offset-key="83:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"https://github.com/webpack/webpack-cli"</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="84"><span data-slate-object="text" data-key="85"><span data-slate-leaf="true" data-offset-key="85:0" data-first-offset="true"><span data-slate-string="true">};</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="86"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="87"><span data-slate-object="text" data-key="88"><span data-slate-leaf="true" data-offset-key="88:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="89"><span data-slate-leaf="true" data-offset-key="89:0" data-first-offset="true"><span data-slate-string="true">(!cli.installed){ </span></span></span><span data-slate-object="text" data-key="90"><span data-slate-leaf="true" data-offset-key="90:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 未安装webpack-cli</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="91"><span data-slate-object="text" data-key="92"><span data-slate-leaf="true" data-offset-key="92:0" data-first-offset="true"><span data-slate-string="true">    ...</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="93"><span data-slate-object="text" data-key="94"><span data-slate-leaf="true" data-offset-key="94:0" data-first-offset="true"><span data-slate-string="true">    process.exitCode = </span></span></span><span data-slate-object="text" data-key="95"><span data-slate-leaf="true" data-offset-key="95:0" data-first-offset="true"><span class="hljs-number" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">1</span></span></span></span><span data-slate-object="text" data-key="96"><span data-slate-leaf="true" data-offset-key="96:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="97"><span data-slate-leaf="true" data-offset-key="97:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 用于判断是否正常执行，正常返回:0</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="98"><span data-slate-object="text" data-key="99"><span data-slate-leaf="true" data-offset-key="99:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="100"><span data-slate-leaf="true" data-offset-key="100:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 未安装webpack-cli，询问是否安装webpack-cli</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="101"><span data-slate-object="text" data-key="102"><span data-slate-leaf="true" data-offset-key="102:0" data-first-offset="true"><span data-slate-string="true">    questionInterface.question(question, answer =&gt; {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="103"><span data-slate-object="text" data-key="104"><span data-slate-leaf="true" data-offset-key="104:0" data-first-offset="true"><span data-slate-string="true">        ....</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="105"><span data-slate-object="text" data-key="106"><span data-slate-leaf="true" data-offset-key="106:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="107"><span data-slate-leaf="true" data-offset-key="107:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 流程：选择安装webpack-cli</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="108"><span data-slate-object="text" data-key="109"><span data-slate-leaf="true" data-offset-key="109:0" data-first-offset="true"><span data-slate-string="true">        process.exitCode = </span></span></span><span data-slate-object="text" data-key="110"><span data-slate-leaf="true" data-offset-key="110:0" data-first-offset="true"><span class="hljs-number" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">0</span></span></span></span><span data-slate-object="text" data-key="111"><span data-slate-leaf="true" data-offset-key="111:0" data-first-offset="true"><span data-slate-string="true">;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="112"><span data-slate-object="text" data-key="113"><span data-slate-leaf="true" data-offset-key="113:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="114"><span data-slate-leaf="true" data-offset-key="114:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 执行安装命令</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="115"><span data-slate-object="text" data-key="116"><span data-slate-leaf="true" data-offset-key="116:0" data-first-offset="true"><span data-slate-string="true">        runCommand(packageManager, installOptions.concat(cli.package))</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="117"><span data-slate-object="text" data-key="118"><span data-slate-leaf="true" data-offset-key="118:0" data-first-offset="true"><span data-slate-string="true">        .then(</span></span></span><span data-slate-object="text" data-key="119"><span data-slate-leaf="true" data-offset-key="119:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">()</span></span></span></span></span><span data-slate-object="text" data-key="120"><span data-slate-leaf="true" data-offset-key="120:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">=&gt;</span></span></span></span><span data-slate-object="text" data-key="121"><span data-slate-leaf="true" data-offset-key="121:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="122"><span data-slate-object="text" data-key="123"><span data-slate-leaf="true" data-offset-key="123:0" data-first-offset="true"><span data-slate-string="true">            </span></span></span><span data-slate-object="text" data-key="124"><span data-slate-leaf="true" data-offset-key="124:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 执行webpack-cli/bin/cli.js方法</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="125"><span data-slate-object="text" data-key="126"><span data-slate-leaf="true" data-offset-key="126:0" data-first-offset="true"><span data-slate-string="true">            runCli(cli);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="127"><span data-slate-object="text" data-key="128"><span data-slate-leaf="true" data-offset-key="128:0" data-first-offset="true"><span data-slate-string="true">        })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="129"><span data-slate-object="text" data-key="130"><span data-slate-leaf="true" data-offset-key="130:0" data-first-offset="true"><span data-slate-string="true">        .catch(</span></span></span><span data-slate-object="text" data-key="131"><span data-slate-leaf="true" data-offset-key="131:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">err</span></span></span></span></span><span data-slate-object="text" data-key="132"><span data-slate-leaf="true" data-offset-key="132:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">=&gt;</span></span></span></span><span data-slate-object="text" data-key="133"><span data-slate-leaf="true" data-offset-key="133:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="134"><span data-slate-object="text" data-key="135"><span data-slate-leaf="true" data-offset-key="135:0" data-first-offset="true"><span data-slate-string="true">            process.exitCode = </span></span></span><span data-slate-object="text" data-key="136"><span data-slate-leaf="true" data-offset-key="136:0" data-first-offset="true"><span class="hljs-number" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">1</span></span></span></span><span data-slate-object="text" data-key="137"><span data-slate-leaf="true" data-offset-key="137:0" data-first-offset="true"><span data-slate-string="true">;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="138"><span data-slate-object="text" data-key="139"><span data-slate-leaf="true" data-offset-key="139:0" data-first-offset="true"><span data-slate-string="true">        })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="140"><span data-slate-object="text" data-key="141"><span data-slate-leaf="true" data-offset-key="141:0" data-first-offset="true"><span data-slate-string="true">    })    </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="142"><span data-slate-object="text" data-key="143"><span data-slate-leaf="true" data-offset-key="143:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span><span data-slate-object="text" data-key="144"><span data-slate-leaf="true" data-offset-key="144:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">else</span></span></span></span><span data-slate-object="text" data-key="145"><span data-slate-leaf="true" data-offset-key="145:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="146"><span data-slate-object="text" data-key="147"><span data-slate-leaf="true" data-offset-key="147:0" data-first-offset="true"><span data-slate-string="true">    runCli(cli)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="148"><span data-slate-object="text" data-key="149"><span data-slate-leaf="true" data-offset-key="149:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="150"></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 630px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="151"><span data-slate-object="text" data-key="152"><span data-slate-leaf="true" data-offset-key="152:0" data-first-offset="true"><u data-slate-type="pm_underline" data-slate-object="mark"><span data-slate-string="true">webpack-cli启动执行过程:</span></u></span></span></p><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="153"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div><div data-class-line="" data-line-number="9"></div><div data-class-line="" data-line-number="10"></div><div data-class-line="" data-line-number="11"></div><div data-class-line="" data-line-number="12"></div><div data-class-line="" data-line-number="13"></div><div data-class-line="" data-line-number="14"></div><div data-class-line="" data-line-number="15"></div><div data-class-line="" data-line-number="16"></div><div data-class-line="" data-line-number="17"></div><div data-class-line="" data-line-number="18"></div><div data-class-line="" data-line-number="19"></div><div data-class-line="" data-line-number="20"></div><div data-class-line="" data-line-number="21"></div><div data-class-line="" data-line-number="22"></div><div data-class-line="" data-line-number="23"></div><div data-class-line="" data-line-number="24"></div><div data-class-line="" data-line-number="25"></div><div data-class-line="" data-line-number="26"></div><div data-class-line="" data-line-number="27"></div><div data-class-line="" data-line-number="28"></div><div data-class-line="" data-line-number="29"></div><div data-class-line="" data-line-number="30"></div><div data-class-line="" data-line-number="31"></div><div data-class-line="" data-line-number="32"></div><div data-class-line="" data-line-number="33"></div><div data-class-line="" data-line-number="34"></div><div data-class-line="" data-line-number="35"></div><div data-class-line="" data-line-number="36"></div><div data-class-line="" data-line-number="37"></div><div data-class-line="" data-line-number="38"></div><div data-class-line="" data-line-number="39"></div><div data-class-line="" data-line-number="40"></div><div data-class-line="" data-line-number="41"></div><div data-class-line="" data-line-number="42"></div><div data-class-line="" data-line-number="43"></div><div data-class-line="" data-line-number="44"></div><div data-class-line="" data-line-number="45"></div><div data-class-line="" data-line-number="46"></div><div data-class-line="" data-line-number="47"></div><div data-class-line="" data-line-number="48"></div><div data-class-line="" data-line-number="49"></div><div data-class-line="" data-line-number="50"></div><div data-class-line="" data-line-number="51"></div><div data-class-line="" data-line-number="52"></div><div data-class-line="" data-line-number="53"></div><div data-class-line="" data-line-number="54"></div><div data-class-line="" data-line-number="55"></div><div data-class-line="" data-line-number="56"></div><div data-class-line="" data-line-number="57"></div><div data-class-line="" data-line-number="58"></div><div data-class-line="" data-line-number="59"></div><div data-class-line="" data-line-number="60"></div><div data-class-line="" data-line-number="61"></div><div data-class-line="" data-line-number="62"></div><div data-class-line="" data-line-number="63"></div><div data-class-line="" data-line-number="64"></div><div data-class-line="" data-line-number="65"></div><div data-class-line="" data-line-number="66"></div><div data-class-line="" data-line-number="67"></div><div data-class-line="" data-line-number="68"></div><div data-class-line="" data-line-number="69"></div><div data-class-line="" data-line-number="70"></div><div data-class-line="" data-line-number="71"></div><div data-class-line="" data-line-number="72"></div><div data-class-line="" data-line-number="73"></div><div data-class-line="" data-line-number="74"></div><div data-class-line="" data-line-number="75"></div><div data-class-line="" data-line-number="76"></div><div data-class-line="" data-line-number="77"></div><div data-class-line="" data-line-number="78"></div><div data-class-line="" data-line-number="79"></div><div data-class-line="" data-line-number="80"></div><div data-class-line="" data-line-number="81"></div><div data-class-line="" data-line-number="82"></div><div data-class-line="" data-line-number="83"></div><div data-class-line="" data-line-number="84"></div><div data-class-line="" data-line-number="85"></div><div data-class-line="" data-line-number="86"></div><div data-class-line="" data-line-number="87"></div><div data-class-line="" data-line-number="88"></div><div data-class-line="" data-line-number="89"></div><div data-class-line="" data-line-number="90"></div><div data-class-line="" data-line-number="91"></div><div data-class-line="" data-line-number="92"></div><div data-class-line="" data-line-number="93"></div><div data-class-line="" data-line-number="94"></div><div data-class-line="" data-line-number="95"></div><div data-class-line="" data-line-number="96"></div><div data-class-line="" data-line-number="97"></div><div data-class-line="" data-line-number="98"></div><div data-class-line="" data-line-number="99"></div><div data-class-line="" data-line-number="100"></div><div data-class-line="" data-line-number="101"></div><div data-class-line="" data-line-number="102"></div><div data-class-line="" data-line-number="103"></div><div data-class-line="" data-line-number="104"></div><div data-class-line="" data-line-number="105"></div><div data-class-line="" data-line-number="106"></div><div data-class-line="" data-line-number="107"></div><div data-class-line="" data-line-number="108"></div><div data-class-line="" data-line-number="109"></div><div data-class-line="" data-line-number="110"></div><div data-class-line="" data-line-number="111"></div><div data-class-line="" data-line-number="112"></div><div data-class-line="" data-line-number="113"></div><div data-class-line="" data-line-number="114"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: scroll hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="154"><span data-slate-object="text" data-key="155"><span data-slate-leaf="true" data-offset-key="155:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// webpack-cli/bin/cli.js</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="156"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="157"><span data-slate-object="text" data-key="158"><span data-slate-leaf="true" data-offset-key="158:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="159"><span data-slate-leaf="true" data-offset-key="159:0" data-first-offset="true"><span data-slate-string="true"> [, , ...rawArgs] = process.argv;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="160"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="161"><span data-slate-object="text" data-key="162"><span data-slate-leaf="true" data-offset-key="162:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 判断是否安装webpack</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="163"><span data-slate-object="text" data-key="164"><span data-slate-leaf="true" data-offset-key="164:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="165"><span data-slate-leaf="true" data-offset-key="165:0" data-first-offset="true"><span data-slate-string="true"> (packageExists(</span></span></span><span data-slate-object="text" data-key="166"><span data-slate-leaf="true" data-offset-key="166:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'webpack'</span></span></span></span><span data-slate-object="text" data-key="167"><span data-slate-leaf="true" data-offset-key="167:0" data-first-offset="true"><span data-slate-string="true">)) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="168"><span data-slate-object="text" data-key="169"><span data-slate-leaf="true" data-offset-key="169:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="170"><span data-slate-leaf="true" data-offset-key="170:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 执行CLI脚本</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="171"><span data-slate-object="text" data-key="172"><span data-slate-leaf="true" data-offset-key="172:0" data-first-offset="true"><span data-slate-string="true">    runCLI(rawArgs);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="173"><span data-slate-object="text" data-key="174"><span data-slate-leaf="true" data-offset-key="174:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span><span data-slate-object="text" data-key="175"><span data-slate-leaf="true" data-offset-key="175:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">else</span></span></span></span><span data-slate-object="text" data-key="176"><span data-slate-leaf="true" data-offset-key="176:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="177"><span data-slate-object="text" data-key="178"><span data-slate-leaf="true" data-offset-key="178:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="179"><span data-slate-leaf="true" data-offset-key="179:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">//未安装: 提示安装 &amp;&amp; runCLI()</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="180"><span data-slate-object="text" data-key="181"><span data-slate-leaf="true" data-offset-key="181:0" data-first-offset="true"><span data-slate-string="true">    ...</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="182"><span data-slate-object="text" data-key="183"><span data-slate-leaf="true" data-offset-key="183:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="184"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="185"><span data-slate-object="text" data-key="186"><span data-slate-leaf="true" data-offset-key="186:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="187"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="188"><span data-slate-object="text" data-key="189"><span data-slate-leaf="true" data-offset-key="189:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// webpack-cli/lib/bootstrap.js</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="190"><span data-slate-object="text" data-key="191"><span data-slate-leaf="true" data-offset-key="191:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="192"><span data-slate-leaf="true" data-offset-key="192:0" data-first-offset="true"><span data-slate-string="true"> { core } = </span></span></span><span data-slate-object="text" data-key="193"><span data-slate-leaf="true" data-offset-key="193:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">require</span></span></span></span><span data-slate-object="text" data-key="194"><span data-slate-leaf="true" data-offset-key="194:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="195"><span data-slate-leaf="true" data-offset-key="195:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'./utils/cli-flags'</span></span></span></span><span data-slate-object="text" data-key="196"><span data-slate-leaf="true" data-offset-key="196:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="197"><span data-slate-object="text" data-key="198"><span data-slate-leaf="true" data-offset-key="198:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="199"><span data-slate-leaf="true" data-offset-key="199:0" data-first-offset="true"><span data-slate-string="true"> runCLI = </span></span></span><span data-slate-object="text" data-key="200"><span data-slate-leaf="true" data-offset-key="200:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">async</span></span></span></span><span data-slate-object="text" data-key="201"><span data-slate-leaf="true" data-offset-key="201:0" data-first-offset="true"><span data-slate-string="true">(cliArgs)=&gt;{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="202"><span data-slate-object="text" data-key="203"><span data-slate-leaf="true" data-offset-key="203:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="204"><span data-slate-object="text" data-key="205"><span data-slate-leaf="true" data-offset-key="205:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="206"><span data-slate-leaf="true" data-offset-key="206:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/**</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="207"><span data-slate-object="text" data-key="208"><span data-slate-leaf="true" data-offset-key="208:0" data-first-offset="true"><span data-slate-string="true">     * core: 命令行接口默认声明配置项</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="209"><span data-slate-object="text" data-key="210"><span data-slate-leaf="true" data-offset-key="210:0" data-first-offset="true"><span data-slate-string="true">     * cliArgs：用户输入的命令行参数</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="211"><span data-slate-object="text" data-key="212"><span data-slate-leaf="true" data-offset-key="212:0" data-first-offset="true"><span data-slate-string="true">     * parsedArgs:{opts:{命令行参数匹配出的配置项},unknownArgs:[未匹配到的命令行参数]}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="213"><span data-slate-object="text" data-key="214"><span data-slate-leaf="true" data-offset-key="214:0" data-first-offset="true"><span data-slate-string="true">     * 例子：例子: webpack index.js -o output.js --&gt; {opts:{color: true, outputPath:'oiutput.js'},unknownArgs:[]}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="215"><span data-slate-object="text" data-key="216"><span data-slate-leaf="true" data-offset-key="216:0" data-first-offset="true"><span data-slate-string="true">     */</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="217"><span data-slate-object="text" data-key="218"><span data-slate-leaf="true" data-offset-key="218:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="219"><span data-slate-leaf="true" data-offset-key="219:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="220"><span data-slate-leaf="true" data-offset-key="220:0" data-first-offset="true"><span data-slate-string="true"> parsedArgs = argParser(core, cliArgs, </span></span></span><span data-slate-object="text" data-key="221"><span data-slate-leaf="true" data-offset-key="221:0" data-first-offset="true"><span class="hljs-literal" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">true</span></span></span></span><span data-slate-object="text" data-key="222"><span data-slate-leaf="true" data-offset-key="222:0" data-first-offset="true"><span data-slate-string="true">, process.title);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="223"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="224"><span data-slate-object="text" data-key="225"><span data-slate-leaf="true" data-offset-key="225:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="226"><span data-slate-leaf="true" data-offset-key="226:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/**</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="227"><span data-slate-object="text" data-key="228"><span data-slate-leaf="true" data-offset-key="228:0" data-first-offset="true"><span data-slate-string="true">     * 判断是否为webpack-cli提供的不需要编译的命令：是：直接去执行对应命令</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="229"><span data-slate-object="text" data-key="230"><span data-slate-leaf="true" data-offset-key="230:0" data-first-offset="true"><span data-slate-string="true">     * 如:webpack serve|info|init...</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="231"><span data-slate-object="text" data-key="232"><span data-slate-leaf="true" data-offset-key="232:0" data-first-offset="true"><span data-slate-string="true">     * 若未安装，则询问是否安装</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="233"><span data-slate-object="text" data-key="234"><span data-slate-leaf="true" data-offset-key="234:0" data-first-offset="true"><span data-slate-string="true">     */</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="235"><span data-slate-object="text" data-key="236"><span data-slate-leaf="true" data-offset-key="236:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="237"><span data-slate-leaf="true" data-offset-key="237:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="238"><span data-slate-leaf="true" data-offset-key="238:0" data-first-offset="true"><span data-slate-string="true"> commandIsUsed = isCommandUsed(cliArgs);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="239"><span data-slate-object="text" data-key="240"><span data-slate-leaf="true" data-offset-key="240:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="241"><span data-slate-leaf="true" data-offset-key="241:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="242"><span data-slate-leaf="true" data-offset-key="242:0" data-first-offset="true"><span data-slate-string="true">(commandIsUsed) </span></span></span><span data-slate-object="text" data-key="243"><span data-slate-leaf="true" data-offset-key="243:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="244"><span data-slate-leaf="true" data-offset-key="244:0" data-first-offset="true"><span data-slate-string="true">;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="245"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="246"><span data-slate-object="text" data-key="247"><span data-slate-leaf="true" data-offset-key="247:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="248"><span data-slate-leaf="true" data-offset-key="248:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 处理默认的webpack entry CLI参数:</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="249"><span data-slate-object="text" data-key="250"><span data-slate-leaf="true" data-offset-key="250:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="251"><span data-slate-leaf="true" data-offset-key="251:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// webpack-cli --entry ./index.js' 替换成 'webpack-cli ./index.js'</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="252"><span data-slate-object="text" data-key="253"><span data-slate-leaf="true" data-offset-key="253:0" data-first-offset="true"><span data-slate-string="true">  	</span></span></span><span data-slate-object="text" data-key="254"><span data-slate-leaf="true" data-offset-key="254:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">let</span></span></span></span><span data-slate-object="text" data-key="255"><span data-slate-leaf="true" data-offset-key="255:0" data-first-offset="true"><span data-slate-string="true"> entry; </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="256"><span data-slate-object="text" data-key="257"><span data-slate-leaf="true" data-offset-key="257:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="258"><span data-slate-leaf="true" data-offset-key="258:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 从未匹配到的命令行参数中解析出：entry 入口文件</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="259"><span data-slate-object="text" data-key="260"><span data-slate-leaf="true" data-offset-key="260:0" data-first-offset="true"><span data-slate-string="true">     </span></span></span><span data-slate-object="text" data-key="261"><span data-slate-leaf="true" data-offset-key="261:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="262"><span data-slate-leaf="true" data-offset-key="262:0" data-first-offset="true"><span data-slate-string="true"> (parsedArgs.unknownArgs.length &gt; </span></span></span><span data-slate-object="text" data-key="263"><span data-slate-leaf="true" data-offset-key="263:0" data-first-offset="true"><span class="hljs-number" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">0</span></span></span></span><span data-slate-object="text" data-key="264"><span data-slate-leaf="true" data-offset-key="264:0" data-first-offset="true"><span data-slate-string="true">) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="265"><span data-slate-object="text" data-key="266"><span data-slate-leaf="true" data-offset-key="266:0" data-first-offset="true"><span data-slate-string="true">        entry = [];</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="267"><span data-slate-object="text" data-key="268"><span data-slate-leaf="true" data-offset-key="268:0" data-first-offset="true"><span data-slate-string="true">        parsedArgs.unknownArgs = parsedArgs.unknownArgs.filter(</span></span></span><span data-slate-object="text" data-key="269"><span data-slate-leaf="true" data-offset-key="269:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">(</span></span></span></span><span data-slate-object="text" data-key="270"><span data-slate-leaf="true" data-offset-key="270:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">item</span></span></span></span></span><span data-slate-object="text" data-key="271"><span data-slate-leaf="true" data-offset-key="271:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">) =&gt;</span></span></span></span><span data-slate-object="text" data-key="272"><span data-slate-leaf="true" data-offset-key="272:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="273"><span data-slate-object="text" data-key="274"><span data-slate-leaf="true" data-offset-key="274:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="275"><span data-slate-leaf="true" data-offset-key="275:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="276"><span data-slate-leaf="true" data-offset-key="276:0" data-first-offset="true"><span data-slate-string="true"> (item.startsWith(</span></span></span><span data-slate-object="text" data-key="277"><span data-slate-leaf="true" data-offset-key="277:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'-'</span></span></span></span><span data-slate-object="text" data-key="278"><span data-slate-leaf="true" data-offset-key="278:0" data-first-offset="true"><span data-slate-string="true">)) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="279"><span data-slate-object="text" data-key="280"><span data-slate-leaf="true" data-offset-key="280:0" data-first-offset="true"><span data-slate-string="true">            </span></span></span><span data-slate-object="text" data-key="281"><span data-slate-leaf="true" data-offset-key="281:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="282"><span data-slate-leaf="true" data-offset-key="282:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="283"><span data-slate-leaf="true" data-offset-key="283:0" data-first-offset="true"><span class="hljs-literal" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">true</span></span></span></span><span data-slate-object="text" data-key="284"><span data-slate-leaf="true" data-offset-key="284:0" data-first-offset="true"><span data-slate-string="true">;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="285"><span data-slate-object="text" data-key="286"><span data-slate-leaf="true" data-offset-key="286:0" data-first-offset="true"><span data-slate-string="true">          }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="287"><span data-slate-object="text" data-key="288"><span data-slate-leaf="true" data-offset-key="288:0" data-first-offset="true"><span data-slate-string="true">          entry.push(item);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="289"><span data-slate-object="text" data-key="290"><span data-slate-leaf="true" data-offset-key="290:0" data-first-offset="true"><span data-slate-string="true">         	</span></span></span><span data-slate-object="text" data-key="291"><span data-slate-leaf="true" data-offset-key="291:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="292"><span data-slate-leaf="true" data-offset-key="292:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="293"><span data-slate-leaf="true" data-offset-key="293:0" data-first-offset="true"><span class="hljs-literal" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">false</span></span></span></span><span data-slate-object="text" data-key="294"><span data-slate-leaf="true" data-offset-key="294:0" data-first-offset="true"><span data-slate-string="true">;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="295"><span data-slate-object="text" data-key="296"><span data-slate-leaf="true" data-offset-key="296:0" data-first-offset="true"><span data-slate-string="true">      	});</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="297"><span data-slate-object="text" data-key="298"><span data-slate-leaf="true" data-offset-key="298:0" data-first-offset="true"><span data-slate-string="true">     }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="299"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="300"><span data-slate-object="text" data-key="301"><span data-slate-leaf="true" data-offset-key="301:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="302"><span data-slate-leaf="true" data-offset-key="302:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 创建webpack-cli实例,执行编译构建</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="303"><span data-slate-object="text" data-key="304"><span data-slate-leaf="true" data-offset-key="304:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="305"><span data-slate-leaf="true" data-offset-key="305:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="306"><span data-slate-leaf="true" data-offset-key="306:0" data-first-offset="true"><span data-slate-string="true"> cli = </span></span></span><span data-slate-object="text" data-key="307"><span data-slate-leaf="true" data-offset-key="307:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="308"><span data-slate-leaf="true" data-offset-key="308:0" data-first-offset="true"><span data-slate-string="true"> WebpackCLI();</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="309"><span data-slate-object="text" data-key="310"><span data-slate-leaf="true" data-offset-key="310:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="311"><span data-slate-leaf="true" data-offset-key="311:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">await</span></span></span></span><span data-slate-object="text" data-key="312"><span data-slate-leaf="true" data-offset-key="312:0" data-first-offset="true"><span data-slate-string="true"> cli.run(parsedArgsOpts, core);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="313"><span data-slate-object="text" data-key="314"><span data-slate-leaf="true" data-offset-key="314:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="315"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="316"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="317"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="318"><span data-slate-object="text" data-key="319"><span data-slate-leaf="true" data-offset-key="319:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// webpack-cli/lib/webpack-cli.js</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="320"><span data-slate-object="text" data-key="321"><span data-slate-leaf="true" data-offset-key="321:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">class</span></span></span></span></span><span data-slate-object="text" data-key="322"><span data-slate-leaf="true" data-offset-key="322:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="323"><span data-slate-leaf="true" data-offset-key="323:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">WebpackCLI</span></span></span></span></span><span data-slate-object="text" data-key="324"><span data-slate-leaf="true" data-offset-key="324:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="325"><span data-slate-object="text" data-key="326"><span data-slate-leaf="true" data-offset-key="326:0" data-first-offset="true"><span data-slate-string="true">    createCompiler(options, callback) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="327"><span data-slate-object="text" data-key="328"><span data-slate-leaf="true" data-offset-key="328:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="329"><span data-slate-leaf="true" data-offset-key="329:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">let</span></span></span></span><span data-slate-object="text" data-key="330"><span data-slate-leaf="true" data-offset-key="330:0" data-first-offset="true"><span data-slate-string="true"> compiler;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="331"><span data-slate-object="text" data-key="332"><span data-slate-leaf="true" data-offset-key="332:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="333"><span data-slate-leaf="true" data-offset-key="333:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">try</span></span></span></span><span data-slate-object="text" data-key="334"><span data-slate-leaf="true" data-offset-key="334:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="335"><span data-slate-object="text" data-key="336"><span data-slate-leaf="true" data-offset-key="336:0" data-first-offset="true"><span data-slate-string="true">            compiler = webpack(options, callback);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="337"><span data-slate-object="text" data-key="338"><span data-slate-leaf="true" data-offset-key="338:0" data-first-offset="true"><span data-slate-string="true">        } </span></span></span><span data-slate-object="text" data-key="339"><span data-slate-leaf="true" data-offset-key="339:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">catch</span></span></span></span><span data-slate-object="text" data-key="340"><span data-slate-leaf="true" data-offset-key="340:0" data-first-offset="true"><span data-slate-string="true"> (error) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="341"><span data-slate-object="text" data-key="342"><span data-slate-leaf="true" data-offset-key="342:0" data-first-offset="true"><span data-slate-string="true">            </span></span></span><span data-slate-object="text" data-key="343"><span data-slate-leaf="true" data-offset-key="343:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="344"><span data-slate-leaf="true" data-offset-key="344:0" data-first-offset="true"><span data-slate-string="true">.handleError(error);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="345"><span data-slate-object="text" data-key="346"><span data-slate-leaf="true" data-offset-key="346:0" data-first-offset="true"><span data-slate-string="true">            process.exit(</span></span></span><span data-slate-object="text" data-key="347"><span data-slate-leaf="true" data-offset-key="347:0" data-first-offset="true"><span class="hljs-number" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">2</span></span></span></span><span data-slate-object="text" data-key="348"><span data-slate-leaf="true" data-offset-key="348:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="349"><span data-slate-object="text" data-key="350"><span data-slate-leaf="true" data-offset-key="350:0" data-first-offset="true"><span data-slate-string="true">        }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="351"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="352"><span data-slate-object="text" data-key="353"><span data-slate-leaf="true" data-offset-key="353:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="354"><span data-slate-leaf="true" data-offset-key="354:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="355"><span data-slate-leaf="true" data-offset-key="355:0" data-first-offset="true"><span data-slate-string="true"> compiler;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="356"><span data-slate-object="text" data-key="357"><span data-slate-leaf="true" data-offset-key="357:0" data-first-offset="true"><span data-slate-string="true">    }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="358"><span data-slate-object="text" data-key="359"><span data-slate-leaf="true" data-offset-key="359:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="360"><span data-slate-leaf="true" data-offset-key="360:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">async</span></span></span></span><span data-slate-object="text" data-key="361"><span data-slate-leaf="true" data-offset-key="361:0" data-first-offset="true"><span data-slate-string="true"> run(args){</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="362"><span data-slate-object="text" data-key="363"><span data-slate-leaf="true" data-offset-key="363:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="364"><span data-slate-leaf="true" data-offset-key="364:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/**</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="365"><span data-slate-object="text" data-key="366"><span data-slate-leaf="true" data-offset-key="366:0" data-first-offset="true"><span data-slate-string="true">        * 命令行参数与配置项合并生产配置项</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="367"><span data-slate-object="text" data-key="368"><span data-slate-leaf="true" data-offset-key="368:0" data-first-offset="true"><span data-slate-string="true">        * 0配置，配置优先，下一组将覆盖现有配置</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="369"><span data-slate-object="text" data-key="370"><span data-slate-leaf="true" data-offset-key="370:0" data-first-offset="true"><span data-slate-string="true">        */</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="371"><span data-slate-object="text" data-key="372"><span data-slate-leaf="true" data-offset-key="372:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="373"><span data-slate-leaf="true" data-offset-key="373:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">await</span></span></span></span><span data-slate-object="text" data-key="374"><span data-slate-leaf="true" data-offset-key="374:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="375"><span data-slate-leaf="true" data-offset-key="375:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="376"><span data-slate-leaf="true" data-offset-key="376:0" data-first-offset="true"><span data-slate-string="true">.runOptionGroups(args);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="377"><span data-slate-object="text" data-key="378"><span data-slate-leaf="true" data-offset-key="378:0" data-first-offset="true"><span data-slate-string="true">      	</span></span></span><span data-slate-object="text" data-key="379"><span data-slate-leaf="true" data-offset-key="379:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// webpack编译配置</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="380"><span data-slate-object="text" data-key="381"><span data-slate-leaf="true" data-offset-key="381:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="382"><span data-slate-leaf="true" data-offset-key="382:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">let</span></span></span></span><span data-slate-object="text" data-key="383"><span data-slate-leaf="true" data-offset-key="383:0" data-first-offset="true"><span data-slate-string="true"> options = </span></span></span><span data-slate-object="text" data-key="384"><span data-slate-leaf="true" data-offset-key="384:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="385"><span data-slate-leaf="true" data-offset-key="385:0" data-first-offset="true"><span data-slate-string="true">.compilerConfiguration;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="386"><span data-slate-object="text" data-key="387"><span data-slate-leaf="true" data-offset-key="387:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="388"><span data-slate-leaf="true" data-offset-key="388:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 输出参数配置项</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="389"><span data-slate-object="text" data-key="390"><span data-slate-leaf="true" data-offset-key="390:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="391"><span data-slate-leaf="true" data-offset-key="391:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">let</span></span></span></span><span data-slate-object="text" data-key="392"><span data-slate-leaf="true" data-offset-key="392:0" data-first-offset="true"><span data-slate-string="true"> outputOptions = </span></span></span><span data-slate-object="text" data-key="393"><span data-slate-leaf="true" data-offset-key="393:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="394"><span data-slate-leaf="true" data-offset-key="394:0" data-first-offset="true"><span data-slate-string="true">.outputConfiguration;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="395"><span data-slate-object="text" data-key="396"><span data-slate-leaf="true" data-offset-key="396:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="397"><span data-slate-object="text" data-key="398"><span data-slate-leaf="true" data-offset-key="398:0" data-first-offset="true"><span data-slate-string="true">      	</span></span></span><span data-slate-object="text" data-key="399"><span data-slate-leaf="true" data-offset-key="399:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="400"><span data-slate-leaf="true" data-offset-key="400:0" data-first-offset="true"><span data-slate-string="true"> isRawOutput = </span></span></span><span data-slate-object="text" data-key="401"><span data-slate-leaf="true" data-offset-key="401:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">typeof</span></span></span></span><span data-slate-object="text" data-key="402"><span data-slate-leaf="true" data-offset-key="402:0" data-first-offset="true"><span data-slate-string="true"> outputOptions.json === </span></span></span><span data-slate-object="text" data-key="403"><span data-slate-leaf="true" data-offset-key="403:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'undefined'</span></span></span></span><span data-slate-object="text" data-key="404"><span data-slate-leaf="true" data-offset-key="404:0" data-first-offset="true"><span data-slate-string="true">;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="405"><span data-slate-object="text" data-key="406"><span data-slate-leaf="true" data-offset-key="406:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="407"><span data-slate-leaf="true" data-offset-key="407:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 未配置json：插件数组第一坑位植入插件：WebpackCLIPlugin，用于构建流程展示进度</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="408"><span data-slate-object="text" data-key="409"><span data-slate-leaf="true" data-offset-key="409:0" data-first-offset="true"><span data-slate-string="true">      	</span></span></span><span data-slate-object="text" data-key="410"><span data-slate-leaf="true" data-offset-key="410:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="411"><span data-slate-leaf="true" data-offset-key="411:0" data-first-offset="true"><span data-slate-string="true"> (isRawOutput){</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="412"><span data-slate-object="text" data-key="413"><span data-slate-leaf="true" data-offset-key="413:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="414"><span data-slate-leaf="true" data-offset-key="414:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="415"><span data-slate-leaf="true" data-offset-key="415:0" data-first-offset="true"><span data-slate-string="true"> webpackCLIPlugin = </span></span></span><span data-slate-object="text" data-key="416"><span data-slate-leaf="true" data-offset-key="416:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="417"><span data-slate-leaf="true" data-offset-key="417:0" data-first-offset="true"><span data-slate-string="true"> WebpackCLIPlugin({</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="418"><span data-slate-object="text" data-key="419"><span data-slate-leaf="true" data-offset-key="419:0" data-first-offset="true"><span data-slate-string="true">             </span></span></span><span data-slate-object="text" data-key="420"><span data-slate-leaf="true" data-offset-key="420:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">progress</span></span></span></span><span data-slate-object="text" data-key="421"><span data-slate-leaf="true" data-offset-key="421:0" data-first-offset="true"><span data-slate-string="true">: outputOptions.progress,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="422"><span data-slate-object="text" data-key="423"><span data-slate-leaf="true" data-offset-key="423:0" data-first-offset="true"><span data-slate-string="true">          });</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="424"><span data-slate-object="text" data-key="425"><span data-slate-leaf="true" data-offset-key="425:0" data-first-offset="true"><span data-slate-string="true">        	...</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="426"><span data-slate-object="text" data-key="427"><span data-slate-leaf="true" data-offset-key="427:0" data-first-offset="true"><span data-slate-string="true">          addPlugin(webpackCLIPlugin);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="428"><span data-slate-object="text" data-key="429"><span data-slate-leaf="true" data-offset-key="429:0" data-first-offset="true"><span data-slate-string="true">        }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="430"><span data-slate-object="text" data-key="431"><span data-slate-leaf="true" data-offset-key="431:0" data-first-offset="true"><span data-slate-string="true">      	</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="432"><span data-slate-object="text" data-key="433"><span data-slate-leaf="true" data-offset-key="433:0" data-first-offset="true"><span data-slate-string="true">      	</span></span></span><span data-slate-object="text" data-key="434"><span data-slate-leaf="true" data-offset-key="434:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="435"><span data-slate-leaf="true" data-offset-key="435:0" data-first-offset="true"><span data-slate-string="true"> callback = </span></span></span><span data-slate-object="text" data-key="436"><span data-slate-leaf="true" data-offset-key="436:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">(</span></span></span></span><span data-slate-object="text" data-key="437"><span data-slate-leaf="true" data-offset-key="437:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">error, stats</span></span></span></span></span><span data-slate-object="text" data-key="438"><span data-slate-leaf="true" data-offset-key="438:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">) =&gt;</span></span></span></span><span data-slate-object="text" data-key="439"><span data-slate-leaf="true" data-offset-key="439:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="440"><span data-slate-object="text" data-key="441"><span data-slate-leaf="true" data-offset-key="441:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="442"><span data-slate-object="text" data-key="443"><span data-slate-leaf="true" data-offset-key="443:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="444"><span data-slate-leaf="true" data-offset-key="444:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 获取输出的构建信息</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="445"><span data-slate-object="text" data-key="446"><span data-slate-leaf="true" data-offset-key="446:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="447"><span data-slate-leaf="true" data-offset-key="447:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="448"><span data-slate-leaf="true" data-offset-key="448:0" data-first-offset="true"><span data-slate-string="true"> foundStats = compiler.compilers</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="449"><span data-slate-object="text" data-key="450"><span data-slate-leaf="true" data-offset-key="450:0" data-first-offset="true"><span data-slate-string="true">            ? { </span></span></span><span data-slate-object="text" data-key="451"><span data-slate-leaf="true" data-offset-key="451:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">children</span></span></span></span><span data-slate-object="text" data-key="452"><span data-slate-leaf="true" data-offset-key="452:0" data-first-offset="true"><span data-slate-string="true">: compiler.compilers.map(getStatsOptionsFromCompiler) }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="453"><span data-slate-object="text" data-key="454"><span data-slate-leaf="true" data-offset-key="454:0" data-first-offset="true"><span data-slate-string="true">            : </span></span></span><span data-slate-object="text" data-key="455"><span data-slate-leaf="true" data-offset-key="455:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">get</span></span></span></span><span data-slate-object="text" data-key="456"><span data-slate-leaf="true" data-offset-key="456:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">StatsOptionsFromCompiler</span></span></span></span><span data-slate-object="text" data-key="457"><span data-slate-leaf="true" data-offset-key="457:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="458"><span data-slate-leaf="true" data-offset-key="458:0" data-first-offset="true"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">compiler</span></span></span></span><span data-slate-object="text" data-key="459"><span data-slate-leaf="true" data-offset-key="459:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="460"><span data-slate-object="text" data-key="461"><span data-slate-leaf="true" data-offset-key="461:0" data-first-offset="true"><span data-slate-string="true">        	...</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="462"><span data-slate-object="text" data-key="463"><span data-slate-leaf="true" data-offset-key="463:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="464"><span data-slate-leaf="true" data-offset-key="464:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="465"><span data-slate-leaf="true" data-offset-key="465:0" data-first-offset="true"><span data-slate-string="true"> (</span></span></span><span data-slate-object="text" data-key="466"><span data-slate-leaf="true" data-offset-key="466:0" data-first-offset="true"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">outputOptions.json === true</span></span></span></span><span data-slate-object="text" data-key="467"><span data-slate-leaf="true" data-offset-key="467:0" data-first-offset="true"><span data-slate-string="true">){</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="468"><span data-slate-object="text" data-key="469"><span data-slate-leaf="true" data-offset-key="469:0" data-first-offset="true"><span data-slate-string="true">          	</span></span></span><span data-slate-object="text" data-key="470"><span data-slate-leaf="true" data-offset-key="470:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 按照json格式在命令行窗口输出构建信息</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="471"><span data-slate-object="text" data-key="472"><span data-slate-leaf="true" data-offset-key="472:0" data-first-offset="true"><span data-slate-string="true">          }</span></span></span><span data-slate-object="text" data-key="473"><span data-slate-leaf="true" data-offset-key="473:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">else</span></span></span></span><span data-slate-object="text" data-key="474"><span data-slate-leaf="true" data-offset-key="474:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="475"><span data-slate-leaf="true" data-offset-key="475:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="476"><span data-slate-leaf="true" data-offset-key="476:0" data-first-offset="true"><span data-slate-string="true"> (</span></span></span><span data-slate-object="text" data-key="477"><span data-slate-leaf="true" data-offset-key="477:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">typeof</span></span></span></span><span data-slate-object="text" data-key="478"><span data-slate-leaf="true" data-offset-key="478:0" data-first-offset="true"><span data-slate-string="true"> outputOptions.json === </span></span></span><span data-slate-object="text" data-key="479"><span data-slate-leaf="true" data-offset-key="479:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'string'</span></span></span></span><span data-slate-object="text" data-key="480"><span data-slate-leaf="true" data-offset-key="480:0" data-first-offset="true"><span data-slate-string="true">){</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="481"><span data-slate-object="text" data-key="482"><span data-slate-leaf="true" data-offset-key="482:0" data-first-offset="true"><span data-slate-string="true">          	</span></span></span><span data-slate-object="text" data-key="483"><span data-slate-leaf="true" data-offset-key="483:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 创建json文件输出构建信息</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="484"><span data-slate-object="text" data-key="485"><span data-slate-leaf="true" data-offset-key="485:0" data-first-offset="true"><span data-slate-string="true">          }</span></span></span><span data-slate-object="text" data-key="486"><span data-slate-leaf="true" data-offset-key="486:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">else</span></span></span></span><span data-slate-object="text" data-key="487"><span data-slate-leaf="true" data-offset-key="487:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="488"><span data-slate-object="text" data-key="489"><span data-slate-leaf="true" data-offset-key="489:0" data-first-offset="true"><span data-slate-string="true">          	</span></span></span><span data-slate-object="text" data-key="490"><span data-slate-leaf="true" data-offset-key="490:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 按照普通logger输出构建信息</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="491"><span data-slate-object="text" data-key="492"><span data-slate-leaf="true" data-offset-key="492:0" data-first-offset="true"><span data-slate-string="true">          }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="493"><span data-slate-object="text" data-key="494"><span data-slate-leaf="true" data-offset-key="494:0" data-first-offset="true"><span data-slate-string="true">        }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="495"><span data-slate-object="text" data-key="496"><span data-slate-leaf="true" data-offset-key="496:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="497"><span data-slate-object="text" data-key="498"><span data-slate-leaf="true" data-offset-key="498:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="499"><span data-slate-leaf="true" data-offset-key="499:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 执行webpack/webpack.js 开始编译，返回compiler实例</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="500"><span data-slate-object="text" data-key="501"><span data-slate-leaf="true" data-offset-key="501:0" data-first-offset="true"><span data-slate-string="true">        compiler = </span></span></span><span data-slate-object="text" data-key="502"><span data-slate-leaf="true" data-offset-key="502:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="503"><span data-slate-leaf="true" data-offset-key="503:0" data-first-offset="true"><span data-slate-string="true">.createCompiler(options, callback);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="504"><span data-slate-object="text" data-key="505"><span data-slate-leaf="true" data-offset-key="505:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="506"><span data-slate-leaf="true" data-offset-key="506:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="507"><span data-slate-leaf="true" data-offset-key="507:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="508"><span data-slate-leaf="true" data-offset-key="508:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">Promise</span></span></span></span><span data-slate-object="text" data-key="509"><span data-slate-leaf="true" data-offset-key="509:0" data-first-offset="true"><span data-slate-string="true">.resolve();</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="510"><span data-slate-object="text" data-key="511"><span data-slate-leaf="true" data-offset-key="511:0" data-first-offset="true"><span data-slate-string="true">    }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="512"><span data-slate-object="text" data-key="513"><span data-slate-leaf="true" data-offset-key="513:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="514"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="515"></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 2290px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: visible;"><div class="simplebar-scrollbar" style="width: 681px; transform: translate3d(0px, 0px, 0px); display: block;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><h5 data-id-heading4="" data-slate-type="pm_heading" data-slate-object="block" data-key="516"><span data-slate-object="text" data-key="517"><span data-slate-leaf="true" data-offset-key="517:0" data-first-offset="true"><span data-slate-string="true">4、调试node_modules下的三方库</span></span></span></h5><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="518"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div><div data-class-line="" data-line-number="9"></div><div data-class-line="" data-line-number="10"></div><div data-class-line="" data-line-number="11"></div><div data-class-line="" data-line-number="12"></div><div data-class-line="" data-line-number="13"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="519"><span data-slate-object="text" data-key="520"><span data-slate-leaf="true" data-offset-key="520:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">//&nbsp;1.&nbsp;进入包目录</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="521"><span data-slate-object="text" data-key="522"><span data-slate-leaf="true" data-offset-key="522:0" data-first-offset="true"><span data-slate-string="true">cd ~</span></span></span><span data-slate-object="text" data-key="523"><span data-slate-leaf="true" data-offset-key="523:0" data-first-offset="true"><span class="hljs-regexp" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/projects/</span></span></span></span><span data-slate-object="text" data-key="524"><span data-slate-leaf="true" data-offset-key="524:0" data-first-offset="true"><span data-slate-string="true">node_modules/node-redis </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="525"><span data-slate-object="text" data-key="526"><span data-slate-leaf="true" data-offset-key="526:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/**</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="527"><span data-slate-object="text" data-key="528"><span data-slate-leaf="true" data-offset-key="528:0" data-first-offset="true"><span data-slate-string="true">*&nbsp;2.&nbsp;创建全局包链接</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="529"><span data-slate-object="text" data-key="530"><span data-slate-leaf="true" data-offset-key="530:0" data-first-offset="true"><span data-slate-string="true">*&nbsp;包文件夹中的npm&nbsp;link将在全局文件夹{prefix}/lib/node_modules/&lt;package&gt;中创建一个符号链接，</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="531"><span data-slate-object="text" data-key="532"><span data-slate-leaf="true" data-offset-key="532:0" data-first-offset="true"><span data-slate-string="true">*&nbsp;该符号链接到执行npm&nbsp;link命令的包。它还将把包中的任何bin链接到{prefix}/bin/{name}。请注意，</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="533"><span data-slate-object="text" data-key="534"><span data-slate-leaf="true" data-offset-key="534:0" data-first-offset="true"><span data-slate-string="true">*&nbsp;npm&nbsp;link使用全局前缀（其值请参见npm&nbsp;prefix-g）</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="535"><span data-slate-object="text" data-key="536"><span data-slate-leaf="true" data-offset-key="536:0" data-first-offset="true"><span data-slate-string="true">*/</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="537"><span data-slate-object="text" data-key="538"><span data-slate-leaf="true" data-offset-key="538:0" data-first-offset="true"><span data-slate-string="true">npm&nbsp;link&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="539"><span data-slate-object="text" data-key="540"><span data-slate-leaf="true" data-offset-key="540:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">//&nbsp;3.&nbsp;转到程序目录&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="541"><span data-slate-object="text" data-key="542"><span data-slate-leaf="true" data-offset-key="542:0" data-first-offset="true"><span data-slate-string="true">cd&nbsp;~</span></span></span><span data-slate-object="text" data-key="543"><span data-slate-leaf="true" data-offset-key="543:0" data-first-offset="true"><span class="hljs-regexp" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/projects/</span></span></span></span><span data-slate-object="text" data-key="544"><span data-slate-leaf="true" data-offset-key="544:0" data-first-offset="true"><span data-slate-string="true">node-bloggy&nbsp;&nbsp;&nbsp;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="545"><span data-slate-object="text" data-key="546"><span data-slate-leaf="true" data-offset-key="546:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">//&nbsp;4.&nbsp;链接安装程序包[package.json中的name]</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="547"><span data-slate-object="text" data-key="548"><span data-slate-leaf="true" data-offset-key="548:0" data-first-offset="true"><span data-slate-string="true">npm&nbsp;link&nbsp;redis&nbsp;</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 270px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="549"><span data-slate-object="text" data-key="550"><span data-slate-leaf="true" data-offset-key="550:0" data-first-offset="true"><span data-slate-string="true">文档：</span></span></span><a data-slate-type="pm_link" data-slate-object="inline" data-key="551" href="https://docs.npmjs.com/cli/v6/commands/npm-link"><span data-slate-object="text" data-key="552"><span data-slate-leaf="true" data-offset-key="552:0" data-first-offset="true"><span data-slate-string="true">npm-link   Symlink a package folder</span></span></span></a></p><h3 data-id-heading5="" data-slate-type="pm_heading" data-slate-object="block" data-key="553"><span data-slate-object="text" data-key="554"><span data-slate-leaf="true" data-offset-key="554:0" data-first-offset="true"><span data-slate-string="true">二、Webpack的本质</span></span></span></h3><blockquote data-slate-type="pm_blockquote" data-slate-object="block" data-key="555"><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="556"><span data-slate-object="text" data-key="557"><span data-slate-leaf="true" data-offset-key="557:0" data-first-offset="true"><span data-slate-string="true">webpack可以理解为一种基于事件流的编程范例，一系列的插件运行，而实现这个插件机制的是Tapable。</span></span></span></p></blockquote><h5 data-id-heading6="" data-slate-type="pm_heading" data-slate-object="block" data-key="558"><span data-slate-object="text" data-key="559"><span data-slate-leaf="true" data-offset-key="559:0" data-first-offset="true"><span data-slate-string="true">1、Tapable是什么?</span></span></span></h5><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="560"><span data-slate-object="text" data-key="561"><span data-slate-leaf="true" data-offset-key="561:0" data-first-offset="true"><span data-slate-string="true">Tapable公开了许多Hook类，可用于为插件创建钩子。 </span></span></span></p><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="562"><span data-slate-object="text" data-key="563"><span data-slate-leaf="true" data-offset-key="563:0" data-first-offset="true"><span data-slate-string="true">Tapable是一个类似于Node.js的EventEmitter的库，主要是控制钩子函数的发布与订阅，控制着Webpack的插件系统。</span></span></span></p><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="564"><span data-slate-object="text" data-key="565"><span data-slate-leaf="true" data-offset-key="565:0"><span data-slate-zero-width="n" data-slate-length="0">﻿</span></span></span></p><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="566"><span data-slate-object="text" data-key="567"><span data-slate-leaf="true" data-offset-key="567:0" data-first-offset="true"><span data-slate-string="true">安装使用：</span></span></span></p><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="568"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="569"><span data-slate-object="text" data-key="570"><span data-slate-leaf="true" data-offset-key="570:0" data-first-offset="true"><span data-slate-string="true">npm install --save tapable</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 30px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="571"><span data-slate-object="text" data-key="572"><span data-slate-leaf="true" data-offset-key="572:0"><span data-slate-zero-width="n" data-slate-length="0">﻿</span></span></span></p><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="573"><span data-slate-object="text" data-key="574"><span data-slate-leaf="true" data-offset-key="574:0" data-first-offset="true"><span data-slate-string="true">Node.js事件机制简单例子：</span></span></span></p><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="575"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div><div data-class-line="" data-line-number="9"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="576"><span data-slate-object="text" data-key="577"><span data-slate-leaf="true" data-offset-key="577:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// nodejs中的事件机制</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="578"><span data-slate-object="text" data-key="579"><span data-slate-leaf="true" data-offset-key="579:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="580"><span data-slate-leaf="true" data-offset-key="580:0" data-first-offset="true"><span data-slate-string="true"> EventEmitter = </span></span></span><span data-slate-object="text" data-key="581"><span data-slate-leaf="true" data-offset-key="581:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">require</span></span></span></span><span data-slate-object="text" data-key="582"><span data-slate-leaf="true" data-offset-key="582:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="583"><span data-slate-leaf="true" data-offset-key="583:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'events'</span></span></span></span><span data-slate-object="text" data-key="584"><span data-slate-leaf="true" data-offset-key="584:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="585"><span data-slate-object="text" data-key="586"><span data-slate-leaf="true" data-offset-key="586:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="587"><span data-slate-leaf="true" data-offset-key="587:0" data-first-offset="true"><span data-slate-string="true"> emitter = </span></span></span><span data-slate-object="text" data-key="588"><span data-slate-leaf="true" data-offset-key="588:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="589"><span data-slate-leaf="true" data-offset-key="589:0" data-first-offset="true"><span data-slate-string="true"> EventEmitter();</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="590"><span data-slate-object="text" data-key="591"><span data-slate-leaf="true" data-offset-key="591:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 监听事件</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="592"><span data-slate-object="text" data-key="593"><span data-slate-leaf="true" data-offset-key="593:0" data-first-offset="true"><span data-slate-string="true">emitter.on(</span></span></span><span data-slate-object="text" data-key="594"><span data-slate-leaf="true" data-offset-key="594:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'start'</span></span></span></span><span data-slate-object="text" data-key="595"><span data-slate-leaf="true" data-offset-key="595:0" data-first-offset="true"><span data-slate-string="true">,()=&gt;{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="596"><span data-slate-object="text" data-key="597"><span data-slate-leaf="true" data-offset-key="597:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="598"><span data-slate-leaf="true" data-offset-key="598:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">console</span></span></span></span><span data-slate-object="text" data-key="599"><span data-slate-leaf="true" data-offset-key="599:0" data-first-offset="true"><span data-slate-string="true">.log(</span></span></span><span data-slate-object="text" data-key="600"><span data-slate-leaf="true" data-offset-key="600:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'start'</span></span></span></span><span data-slate-object="text" data-key="601"><span data-slate-leaf="true" data-offset-key="601:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="602"><span data-slate-object="text" data-key="603"><span data-slate-leaf="true" data-offset-key="603:0" data-first-offset="true"><span data-slate-string="true">})</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="604"><span data-slate-object="text" data-key="605"><span data-slate-leaf="true" data-offset-key="605:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 触发事件</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="606"><span data-slate-object="text" data-key="607"><span data-slate-leaf="true" data-offset-key="607:0" data-first-offset="true"><span data-slate-string="true">emitter.emit(</span></span></span><span data-slate-object="text" data-key="608"><span data-slate-leaf="true" data-offset-key="608:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'start'</span></span></span></span><span data-slate-object="text" data-key="609"><span data-slate-leaf="true" data-offset-key="609:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 190px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><h5 data-id-heading7="" data-slate-type="pm_heading" data-slate-object="block" data-key="610"><span data-slate-object="text" data-key="611"><span data-slate-leaf="true" data-offset-key="611:0" data-first-offset="true"><span data-slate-string="true">2、Tapable Hooks类型</span></span></span></h5><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="612"><span data-slate-object="text" data-key="613"><span data-slate-leaf="true" data-offset-key="613:0" data-first-offset="true"><span data-slate-string="true">Tapable暴露的为插件提供挂载的Hook类，如下：</span></span></span></p><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="614"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div><div data-class-line="" data-line-number="9"></div><div data-class-line="" data-line-number="10"></div><div data-class-line="" data-line-number="11"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="615"><span data-slate-object="text" data-key="616"><span data-slate-leaf="true" data-offset-key="616:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="617"><span data-slate-leaf="true" data-offset-key="617:0" data-first-offset="true"><span data-slate-string="true">&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="618"><span data-slate-object="text" data-key="619"><span data-slate-leaf="true" data-offset-key="619:0" data-first-offset="true"><span data-slate-string="true">  SyncHook,                </span></span></span><span data-slate-object="text" data-key="620"><span data-slate-leaf="true" data-offset-key="620:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 同步钩子</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="621"><span data-slate-object="text" data-key="622"><span data-slate-leaf="true" data-offset-key="622:0" data-first-offset="true"><span data-slate-string="true">  SyncBailHook,            </span></span></span><span data-slate-object="text" data-key="623"><span data-slate-leaf="true" data-offset-key="623:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 同步熔断钩子</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="624"><span data-slate-object="text" data-key="625"><span data-slate-leaf="true" data-offset-key="625:0" data-first-offset="true"><span data-slate-string="true">  SyncWaterfallHook,       </span></span></span><span data-slate-object="text" data-key="626"><span data-slate-leaf="true" data-offset-key="626:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 同步流水钩子</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="627"><span data-slate-object="text" data-key="628"><span data-slate-leaf="true" data-offset-key="628:0" data-first-offset="true"><span data-slate-string="true">  SyncLoopHook,            </span></span></span><span data-slate-object="text" data-key="629"><span data-slate-leaf="true" data-offset-key="629:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 同步循环钩子</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="630"><span data-slate-object="text" data-key="631"><span data-slate-leaf="true" data-offset-key="631:0" data-first-offset="true"><span data-slate-string="true">  AsyncParallelHook,       </span></span></span><span data-slate-object="text" data-key="632"><span data-slate-leaf="true" data-offset-key="632:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 异步并发钩子 </span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="633"><span data-slate-object="text" data-key="634"><span data-slate-leaf="true" data-offset-key="634:0" data-first-offset="true"><span data-slate-string="true">  AsyncParallelBailHook,   </span></span></span><span data-slate-object="text" data-key="635"><span data-slate-leaf="true" data-offset-key="635:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 异步并发熔断钩子   </span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="636"><span data-slate-object="text" data-key="637"><span data-slate-leaf="true" data-offset-key="637:0" data-first-offset="true"><span data-slate-string="true">  AsyncSeriesHook,         </span></span></span><span data-slate-object="text" data-key="638"><span data-slate-leaf="true" data-offset-key="638:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 异步串行钩子</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="639"><span data-slate-object="text" data-key="640"><span data-slate-leaf="true" data-offset-key="640:0" data-first-offset="true"><span data-slate-string="true">  AsyncSeriesBailHook,     </span></span></span><span data-slate-object="text" data-key="641"><span data-slate-leaf="true" data-offset-key="641:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 串行串行熔断钩子</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="642"><span data-slate-object="text" data-key="643"><span data-slate-leaf="true" data-offset-key="643:0" data-first-offset="true"><span data-slate-string="true">  AsyncSeriesWaterfallHook </span></span></span><span data-slate-object="text" data-key="644"><span data-slate-leaf="true" data-offset-key="644:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 异步串行流水钩子</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="645"><span data-slate-object="text" data-key="646"><span data-slate-leaf="true" data-offset-key="646:0" data-first-offset="true"><span data-slate-string="true">} = </span></span></span><span data-slate-object="text" data-key="647"><span data-slate-leaf="true" data-offset-key="647:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">require</span></span></span></span><span data-slate-object="text" data-key="648"><span data-slate-leaf="true" data-offset-key="648:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="649"><span data-slate-leaf="true" data-offset-key="649:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"tapable"</span></span></span></span><span data-slate-object="text" data-key="650"><span data-slate-leaf="true" data-offset-key="650:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 230px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="651"><span data-slate-object="text" data-key="652"><span data-slate-leaf="true" data-offset-key="652:0" data-first-offset="true"><span data-slate-string="true">这些Hook可以按以下进行分类：</span></span></span></p><div data-lang="text" data-slate-type="pm_blockcode" data-slate-object="block" data-key="653"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="text" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="654"><span data-slate-object="text" data-key="655"><span data-slate-leaf="true" data-offset-key="655:0" data-first-offset="true"><span data-slate-string="true">Hook：所有钩子的后缀</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="656"><span data-slate-object="text" data-key="657"><span data-slate-leaf="true" data-offset-key="657:0" data-first-offset="true"><span data-slate-string="true">Waterfall：同步方法，但是它会传值给下一个函数</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="658"><span data-slate-object="text" data-key="659"><span data-slate-leaf="true" data-offset-key="659:0" data-first-offset="true"><span data-slate-string="true">Bail：熔断：当函数有任何返回值，就会在当前执行函数停止</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="660"><span data-slate-object="text" data-key="661"><span data-slate-leaf="true" data-offset-key="661:0" data-first-offset="true"><span data-slate-string="true">Loop：监听函数返回true表示继续循环，返回undefined表示循环结束</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="662"><span data-slate-object="text" data-key="663"><span data-slate-leaf="true" data-offset-key="663:0" data-first-offset="true"><span data-slate-string="true">Sync：同步方法</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="664"><span data-slate-object="text" data-key="665"><span data-slate-leaf="true" data-offset-key="665:0" data-first-offset="true"><span data-slate-string="true">AsyncSeries：异步串行钩子</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="666"><span data-slate-object="text" data-key="667"><span data-slate-leaf="true" data-offset-key="667:0" data-first-offset="true"><span data-slate-string="true">AsyncParallel：异步并行执行钩子</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 150px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><h5 data-id-heading8="" data-slate-type="pm_heading" data-slate-object="block" data-key="668"><span data-slate-object="text" data-key="669"><span data-slate-leaf="true" data-offset-key="669:0" data-first-offset="true"><span data-slate-string="true">3、模拟webpack的Compiler与plugin</span></span></span></h5><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="670"><span data-slate-object="text" data-key="671"><span data-slate-leaf="true" data-offset-key="671:0" data-first-offset="true"><span data-slate-string="true">相关代码如下:</span></span></span></p><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="672"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div><div data-class-line="" data-line-number="9"></div><div data-class-line="" data-line-number="10"></div><div data-class-line="" data-line-number="11"></div><div data-class-line="" data-line-number="12"></div><div data-class-line="" data-line-number="13"></div><div data-class-line="" data-line-number="14"></div><div data-class-line="" data-line-number="15"></div><div data-class-line="" data-line-number="16"></div><div data-class-line="" data-line-number="17"></div><div data-class-line="" data-line-number="18"></div><div data-class-line="" data-line-number="19"></div><div data-class-line="" data-line-number="20"></div><div data-class-line="" data-line-number="21"></div><div data-class-line="" data-line-number="22"></div><div data-class-line="" data-line-number="23"></div><div data-class-line="" data-line-number="24"></div><div data-class-line="" data-line-number="25"></div><div data-class-line="" data-line-number="26"></div><div data-class-line="" data-line-number="27"></div><div data-class-line="" data-line-number="28"></div><div data-class-line="" data-line-number="29"></div><div data-class-line="" data-line-number="30"></div><div data-class-line="" data-line-number="31"></div><div data-class-line="" data-line-number="32"></div><div data-class-line="" data-line-number="33"></div><div data-class-line="" data-line-number="34"></div><div data-class-line="" data-line-number="35"></div><div data-class-line="" data-line-number="36"></div><div data-class-line="" data-line-number="37"></div><div data-class-line="" data-line-number="38"></div><div data-class-line="" data-line-number="39"></div><div data-class-line="" data-line-number="40"></div><div data-class-line="" data-line-number="41"></div><div data-class-line="" data-line-number="42"></div><div data-class-line="" data-line-number="43"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="673"><span data-slate-object="text" data-key="674"><span data-slate-leaf="true" data-offset-key="674:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">//tapable使用：模拟webpack的Compiler.js</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="675"><span data-slate-object="text" data-key="676"><span data-slate-leaf="true" data-offset-key="676:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="677"><span data-slate-leaf="true" data-offset-key="677:0" data-first-offset="true"><span data-slate-string="true"> {SyncHook} = </span></span></span><span data-slate-object="text" data-key="678"><span data-slate-leaf="true" data-offset-key="678:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">require</span></span></span></span><span data-slate-object="text" data-key="679"><span data-slate-leaf="true" data-offset-key="679:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="680"><span data-slate-leaf="true" data-offset-key="680:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"tapable"</span></span></span></span><span data-slate-object="text" data-key="681"><span data-slate-leaf="true" data-offset-key="681:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="682"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="683"><span data-slate-object="text" data-key="684"><span data-slate-leaf="true" data-offset-key="684:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">module</span></span></span></span><span data-slate-object="text" data-key="685"><span data-slate-leaf="true" data-offset-key="685:0" data-first-offset="true"><span data-slate-string="true">.exports = </span></span></span><span data-slate-object="text" data-key="686"><span data-slate-leaf="true" data-offset-key="686:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">class</span></span></span></span></span><span data-slate-object="text" data-key="687"><span data-slate-leaf="true" data-offset-key="687:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="688"><span data-slate-leaf="true" data-offset-key="688:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">Compiler</span></span></span></span></span><span data-slate-object="text" data-key="689"><span data-slate-leaf="true" data-offset-key="689:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="690"><span data-slate-object="text" data-key="691"><span data-slate-leaf="true" data-offset-key="691:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="692"><span data-slate-leaf="true" data-offset-key="692:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">constructor</span></span></span></span><span data-slate-object="text" data-key="693"><span data-slate-leaf="true" data-offset-key="693:0" data-first-offset="true"><span data-slate-string="true">(){</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="694"><span data-slate-object="text" data-key="695"><span data-slate-leaf="true" data-offset-key="695:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="696"><span data-slate-leaf="true" data-offset-key="696:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="697"><span data-slate-leaf="true" data-offset-key="697:0" data-first-offset="true"><span data-slate-string="true">.hooks = {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="698"><span data-slate-object="text" data-key="699"><span data-slate-leaf="true" data-offset-key="699:0" data-first-offset="true"><span data-slate-string="true">            </span></span></span><span data-slate-object="text" data-key="700"><span data-slate-leaf="true" data-offset-key="700:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 1. 注册同步钩子</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="701"><span data-slate-object="text" data-key="702"><span data-slate-leaf="true" data-offset-key="702:0" data-first-offset="true"><span data-slate-string="true">           </span></span></span><span data-slate-object="text" data-key="703"><span data-slate-leaf="true" data-offset-key="703:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">init</span></span></span></span><span data-slate-object="text" data-key="704"><span data-slate-leaf="true" data-offset-key="704:0" data-first-offset="true"><span data-slate-string="true">:</span></span></span><span data-slate-object="text" data-key="705"><span data-slate-leaf="true" data-offset-key="705:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="706"><span data-slate-leaf="true" data-offset-key="706:0" data-first-offset="true"><span data-slate-string="true"> SyncHook([</span></span></span><span data-slate-object="text" data-key="707"><span data-slate-leaf="true" data-offset-key="707:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'start'</span></span></span></span><span data-slate-object="text" data-key="708"><span data-slate-leaf="true" data-offset-key="708:0" data-first-offset="true"><span data-slate-string="true">]),  </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="709"><span data-slate-object="text" data-key="710"><span data-slate-leaf="true" data-offset-key="710:0" data-first-offset="true"><span data-slate-string="true">        }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="711"><span data-slate-object="text" data-key="712"><span data-slate-leaf="true" data-offset-key="712:0" data-first-offset="true"><span data-slate-string="true">    }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="713"><span data-slate-object="text" data-key="714"><span data-slate-leaf="true" data-offset-key="714:0" data-first-offset="true"><span data-slate-string="true">    run(){</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="715"><span data-slate-object="text" data-key="716"><span data-slate-leaf="true" data-offset-key="716:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="717"><span data-slate-leaf="true" data-offset-key="717:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 3. 触发钩子函数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="718"><span data-slate-object="text" data-key="719"><span data-slate-leaf="true" data-offset-key="719:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="720"><span data-slate-leaf="true" data-offset-key="720:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="721"><span data-slate-leaf="true" data-offset-key="721:0" data-first-offset="true"><span data-slate-string="true">.hooks.init.call()</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="722"><span data-slate-object="text" data-key="723"><span data-slate-leaf="true" data-offset-key="723:0" data-first-offset="true"><span data-slate-string="true">    }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="724"><span data-slate-object="text" data-key="725"><span data-slate-leaf="true" data-offset-key="725:0" data-first-offset="true"><span data-slate-string="true">} </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="726"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="727"><span data-slate-object="text" data-key="728"><span data-slate-leaf="true" data-offset-key="728:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">//模拟 plugin.js</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="729"><span data-slate-object="text" data-key="730"><span data-slate-leaf="true" data-offset-key="730:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">class</span></span></span></span></span><span data-slate-object="text" data-key="731"><span data-slate-leaf="true" data-offset-key="731:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="732"><span data-slate-leaf="true" data-offset-key="732:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">Plugin</span></span></span></span></span><span data-slate-object="text" data-key="733"><span data-slate-leaf="true" data-offset-key="733:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="734"><span data-slate-object="text" data-key="735"><span data-slate-leaf="true" data-offset-key="735:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="736"><span data-slate-leaf="true" data-offset-key="736:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">constructor</span></span></span></span><span data-slate-object="text" data-key="737"><span data-slate-leaf="true" data-offset-key="737:0" data-first-offset="true"><span data-slate-string="true">(){}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="738"><span data-slate-object="text" data-key="739"><span data-slate-leaf="true" data-offset-key="739:0" data-first-offset="true"><span data-slate-string="true">  apply(compiler){</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="740"><span data-slate-object="text" data-key="741"><span data-slate-leaf="true" data-offset-key="741:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="742"><span data-slate-leaf="true" data-offset-key="742:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 2. 插件内监听钩子函数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="743"><span data-slate-object="text" data-key="744"><span data-slate-leaf="true" data-offset-key="744:0" data-first-offset="true"><span data-slate-string="true">  	compiler.hooks.init.tap(</span></span></span><span data-slate-object="text" data-key="745"><span data-slate-leaf="true" data-offset-key="745:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'start'</span></span></span></span><span data-slate-object="text" data-key="746"><span data-slate-leaf="true" data-offset-key="746:0" data-first-offset="true"><span data-slate-string="true">,()=&gt;{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="747"><span data-slate-object="text" data-key="748"><span data-slate-leaf="true" data-offset-key="748:0" data-first-offset="true"><span data-slate-string="true">    	</span></span></span><span data-slate-object="text" data-key="749"><span data-slate-leaf="true" data-offset-key="749:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">console</span></span></span></span><span data-slate-object="text" data-key="750"><span data-slate-leaf="true" data-offset-key="750:0" data-first-offset="true"><span data-slate-string="true">.log(</span></span></span><span data-slate-object="text" data-key="751"><span data-slate-leaf="true" data-offset-key="751:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'compiler start'</span></span></span></span><span data-slate-object="text" data-key="752"><span data-slate-leaf="true" data-offset-key="752:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="753"><span data-slate-object="text" data-key="754"><span data-slate-leaf="true" data-offset-key="754:0" data-first-offset="true"><span data-slate-string="true">    })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="755"><span data-slate-object="text" data-key="756"><span data-slate-leaf="true" data-offset-key="756:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="757"><span data-slate-object="text" data-key="758"><span data-slate-leaf="true" data-offset-key="758:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="759"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="760"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="761"><span data-slate-object="text" data-key="762"><span data-slate-leaf="true" data-offset-key="762:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 模拟webpack.js</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="763"><span data-slate-object="text" data-key="764"><span data-slate-leaf="true" data-offset-key="764:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="765"><span data-slate-leaf="true" data-offset-key="765:0" data-first-offset="true"><span data-slate-string="true"> options = {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="766"><span data-slate-object="text" data-key="767"><span data-slate-leaf="true" data-offset-key="767:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="768"><span data-slate-leaf="true" data-offset-key="768:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">plugins</span></span></span></span><span data-slate-object="text" data-key="769"><span data-slate-leaf="true" data-offset-key="769:0" data-first-offset="true"><span data-slate-string="true">:[</span></span></span><span data-slate-object="text" data-key="770"><span data-slate-leaf="true" data-offset-key="770:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="771"><span data-slate-leaf="true" data-offset-key="771:0" data-first-offset="true"><span data-slate-string="true"> Plugin()]</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="772"><span data-slate-object="text" data-key="773"><span data-slate-leaf="true" data-offset-key="773:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="774"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="775"><span data-slate-object="text" data-key="776"><span data-slate-leaf="true" data-offset-key="776:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="777"><span data-slate-leaf="true" data-offset-key="777:0" data-first-offset="true"><span data-slate-string="true"> compiler = </span></span></span><span data-slate-object="text" data-key="778"><span data-slate-leaf="true" data-offset-key="778:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="779"><span data-slate-leaf="true" data-offset-key="779:0" data-first-offset="true"><span data-slate-string="true"> Compiler()</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="780"><span data-slate-object="text" data-key="781"><span data-slate-leaf="true" data-offset-key="781:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">for</span></span></span></span><span data-slate-object="text" data-key="782"><span data-slate-leaf="true" data-offset-key="782:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="783"><span data-slate-leaf="true" data-offset-key="783:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="784"><span data-slate-leaf="true" data-offset-key="784:0" data-first-offset="true"><span data-slate-string="true"> plugin </span></span></span><span data-slate-object="text" data-key="785"><span data-slate-leaf="true" data-offset-key="785:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">of</span></span></span></span><span data-slate-object="text" data-key="786"><span data-slate-leaf="true" data-offset-key="786:0" data-first-offset="true"><span data-slate-string="true"> options.plugins){</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="787"><span data-slate-object="text" data-key="788"><span data-slate-leaf="true" data-offset-key="788:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="789"><span data-slate-leaf="true" data-offset-key="789:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="790"><span data-slate-leaf="true" data-offset-key="790:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="791"><span data-slate-leaf="true" data-offset-key="791:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">typeof</span></span></span></span><span data-slate-object="text" data-key="792"><span data-slate-leaf="true" data-offset-key="792:0" data-first-offset="true"><span data-slate-string="true"> plugin===</span></span></span><span data-slate-object="text" data-key="793"><span data-slate-leaf="true" data-offset-key="793:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'function'</span></span></span></span><span data-slate-object="text" data-key="794"><span data-slate-leaf="true" data-offset-key="794:0" data-first-offset="true"><span data-slate-string="true">){</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="795"><span data-slate-object="text" data-key="796"><span data-slate-leaf="true" data-offset-key="796:0" data-first-offset="true"><span data-slate-string="true">  	plugin.call(compiler,compiler)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="797"><span data-slate-object="text" data-key="798"><span data-slate-leaf="true" data-offset-key="798:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span><span data-slate-object="text" data-key="799"><span data-slate-leaf="true" data-offset-key="799:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">else</span></span></span></span><span data-slate-object="text" data-key="800"><span data-slate-leaf="true" data-offset-key="800:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="801"><span data-slate-object="text" data-key="802"><span data-slate-leaf="true" data-offset-key="802:0" data-first-offset="true"><span data-slate-string="true">  	plugin.apply(compiler)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="803"><span data-slate-object="text" data-key="804"><span data-slate-leaf="true" data-offset-key="804:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="805"><span data-slate-object="text" data-key="806"><span data-slate-leaf="true" data-offset-key="806:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="807"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="808"><span data-slate-object="text" data-key="809"><span data-slate-leaf="true" data-offset-key="809:0" data-first-offset="true"><span data-slate-string="true">compiler.run()</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 870px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><h3 data-id-heading9="" data-slate-type="pm_heading" data-slate-object="block" data-key="810"><span data-slate-object="text" data-key="811"><span data-slate-leaf="true" data-offset-key="811:0" data-first-offset="true"><span data-slate-string="true">三、浅析webpack源码</span></span></span></h3><h5 data-id-heading10="" data-slate-type="pm_heading" data-slate-object="block" data-key="812"><span data-slate-object="text" data-key="813"><span data-slate-leaf="true" data-offset-key="813:0" data-first-offset="true"><span data-slate-string="true">1、webpack</span></span></span></h5><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="814"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div><div data-class-line="" data-line-number="9"></div><div data-class-line="" data-line-number="10"></div><div data-class-line="" data-line-number="11"></div><div data-class-line="" data-line-number="12"></div><div data-class-line="" data-line-number="13"></div><div data-class-line="" data-line-number="14"></div><div data-class-line="" data-line-number="15"></div><div data-class-line="" data-line-number="16"></div><div data-class-line="" data-line-number="17"></div><div data-class-line="" data-line-number="18"></div><div data-class-line="" data-line-number="19"></div><div data-class-line="" data-line-number="20"></div><div data-class-line="" data-line-number="21"></div><div data-class-line="" data-line-number="22"></div><div data-class-line="" data-line-number="23"></div><div data-class-line="" data-line-number="24"></div><div data-class-line="" data-line-number="25"></div><div data-class-line="" data-line-number="26"></div><div data-class-line="" data-line-number="27"></div><div data-class-line="" data-line-number="28"></div><div data-class-line="" data-line-number="29"></div><div data-class-line="" data-line-number="30"></div><div data-class-line="" data-line-number="31"></div><div data-class-line="" data-line-number="32"></div><div data-class-line="" data-line-number="33"></div><div data-class-line="" data-line-number="34"></div><div data-class-line="" data-line-number="35"></div><div data-class-line="" data-line-number="36"></div><div data-class-line="" data-line-number="37"></div><div data-class-line="" data-line-number="38"></div><div data-class-line="" data-line-number="39"></div><div data-class-line="" data-line-number="40"></div><div data-class-line="" data-line-number="41"></div><div data-class-line="" data-line-number="42"></div><div data-class-line="" data-line-number="43"></div><div data-class-line="" data-line-number="44"></div><div data-class-line="" data-line-number="45"></div><div data-class-line="" data-line-number="46"></div><div data-class-line="" data-line-number="47"></div><div data-class-line="" data-line-number="48"></div><div data-class-line="" data-line-number="49"></div><div data-class-line="" data-line-number="50"></div><div data-class-line="" data-line-number="51"></div><div data-class-line="" data-line-number="52"></div><div data-class-line="" data-line-number="53"></div><div data-class-line="" data-line-number="54"></div><div data-class-line="" data-line-number="55"></div><div data-class-line="" data-line-number="56"></div><div data-class-line="" data-line-number="57"></div><div data-class-line="" data-line-number="58"></div><div data-class-line="" data-line-number="59"></div><div data-class-line="" data-line-number="60"></div><div data-class-line="" data-line-number="61"></div><div data-class-line="" data-line-number="62"></div><div data-class-line="" data-line-number="63"></div><div data-class-line="" data-line-number="64"></div><div data-class-line="" data-line-number="65"></div><div data-class-line="" data-line-number="66"></div><div data-class-line="" data-line-number="67"></div><div data-class-line="" data-line-number="68"></div><div data-class-line="" data-line-number="69"></div><div data-class-line="" data-line-number="70"></div><div data-class-line="" data-line-number="71"></div><div data-class-line="" data-line-number="72"></div><div data-class-line="" data-line-number="73"></div><div data-class-line="" data-line-number="74"></div><div data-class-line="" data-line-number="75"></div><div data-class-line="" data-line-number="76"></div><div data-class-line="" data-line-number="77"></div><div data-class-line="" data-line-number="78"></div><div data-class-line="" data-line-number="79"></div><div data-class-line="" data-line-number="80"></div><div data-class-line="" data-line-number="81"></div><div data-class-line="" data-line-number="82"></div><div data-class-line="" data-line-number="83"></div><div data-class-line="" data-line-number="84"></div><div data-class-line="" data-line-number="85"></div><div data-class-line="" data-line-number="86"></div><div data-class-line="" data-line-number="87"></div><div data-class-line="" data-line-number="88"></div><div data-class-line="" data-line-number="89"></div><div data-class-line="" data-line-number="90"></div><div data-class-line="" data-line-number="91"></div><div data-class-line="" data-line-number="92"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="815"><span data-slate-object="text" data-key="816"><span data-slate-leaf="true" data-offset-key="816:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/*</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="817"><span data-slate-object="text" data-key="818"><span data-slate-leaf="true" data-offset-key="818:0" data-first-offset="true"><span data-slate-string="true"> * webpack/lib/webpack.js</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="819"><span data-slate-object="text" data-key="820"><span data-slate-leaf="true" data-offset-key="820:0" data-first-offset="true"><span data-slate-string="true"> */</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="821"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="822"><span data-slate-object="text" data-key="823"><span data-slate-leaf="true" data-offset-key="823:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="824"><span data-slate-leaf="true" data-offset-key="824:0" data-first-offset="true"><span data-slate-string="true"> createCompiler = </span></span></span><span data-slate-object="text" data-key="825"><span data-slate-leaf="true" data-offset-key="825:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">rawOptions</span></span></span></span></span><span data-slate-object="text" data-key="826"><span data-slate-leaf="true" data-offset-key="826:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> =&gt;</span></span></span></span><span data-slate-object="text" data-key="827"><span data-slate-leaf="true" data-offset-key="827:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="828"><span data-slate-object="text" data-key="829"><span data-slate-leaf="true" data-offset-key="829:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="830"><span data-slate-leaf="true" data-offset-key="830:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 获取默认的webpack参数，rawOptions转换为compiler完整的配置项:填补上默认项</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="831"><span data-slate-object="text" data-key="832"><span data-slate-leaf="true" data-offset-key="832:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="833"><span data-slate-leaf="true" data-offset-key="833:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="834"><span data-slate-leaf="true" data-offset-key="834:0" data-first-offset="true"><span data-slate-string="true"> options = </span></span></span><span data-slate-object="text" data-key="835"><span data-slate-leaf="true" data-offset-key="835:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">get</span></span></span></span><span data-slate-object="text" data-key="836"><span data-slate-leaf="true" data-offset-key="836:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">NormalizedWebpackOptions</span></span></span></span><span data-slate-object="text" data-key="837"><span data-slate-leaf="true" data-offset-key="837:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="838"><span data-slate-leaf="true" data-offset-key="838:0" data-first-offset="true"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">rawOptions</span></span></span></span><span data-slate-object="text" data-key="839"><span data-slate-leaf="true" data-offset-key="839:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="840"><span data-slate-object="text" data-key="841"><span data-slate-leaf="true" data-offset-key="841:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="842"><span data-slate-leaf="true" data-offset-key="842:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">applyWebpackOptionsBaseDefaults</span></span></span></span><span data-slate-object="text" data-key="843"><span data-slate-leaf="true" data-offset-key="843:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="844"><span data-slate-leaf="true" data-offset-key="844:0" data-first-offset="true"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">options</span></span></span></span><span data-slate-object="text" data-key="845"><span data-slate-leaf="true" data-offset-key="845:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="846"><span data-slate-object="text" data-key="847"><span data-slate-leaf="true" data-offset-key="847:0" data-first-offset="true"><span data-slate-string="true">	// 根据当前工作目录创建编译实例</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="848"><span data-slate-object="text" data-key="849"><span data-slate-leaf="true" data-offset-key="849:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="850"><span data-slate-leaf="true" data-offset-key="850:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="851"><span data-slate-leaf="true" data-offset-key="851:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="852"><span data-slate-leaf="true" data-offset-key="852:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">compiler</span></span></span></span><span data-slate-object="text" data-key="853"><span data-slate-leaf="true" data-offset-key="853:0" data-first-offset="true"><span data-slate-string="true"> = </span></span></span><span data-slate-object="text" data-key="854"><span data-slate-leaf="true" data-offset-key="854:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="855"><span data-slate-leaf="true" data-offset-key="855:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="856"><span data-slate-leaf="true" data-offset-key="856:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">Compiler</span></span></span></span><span data-slate-object="text" data-key="857"><span data-slate-leaf="true" data-offset-key="857:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="858"><span data-slate-leaf="true" data-offset-key="858:0" data-first-offset="true"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">options.context</span></span></span></span><span data-slate-object="text" data-key="859"><span data-slate-leaf="true" data-offset-key="859:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="860"><span data-slate-object="text" data-key="861"><span data-slate-leaf="true" data-offset-key="861:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="862"><span data-slate-leaf="true" data-offset-key="862:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">compiler</span></span></span></span><span data-slate-object="text" data-key="863"><span data-slate-leaf="true" data-offset-key="863:0" data-first-offset="true"><span data-slate-string="true">.</span></span></span><span data-slate-object="text" data-key="864"><span data-slate-leaf="true" data-offset-key="864:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">options</span></span></span></span><span data-slate-object="text" data-key="865"><span data-slate-leaf="true" data-offset-key="865:0" data-first-offset="true"><span data-slate-string="true"> = </span></span></span><span data-slate-object="text" data-key="866"><span data-slate-leaf="true" data-offset-key="866:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">options</span></span></span></span><span data-slate-object="text" data-key="867"><span data-slate-leaf="true" data-offset-key="867:0" data-first-offset="true"><span data-slate-string="true">;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="868"><span data-slate-object="text" data-key="869"><span data-slate-leaf="true" data-offset-key="869:0" data-first-offset="true"><span data-slate-string="true">	/**</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="870"><span data-slate-object="text" data-key="871"><span data-slate-leaf="true" data-offset-key="871:0" data-first-offset="true"><span data-slate-string="true">	 * </span></span></span><span data-slate-object="text" data-key="872"><span data-slate-leaf="true" data-offset-key="872:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">NodeEnvironmentPlugin</span></span></span></span><span data-slate-object="text" data-key="873"><span data-slate-leaf="true" data-offset-key="873:0" data-first-offset="true"><span data-slate-string="true">：</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="874"><span data-slate-object="text" data-key="875"><span data-slate-leaf="true" data-offset-key="875:0" data-first-offset="true"><span data-slate-string="true">   * 往</span></span></span><span data-slate-object="text" data-key="876"><span data-slate-leaf="true" data-offset-key="876:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">compiler</span></span></span></span><span data-slate-object="text" data-key="877"><span data-slate-leaf="true" data-offset-key="877:0" data-first-offset="true"><span data-slate-string="true">挂载:可以缓存的输入文件系统|输出文件系统|监视文件系统；</span></span></span><span data-slate-object="text" data-key="878"><span data-slate-leaf="true" data-offset-key="878:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">infrastructureLogger</span></span></span></span><span data-slate-object="text" data-key="879"><span data-slate-leaf="true" data-offset-key="879:0" data-first-offset="true"><span data-slate-string="true">日志</span></span></span><span data-slate-object="text" data-key="880"><span data-slate-leaf="true" data-offset-key="880:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">logger</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="881"><span data-slate-object="text" data-key="882"><span data-slate-leaf="true" data-offset-key="882:0" data-first-offset="true"><span data-slate-string="true">	 * 目的：为打包输出文件准备</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="883"><span data-slate-object="text" data-key="884"><span data-slate-leaf="true" data-offset-key="884:0" data-first-offset="true"><span data-slate-string="true">	 */</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="885"><span data-slate-object="text" data-key="886"><span data-slate-leaf="true" data-offset-key="886:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="887"><span data-slate-leaf="true" data-offset-key="887:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="888"><span data-slate-leaf="true" data-offset-key="888:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="889"><span data-slate-leaf="true" data-offset-key="889:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">NodeEnvironmentPlugin</span></span></span></span><span data-slate-object="text" data-key="890"><span data-slate-leaf="true" data-offset-key="890:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="891"><span data-slate-leaf="true" data-offset-key="891:0" data-first-offset="true"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">{</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="892"><span data-slate-object="text" data-key="893"><span data-slate-leaf="true" data-offset-key="893:0" data-first-offset="true"><span data-slate-string="true">		infrastructureLogging: options.infrastructureLogging</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="894"><span data-slate-object="text" data-key="895"><span data-slate-leaf="true" data-offset-key="895:0" data-first-offset="true"><span data-slate-string="true">	}).</span></span></span><span data-slate-object="text" data-key="896"><span data-slate-leaf="true" data-offset-key="896:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">apply</span></span></span></span><span data-slate-object="text" data-key="897"><span data-slate-leaf="true" data-offset-key="897:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="898"><span data-slate-leaf="true" data-offset-key="898:0" data-first-offset="true"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">compiler</span></span></span></span><span data-slate-object="text" data-key="899"><span data-slate-leaf="true" data-offset-key="899:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="900"><span data-slate-object="text" data-key="901"><span data-slate-leaf="true" data-offset-key="901:0" data-first-offset="true"><span data-slate-string="true">	// 执行在配置文件配置的所有插件</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="902"><span data-slate-object="text" data-key="903"><span data-slate-leaf="true" data-offset-key="903:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="904"><span data-slate-leaf="true" data-offset-key="904:0" data-first-offset="true"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="905"><span data-slate-leaf="true" data-offset-key="905:0" data-first-offset="true"><span data-slate-string="true"> (</span></span></span><span data-slate-object="text" data-key="906"><span data-slate-leaf="true" data-offset-key="906:0" data-first-offset="true"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">Array.isArray(options.plugins</span></span></span></span><span data-slate-object="text" data-key="907"><span data-slate-leaf="true" data-offset-key="907:0" data-first-offset="true"><span data-slate-string="true">)) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="908"><span data-slate-object="text" data-key="909"><span data-slate-leaf="true" data-offset-key="909:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="910"><span data-slate-leaf="true" data-offset-key="910:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">for</span></span></span></span><span data-slate-object="text" data-key="911"><span data-slate-leaf="true" data-offset-key="911:0" data-first-offset="true"><span data-slate-string="true"> (</span></span></span><span data-slate-object="text" data-key="912"><span data-slate-leaf="true" data-offset-key="912:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="913"><span data-slate-leaf="true" data-offset-key="913:0" data-first-offset="true"><span data-slate-string="true"> plugin </span></span></span><span data-slate-object="text" data-key="914"><span data-slate-leaf="true" data-offset-key="914:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">of</span></span></span></span><span data-slate-object="text" data-key="915"><span data-slate-leaf="true" data-offset-key="915:0" data-first-offset="true"><span data-slate-string="true"> options.plugins) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="916"><span data-slate-object="text" data-key="917"><span data-slate-leaf="true" data-offset-key="917:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="918"><span data-slate-leaf="true" data-offset-key="918:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="919"><span data-slate-leaf="true" data-offset-key="919:0" data-first-offset="true"><span data-slate-string="true"> (</span></span></span><span data-slate-object="text" data-key="920"><span data-slate-leaf="true" data-offset-key="920:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">typeof</span></span></span></span><span data-slate-object="text" data-key="921"><span data-slate-leaf="true" data-offset-key="921:0" data-first-offset="true"><span data-slate-string="true"> plugin === </span></span></span><span data-slate-object="text" data-key="922"><span data-slate-leaf="true" data-offset-key="922:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"function"</span></span></span></span><span data-slate-object="text" data-key="923"><span data-slate-leaf="true" data-offset-key="923:0" data-first-offset="true"><span data-slate-string="true">) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="924"><span data-slate-object="text" data-key="925"><span data-slate-leaf="true" data-offset-key="925:0" data-first-offset="true"><span data-slate-string="true">				plugin.call(compiler, compiler);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="926"><span data-slate-object="text" data-key="927"><span data-slate-leaf="true" data-offset-key="927:0" data-first-offset="true"><span data-slate-string="true">			} </span></span></span><span data-slate-object="text" data-key="928"><span data-slate-leaf="true" data-offset-key="928:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">else</span></span></span></span><span data-slate-object="text" data-key="929"><span data-slate-leaf="true" data-offset-key="929:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="930"><span data-slate-object="text" data-key="931"><span data-slate-leaf="true" data-offset-key="931:0" data-first-offset="true"><span data-slate-string="true">				plugin.apply(compiler);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="932"><span data-slate-object="text" data-key="933"><span data-slate-leaf="true" data-offset-key="933:0" data-first-offset="true"><span data-slate-string="true">			}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="934"><span data-slate-object="text" data-key="935"><span data-slate-leaf="true" data-offset-key="935:0" data-first-offset="true"><span data-slate-string="true">		}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="936"><span data-slate-object="text" data-key="937"><span data-slate-leaf="true" data-offset-key="937:0" data-first-offset="true"><span data-slate-string="true">	}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="938"><span data-slate-object="text" data-key="939"><span data-slate-leaf="true" data-offset-key="939:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="940"><span data-slate-leaf="true" data-offset-key="940:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/**</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="941"><span data-slate-object="text" data-key="942"><span data-slate-leaf="true" data-offset-key="942:0" data-first-offset="true"><span data-slate-string="true">	 * 应用webpack配置项默认值</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="943"><span data-slate-object="text" data-key="944"><span data-slate-leaf="true" data-offset-key="944:0" data-first-offset="true"><span data-slate-string="true">	 * module|output|loader|performance|optimization...</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="945"><span data-slate-object="text" data-key="946"><span data-slate-leaf="true" data-offset-key="946:0" data-first-offset="true"><span data-slate-string="true">	 * */ </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="947"><span data-slate-object="text" data-key="948"><span data-slate-leaf="true" data-offset-key="948:0" data-first-offset="true"><span data-slate-string="true">	applyWebpackOptionsDefaults(options);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="949"><span data-slate-object="text" data-key="950"><span data-slate-leaf="true" data-offset-key="950:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="951"><span data-slate-leaf="true" data-offset-key="951:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 环境准备之后，执行插件（插件通过Hook tap监听事件）</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="952"><span data-slate-object="text" data-key="953"><span data-slate-leaf="true" data-offset-key="953:0" data-first-offset="true"><span data-slate-string="true">	compiler.hooks.environment.call();</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="954"><span data-slate-object="text" data-key="955"><span data-slate-leaf="true" data-offset-key="955:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="956"><span data-slate-leaf="true" data-offset-key="956:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 环境安装完成之后，执行插件</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="957"><span data-slate-object="text" data-key="958"><span data-slate-leaf="true" data-offset-key="958:0" data-first-offset="true"><span data-slate-string="true">	compiler.hooks.afterEnvironment.call();</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="959"><span data-slate-object="text" data-key="960"><span data-slate-leaf="true" data-offset-key="960:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="961"><span data-slate-leaf="true" data-offset-key="961:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/**</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="962"><span data-slate-object="text" data-key="963"><span data-slate-leaf="true" data-offset-key="963:0" data-first-offset="true"><span data-slate-string="true">   * WebpackOptionsApply：开启默认的所有插件</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="964"><span data-slate-object="text" data-key="965"><span data-slate-leaf="true" data-offset-key="965:0" data-first-offset="true"><span data-slate-string="true">	 * plugin事件流总线:根据options选项的配置，设置compile的相应插件</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="966"><span data-slate-object="text" data-key="967"><span data-slate-leaf="true" data-offset-key="967:0" data-first-offset="true"><span data-slate-string="true">	 * 使用插件:require('Plugin'), new Plugin().applay(compiler)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="968"><span data-slate-object="text" data-key="969"><span data-slate-leaf="true" data-offset-key="969:0" data-first-offset="true"><span data-slate-string="true">	 */</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="970"><span data-slate-object="text" data-key="971"><span data-slate-leaf="true" data-offset-key="971:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="972"><span data-slate-leaf="true" data-offset-key="972:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="973"><span data-slate-leaf="true" data-offset-key="973:0" data-first-offset="true"><span data-slate-string="true"> WebpackOptionsApply().process(options, compiler);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="974"><span data-slate-object="text" data-key="975"><span data-slate-leaf="true" data-offset-key="975:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="976"><span data-slate-leaf="true" data-offset-key="976:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 执行初始化钩子函数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="977"><span data-slate-object="text" data-key="978"><span data-slate-leaf="true" data-offset-key="978:0" data-first-offset="true"><span data-slate-string="true">	compiler.hooks.initialize.call();</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="979"><span data-slate-object="text" data-key="980"><span data-slate-leaf="true" data-offset-key="980:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="981"><span data-slate-leaf="true" data-offset-key="981:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="982"><span data-slate-leaf="true" data-offset-key="982:0" data-first-offset="true"><span data-slate-string="true"> compiler;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="983"><span data-slate-object="text" data-key="984"><span data-slate-leaf="true" data-offset-key="984:0" data-first-offset="true"><span data-slate-string="true">};</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="985"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="986"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="987"><span data-slate-object="text" data-key="988"><span data-slate-leaf="true" data-offset-key="988:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="989"><span data-slate-leaf="true" data-offset-key="989:0" data-first-offset="true"><span data-slate-string="true"> webpack = </span></span></span><span data-slate-object="text" data-key="990"><span data-slate-leaf="true" data-offset-key="990:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">(</span></span></span></span><span data-slate-object="text" data-key="991"><span data-slate-leaf="true" data-offset-key="991:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">options,callback</span></span></span></span></span><span data-slate-object="text" data-key="992"><span data-slate-leaf="true" data-offset-key="992:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">)=&gt;</span></span></span></span><span data-slate-object="text" data-key="993"><span data-slate-leaf="true" data-offset-key="993:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="994"><span data-slate-object="text" data-key="995"><span data-slate-leaf="true" data-offset-key="995:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="996"><span data-slate-leaf="true" data-offset-key="996:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="997"><span data-slate-leaf="true" data-offset-key="997:0" data-first-offset="true"><span data-slate-string="true"> create = </span></span></span><span data-slate-object="text" data-key="998"><span data-slate-leaf="true" data-offset-key="998:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">()</span></span></span></span></span><span data-slate-object="text" data-key="999"><span data-slate-leaf="true" data-offset-key="999:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">=&gt;</span></span></span></span><span data-slate-object="text" data-key="1000"><span data-slate-leaf="true" data-offset-key="1000:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1001"><span data-slate-object="text" data-key="1002"><span data-slate-leaf="true" data-offset-key="1002:0" data-first-offset="true"><span data-slate-string="true">  	</span></span></span><span data-slate-object="text" data-key="1003"><span data-slate-leaf="true" data-offset-key="1003:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 验证配置项参数是否正确</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1004"><span data-slate-object="text" data-key="1005"><span data-slate-leaf="true" data-offset-key="1005:0" data-first-offset="true"><span data-slate-string="true">		validateSchema(webpackOptionsSchema, options);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1006"><span data-slate-object="text" data-key="1007"><span data-slate-leaf="true" data-offset-key="1007:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="1008"><span data-slate-leaf="true" data-offset-key="1008:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">let</span></span></span></span><span data-slate-object="text" data-key="1009"><span data-slate-leaf="true" data-offset-key="1009:0" data-first-offset="true"><span data-slate-string="true"> compiler;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1010"><span data-slate-object="text" data-key="1011"><span data-slate-leaf="true" data-offset-key="1011:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1012"><span data-slate-leaf="true" data-offset-key="1012:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">let</span></span></span></span><span data-slate-object="text" data-key="1013"><span data-slate-leaf="true" data-offset-key="1013:0" data-first-offset="true"><span data-slate-string="true"> watch = </span></span></span><span data-slate-object="text" data-key="1014"><span data-slate-leaf="true" data-offset-key="1014:0" data-first-offset="true"><span class="hljs-literal" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">false</span></span></span></span><span data-slate-object="text" data-key="1015"><span data-slate-leaf="true" data-offset-key="1015:0" data-first-offset="true"><span data-slate-string="true">;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1016"><span data-slate-object="text" data-key="1017"><span data-slate-leaf="true" data-offset-key="1017:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1018"><span data-slate-leaf="true" data-offset-key="1018:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/** @type {WatchOptions|WatchOptions[]} */</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1019"><span data-slate-object="text" data-key="1020"><span data-slate-leaf="true" data-offset-key="1020:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1021"><span data-slate-leaf="true" data-offset-key="1021:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">let</span></span></span></span><span data-slate-object="text" data-key="1022"><span data-slate-leaf="true" data-offset-key="1022:0" data-first-offset="true"><span data-slate-string="true"> watchOptions;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1023"><span data-slate-object="text" data-key="1024"><span data-slate-leaf="true" data-offset-key="1024:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1025"><span data-slate-leaf="true" data-offset-key="1025:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="1026"><span data-slate-leaf="true" data-offset-key="1026:0" data-first-offset="true"><span data-slate-string="true"> (</span></span></span><span data-slate-object="text" data-key="1027"><span data-slate-leaf="true" data-offset-key="1027:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">Array</span></span></span></span><span data-slate-object="text" data-key="1028"><span data-slate-leaf="true" data-offset-key="1028:0" data-first-offset="true"><span data-slate-string="true">.isArray(options)) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1029"><span data-slate-object="text" data-key="1030"><span data-slate-leaf="true" data-offset-key="1030:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1031"><span data-slate-leaf="true" data-offset-key="1031:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/** </span></span></span></span><span data-slate-object="text" data-key="1032"><span data-slate-leaf="true" data-offset-key="1032:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-doctag" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">@type </span></span></span></span></span><span data-slate-object="text" data-key="1033"><span data-slate-leaf="true" data-offset-key="1033:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-doctag" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-type" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">{MultiCompiler}</span></span></span></span></span></span><span data-slate-object="text" data-key="1034"><span data-slate-leaf="true" data-offset-key="1034:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-doctag" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span></span><span data-slate-object="text" data-key="1035"><span data-slate-leaf="true" data-offset-key="1035:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">*/</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1036"><span data-slate-object="text" data-key="1037"><span data-slate-leaf="true" data-offset-key="1037:0" data-first-offset="true"><span data-slate-string="true">			compiler = createMultiCompiler(options);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1038"><span data-slate-object="text" data-key="1039"><span data-slate-leaf="true" data-offset-key="1039:0" data-first-offset="true"><span data-slate-string="true">			watch = options.some(</span></span></span><span data-slate-object="text" data-key="1040"><span data-slate-leaf="true" data-offset-key="1040:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">options</span></span></span></span></span><span data-slate-object="text" data-key="1041"><span data-slate-leaf="true" data-offset-key="1041:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> =&gt;</span></span></span></span><span data-slate-object="text" data-key="1042"><span data-slate-leaf="true" data-offset-key="1042:0" data-first-offset="true"><span data-slate-string="true"> options.watch);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1043"><span data-slate-object="text" data-key="1044"><span data-slate-leaf="true" data-offset-key="1044:0" data-first-offset="true"><span data-slate-string="true">			watchOptions = options.map(</span></span></span><span data-slate-object="text" data-key="1045"><span data-slate-leaf="true" data-offset-key="1045:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">options</span></span></span></span></span><span data-slate-object="text" data-key="1046"><span data-slate-leaf="true" data-offset-key="1046:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> =&gt;</span></span></span></span><span data-slate-object="text" data-key="1047"><span data-slate-leaf="true" data-offset-key="1047:0" data-first-offset="true"><span data-slate-string="true"> options.watchOptions || {});</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1048"><span data-slate-object="text" data-key="1049"><span data-slate-leaf="true" data-offset-key="1049:0" data-first-offset="true"><span data-slate-string="true">		} </span></span></span><span data-slate-object="text" data-key="1050"><span data-slate-leaf="true" data-offset-key="1050:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">else</span></span></span></span><span data-slate-object="text" data-key="1051"><span data-slate-leaf="true" data-offset-key="1051:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1052"><span data-slate-object="text" data-key="1053"><span data-slate-leaf="true" data-offset-key="1053:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1054"><span data-slate-leaf="true" data-offset-key="1054:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/** </span></span></span></span><span data-slate-object="text" data-key="1055"><span data-slate-leaf="true" data-offset-key="1055:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-doctag" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">@type </span></span></span></span></span><span data-slate-object="text" data-key="1056"><span data-slate-leaf="true" data-offset-key="1056:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-doctag" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-type" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">{Compiler}</span></span></span></span></span></span><span data-slate-object="text" data-key="1057"><span data-slate-leaf="true" data-offset-key="1057:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-doctag" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span></span><span data-slate-object="text" data-key="1058"><span data-slate-leaf="true" data-offset-key="1058:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">*/</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1059"><span data-slate-object="text" data-key="1060"><span data-slate-leaf="true" data-offset-key="1060:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1061"><span data-slate-leaf="true" data-offset-key="1061:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 介绍的重点创建创建compiler</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1062"><span data-slate-object="text" data-key="1063"><span data-slate-leaf="true" data-offset-key="1063:0" data-first-offset="true"><span data-slate-string="true">			compiler = createCompiler(options);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1064"><span data-slate-object="text" data-key="1065"><span data-slate-leaf="true" data-offset-key="1065:0" data-first-offset="true"><span data-slate-string="true">			watch = options.watch;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1066"><span data-slate-object="text" data-key="1067"><span data-slate-leaf="true" data-offset-key="1067:0" data-first-offset="true"><span data-slate-string="true">			watchOptions = options.watchOptions || {};</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1068"><span data-slate-object="text" data-key="1069"><span data-slate-leaf="true" data-offset-key="1069:0" data-first-offset="true"><span data-slate-string="true">		}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1070"><span data-slate-object="text" data-key="1071"><span data-slate-leaf="true" data-offset-key="1071:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1072"><span data-slate-leaf="true" data-offset-key="1072:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="1073"><span data-slate-leaf="true" data-offset-key="1073:0" data-first-offset="true"><span data-slate-string="true"> { compiler, watch, watchOptions };</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1074"><span data-slate-object="text" data-key="1075"><span data-slate-leaf="true" data-offset-key="1075:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1076"><span data-slate-object="text" data-key="1077"><span data-slate-leaf="true" data-offset-key="1077:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1078"><span data-slate-object="text" data-key="1079"><span data-slate-leaf="true" data-offset-key="1079:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="1080"><span data-slate-leaf="true" data-offset-key="1080:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="1081"><span data-slate-leaf="true" data-offset-key="1081:0" data-first-offset="true"><span data-slate-string="true">(callback){</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1082"><span data-slate-object="text" data-key="1083"><span data-slate-leaf="true" data-offset-key="1083:0" data-first-offset="true"><span data-slate-string="true">    ...</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1084"><span data-slate-object="text" data-key="1085"><span data-slate-leaf="true" data-offset-key="1085:0" data-first-offset="true"><span data-slate-string="true">		const { compiler, watch, watchOptions } = create();</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1086"><span data-slate-object="text" data-key="1087"><span data-slate-leaf="true" data-offset-key="1087:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1088"><span data-slate-leaf="true" data-offset-key="1088:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="1089"><span data-slate-leaf="true" data-offset-key="1089:0" data-first-offset="true"><span data-slate-string="true"> (watch) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1090"><span data-slate-object="text" data-key="1091"><span data-slate-leaf="true" data-offset-key="1091:0" data-first-offset="true"><span data-slate-string="true">			compiler.watch(watchOptions, callback);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1092"><span data-slate-object="text" data-key="1093"><span data-slate-leaf="true" data-offset-key="1093:0" data-first-offset="true"><span data-slate-string="true">		} </span></span></span><span data-slate-object="text" data-key="1094"><span data-slate-leaf="true" data-offset-key="1094:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">else</span></span></span></span><span data-slate-object="text" data-key="1095"><span data-slate-leaf="true" data-offset-key="1095:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1096"><span data-slate-object="text" data-key="1097"><span data-slate-leaf="true" data-offset-key="1097:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1098"><span data-slate-leaf="true" data-offset-key="1098:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 开始编译</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1099"><span data-slate-object="text" data-key="1100"><span data-slate-leaf="true" data-offset-key="1100:0" data-first-offset="true"><span data-slate-string="true">			compiler.run(</span></span></span><span data-slate-object="text" data-key="1101"><span data-slate-leaf="true" data-offset-key="1101:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">(</span></span></span></span><span data-slate-object="text" data-key="1102"><span data-slate-leaf="true" data-offset-key="1102:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">err, stats</span></span></span></span></span><span data-slate-object="text" data-key="1103"><span data-slate-leaf="true" data-offset-key="1103:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">) =&gt;</span></span></span></span><span data-slate-object="text" data-key="1104"><span data-slate-leaf="true" data-offset-key="1104:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1105"><span data-slate-object="text" data-key="1106"><span data-slate-leaf="true" data-offset-key="1106:0" data-first-offset="true"><span data-slate-string="true">				compiler.close(</span></span></span><span data-slate-object="text" data-key="1107"><span data-slate-leaf="true" data-offset-key="1107:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">err2</span></span></span></span></span><span data-slate-object="text" data-key="1108"><span data-slate-leaf="true" data-offset-key="1108:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> =&gt;</span></span></span></span><span data-slate-object="text" data-key="1109"><span data-slate-leaf="true" data-offset-key="1109:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1110"><span data-slate-object="text" data-key="1111"><span data-slate-leaf="true" data-offset-key="1111:0" data-first-offset="true"><span data-slate-string="true">					callback(err || err2, stats);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1112"><span data-slate-object="text" data-key="1113"><span data-slate-leaf="true" data-offset-key="1113:0" data-first-offset="true"><span data-slate-string="true">				});</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1114"><span data-slate-object="text" data-key="1115"><span data-slate-leaf="true" data-offset-key="1115:0" data-first-offset="true"><span data-slate-string="true">			});</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1116"><span data-slate-object="text" data-key="1117"><span data-slate-leaf="true" data-offset-key="1117:0" data-first-offset="true"><span data-slate-string="true">		}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1118"><span data-slate-object="text" data-key="1119"><span data-slate-leaf="true" data-offset-key="1119:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1120"><span data-slate-leaf="true" data-offset-key="1120:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="1121"><span data-slate-leaf="true" data-offset-key="1121:0" data-first-offset="true"><span data-slate-string="true"> compiler;  	</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1122"><span data-slate-object="text" data-key="1123"><span data-slate-leaf="true" data-offset-key="1123:0" data-first-offset="true"><span data-slate-string="true">    ...</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1124"><span data-slate-object="text" data-key="1125"><span data-slate-leaf="true" data-offset-key="1125:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1126"><span data-slate-object="text" data-key="1127"><span data-slate-leaf="true" data-offset-key="1127:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1128"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1129"><span data-slate-object="text" data-key="1130"><span data-slate-leaf="true" data-offset-key="1130:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">module</span></span></span></span><span data-slate-object="text" data-key="1131"><span data-slate-leaf="true" data-offset-key="1131:0" data-first-offset="true"><span data-slate-string="true">.exports = webpack;</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 1850px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><h5 data-id-heading11="" data-slate-type="pm_heading" data-slate-object="block" data-key="1132"><span data-slate-object="text" data-key="1133"><span data-slate-leaf="true" data-offset-key="1133:0" data-first-offset="true"><span data-slate-string="true">2、WebpackOptionsApply</span></span></span></h5><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="1134"><span data-slate-object="text" data-key="1135"><span data-slate-leaf="true" data-offset-key="1135:0" data-first-offset="true"><span data-slate-string="true">将所有的配置options参数转换成webpack内部插件，使用默认插件列表，如：</span></span></span></p><div data-lang="text" data-slate-type="pm_blockcode" data-slate-object="block" data-key="1136"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="text" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1137"><span data-slate-object="text" data-key="1138"><span data-slate-leaf="true" data-offset-key="1138:0" data-first-offset="true"><span data-slate-string="true">output.library -&gt; LibraryTemplatePlugin</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1139"><span data-slate-object="text" data-key="1140"><span data-slate-leaf="true" data-offset-key="1140:0" data-first-offset="true"><span data-slate-string="true">externals -&gt; ExternalsPlugin</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1141"><span data-slate-object="text" data-key="1142"><span data-slate-leaf="true" data-offset-key="1142:0" data-first-offset="true"><span data-slate-string="true">devtool -&gt; EvalDevtoolModulePlugin,SourceMapDevToolPlugin</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1143"><span data-slate-object="text" data-key="1144"><span data-slate-leaf="true" data-offset-key="1144:0" data-first-offset="true"><span data-slate-string="true">AMDPLUGIN,CommonJSPlugin</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 90px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="1145"><span data-slate-object="text" data-key="1146"><span data-slate-leaf="true" data-offset-key="1146:0" data-first-offset="true"><span data-slate-string="true">相关代码如下：</span></span></span></p><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="1147"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div><div data-class-line="" data-line-number="9"></div><div data-class-line="" data-line-number="10"></div><div data-class-line="" data-line-number="11"></div><div data-class-line="" data-line-number="12"></div><div data-class-line="" data-line-number="13"></div><div data-class-line="" data-line-number="14"></div><div data-class-line="" data-line-number="15"></div><div data-class-line="" data-line-number="16"></div><div data-class-line="" data-line-number="17"></div><div data-class-line="" data-line-number="18"></div><div data-class-line="" data-line-number="19"></div><div data-class-line="" data-line-number="20"></div><div data-class-line="" data-line-number="21"></div><div data-class-line="" data-line-number="22"></div><div data-class-line="" data-line-number="23"></div><div data-class-line="" data-line-number="24"></div><div data-class-line="" data-line-number="25"></div><div data-class-line="" data-line-number="26"></div><div data-class-line="" data-line-number="27"></div><div data-class-line="" data-line-number="28"></div><div data-class-line="" data-line-number="29"></div><div data-class-line="" data-line-number="30"></div><div data-class-line="" data-line-number="31"></div><div data-class-line="" data-line-number="32"></div><div data-class-line="" data-line-number="33"></div><div data-class-line="" data-line-number="34"></div><div data-class-line="" data-line-number="35"></div><div data-class-line="" data-line-number="36"></div><div data-class-line="" data-line-number="37"></div><div data-class-line="" data-line-number="38"></div><div data-class-line="" data-line-number="39"></div><div data-class-line="" data-line-number="40"></div><div data-class-line="" data-line-number="41"></div><div data-class-line="" data-line-number="42"></div><div data-class-line="" data-line-number="43"></div><div data-class-line="" data-line-number="44"></div><div data-class-line="" data-line-number="45"></div><div data-class-line="" data-line-number="46"></div><div data-class-line="" data-line-number="47"></div><div data-class-line="" data-line-number="48"></div><div data-class-line="" data-line-number="49"></div><div data-class-line="" data-line-number="50"></div><div data-class-line="" data-line-number="51"></div><div data-class-line="" data-line-number="52"></div><div data-class-line="" data-line-number="53"></div><div data-class-line="" data-line-number="54"></div><div data-class-line="" data-line-number="55"></div><div data-class-line="" data-line-number="56"></div><div data-class-line="" data-line-number="57"></div><div data-class-line="" data-line-number="58"></div><div data-class-line="" data-line-number="59"></div><div data-class-line="" data-line-number="60"></div><div data-class-line="" data-line-number="61"></div><div data-class-line="" data-line-number="62"></div><div data-class-line="" data-line-number="63"></div><div data-class-line="" data-line-number="64"></div><div data-class-line="" data-line-number="65"></div><div data-class-line="" data-line-number="66"></div><div data-class-line="" data-line-number="67"></div><div data-class-line="" data-line-number="68"></div><div data-class-line="" data-line-number="69"></div><div data-class-line="" data-line-number="70"></div><div data-class-line="" data-line-number="71"></div><div data-class-line="" data-line-number="72"></div><div data-class-line="" data-line-number="73"></div><div data-class-line="" data-line-number="74"></div><div data-class-line="" data-line-number="75"></div><div data-class-line="" data-line-number="76"></div><div data-class-line="" data-line-number="77"></div><div data-class-line="" data-line-number="78"></div><div data-class-line="" data-line-number="79"></div><div data-class-line="" data-line-number="80"></div><div data-class-line="" data-line-number="81"></div><div data-class-line="" data-line-number="82"></div><div data-class-line="" data-line-number="83"></div><div data-class-line="" data-line-number="84"></div><div data-class-line="" data-line-number="85"></div><div data-class-line="" data-line-number="86"></div><div data-class-line="" data-line-number="87"></div><div data-class-line="" data-line-number="88"></div><div data-class-line="" data-line-number="89"></div><div data-class-line="" data-line-number="90"></div><div data-class-line="" data-line-number="91"></div><div data-class-line="" data-line-number="92"></div><div data-class-line="" data-line-number="93"></div><div data-class-line="" data-line-number="94"></div><div data-class-line="" data-line-number="95"></div><div data-class-line="" data-line-number="96"></div><div data-class-line="" data-line-number="97"></div><div data-class-line="" data-line-number="98"></div><div data-class-line="" data-line-number="99"></div><div data-class-line="" data-line-number="100"></div><div data-class-line="" data-line-number="101"></div><div data-class-line="" data-line-number="102"></div><div data-class-line="" data-line-number="103"></div><div data-class-line="" data-line-number="104"></div><div data-class-line="" data-line-number="105"></div><div data-class-line="" data-line-number="106"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: scroll hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1148"><span data-slate-object="text" data-key="1149"><span data-slate-leaf="true" data-offset-key="1149:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/*</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1150"><span data-slate-object="text" data-key="1151"><span data-slate-leaf="true" data-offset-key="1151:0" data-first-offset="true"><span data-slate-string="true"> * 这里只介绍下入口文件插件的注册使用</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1152"><span data-slate-object="text" data-key="1153"><span data-slate-leaf="true" data-offset-key="1153:0" data-first-offset="true"><span data-slate-string="true"> */</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1154"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1155"><span data-slate-object="text" data-key="1156"><span data-slate-leaf="true" data-offset-key="1156:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">//WebpackOptionsApply.js</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1157"><span data-slate-object="text" data-key="1158"><span data-slate-leaf="true" data-offset-key="1158:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">class</span></span></span></span></span><span data-slate-object="text" data-key="1159"><span data-slate-leaf="true" data-offset-key="1159:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="1160"><span data-slate-leaf="true" data-offset-key="1160:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">WebpackOptionsApply</span></span></span></span></span><span data-slate-object="text" data-key="1161"><span data-slate-leaf="true" data-offset-key="1161:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="1162"><span data-slate-leaf="true" data-offset-key="1162:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">extends</span></span></span></span></span><span data-slate-object="text" data-key="1163"><span data-slate-leaf="true" data-offset-key="1163:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="1164"><span data-slate-leaf="true" data-offset-key="1164:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">OptionsApply</span></span></span></span></span><span data-slate-object="text" data-key="1165"><span data-slate-leaf="true" data-offset-key="1165:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1166"><span data-slate-object="text" data-key="1167"><span data-slate-leaf="true" data-offset-key="1167:0" data-first-offset="true"><span data-slate-string="true">  ...</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1168"><span data-slate-object="text" data-key="1169"><span data-slate-leaf="true" data-offset-key="1169:0" data-first-offset="true"><span data-slate-string="true">	process(options, compiler){</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1170"><span data-slate-object="text" data-key="1171"><span data-slate-leaf="true" data-offset-key="1171:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="1172"><span data-slate-leaf="true" data-offset-key="1172:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 入口文件插件注册</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1173"><span data-slate-object="text" data-key="1174"><span data-slate-leaf="true" data-offset-key="1174:0" data-first-offset="true"><span data-slate-string="true">  	</span></span></span><span data-slate-object="text" data-key="1175"><span data-slate-leaf="true" data-offset-key="1175:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="1176"><span data-slate-leaf="true" data-offset-key="1176:0" data-first-offset="true"><span data-slate-string="true"> EntryOptionPlugin().apply(compiler);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1177"><span data-slate-object="text" data-key="1178"><span data-slate-leaf="true" data-offset-key="1178:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="1179"><span data-slate-leaf="true" data-offset-key="1179:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 调用入口文件插件注册的钩子函数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1180"><span data-slate-object="text" data-key="1181"><span data-slate-leaf="true" data-offset-key="1181:0" data-first-offset="true"><span data-slate-string="true">		compiler.hooks.entryOption.call(options.context, options.entry);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1182"><span data-slate-object="text" data-key="1183"><span data-slate-leaf="true" data-offset-key="1183:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1184"><span data-slate-object="text" data-key="1185"><span data-slate-leaf="true" data-offset-key="1185:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1186"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1187"><span data-slate-object="text" data-key="1188"><span data-slate-leaf="true" data-offset-key="1188:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// EntryOptionPlugin.js</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1189"><span data-slate-object="text" data-key="1190"><span data-slate-leaf="true" data-offset-key="1190:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">class</span></span></span></span></span><span data-slate-object="text" data-key="1191"><span data-slate-leaf="true" data-offset-key="1191:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="1192"><span data-slate-leaf="true" data-offset-key="1192:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">EntryOptionPlugin</span></span></span></span></span><span data-slate-object="text" data-key="1193"><span data-slate-leaf="true" data-offset-key="1193:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1194"><span data-slate-object="text" data-key="1195"><span data-slate-leaf="true" data-offset-key="1195:0" data-first-offset="true"><span data-slate-string="true">	apply(compiler){</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1196"><span data-slate-object="text" data-key="1197"><span data-slate-leaf="true" data-offset-key="1197:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="1198"><span data-slate-leaf="true" data-offset-key="1198:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 监听 entry 配置项处理完成的钩子函数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1199"><span data-slate-object="text" data-key="1200"><span data-slate-leaf="true" data-offset-key="1200:0" data-first-offset="true"><span data-slate-string="true">  	compiler.hooks.entryOption.tap(</span></span></span><span data-slate-object="text" data-key="1201"><span data-slate-leaf="true" data-offset-key="1201:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"EntryOptionPlugin"</span></span></span></span><span data-slate-object="text" data-key="1202"><span data-slate-leaf="true" data-offset-key="1202:0" data-first-offset="true"><span data-slate-string="true">,(context,entry)=&gt;{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1203"><span data-slate-object="text" data-key="1204"><span data-slate-leaf="true" data-offset-key="1204:0" data-first-offset="true"><span data-slate-string="true">    	EntryOptionPlugin.applyEntryOption(compiler, context, entry);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1205"><span data-slate-object="text" data-key="1206"><span data-slate-leaf="true" data-offset-key="1206:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1207"><span data-slate-leaf="true" data-offset-key="1207:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="1208"><span data-slate-leaf="true" data-offset-key="1208:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="1209"><span data-slate-leaf="true" data-offset-key="1209:0" data-first-offset="true"><span class="hljs-literal" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">true</span></span></span></span><span data-slate-object="text" data-key="1210"><span data-slate-leaf="true" data-offset-key="1210:0" data-first-offset="true"><span data-slate-string="true">;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1211"><span data-slate-object="text" data-key="1212"><span data-slate-leaf="true" data-offset-key="1212:0" data-first-offset="true"><span data-slate-string="true">    })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1213"><span data-slate-object="text" data-key="1214"><span data-slate-leaf="true" data-offset-key="1214:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1215"><span data-slate-object="text" data-key="1216"><span data-slate-leaf="true" data-offset-key="1216:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1217"><span data-slate-object="text" data-key="1218"><span data-slate-leaf="true" data-offset-key="1218:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="1219"><span data-slate-leaf="true" data-offset-key="1219:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">static</span></span></span></span><span data-slate-object="text" data-key="1220"><span data-slate-leaf="true" data-offset-key="1220:0" data-first-offset="true"><span data-slate-string="true"> applyEntryOption(compiler, context, entry) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1221"><span data-slate-object="text" data-key="1222"><span data-slate-leaf="true" data-offset-key="1222:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1223"><span data-slate-leaf="true" data-offset-key="1223:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="1224"><span data-slate-leaf="true" data-offset-key="1224:0" data-first-offset="true"><span data-slate-string="true"> (</span></span></span><span data-slate-object="text" data-key="1225"><span data-slate-leaf="true" data-offset-key="1225:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">typeof</span></span></span></span><span data-slate-object="text" data-key="1226"><span data-slate-leaf="true" data-offset-key="1226:0" data-first-offset="true"><span data-slate-string="true"> entry === </span></span></span><span data-slate-object="text" data-key="1227"><span data-slate-leaf="true" data-offset-key="1227:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"function"</span></span></span></span><span data-slate-object="text" data-key="1228"><span data-slate-leaf="true" data-offset-key="1228:0" data-first-offset="true"><span data-slate-string="true">) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1229"><span data-slate-object="text" data-key="1230"><span data-slate-leaf="true" data-offset-key="1230:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1231"><span data-slate-leaf="true" data-offset-key="1231:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// options的entry支持function类型:(entry:()=&gt;"src/index.js")</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1232"><span data-slate-object="text" data-key="1233"><span data-slate-leaf="true" data-offset-key="1233:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1234"><span data-slate-leaf="true" data-offset-key="1234:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1235"><span data-slate-leaf="true" data-offset-key="1235:0" data-first-offset="true"><span data-slate-string="true"> DynamicEntryPlugin = </span></span></span><span data-slate-object="text" data-key="1236"><span data-slate-leaf="true" data-offset-key="1236:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">require</span></span></span></span><span data-slate-object="text" data-key="1237"><span data-slate-leaf="true" data-offset-key="1237:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="1238"><span data-slate-leaf="true" data-offset-key="1238:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"./DynamicEntryPlugin"</span></span></span></span><span data-slate-object="text" data-key="1239"><span data-slate-leaf="true" data-offset-key="1239:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1240"><span data-slate-object="text" data-key="1241"><span data-slate-leaf="true" data-offset-key="1241:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1242"><span data-slate-leaf="true" data-offset-key="1242:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="1243"><span data-slate-leaf="true" data-offset-key="1243:0" data-first-offset="true"><span data-slate-string="true"> DynamicEntryPlugin(context, entry).apply(compiler);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1244"><span data-slate-object="text" data-key="1245"><span data-slate-leaf="true" data-offset-key="1245:0" data-first-offset="true"><span data-slate-string="true">		} </span></span></span><span data-slate-object="text" data-key="1246"><span data-slate-leaf="true" data-offset-key="1246:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">else</span></span></span></span><span data-slate-object="text" data-key="1247"><span data-slate-leaf="true" data-offset-key="1247:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1248"><span data-slate-object="text" data-key="1249"><span data-slate-leaf="true" data-offset-key="1249:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1250"><span data-slate-leaf="true" data-offset-key="1250:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// EntryPlugin：用于处理EntryDependency的创建</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1251"><span data-slate-object="text" data-key="1252"><span data-slate-leaf="true" data-offset-key="1252:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1253"><span data-slate-leaf="true" data-offset-key="1253:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1254"><span data-slate-leaf="true" data-offset-key="1254:0" data-first-offset="true"><span data-slate-string="true"> EntryPlugin = </span></span></span><span data-slate-object="text" data-key="1255"><span data-slate-leaf="true" data-offset-key="1255:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">require</span></span></span></span><span data-slate-object="text" data-key="1256"><span data-slate-leaf="true" data-offset-key="1256:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="1257"><span data-slate-leaf="true" data-offset-key="1257:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"./EntryPlugin"</span></span></span></span><span data-slate-object="text" data-key="1258"><span data-slate-leaf="true" data-offset-key="1258:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1259"><span data-slate-object="text" data-key="1260"><span data-slate-leaf="true" data-offset-key="1260:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1261"><span data-slate-leaf="true" data-offset-key="1261:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">for</span></span></span></span><span data-slate-object="text" data-key="1262"><span data-slate-leaf="true" data-offset-key="1262:0" data-first-offset="true"><span data-slate-string="true"> (</span></span></span><span data-slate-object="text" data-key="1263"><span data-slate-leaf="true" data-offset-key="1263:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1264"><span data-slate-leaf="true" data-offset-key="1264:0" data-first-offset="true"><span data-slate-string="true"> name </span></span></span><span data-slate-object="text" data-key="1265"><span data-slate-leaf="true" data-offset-key="1265:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">of</span></span></span></span><span data-slate-object="text" data-key="1266"><span data-slate-leaf="true" data-offset-key="1266:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="1267"><span data-slate-leaf="true" data-offset-key="1267:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">Object</span></span></span></span><span data-slate-object="text" data-key="1268"><span data-slate-leaf="true" data-offset-key="1268:0" data-first-offset="true"><span data-slate-string="true">.keys(entry)) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1269"><span data-slate-object="text" data-key="1270"><span data-slate-leaf="true" data-offset-key="1270:0" data-first-offset="true"><span data-slate-string="true">				</span></span></span><span data-slate-object="text" data-key="1271"><span data-slate-leaf="true" data-offset-key="1271:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1272"><span data-slate-leaf="true" data-offset-key="1272:0" data-first-offset="true"><span data-slate-string="true"> desc = entry[name];</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1273"><span data-slate-object="text" data-key="1274"><span data-slate-leaf="true" data-offset-key="1274:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="1275"><span data-slate-leaf="true" data-offset-key="1275:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 入口文件默认配置项处理</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1276"><span data-slate-object="text" data-key="1277"><span data-slate-leaf="true" data-offset-key="1277:0" data-first-offset="true"><span data-slate-string="true">				</span></span></span><span data-slate-object="text" data-key="1278"><span data-slate-leaf="true" data-offset-key="1278:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1279"><span data-slate-leaf="true" data-offset-key="1279:0" data-first-offset="true"><span data-slate-string="true"> options = EntryOptionPlugin.entryDescriptionToOptions(</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1280"><span data-slate-object="text" data-key="1281"><span data-slate-leaf="true" data-offset-key="1281:0" data-first-offset="true"><span data-slate-string="true">					compiler,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1282"><span data-slate-object="text" data-key="1283"><span data-slate-leaf="true" data-offset-key="1283:0" data-first-offset="true"><span data-slate-string="true">					name,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1284"><span data-slate-object="text" data-key="1285"><span data-slate-leaf="true" data-offset-key="1285:0" data-first-offset="true"><span data-slate-string="true">					desc</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1286"><span data-slate-object="text" data-key="1287"><span data-slate-leaf="true" data-offset-key="1287:0" data-first-offset="true"><span data-slate-string="true">				);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1288"><span data-slate-object="text" data-key="1289"><span data-slate-leaf="true" data-offset-key="1289:0" data-first-offset="true"><span data-slate-string="true">				</span></span></span><span data-slate-object="text" data-key="1290"><span data-slate-leaf="true" data-offset-key="1290:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">for</span></span></span></span><span data-slate-object="text" data-key="1291"><span data-slate-leaf="true" data-offset-key="1291:0" data-first-offset="true"><span data-slate-string="true"> (</span></span></span><span data-slate-object="text" data-key="1292"><span data-slate-leaf="true" data-offset-key="1292:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1293"><span data-slate-leaf="true" data-offset-key="1293:0" data-first-offset="true"><span data-slate-string="true"> entry </span></span></span><span data-slate-object="text" data-key="1294"><span data-slate-leaf="true" data-offset-key="1294:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">of</span></span></span></span><span data-slate-object="text" data-key="1295"><span data-slate-leaf="true" data-offset-key="1295:0" data-first-offset="true"><span data-slate-string="true"> desc.import) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1296"><span data-slate-object="text" data-key="1297"><span data-slate-leaf="true" data-offset-key="1297:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="1298"><span data-slate-leaf="true" data-offset-key="1298:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 调用入口插件</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1299"><span data-slate-object="text" data-key="1300"><span data-slate-leaf="true" data-offset-key="1300:0" data-first-offset="true"><span data-slate-string="true">					</span></span></span><span data-slate-object="text" data-key="1301"><span data-slate-leaf="true" data-offset-key="1301:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="1302"><span data-slate-leaf="true" data-offset-key="1302:0" data-first-offset="true"><span data-slate-string="true"> EntryPlugin(context, entry, options).apply(compiler);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1303"><span data-slate-object="text" data-key="1304"><span data-slate-leaf="true" data-offset-key="1304:0" data-first-offset="true"><span data-slate-string="true">				}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1305"><span data-slate-object="text" data-key="1306"><span data-slate-leaf="true" data-offset-key="1306:0" data-first-offset="true"><span data-slate-string="true">			}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1307"><span data-slate-object="text" data-key="1308"><span data-slate-leaf="true" data-offset-key="1308:0" data-first-offset="true"><span data-slate-string="true">		}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1309"><span data-slate-object="text" data-key="1310"><span data-slate-leaf="true" data-offset-key="1310:0" data-first-offset="true"><span data-slate-string="true">	}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1311"><span data-slate-object="text" data-key="1312"><span data-slate-leaf="true" data-offset-key="1312:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1313"><span data-slate-object="text" data-key="1314"><span data-slate-leaf="true" data-offset-key="1314:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="1315"><span data-slate-leaf="true" data-offset-key="1315:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">static</span></span></span></span><span data-slate-object="text" data-key="1316"><span data-slate-leaf="true" data-offset-key="1316:0" data-first-offset="true"><span data-slate-string="true"> entryDescriptionToOptions(compiler, name, desc) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1317"><span data-slate-object="text" data-key="1318"><span data-slate-leaf="true" data-offset-key="1318:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1319"><span data-slate-leaf="true" data-offset-key="1319:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/** </span></span></span></span><span data-slate-object="text" data-key="1320"><span data-slate-leaf="true" data-offset-key="1320:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-doctag" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">@type </span></span></span></span></span><span data-slate-object="text" data-key="1321"><span data-slate-leaf="true" data-offset-key="1321:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-doctag" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-type" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">{EntryOptions}</span></span></span></span></span></span><span data-slate-object="text" data-key="1322"><span data-slate-leaf="true" data-offset-key="1322:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-doctag" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span></span><span data-slate-object="text" data-key="1323"><span data-slate-leaf="true" data-offset-key="1323:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">*/</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1324"><span data-slate-object="text" data-key="1325"><span data-slate-leaf="true" data-offset-key="1325:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1326"><span data-slate-leaf="true" data-offset-key="1326:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1327"><span data-slate-leaf="true" data-offset-key="1327:0" data-first-offset="true"><span data-slate-string="true"> options = {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1328"><span data-slate-object="text" data-key="1329"><span data-slate-leaf="true" data-offset-key="1329:0" data-first-offset="true"><span data-slate-string="true">			name,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1330"><span data-slate-object="text" data-key="1331"><span data-slate-leaf="true" data-offset-key="1331:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1332"><span data-slate-leaf="true" data-offset-key="1332:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">filename</span></span></span></span><span data-slate-object="text" data-key="1333"><span data-slate-leaf="true" data-offset-key="1333:0" data-first-offset="true"><span data-slate-string="true">: desc.filename,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1334"><span data-slate-object="text" data-key="1335"><span data-slate-leaf="true" data-offset-key="1335:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1336"><span data-slate-leaf="true" data-offset-key="1336:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">runtime</span></span></span></span><span data-slate-object="text" data-key="1337"><span data-slate-leaf="true" data-offset-key="1337:0" data-first-offset="true"><span data-slate-string="true">: desc.runtime,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1338"><span data-slate-object="text" data-key="1339"><span data-slate-leaf="true" data-offset-key="1339:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1340"><span data-slate-leaf="true" data-offset-key="1340:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">dependOn</span></span></span></span><span data-slate-object="text" data-key="1341"><span data-slate-leaf="true" data-offset-key="1341:0" data-first-offset="true"><span data-slate-string="true">: desc.dependOn,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1342"><span data-slate-object="text" data-key="1343"><span data-slate-leaf="true" data-offset-key="1343:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1344"><span data-slate-leaf="true" data-offset-key="1344:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">chunkLoading</span></span></span></span><span data-slate-object="text" data-key="1345"><span data-slate-leaf="true" data-offset-key="1345:0" data-first-offset="true"><span data-slate-string="true">: desc.chunkLoading,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1346"><span data-slate-object="text" data-key="1347"><span data-slate-leaf="true" data-offset-key="1347:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1348"><span data-slate-leaf="true" data-offset-key="1348:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">wasmLoading</span></span></span></span><span data-slate-object="text" data-key="1349"><span data-slate-leaf="true" data-offset-key="1349:0" data-first-offset="true"><span data-slate-string="true">: desc.wasmLoading,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1350"><span data-slate-object="text" data-key="1351"><span data-slate-leaf="true" data-offset-key="1351:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1352"><span data-slate-leaf="true" data-offset-key="1352:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">library</span></span></span></span><span data-slate-object="text" data-key="1353"><span data-slate-leaf="true" data-offset-key="1353:0" data-first-offset="true"><span data-slate-string="true">: desc.library</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1354"><span data-slate-object="text" data-key="1355"><span data-slate-leaf="true" data-offset-key="1355:0" data-first-offset="true"><span data-slate-string="true">		};</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1356"><span data-slate-object="text" data-key="1357"><span data-slate-leaf="true" data-offset-key="1357:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1358"><span data-slate-leaf="true" data-offset-key="1358:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="1359"><span data-slate-leaf="true" data-offset-key="1359:0" data-first-offset="true"><span data-slate-string="true"> (desc.chunkLoading) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1360"><span data-slate-object="text" data-key="1361"><span data-slate-leaf="true" data-offset-key="1361:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1362"><span data-slate-leaf="true" data-offset-key="1362:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1363"><span data-slate-leaf="true" data-offset-key="1363:0" data-first-offset="true"><span data-slate-string="true"> EnableChunkLoadingPlugin = </span></span></span><span data-slate-object="text" data-key="1364"><span data-slate-leaf="true" data-offset-key="1364:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">require</span></span></span></span><span data-slate-object="text" data-key="1365"><span data-slate-leaf="true" data-offset-key="1365:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="1366"><span data-slate-leaf="true" data-offset-key="1366:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"./javascript/EnableChunkLoadingPlugin"</span></span></span></span><span data-slate-object="text" data-key="1367"><span data-slate-leaf="true" data-offset-key="1367:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1368"><span data-slate-object="text" data-key="1369"><span data-slate-leaf="true" data-offset-key="1369:0" data-first-offset="true"><span data-slate-string="true">			EnableChunkLoadingPlugin.checkEnabled(compiler, desc.chunkLoading);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1370"><span data-slate-object="text" data-key="1371"><span data-slate-leaf="true" data-offset-key="1371:0" data-first-offset="true"><span data-slate-string="true">		}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1372"><span data-slate-object="text" data-key="1373"><span data-slate-leaf="true" data-offset-key="1373:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1374"><span data-slate-leaf="true" data-offset-key="1374:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="1375"><span data-slate-leaf="true" data-offset-key="1375:0" data-first-offset="true"><span data-slate-string="true"> (desc.wasmLoading) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1376"><span data-slate-object="text" data-key="1377"><span data-slate-leaf="true" data-offset-key="1377:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1378"><span data-slate-leaf="true" data-offset-key="1378:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1379"><span data-slate-leaf="true" data-offset-key="1379:0" data-first-offset="true"><span data-slate-string="true"> EnableWasmLoadingPlugin = </span></span></span><span data-slate-object="text" data-key="1380"><span data-slate-leaf="true" data-offset-key="1380:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">require</span></span></span></span><span data-slate-object="text" data-key="1381"><span data-slate-leaf="true" data-offset-key="1381:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="1382"><span data-slate-leaf="true" data-offset-key="1382:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"./wasm/EnableWasmLoadingPlugin"</span></span></span></span><span data-slate-object="text" data-key="1383"><span data-slate-leaf="true" data-offset-key="1383:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1384"><span data-slate-object="text" data-key="1385"><span data-slate-leaf="true" data-offset-key="1385:0" data-first-offset="true"><span data-slate-string="true">			EnableWasmLoadingPlugin.checkEnabled(compiler, desc.wasmLoading);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1386"><span data-slate-object="text" data-key="1387"><span data-slate-leaf="true" data-offset-key="1387:0" data-first-offset="true"><span data-slate-string="true">		}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1388"><span data-slate-object="text" data-key="1389"><span data-slate-leaf="true" data-offset-key="1389:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1390"><span data-slate-leaf="true" data-offset-key="1390:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="1391"><span data-slate-leaf="true" data-offset-key="1391:0" data-first-offset="true"><span data-slate-string="true"> (desc.library) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1392"><span data-slate-object="text" data-key="1393"><span data-slate-leaf="true" data-offset-key="1393:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1394"><span data-slate-leaf="true" data-offset-key="1394:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1395"><span data-slate-leaf="true" data-offset-key="1395:0" data-first-offset="true"><span data-slate-string="true"> EnableLibraryPlugin = </span></span></span><span data-slate-object="text" data-key="1396"><span data-slate-leaf="true" data-offset-key="1396:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">require</span></span></span></span><span data-slate-object="text" data-key="1397"><span data-slate-leaf="true" data-offset-key="1397:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="1398"><span data-slate-leaf="true" data-offset-key="1398:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"./library/EnableLibraryPlugin"</span></span></span></span><span data-slate-object="text" data-key="1399"><span data-slate-leaf="true" data-offset-key="1399:0" data-first-offset="true"><span data-slate-string="true">);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1400"><span data-slate-object="text" data-key="1401"><span data-slate-leaf="true" data-offset-key="1401:0" data-first-offset="true"><span data-slate-string="true">			EnableLibraryPlugin.checkEnabled(compiler, desc.library.type);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1402"><span data-slate-object="text" data-key="1403"><span data-slate-leaf="true" data-offset-key="1403:0" data-first-offset="true"><span data-slate-string="true">		}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1404"><span data-slate-object="text" data-key="1405"><span data-slate-leaf="true" data-offset-key="1405:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1406"><span data-slate-leaf="true" data-offset-key="1406:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="1407"><span data-slate-leaf="true" data-offset-key="1407:0" data-first-offset="true"><span data-slate-string="true"> options;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1408"><span data-slate-object="text" data-key="1409"><span data-slate-leaf="true" data-offset-key="1409:0" data-first-offset="true"><span data-slate-string="true">	} </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1410"><span data-slate-object="text" data-key="1411"><span data-slate-leaf="true" data-offset-key="1411:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1412"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1413"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1414"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1415"><span data-slate-object="text" data-key="1416"><span data-slate-leaf="true" data-offset-key="1416:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// EntryPlugin.js</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1417"><span data-slate-object="text" data-key="1418"><span data-slate-leaf="true" data-offset-key="1418:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">class</span></span></span></span></span><span data-slate-object="text" data-key="1419"><span data-slate-leaf="true" data-offset-key="1419:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="1420"><span data-slate-leaf="true" data-offset-key="1420:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">EntryPlugin</span></span></span></span></span><span data-slate-object="text" data-key="1421"><span data-slate-leaf="true" data-offset-key="1421:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1422"><span data-slate-object="text" data-key="1423"><span data-slate-leaf="true" data-offset-key="1423:0" data-first-offset="true"><span data-slate-string="true">	apply(compiler) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1424"><span data-slate-object="text" data-key="1425"><span data-slate-leaf="true" data-offset-key="1425:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="1426"><span data-slate-leaf="true" data-offset-key="1426:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 监听编译(compilation)创建之后，执行插件的调用</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1427"><span data-slate-object="text" data-key="1428"><span data-slate-leaf="true" data-offset-key="1428:0" data-first-offset="true"><span data-slate-string="true">		compiler.hooks.compilation.tap(</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1429"><span data-slate-object="text" data-key="1430"><span data-slate-leaf="true" data-offset-key="1430:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1431"><span data-slate-leaf="true" data-offset-key="1431:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"EntryPlugin"</span></span></span></span><span data-slate-object="text" data-key="1432"><span data-slate-leaf="true" data-offset-key="1432:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1433"><span data-slate-object="text" data-key="1434"><span data-slate-leaf="true" data-offset-key="1434:0" data-first-offset="true"><span data-slate-string="true">			(compilation, { normalModuleFactory }) =&gt; {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1435"><span data-slate-object="text" data-key="1436"><span data-slate-leaf="true" data-offset-key="1436:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="1437"><span data-slate-leaf="true" data-offset-key="1437:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 编译器compilation设置依赖</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1438"><span data-slate-object="text" data-key="1439"><span data-slate-leaf="true" data-offset-key="1439:0" data-first-offset="true"><span data-slate-string="true">				compilation.dependencyFactories.set(</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1440"><span data-slate-object="text" data-key="1441"><span data-slate-leaf="true" data-offset-key="1441:0" data-first-offset="true"><span data-slate-string="true">					EntryDependency,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1442"><span data-slate-object="text" data-key="1443"><span data-slate-leaf="true" data-offset-key="1443:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="1444"><span data-slate-leaf="true" data-offset-key="1444:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 模块工厂（用于模块的构建，我们说的js文件等等)</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1445"><span data-slate-object="text" data-key="1446"><span data-slate-leaf="true" data-offset-key="1446:0" data-first-offset="true"><span data-slate-string="true">					normalModuleFactory</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1447"><span data-slate-object="text" data-key="1448"><span data-slate-leaf="true" data-offset-key="1448:0" data-first-offset="true"><span data-slate-string="true">				);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1449"><span data-slate-object="text" data-key="1450"><span data-slate-leaf="true" data-offset-key="1450:0" data-first-offset="true"><span data-slate-string="true">			}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1451"><span data-slate-object="text" data-key="1452"><span data-slate-leaf="true" data-offset-key="1452:0" data-first-offset="true"><span data-slate-string="true">		);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1453"><span data-slate-object="text" data-key="1454"><span data-slate-leaf="true" data-offset-key="1454:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1455"><span data-slate-leaf="true" data-offset-key="1455:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 注册compiler的make钩子函数，</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1456"><span data-slate-object="text" data-key="1457"><span data-slate-leaf="true" data-offset-key="1457:0" data-first-offset="true"><span data-slate-string="true">		compiler.hooks.make.tapAsync(</span></span></span><span data-slate-object="text" data-key="1458"><span data-slate-leaf="true" data-offset-key="1458:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"EntryPlugin"</span></span></span></span><span data-slate-object="text" data-key="1459"><span data-slate-leaf="true" data-offset-key="1459:0" data-first-offset="true"><span data-slate-string="true">, (compilation, callback) =&gt; {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1460"><span data-slate-object="text" data-key="1461"><span data-slate-leaf="true" data-offset-key="1461:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1462"><span data-slate-leaf="true" data-offset-key="1462:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1463"><span data-slate-leaf="true" data-offset-key="1463:0" data-first-offset="true"><span data-slate-string="true"> { entry, options, context } = </span></span></span><span data-slate-object="text" data-key="1464"><span data-slate-leaf="true" data-offset-key="1464:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1465"><span data-slate-leaf="true" data-offset-key="1465:0" data-first-offset="true"><span data-slate-string="true">;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1466"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1467"><span data-slate-object="text" data-key="1468"><span data-slate-leaf="true" data-offset-key="1468:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1469"><span data-slate-leaf="true" data-offset-key="1469:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1470"><span data-slate-leaf="true" data-offset-key="1470:0" data-first-offset="true"><span data-slate-string="true"> dep = EntryPlugin.createDependency(entry, options);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1471"><span data-slate-object="text" data-key="1472"><span data-slate-leaf="true" data-offset-key="1472:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1473"><span data-slate-leaf="true" data-offset-key="1473:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 执行编译器compilation的addEntry方法加载入口文件</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1474"><span data-slate-object="text" data-key="1475"><span data-slate-leaf="true" data-offset-key="1475:0" data-first-offset="true"><span data-slate-string="true">			compilation.addEntry(context, dep, options, err =&gt; {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1476"><span data-slate-object="text" data-key="1477"><span data-slate-leaf="true" data-offset-key="1477:0" data-first-offset="true"><span data-slate-string="true">				callback(err);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1478"><span data-slate-object="text" data-key="1479"><span data-slate-leaf="true" data-offset-key="1479:0" data-first-offset="true"><span data-slate-string="true">			});</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1480"><span data-slate-object="text" data-key="1481"><span data-slate-leaf="true" data-offset-key="1481:0" data-first-offset="true"><span data-slate-string="true">		});</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1482"><span data-slate-object="text" data-key="1483"><span data-slate-leaf="true" data-offset-key="1483:0" data-first-offset="true"><span data-slate-string="true">	}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1484"><span data-slate-object="text" data-key="1485"><span data-slate-leaf="true" data-offset-key="1485:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1486"></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 2130px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: visible;"><div class="simplebar-scrollbar" style="width: 720px; transform: translate3d(0px, 0px, 0px); display: block;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><h5 data-id-heading12="" data-slate-type="pm_heading" data-slate-object="block" data-key="1487"><span data-slate-object="text" data-key="1488"><span data-slate-leaf="true" data-offset-key="1488:0" data-first-offset="true"><span data-slate-string="true">3、Compiler和Compilation</span></span></span></h5><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="1489"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div><div data-class-line="" data-line-number="9"></div><div data-class-line="" data-line-number="10"></div><div data-class-line="" data-line-number="11"></div><div data-class-line="" data-line-number="12"></div><div data-class-line="" data-line-number="13"></div><div data-class-line="" data-line-number="14"></div><div data-class-line="" data-line-number="15"></div><div data-class-line="" data-line-number="16"></div><div data-class-line="" data-line-number="17"></div><div data-class-line="" data-line-number="18"></div><div data-class-line="" data-line-number="19"></div><div data-class-line="" data-line-number="20"></div><div data-class-line="" data-line-number="21"></div><div data-class-line="" data-line-number="22"></div><div data-class-line="" data-line-number="23"></div><div data-class-line="" data-line-number="24"></div><div data-class-line="" data-line-number="25"></div><div data-class-line="" data-line-number="26"></div><div data-class-line="" data-line-number="27"></div><div data-class-line="" data-line-number="28"></div><div data-class-line="" data-line-number="29"></div><div data-class-line="" data-line-number="30"></div><div data-class-line="" data-line-number="31"></div><div data-class-line="" data-line-number="32"></div><div data-class-line="" data-line-number="33"></div><div data-class-line="" data-line-number="34"></div><div data-class-line="" data-line-number="35"></div><div data-class-line="" data-line-number="36"></div><div data-class-line="" data-line-number="37"></div><div data-class-line="" data-line-number="38"></div><div data-class-line="" data-line-number="39"></div><div data-class-line="" data-line-number="40"></div><div data-class-line="" data-line-number="41"></div><div data-class-line="" data-line-number="42"></div><div data-class-line="" data-line-number="43"></div><div data-class-line="" data-line-number="44"></div><div data-class-line="" data-line-number="45"></div><div data-class-line="" data-line-number="46"></div><div data-class-line="" data-line-number="47"></div><div data-class-line="" data-line-number="48"></div><div data-class-line="" data-line-number="49"></div><div data-class-line="" data-line-number="50"></div><div data-class-line="" data-line-number="51"></div><div data-class-line="" data-line-number="52"></div><div data-class-line="" data-line-number="53"></div><div data-class-line="" data-line-number="54"></div><div data-class-line="" data-line-number="55"></div><div data-class-line="" data-line-number="56"></div><div data-class-line="" data-line-number="57"></div><div data-class-line="" data-line-number="58"></div><div data-class-line="" data-line-number="59"></div><div data-class-line="" data-line-number="60"></div><div data-class-line="" data-line-number="61"></div><div data-class-line="" data-line-number="62"></div><div data-class-line="" data-line-number="63"></div><div data-class-line="" data-line-number="64"></div><div data-class-line="" data-line-number="65"></div><div data-class-line="" data-line-number="66"></div><div data-class-line="" data-line-number="67"></div><div data-class-line="" data-line-number="68"></div><div data-class-line="" data-line-number="69"></div><div data-class-line="" data-line-number="70"></div><div data-class-line="" data-line-number="71"></div><div data-class-line="" data-line-number="72"></div><div data-class-line="" data-line-number="73"></div><div data-class-line="" data-line-number="74"></div><div data-class-line="" data-line-number="75"></div><div data-class-line="" data-line-number="76"></div><div data-class-line="" data-line-number="77"></div><div data-class-line="" data-line-number="78"></div><div data-class-line="" data-line-number="79"></div><div data-class-line="" data-line-number="80"></div><div data-class-line="" data-line-number="81"></div><div data-class-line="" data-line-number="82"></div><div data-class-line="" data-line-number="83"></div><div data-class-line="" data-line-number="84"></div><div data-class-line="" data-line-number="85"></div><div data-class-line="" data-line-number="86"></div><div data-class-line="" data-line-number="87"></div><div data-class-line="" data-line-number="88"></div><div data-class-line="" data-line-number="89"></div><div data-class-line="" data-line-number="90"></div><div data-class-line="" data-line-number="91"></div><div data-class-line="" data-line-number="92"></div><div data-class-line="" data-line-number="93"></div><div data-class-line="" data-line-number="94"></div><div data-class-line="" data-line-number="95"></div><div data-class-line="" data-line-number="96"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1490"><span data-slate-object="text" data-key="1491"><span data-slate-leaf="true" data-offset-key="1491:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// Compiler.js</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1492"><span data-slate-object="text" data-key="1493"><span data-slate-leaf="true" data-offset-key="1493:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">class</span></span></span></span></span><span data-slate-object="text" data-key="1494"><span data-slate-leaf="true" data-offset-key="1494:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="1495"><span data-slate-leaf="true" data-offset-key="1495:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">Compiler</span></span></span></span></span><span data-slate-object="text" data-key="1496"><span data-slate-leaf="true" data-offset-key="1496:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1497"><span data-slate-object="text" data-key="1498"><span data-slate-leaf="true" data-offset-key="1498:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="1499"><span data-slate-leaf="true" data-offset-key="1499:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">constructor</span></span></span></span><span data-slate-object="text" data-key="1500"><span data-slate-leaf="true" data-offset-key="1500:0" data-first-offset="true"><span data-slate-string="true">(context) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1501"><span data-slate-object="text" data-key="1502"><span data-slate-leaf="true" data-offset-key="1502:0" data-first-offset="true"><span data-slate-string="true">  	</span></span></span><span data-slate-object="text" data-key="1503"><span data-slate-leaf="true" data-offset-key="1503:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1504"><span data-slate-leaf="true" data-offset-key="1504:0" data-first-offset="true"><span data-slate-string="true">.hooks = </span></span></span><span data-slate-object="text" data-key="1505"><span data-slate-leaf="true" data-offset-key="1505:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">Object</span></span></span></span><span data-slate-object="text" data-key="1506"><span data-slate-leaf="true" data-offset-key="1506:0" data-first-offset="true"><span data-slate-string="true">.freeze({</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1507"><span data-slate-object="text" data-key="1508"><span data-slate-leaf="true" data-offset-key="1508:0" data-first-offset="true"><span data-slate-string="true">    	</span></span></span><span data-slate-object="text" data-key="1509"><span data-slate-leaf="true" data-offset-key="1509:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 流程相关钩子</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1510"><span data-slate-object="text" data-key="1511"><span data-slate-leaf="true" data-offset-key="1511:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1512"><span data-slate-leaf="true" data-offset-key="1512:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">beforeRun</span></span></span></span><span data-slate-object="text" data-key="1513"><span data-slate-leaf="true" data-offset-key="1513:0" data-first-offset="true"><span data-slate-string="true">: </span></span></span><span data-slate-object="text" data-key="1514"><span data-slate-leaf="true" data-offset-key="1514:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="1515"><span data-slate-leaf="true" data-offset-key="1515:0" data-first-offset="true"><span data-slate-string="true"> AsyncSeriesHook([</span></span></span><span data-slate-object="text" data-key="1516"><span data-slate-leaf="true" data-offset-key="1516:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"compiler"</span></span></span></span><span data-slate-object="text" data-key="1517"><span data-slate-leaf="true" data-offset-key="1517:0" data-first-offset="true"><span data-slate-string="true">]),</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1518"><span data-slate-object="text" data-key="1519"><span data-slate-leaf="true" data-offset-key="1519:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1520"><span data-slate-leaf="true" data-offset-key="1520:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">run</span></span></span></span><span data-slate-object="text" data-key="1521"><span data-slate-leaf="true" data-offset-key="1521:0" data-first-offset="true"><span data-slate-string="true">: </span></span></span><span data-slate-object="text" data-key="1522"><span data-slate-leaf="true" data-offset-key="1522:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="1523"><span data-slate-leaf="true" data-offset-key="1523:0" data-first-offset="true"><span data-slate-string="true"> AsyncSeriesHook([</span></span></span><span data-slate-object="text" data-key="1524"><span data-slate-leaf="true" data-offset-key="1524:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"compiler"</span></span></span></span><span data-slate-object="text" data-key="1525"><span data-slate-leaf="true" data-offset-key="1525:0" data-first-offset="true"><span data-slate-string="true">]),</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1526"><span data-slate-object="text" data-key="1527"><span data-slate-leaf="true" data-offset-key="1527:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1528"><span data-slate-leaf="true" data-offset-key="1528:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">beforeCompile</span></span></span></span><span data-slate-object="text" data-key="1529"><span data-slate-leaf="true" data-offset-key="1529:0" data-first-offset="true"><span data-slate-string="true">:</span></span></span><span data-slate-object="text" data-key="1530"><span data-slate-leaf="true" data-offset-key="1530:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="1531"><span data-slate-leaf="true" data-offset-key="1531:0" data-first-offset="true"><span data-slate-string="true"> AsyncSeriesHook([</span></span></span><span data-slate-object="text" data-key="1532"><span data-slate-leaf="true" data-offset-key="1532:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"params"</span></span></span></span><span data-slate-object="text" data-key="1533"><span data-slate-leaf="true" data-offset-key="1533:0" data-first-offset="true"><span data-slate-string="true">]),</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1534"><span data-slate-object="text" data-key="1535"><span data-slate-leaf="true" data-offset-key="1535:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1536"><span data-slate-leaf="true" data-offset-key="1536:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">afterCompile</span></span></span></span><span data-slate-object="text" data-key="1537"><span data-slate-leaf="true" data-offset-key="1537:0" data-first-offset="true"><span data-slate-string="true">: </span></span></span><span data-slate-object="text" data-key="1538"><span data-slate-leaf="true" data-offset-key="1538:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="1539"><span data-slate-leaf="true" data-offset-key="1539:0" data-first-offset="true"><span data-slate-string="true"> AsyncSeriesHook([</span></span></span><span data-slate-object="text" data-key="1540"><span data-slate-leaf="true" data-offset-key="1540:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"compilation"</span></span></span></span><span data-slate-object="text" data-key="1541"><span data-slate-leaf="true" data-offset-key="1541:0" data-first-offset="true"><span data-slate-string="true">]),</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1542"><span data-slate-object="text" data-key="1543"><span data-slate-leaf="true" data-offset-key="1543:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1544"><span data-slate-leaf="true" data-offset-key="1544:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">make</span></span></span></span><span data-slate-object="text" data-key="1545"><span data-slate-leaf="true" data-offset-key="1545:0" data-first-offset="true"><span data-slate-string="true">: </span></span></span><span data-slate-object="text" data-key="1546"><span data-slate-leaf="true" data-offset-key="1546:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="1547"><span data-slate-leaf="true" data-offset-key="1547:0" data-first-offset="true"><span data-slate-string="true"> AsyncParallelHook([</span></span></span><span data-slate-object="text" data-key="1548"><span data-slate-leaf="true" data-offset-key="1548:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"compilation"</span></span></span></span><span data-slate-object="text" data-key="1549"><span data-slate-leaf="true" data-offset-key="1549:0" data-first-offset="true"><span data-slate-string="true">]),</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1550"><span data-slate-object="text" data-key="1551"><span data-slate-leaf="true" data-offset-key="1551:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1552"><span data-slate-leaf="true" data-offset-key="1552:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">emit</span></span></span></span><span data-slate-object="text" data-key="1553"><span data-slate-leaf="true" data-offset-key="1553:0" data-first-offset="true"><span data-slate-string="true">: </span></span></span><span data-slate-object="text" data-key="1554"><span data-slate-leaf="true" data-offset-key="1554:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="1555"><span data-slate-leaf="true" data-offset-key="1555:0" data-first-offset="true"><span data-slate-string="true"> AsyncSeriesHook([</span></span></span><span data-slate-object="text" data-key="1556"><span data-slate-leaf="true" data-offset-key="1556:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"compilation"</span></span></span></span><span data-slate-object="text" data-key="1557"><span data-slate-leaf="true" data-offset-key="1557:0" data-first-offset="true"><span data-slate-string="true">]),</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1558"><span data-slate-object="text" data-key="1559"><span data-slate-leaf="true" data-offset-key="1559:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1560"><span data-slate-leaf="true" data-offset-key="1560:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">afterEmit</span></span></span></span><span data-slate-object="text" data-key="1561"><span data-slate-leaf="true" data-offset-key="1561:0" data-first-offset="true"><span data-slate-string="true">: </span></span></span><span data-slate-object="text" data-key="1562"><span data-slate-leaf="true" data-offset-key="1562:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="1563"><span data-slate-leaf="true" data-offset-key="1563:0" data-first-offset="true"><span data-slate-string="true"> AsyncSeriesHook([</span></span></span><span data-slate-object="text" data-key="1564"><span data-slate-leaf="true" data-offset-key="1564:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"compilation"</span></span></span></span><span data-slate-object="text" data-key="1565"><span data-slate-leaf="true" data-offset-key="1565:0" data-first-offset="true"><span data-slate-string="true">]),</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1566"><span data-slate-object="text" data-key="1567"><span data-slate-leaf="true" data-offset-key="1567:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1568"><span data-slate-leaf="true" data-offset-key="1568:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 监听相关钩子</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1569"><span data-slate-object="text" data-key="1570"><span data-slate-leaf="true" data-offset-key="1570:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1571"><span data-slate-leaf="true" data-offset-key="1571:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">watchRun</span></span></span></span><span data-slate-object="text" data-key="1572"><span data-slate-leaf="true" data-offset-key="1572:0" data-first-offset="true"><span data-slate-string="true">: </span></span></span><span data-slate-object="text" data-key="1573"><span data-slate-leaf="true" data-offset-key="1573:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="1574"><span data-slate-leaf="true" data-offset-key="1574:0" data-first-offset="true"><span data-slate-string="true"> AsyncSeriesHook([</span></span></span><span data-slate-object="text" data-key="1575"><span data-slate-leaf="true" data-offset-key="1575:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"compiler"</span></span></span></span><span data-slate-object="text" data-key="1576"><span data-slate-leaf="true" data-offset-key="1576:0" data-first-offset="true"><span data-slate-string="true">]),</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1577"><span data-slate-object="text" data-key="1578"><span data-slate-leaf="true" data-offset-key="1578:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1579"><span data-slate-leaf="true" data-offset-key="1579:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">watchClose</span></span></span></span><span data-slate-object="text" data-key="1580"><span data-slate-leaf="true" data-offset-key="1580:0" data-first-offset="true"><span data-slate-string="true">: </span></span></span><span data-slate-object="text" data-key="1581"><span data-slate-leaf="true" data-offset-key="1581:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="1582"><span data-slate-leaf="true" data-offset-key="1582:0" data-first-offset="true"><span data-slate-string="true"> SyncHook([]),</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1583"><span data-slate-object="text" data-key="1584"><span data-slate-leaf="true" data-offset-key="1584:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1585"><span data-slate-leaf="true" data-offset-key="1585:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 其他相关钩子可参考官方文档</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1586"><span data-slate-object="text" data-key="1587"><span data-slate-leaf="true" data-offset-key="1587:0" data-first-offset="true"><span data-slate-string="true">      .... </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1588"><span data-slate-object="text" data-key="1589"><span data-slate-leaf="true" data-offset-key="1589:0" data-first-offset="true"><span data-slate-string="true">    })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1590"><span data-slate-object="text" data-key="1591"><span data-slate-leaf="true" data-offset-key="1591:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1592"><span data-slate-object="text" data-key="1593"><span data-slate-leaf="true" data-offset-key="1593:0" data-first-offset="true"><span data-slate-string="true">	run(callback){</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1594"><span data-slate-object="text" data-key="1595"><span data-slate-leaf="true" data-offset-key="1595:0" data-first-offset="true"><span data-slate-string="true">  	...</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1596"><span data-slate-object="text" data-key="1597"><span data-slate-leaf="true" data-offset-key="1597:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="1598"><span data-slate-leaf="true" data-offset-key="1598:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 整个打包编译执行完成的回调</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1599"><span data-slate-object="text" data-key="1600"><span data-slate-leaf="true" data-offset-key="1600:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="1601"><span data-slate-leaf="true" data-offset-key="1601:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1602"><span data-slate-leaf="true" data-offset-key="1602:0" data-first-offset="true"><span data-slate-string="true"> finalCallback = </span></span></span><span data-slate-object="text" data-key="1603"><span data-slate-leaf="true" data-offset-key="1603:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">(</span></span></span></span><span data-slate-object="text" data-key="1604"><span data-slate-leaf="true" data-offset-key="1604:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">err, stats</span></span></span></span></span><span data-slate-object="text" data-key="1605"><span data-slate-leaf="true" data-offset-key="1605:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">)=&gt;</span></span></span></span><span data-slate-object="text" data-key="1606"><span data-slate-leaf="true" data-offset-key="1606:0" data-first-offset="true"><span data-slate-string="true">{...}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1607"><span data-slate-object="text" data-key="1608"><span data-slate-leaf="true" data-offset-key="1608:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="1609"><span data-slate-leaf="true" data-offset-key="1609:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 编译完毕的回调</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1610"><span data-slate-object="text" data-key="1611"><span data-slate-leaf="true" data-offset-key="1611:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="1612"><span data-slate-leaf="true" data-offset-key="1612:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1613"><span data-slate-leaf="true" data-offset-key="1613:0" data-first-offset="true"><span data-slate-string="true"> onCompiled = </span></span></span><span data-slate-object="text" data-key="1614"><span data-slate-leaf="true" data-offset-key="1614:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">(</span></span></span></span><span data-slate-object="text" data-key="1615"><span data-slate-leaf="true" data-offset-key="1615:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">err, compilation</span></span></span></span></span><span data-slate-object="text" data-key="1616"><span data-slate-leaf="true" data-offset-key="1616:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">)=&gt;</span></span></span></span><span data-slate-object="text" data-key="1617"><span data-slate-leaf="true" data-offset-key="1617:0" data-first-offset="true"><span data-slate-string="true">{...}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1618"><span data-slate-object="text" data-key="1619"><span data-slate-leaf="true" data-offset-key="1619:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1620"><span data-slate-object="text" data-key="1621"><span data-slate-leaf="true" data-offset-key="1621:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="1622"><span data-slate-leaf="true" data-offset-key="1622:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1623"><span data-slate-leaf="true" data-offset-key="1623:0" data-first-offset="true"><span data-slate-string="true"> run = </span></span></span><span data-slate-object="text" data-key="1624"><span data-slate-leaf="true" data-offset-key="1624:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">()</span></span></span></span></span><span data-slate-object="text" data-key="1625"><span data-slate-leaf="true" data-offset-key="1625:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> =&gt;</span></span></span></span><span data-slate-object="text" data-key="1626"><span data-slate-leaf="true" data-offset-key="1626:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1627"><span data-slate-object="text" data-key="1628"><span data-slate-leaf="true" data-offset-key="1628:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1629"><span data-slate-leaf="true" data-offset-key="1629:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 调用编译打包前的钩子函数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1630"><span data-slate-object="text" data-key="1631"><span data-slate-leaf="true" data-offset-key="1631:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1632"><span data-slate-leaf="true" data-offset-key="1632:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1633"><span data-slate-leaf="true" data-offset-key="1633:0" data-first-offset="true"><span data-slate-string="true">.hooks.beforeRun.callAsync(</span></span></span><span data-slate-object="text" data-key="1634"><span data-slate-leaf="true" data-offset-key="1634:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1635"><span data-slate-leaf="true" data-offset-key="1635:0" data-first-offset="true"><span data-slate-string="true">, err =&gt; {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1636"><span data-slate-object="text" data-key="1637"><span data-slate-leaf="true" data-offset-key="1637:0" data-first-offset="true"><span data-slate-string="true">				</span></span></span><span data-slate-object="text" data-key="1638"><span data-slate-leaf="true" data-offset-key="1638:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="1639"><span data-slate-leaf="true" data-offset-key="1639:0" data-first-offset="true"><span data-slate-string="true"> (err) </span></span></span><span data-slate-object="text" data-key="1640"><span data-slate-leaf="true" data-offset-key="1640:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="1641"><span data-slate-leaf="true" data-offset-key="1641:0" data-first-offset="true"><span data-slate-string="true"> finalCallback(err);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1642"><span data-slate-object="text" data-key="1643"><span data-slate-leaf="true" data-offset-key="1643:0" data-first-offset="true"><span data-slate-string="true">				</span></span></span><span data-slate-object="text" data-key="1644"><span data-slate-leaf="true" data-offset-key="1644:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 调用运行中钩子函数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1645"><span data-slate-object="text" data-key="1646"><span data-slate-leaf="true" data-offset-key="1646:0" data-first-offset="true"><span data-slate-string="true">				</span></span></span><span data-slate-object="text" data-key="1647"><span data-slate-leaf="true" data-offset-key="1647:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1648"><span data-slate-leaf="true" data-offset-key="1648:0" data-first-offset="true"><span data-slate-string="true">.hooks.run.callAsync(</span></span></span><span data-slate-object="text" data-key="1649"><span data-slate-leaf="true" data-offset-key="1649:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1650"><span data-slate-leaf="true" data-offset-key="1650:0" data-first-offset="true"><span data-slate-string="true">, err =&gt; {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1651"><span data-slate-object="text" data-key="1652"><span data-slate-leaf="true" data-offset-key="1652:0" data-first-offset="true"><span data-slate-string="true">					</span></span></span><span data-slate-object="text" data-key="1653"><span data-slate-leaf="true" data-offset-key="1653:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="1654"><span data-slate-leaf="true" data-offset-key="1654:0" data-first-offset="true"><span data-slate-string="true"> (err) </span></span></span><span data-slate-object="text" data-key="1655"><span data-slate-leaf="true" data-offset-key="1655:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="1656"><span data-slate-leaf="true" data-offset-key="1656:0" data-first-offset="true"><span data-slate-string="true"> finalCallback(err);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1657"><span data-slate-object="text" data-key="1658"><span data-slate-leaf="true" data-offset-key="1658:0" data-first-offset="true"><span data-slate-string="true">					</span></span></span><span data-slate-object="text" data-key="1659"><span data-slate-leaf="true" data-offset-key="1659:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 读取Records文件</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1660"><span data-slate-object="text" data-key="1661"><span data-slate-leaf="true" data-offset-key="1661:0" data-first-offset="true"><span data-slate-string="true">					</span></span></span><span data-slate-object="text" data-key="1662"><span data-slate-leaf="true" data-offset-key="1662:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1663"><span data-slate-leaf="true" data-offset-key="1663:0" data-first-offset="true"><span data-slate-string="true">.readRecords(</span></span></span><span data-slate-object="text" data-key="1664"><span data-slate-leaf="true" data-offset-key="1664:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">err</span></span></span></span></span><span data-slate-object="text" data-key="1665"><span data-slate-leaf="true" data-offset-key="1665:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> =&gt;</span></span></span></span><span data-slate-object="text" data-key="1666"><span data-slate-leaf="true" data-offset-key="1666:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1667"><span data-slate-object="text" data-key="1668"><span data-slate-leaf="true" data-offset-key="1668:0" data-first-offset="true"><span data-slate-string="true">						</span></span></span><span data-slate-object="text" data-key="1669"><span data-slate-leaf="true" data-offset-key="1669:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="1670"><span data-slate-leaf="true" data-offset-key="1670:0" data-first-offset="true"><span data-slate-string="true"> (err) </span></span></span><span data-slate-object="text" data-key="1671"><span data-slate-leaf="true" data-offset-key="1671:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="1672"><span data-slate-leaf="true" data-offset-key="1672:0" data-first-offset="true"><span data-slate-string="true"> finalCallback(err);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1673"><span data-slate-object="text" data-key="1674"><span data-slate-leaf="true" data-offset-key="1674:0" data-first-offset="true"><span data-slate-string="true">						</span></span></span><span data-slate-object="text" data-key="1675"><span data-slate-leaf="true" data-offset-key="1675:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 开始编译</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1676"><span data-slate-object="text" data-key="1677"><span data-slate-leaf="true" data-offset-key="1677:0" data-first-offset="true"><span data-slate-string="true">						</span></span></span><span data-slate-object="text" data-key="1678"><span data-slate-leaf="true" data-offset-key="1678:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1679"><span data-slate-leaf="true" data-offset-key="1679:0" data-first-offset="true"><span data-slate-string="true">.compile(onCompiled);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1680"><span data-slate-object="text" data-key="1681"><span data-slate-leaf="true" data-offset-key="1681:0" data-first-offset="true"><span data-slate-string="true">					});</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1682"><span data-slate-object="text" data-key="1683"><span data-slate-leaf="true" data-offset-key="1683:0" data-first-offset="true"><span data-slate-string="true">				});</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1684"><span data-slate-object="text" data-key="1685"><span data-slate-leaf="true" data-offset-key="1685:0" data-first-offset="true"><span data-slate-string="true">			});</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1686"><span data-slate-object="text" data-key="1687"><span data-slate-leaf="true" data-offset-key="1687:0" data-first-offset="true"><span data-slate-string="true">		};</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1688"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1689"><span data-slate-object="text" data-key="1690"><span data-slate-leaf="true" data-offset-key="1690:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1691"><span data-slate-leaf="true" data-offset-key="1691:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="1692"><span data-slate-leaf="true" data-offset-key="1692:0" data-first-offset="true"><span data-slate-string="true"> (</span></span></span><span data-slate-object="text" data-key="1693"><span data-slate-leaf="true" data-offset-key="1693:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1694"><span data-slate-leaf="true" data-offset-key="1694:0" data-first-offset="true"><span data-slate-string="true">.idle) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1695"><span data-slate-object="text" data-key="1696"><span data-slate-leaf="true" data-offset-key="1696:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1697"><span data-slate-leaf="true" data-offset-key="1697:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1698"><span data-slate-leaf="true" data-offset-key="1698:0" data-first-offset="true"><span data-slate-string="true">.cache.endIdle(</span></span></span><span data-slate-object="text" data-key="1699"><span data-slate-leaf="true" data-offset-key="1699:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">err</span></span></span></span></span><span data-slate-object="text" data-key="1700"><span data-slate-leaf="true" data-offset-key="1700:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> =&gt;</span></span></span></span><span data-slate-object="text" data-key="1701"><span data-slate-leaf="true" data-offset-key="1701:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1702"><span data-slate-object="text" data-key="1703"><span data-slate-leaf="true" data-offset-key="1703:0" data-first-offset="true"><span data-slate-string="true">				</span></span></span><span data-slate-object="text" data-key="1704"><span data-slate-leaf="true" data-offset-key="1704:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="1705"><span data-slate-leaf="true" data-offset-key="1705:0" data-first-offset="true"><span data-slate-string="true"> (err) </span></span></span><span data-slate-object="text" data-key="1706"><span data-slate-leaf="true" data-offset-key="1706:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="1707"><span data-slate-leaf="true" data-offset-key="1707:0" data-first-offset="true"><span data-slate-string="true"> finalCallback(err);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1708"><span data-slate-object="text" data-key="1709"><span data-slate-leaf="true" data-offset-key="1709:0" data-first-offset="true"><span data-slate-string="true">				</span></span></span><span data-slate-object="text" data-key="1710"><span data-slate-leaf="true" data-offset-key="1710:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1711"><span data-slate-leaf="true" data-offset-key="1711:0" data-first-offset="true"><span data-slate-string="true">.idle = </span></span></span><span data-slate-object="text" data-key="1712"><span data-slate-leaf="true" data-offset-key="1712:0" data-first-offset="true"><span class="hljs-literal" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">false</span></span></span></span><span data-slate-object="text" data-key="1713"><span data-slate-leaf="true" data-offset-key="1713:0" data-first-offset="true"><span data-slate-string="true">;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1714"><span data-slate-object="text" data-key="1715"><span data-slate-leaf="true" data-offset-key="1715:0" data-first-offset="true"><span data-slate-string="true">				run();</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1716"><span data-slate-object="text" data-key="1717"><span data-slate-leaf="true" data-offset-key="1717:0" data-first-offset="true"><span data-slate-string="true">			});</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1718"><span data-slate-object="text" data-key="1719"><span data-slate-leaf="true" data-offset-key="1719:0" data-first-offset="true"><span data-slate-string="true">		} </span></span></span><span data-slate-object="text" data-key="1720"><span data-slate-leaf="true" data-offset-key="1720:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">else</span></span></span></span><span data-slate-object="text" data-key="1721"><span data-slate-leaf="true" data-offset-key="1721:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1722"><span data-slate-object="text" data-key="1723"><span data-slate-leaf="true" data-offset-key="1723:0" data-first-offset="true"><span data-slate-string="true">			run();</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1724"><span data-slate-object="text" data-key="1725"><span data-slate-leaf="true" data-offset-key="1725:0" data-first-offset="true"><span data-slate-string="true">		}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1726"><span data-slate-object="text" data-key="1727"><span data-slate-leaf="true" data-offset-key="1727:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1728"><span data-slate-object="text" data-key="1729"><span data-slate-leaf="true" data-offset-key="1729:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1730"><span data-slate-object="text" data-key="1731"><span data-slate-leaf="true" data-offset-key="1731:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="1732"><span data-slate-leaf="true" data-offset-key="1732:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 编译 </span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1733"><span data-slate-object="text" data-key="1734"><span data-slate-leaf="true" data-offset-key="1734:0" data-first-offset="true"><span data-slate-string="true">  compile(callback) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1735"><span data-slate-object="text" data-key="1736"><span data-slate-leaf="true" data-offset-key="1736:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="1737"><span data-slate-leaf="true" data-offset-key="1737:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 创建编译器的参数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1738"><span data-slate-object="text" data-key="1739"><span data-slate-leaf="true" data-offset-key="1739:0" data-first-offset="true"><span data-slate-string="true">  	</span></span></span><span data-slate-object="text" data-key="1740"><span data-slate-leaf="true" data-offset-key="1740:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1741"><span data-slate-leaf="true" data-offset-key="1741:0" data-first-offset="true"><span data-slate-string="true"> params = </span></span></span><span data-slate-object="text" data-key="1742"><span data-slate-leaf="true" data-offset-key="1742:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1743"><span data-slate-leaf="true" data-offset-key="1743:0" data-first-offset="true"><span data-slate-string="true">.newCompilationParams();</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1744"><span data-slate-object="text" data-key="1745"><span data-slate-leaf="true" data-offset-key="1745:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="1746"><span data-slate-leaf="true" data-offset-key="1746:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 调用开始编译前钩子函数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1747"><span data-slate-object="text" data-key="1748"><span data-slate-leaf="true" data-offset-key="1748:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="1749"><span data-slate-leaf="true" data-offset-key="1749:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1750"><span data-slate-leaf="true" data-offset-key="1750:0" data-first-offset="true"><span data-slate-string="true">.hooks.beforeCompile.callAsync(params, err =&gt; {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1751"><span data-slate-object="text" data-key="1752"><span data-slate-leaf="true" data-offset-key="1752:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1753"><span data-slate-leaf="true" data-offset-key="1753:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 调用开始编译钩子函数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1754"><span data-slate-object="text" data-key="1755"><span data-slate-leaf="true" data-offset-key="1755:0" data-first-offset="true"><span data-slate-string="true">    	</span></span></span><span data-slate-object="text" data-key="1756"><span data-slate-leaf="true" data-offset-key="1756:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1757"><span data-slate-leaf="true" data-offset-key="1757:0" data-first-offset="true"><span data-slate-string="true">.hooks.compile.call(params);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1758"><span data-slate-object="text" data-key="1759"><span data-slate-leaf="true" data-offset-key="1759:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1760"><span data-slate-leaf="true" data-offset-key="1760:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 创建编译器实例</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1761"><span data-slate-object="text" data-key="1762"><span data-slate-leaf="true" data-offset-key="1762:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1763"><span data-slate-leaf="true" data-offset-key="1763:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1764"><span data-slate-leaf="true" data-offset-key="1764:0" data-first-offset="true"><span data-slate-string="true"> compilation = </span></span></span><span data-slate-object="text" data-key="1765"><span data-slate-leaf="true" data-offset-key="1765:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1766"><span data-slate-leaf="true" data-offset-key="1766:0" data-first-offset="true"><span data-slate-string="true">.newCompilation(params);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1767"><span data-slate-object="text" data-key="1768"><span data-slate-leaf="true" data-offset-key="1768:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1769"><span data-slate-leaf="true" data-offset-key="1769:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 调用make钩子函数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1770"><span data-slate-object="text" data-key="1771"><span data-slate-leaf="true" data-offset-key="1771:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1772"><span data-slate-leaf="true" data-offset-key="1772:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1773"><span data-slate-leaf="true" data-offset-key="1773:0" data-first-offset="true"><span data-slate-string="true">.hooks.make.callAsync(compilation, err =&gt; {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1774"><span data-slate-object="text" data-key="1775"><span data-slate-leaf="true" data-offset-key="1775:0" data-first-offset="true"><span data-slate-string="true">      	...</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1776"><span data-slate-object="text" data-key="1777"><span data-slate-leaf="true" data-offset-key="1777:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="1778"><span data-slate-leaf="true" data-offset-key="1778:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 调用finishMake钩子函数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1779"><span data-slate-object="text" data-key="1780"><span data-slate-leaf="true" data-offset-key="1780:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="1781"><span data-slate-leaf="true" data-offset-key="1781:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1782"><span data-slate-leaf="true" data-offset-key="1782:0" data-first-offset="true"><span data-slate-string="true">.hooks.finishMake.callAsync(compilation, err =&gt; {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1783"><span data-slate-object="text" data-key="1784"><span data-slate-leaf="true" data-offset-key="1784:0" data-first-offset="true"><span data-slate-string="true">           </span></span></span><span data-slate-object="text" data-key="1785"><span data-slate-leaf="true" data-offset-key="1785:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 编译结束</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1786"><span data-slate-object="text" data-key="1787"><span data-slate-leaf="true" data-offset-key="1787:0" data-first-offset="true"><span data-slate-string="true">        	 compilation.finish(</span></span></span><span data-slate-object="text" data-key="1788"><span data-slate-leaf="true" data-offset-key="1788:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">err</span></span></span></span></span><span data-slate-object="text" data-key="1789"><span data-slate-leaf="true" data-offset-key="1789:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">=&gt;</span></span></span></span><span data-slate-object="text" data-key="1790"><span data-slate-leaf="true" data-offset-key="1790:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1791"><span data-slate-object="text" data-key="1792"><span data-slate-leaf="true" data-offset-key="1792:0" data-first-offset="true"><span data-slate-string="true">             ...</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1793"><span data-slate-object="text" data-key="1794"><span data-slate-leaf="true" data-offset-key="1794:0" data-first-offset="true"><span data-slate-string="true">             </span></span></span><span data-slate-object="text" data-key="1795"><span data-slate-leaf="true" data-offset-key="1795:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 编译(compilation)停止接收新模块时触发</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1796"><span data-slate-object="text" data-key="1797"><span data-slate-leaf="true" data-offset-key="1797:0" data-first-offset="true"><span data-slate-string="true">           	 compilation.seal(</span></span></span><span data-slate-object="text" data-key="1798"><span data-slate-leaf="true" data-offset-key="1798:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">err</span></span></span></span></span><span data-slate-object="text" data-key="1799"><span data-slate-leaf="true" data-offset-key="1799:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> =&gt;</span></span></span></span><span data-slate-object="text" data-key="1800"><span data-slate-leaf="true" data-offset-key="1800:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1801"><span data-slate-object="text" data-key="1802"><span data-slate-leaf="true" data-offset-key="1802:0" data-first-offset="true"><span data-slate-string="true">               ...</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1803"><span data-slate-object="text" data-key="1804"><span data-slate-leaf="true" data-offset-key="1804:0" data-first-offset="true"><span data-slate-string="true">               this.hooks.afterCompile.callAsync(compilation, err =&gt; {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1805"><span data-slate-object="text" data-key="1806"><span data-slate-leaf="true" data-offset-key="1806:0" data-first-offset="true"><span data-slate-string="true">                	...</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1807"><span data-slate-object="text" data-key="1808"><span data-slate-leaf="true" data-offset-key="1808:0" data-first-offset="true"><span data-slate-string="true">                	return callback(</span></span></span><span data-slate-object="text" data-key="1809"><span data-slate-leaf="true" data-offset-key="1809:0" data-first-offset="true"><span class="hljs-literal" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">null</span></span></span></span><span data-slate-object="text" data-key="1810"><span data-slate-leaf="true" data-offset-key="1810:0" data-first-offset="true"><span data-slate-string="true">, compilation);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1811"><span data-slate-object="text" data-key="1812"><span data-slate-leaf="true" data-offset-key="1812:0" data-first-offset="true"><span data-slate-string="true">                })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1813"><span data-slate-object="text" data-key="1814"><span data-slate-leaf="true" data-offset-key="1814:0" data-first-offset="true"><span data-slate-string="true">              })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1815"><span data-slate-object="text" data-key="1816"><span data-slate-leaf="true" data-offset-key="1816:0" data-first-offset="true"><span data-slate-string="true">           })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1817"><span data-slate-object="text" data-key="1818"><span data-slate-leaf="true" data-offset-key="1818:0" data-first-offset="true"><span data-slate-string="true">        })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1819"><span data-slate-object="text" data-key="1820"><span data-slate-leaf="true" data-offset-key="1820:0" data-first-offset="true"><span data-slate-string="true">      })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1821"><span data-slate-object="text" data-key="1822"><span data-slate-leaf="true" data-offset-key="1822:0" data-first-offset="true"><span data-slate-string="true">    }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1823"><span data-slate-object="text" data-key="1824"><span data-slate-leaf="true" data-offset-key="1824:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1825"><span data-slate-object="text" data-key="1826"><span data-slate-leaf="true" data-offset-key="1826:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1827"><span data-slate-object="text" data-key="1828"><span data-slate-leaf="true" data-offset-key="1828:0" data-first-offset="true"><span data-slate-string="true"> 	newCompilationParams() {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1829"><span data-slate-object="text" data-key="1830"><span data-slate-leaf="true" data-offset-key="1830:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1831"><span data-slate-leaf="true" data-offset-key="1831:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="1832"><span data-slate-leaf="true" data-offset-key="1832:0" data-first-offset="true"><span data-slate-string="true"> params = {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1833"><span data-slate-object="text" data-key="1834"><span data-slate-leaf="true" data-offset-key="1834:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1835"><span data-slate-leaf="true" data-offset-key="1835:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 模块工厂，用于模块的构建，通常说的js文件等</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1836"><span data-slate-object="text" data-key="1837"><span data-slate-leaf="true" data-offset-key="1837:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1838"><span data-slate-leaf="true" data-offset-key="1838:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">normalModuleFactory</span></span></span></span><span data-slate-object="text" data-key="1839"><span data-slate-leaf="true" data-offset-key="1839:0" data-first-offset="true"><span data-slate-string="true">: </span></span></span><span data-slate-object="text" data-key="1840"><span data-slate-leaf="true" data-offset-key="1840:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1841"><span data-slate-leaf="true" data-offset-key="1841:0" data-first-offset="true"><span data-slate-string="true">.createNormalModuleFactory(),</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1842"><span data-slate-object="text" data-key="1843"><span data-slate-leaf="true" data-offset-key="1843:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="1844"><span data-slate-leaf="true" data-offset-key="1844:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 上下文工厂，用于整个工程的文件路径加载</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1845"><span data-slate-object="text" data-key="1846"><span data-slate-leaf="true" data-offset-key="1846:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span><span data-slate-object="text" data-key="1847"><span data-slate-leaf="true" data-offset-key="1847:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">contextModuleFactory</span></span></span></span><span data-slate-object="text" data-key="1848"><span data-slate-leaf="true" data-offset-key="1848:0" data-first-offset="true"><span data-slate-string="true">: </span></span></span><span data-slate-object="text" data-key="1849"><span data-slate-leaf="true" data-offset-key="1849:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1850"><span data-slate-leaf="true" data-offset-key="1850:0" data-first-offset="true"><span data-slate-string="true">.createContextModuleFactory()</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1851"><span data-slate-object="text" data-key="1852"><span data-slate-leaf="true" data-offset-key="1852:0" data-first-offset="true"><span data-slate-string="true">		};</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1853"><span data-slate-object="text" data-key="1854"><span data-slate-leaf="true" data-offset-key="1854:0" data-first-offset="true"><span data-slate-string="true">		</span></span></span><span data-slate-object="text" data-key="1855"><span data-slate-leaf="true" data-offset-key="1855:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="1856"><span data-slate-leaf="true" data-offset-key="1856:0" data-first-offset="true"><span data-slate-string="true"> params;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1857"><span data-slate-object="text" data-key="1858"><span data-slate-leaf="true" data-offset-key="1858:0" data-first-offset="true"><span data-slate-string="true">	}                                  </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1859"><span data-slate-object="text" data-key="1860"><span data-slate-leaf="true" data-offset-key="1860:0" data-first-offset="true"><span data-slate-string="true">}                  </span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 1930px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><h5 data-id-heading13="" data-slate-type="pm_heading" data-slate-object="block" data-key="1861"><span data-slate-object="text" data-key="1862"><span data-slate-leaf="true" data-offset-key="1862:0" data-first-offset="true"><span data-slate-string="true">4、Module分类</span></span></span></h5><div data-style-width="100%" data-style-bordertype="none" data-slate-type="pm_image" data-slate-object="block" data-key="1863"><img src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/e81de7180d1c2b07ea245114f7f13f35.png"></div><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="1864"><span data-slate-object="text" data-key="1865"><span data-slate-leaf="true" data-offset-key="1865:0"><span data-slate-zero-width="n" data-slate-length="0">﻿</span></span></span></p><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="1866"><span data-slate-object="text" data-key="1867"><span data-slate-leaf="true" data-offset-key="1867:0" data-first-offset="true"><span data-slate-string="true">NormalModule模块说明：</span></span></span></p><ol data-slate-type="pm_ol" data-slate-object="block" data-key="1868"><li data-slate-type="pm_li" data-slate-object="block" data-key="1869"><p data-number="1" data-slate-type="pm_paragraph" data-slate-object="block" data-key="1870"><span data-slate-object="text" data-key="1871"><span data-slate-leaf="true" data-offset-key="1871:0" data-first-offset="true"><span data-slate-string="true">使用loader-runner运行loaders</span></span></span></p></li><li data-slate-type="pm_li" data-slate-object="block" data-key="1872"><p data-number="2" data-slate-type="pm_paragraph" data-slate-object="block" data-key="1873"><span data-slate-object="text" data-key="1874"><span data-slate-leaf="true" data-offset-key="1874:0" data-first-offset="true"><span data-slate-string="true">通过Parser解析（内部是acron）</span></span></span></p></li><li data-slate-type="pm_li" data-slate-object="block" data-key="1875"><p data-number="3" data-slate-type="pm_paragraph" data-slate-object="block" data-key="1876"><span data-slate-object="text" data-key="1877"><span data-slate-leaf="true" data-offset-key="1877:0" data-first-offset="true"><span data-slate-string="true">ParserPlugins添加依赖</span></span></span></p></li></ol><h3 data-id-heading14="" data-slate-type="pm_heading" data-slate-object="block" data-key="1878"><span data-slate-object="text" data-key="1879"><span data-slate-leaf="true" data-offset-key="1879:0" data-first-offset="true"><span data-slate-string="true">四、loader</span></span></span></h3><h5 data-id-heading15="" data-slate-type="pm_heading" data-slate-object="block" data-key="1880"><span data-slate-object="text" data-key="1881"><span data-slate-leaf="true" data-offset-key="1881:0" data-first-offset="true"><span data-slate-string="true">1、loader是什么？</span></span></span></h5><ol data-slate-type="pm_ol" data-slate-object="block" data-key="1882"><li data-slate-type="pm_li" data-slate-object="block" data-key="1883"><p data-number="1" data-slate-type="pm_paragraph" data-slate-object="block" data-key="1884"><span data-slate-object="text" data-key="1885"><span data-slate-leaf="true" data-offset-key="1885:0" data-first-offset="true"><span data-slate-string="true">概念</span></span></span></p></li></ol><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="1886"><span data-slate-object="text" data-key="1887"><span data-slate-leaf="true" data-offset-key="1887:0" data-first-offset="true"><span data-slate-string="true">loader只是一个导出为函数的JavaScript模块</span></span></span></p><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="1888"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div><div data-class-line="" data-line-number="9"></div><div data-class-line="" data-line-number="10"></div><div data-class-line="" data-line-number="11"></div><div data-class-line="" data-line-number="12"></div><div data-class-line="" data-line-number="13"></div><div data-class-line="" data-line-number="14"></div><div data-class-line="" data-line-number="15"></div><div data-class-line="" data-line-number="16"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1889"><span data-slate-object="text" data-key="1890"><span data-slate-leaf="true" data-offset-key="1890:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 同步loader</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1891"><span data-slate-object="text" data-key="1892"><span data-slate-leaf="true" data-offset-key="1892:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">module</span></span></span></span><span data-slate-object="text" data-key="1893"><span data-slate-leaf="true" data-offset-key="1893:0" data-first-offset="true"><span data-slate-string="true">.exports = </span></span></span><span data-slate-object="text" data-key="1894"><span data-slate-leaf="true" data-offset-key="1894:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">function</span></span></span></span></span><span data-slate-object="text" data-key="1895"><span data-slate-leaf="true" data-offset-key="1895:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">(</span></span></span></span><span data-slate-object="text" data-key="1896"><span data-slate-leaf="true" data-offset-key="1896:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">content,map,meta</span></span></span></span></span><span data-slate-object="text" data-key="1897"><span data-slate-leaf="true" data-offset-key="1897:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">)</span></span></span></span><span data-slate-object="text" data-key="1898"><span data-slate-leaf="true" data-offset-key="1898:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1899"><span data-slate-object="text" data-key="1900"><span data-slate-leaf="true" data-offset-key="1900:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="1901"><span data-slate-leaf="true" data-offset-key="1901:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="1902"><span data-slate-leaf="true" data-offset-key="1902:0" data-first-offset="true"><span data-slate-string="true"> someSyncOperation(content)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1903"><span data-slate-object="text" data-key="1904"><span data-slate-leaf="true" data-offset-key="1904:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1905"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1906"><span data-slate-object="text" data-key="1907"><span data-slate-leaf="true" data-offset-key="1907:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 异步loader:使用 this.async 来获取 callback 函数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1908"><span data-slate-object="text" data-key="1909"><span data-slate-leaf="true" data-offset-key="1909:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">module</span></span></span></span><span data-slate-object="text" data-key="1910"><span data-slate-leaf="true" data-offset-key="1910:0" data-first-offset="true"><span data-slate-string="true">.exports = </span></span></span><span data-slate-object="text" data-key="1911"><span data-slate-leaf="true" data-offset-key="1911:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">function</span></span></span></span></span><span data-slate-object="text" data-key="1912"><span data-slate-leaf="true" data-offset-key="1912:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">(</span></span></span></span><span data-slate-object="text" data-key="1913"><span data-slate-leaf="true" data-offset-key="1913:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">content,map,meta</span></span></span></span></span><span data-slate-object="text" data-key="1914"><span data-slate-leaf="true" data-offset-key="1914:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">)</span></span></span></span><span data-slate-object="text" data-key="1915"><span data-slate-leaf="true" data-offset-key="1915:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1916"><span data-slate-object="text" data-key="1917"><span data-slate-leaf="true" data-offset-key="1917:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="1918"><span data-slate-leaf="true" data-offset-key="1918:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">var</span></span></span></span><span data-slate-object="text" data-key="1919"><span data-slate-leaf="true" data-offset-key="1919:0" data-first-offset="true"><span data-slate-string="true"> callback = </span></span></span><span data-slate-object="text" data-key="1920"><span data-slate-leaf="true" data-offset-key="1920:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="1921"><span data-slate-leaf="true" data-offset-key="1921:0" data-first-offset="true"><span data-slate-string="true">.async()</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1922"><span data-slate-object="text" data-key="1923"><span data-slate-leaf="true" data-offset-key="1923:0" data-first-offset="true"><span data-slate-string="true">  someAsyncOperation(content, </span></span></span><span data-slate-object="text" data-key="1924"><span data-slate-leaf="true" data-offset-key="1924:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">function</span></span></span></span></span><span data-slate-object="text" data-key="1925"><span data-slate-leaf="true" data-offset-key="1925:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">(</span></span></span></span><span data-slate-object="text" data-key="1926"><span data-slate-leaf="true" data-offset-key="1926:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">err, result</span></span></span></span></span><span data-slate-object="text" data-key="1927"><span data-slate-leaf="true" data-offset-key="1927:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">) </span></span></span></span><span data-slate-object="text" data-key="1928"><span data-slate-leaf="true" data-offset-key="1928:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1929"><span data-slate-object="text" data-key="1930"><span data-slate-leaf="true" data-offset-key="1930:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="1931"><span data-slate-leaf="true" data-offset-key="1931:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="1932"><span data-slate-leaf="true" data-offset-key="1932:0" data-first-offset="true"><span data-slate-string="true"> (err) </span></span></span><span data-slate-object="text" data-key="1933"><span data-slate-leaf="true" data-offset-key="1933:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="1934"><span data-slate-leaf="true" data-offset-key="1934:0" data-first-offset="true"><span data-slate-string="true"> callback(err);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1935"><span data-slate-object="text" data-key="1936"><span data-slate-leaf="true" data-offset-key="1936:0" data-first-offset="true"><span data-slate-string="true">    callback(</span></span></span><span data-slate-object="text" data-key="1937"><span data-slate-leaf="true" data-offset-key="1937:0" data-first-offset="true"><span class="hljs-literal" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">null</span></span></span></span><span data-slate-object="text" data-key="1938"><span data-slate-leaf="true" data-offset-key="1938:0" data-first-offset="true"><span data-slate-string="true">, result, map, meta);</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1939"><span data-slate-object="text" data-key="1940"><span data-slate-leaf="true" data-offset-key="1940:0" data-first-offset="true"><span data-slate-string="true">  });</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1941"><span data-slate-object="text" data-key="1942"><span data-slate-leaf="true" data-offset-key="1942:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1943"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1944"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1945"></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 330px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><ol data-slate-type="pm_ol" data-slate-object="block" data-key="1946"><li data-slate-type="pm_li" data-slate-object="block" data-key="1947"><p data-number="2" data-slate-type="pm_paragraph" data-slate-object="block" data-key="1948"><span data-slate-object="text" data-key="1949"><span data-slate-leaf="true" data-offset-key="1949:0" data-first-offset="true"><span data-slate-string="true">多loader的执行顺序</span></span></span></p></li></ol><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="1950"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div><div data-class-line="" data-line-number="9"></div><div data-class-line="" data-line-number="10"></div><div data-class-line="" data-line-number="11"></div><div data-class-line="" data-line-number="12"></div><div data-class-line="" data-line-number="13"></div><div data-class-line="" data-line-number="14"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1951"><span data-slate-object="text" data-key="1952"><span data-slate-leaf="true" data-offset-key="1952:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">module</span></span></span></span><span data-slate-object="text" data-key="1953"><span data-slate-leaf="true" data-offset-key="1953:0" data-first-offset="true"><span data-slate-string="true">.exports = {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1954"><span data-slate-object="text" data-key="1955"><span data-slate-leaf="true" data-offset-key="1955:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="1956"><span data-slate-leaf="true" data-offset-key="1956:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">module</span></span></span></span><span data-slate-object="text" data-key="1957"><span data-slate-leaf="true" data-offset-key="1957:0" data-first-offset="true"><span data-slate-string="true">:{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1958"><span data-slate-object="text" data-key="1959"><span data-slate-leaf="true" data-offset-key="1959:0" data-first-offset="true"><span data-slate-string="true">  	</span></span></span><span data-slate-object="text" data-key="1960"><span data-slate-leaf="true" data-offset-key="1960:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">rules</span></span></span></span><span data-slate-object="text" data-key="1961"><span data-slate-leaf="true" data-offset-key="1961:0" data-first-offset="true"><span data-slate-string="true">:[</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1962"><span data-slate-object="text" data-key="1963"><span data-slate-leaf="true" data-offset-key="1963:0" data-first-offset="true"><span data-slate-string="true">      {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1964"><span data-slate-object="text" data-key="1965"><span data-slate-leaf="true" data-offset-key="1965:0" data-first-offset="true"><span data-slate-string="true">      	</span></span></span><span data-slate-object="text" data-key="1966"><span data-slate-leaf="true" data-offset-key="1966:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">test</span></span></span></span><span data-slate-object="text" data-key="1967"><span data-slate-leaf="true" data-offset-key="1967:0" data-first-offset="true"><span data-slate-string="true">:</span></span></span><span data-slate-object="text" data-key="1968"><span data-slate-leaf="true" data-offset-key="1968:0" data-first-offset="true"><span class="hljs-regexp" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/\.less$/</span></span></span></span><span data-slate-object="text" data-key="1969"><span data-slate-leaf="true" data-offset-key="1969:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1970"><span data-slate-object="text" data-key="1971"><span data-slate-leaf="true" data-offset-key="1971:0" data-first-offset="true"><span data-slate-string="true">        use:[</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1972"><span data-slate-object="text" data-key="1973"><span data-slate-leaf="true" data-offset-key="1973:0" data-first-offset="true"><span data-slate-string="true">        	</span></span></span><span data-slate-object="text" data-key="1974"><span data-slate-leaf="true" data-offset-key="1974:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'style-loader'</span></span></span></span><span data-slate-object="text" data-key="1975"><span data-slate-leaf="true" data-offset-key="1975:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1976"><span data-slate-object="text" data-key="1977"><span data-slate-leaf="true" data-offset-key="1977:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="1978"><span data-slate-leaf="true" data-offset-key="1978:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'css-loader'</span></span></span></span><span data-slate-object="text" data-key="1979"><span data-slate-leaf="true" data-offset-key="1979:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1980"><span data-slate-object="text" data-key="1981"><span data-slate-leaf="true" data-offset-key="1981:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="1982"><span data-slate-leaf="true" data-offset-key="1982:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'less-loader'</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1983"><span data-slate-object="text" data-key="1984"><span data-slate-leaf="true" data-offset-key="1984:0" data-first-offset="true"><span data-slate-string="true">        ]</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1985"><span data-slate-object="text" data-key="1986"><span data-slate-leaf="true" data-offset-key="1986:0" data-first-offset="true"><span data-slate-string="true">      }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1987"><span data-slate-object="text" data-key="1988"><span data-slate-leaf="true" data-offset-key="1988:0" data-first-offset="true"><span data-slate-string="true">    ]</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1989"><span data-slate-object="text" data-key="1990"><span data-slate-leaf="true" data-offset-key="1990:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1991"><span data-slate-object="text" data-key="1992"><span data-slate-leaf="true" data-offset-key="1992:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 290px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="1993"><span data-slate-object="text" data-key="1994"><span data-slate-leaf="true" data-offset-key="1994:0" data-first-offset="true"><span data-slate-string="true">多个loader是串行执行，顺序从后到前执行，这是因为Webpack采用的是Compose的函数组合方式：</span></span></span></p><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="1995"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="1996"><span data-slate-object="text" data-key="1997"><span data-slate-leaf="true" data-offset-key="1997:0" data-first-offset="true"><span data-slate-string="true">compose = </span></span></span><span data-slate-object="text" data-key="1998"><span data-slate-leaf="true" data-offset-key="1998:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">(</span></span></span></span><span data-slate-object="text" data-key="1999"><span data-slate-leaf="true" data-offset-key="1999:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">f,g</span></span></span></span></span><span data-slate-object="text" data-key="2000"><span data-slate-leaf="true" data-offset-key="2000:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">)=&gt;</span></span></span></span><span data-slate-object="text" data-key="2001"><span data-slate-leaf="true" data-offset-key="2001:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">(</span></span></span></span><span data-slate-object="text" data-key="2002"><span data-slate-leaf="true" data-offset-key="2002:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">...args</span></span></span></span></span><span data-slate-object="text" data-key="2003"><span data-slate-leaf="true" data-offset-key="2003:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">)=&gt;</span></span></span></span><span data-slate-object="text" data-key="2004"><span data-slate-leaf="true" data-offset-key="2004:0" data-first-offset="true"><span data-slate-string="true">f(g(...args))</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 30px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><h5 data-id-heading16="" data-slate-type="pm_heading" data-slate-object="block" data-key="2005"><span data-slate-object="text" data-key="2006"><span data-slate-leaf="true" data-offset-key="2006:0" data-first-offset="true"><span data-slate-string="true">2、开发个raw-loader</span></span></span></h5><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="2007"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2008"><span data-slate-object="text" data-key="2009"><span data-slate-leaf="true" data-offset-key="2009:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// scr/raw-loader.js</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2010"><span data-slate-object="text" data-key="2011"><span data-slate-leaf="true" data-offset-key="2011:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">module</span></span></span></span><span data-slate-object="text" data-key="2012"><span data-slate-leaf="true" data-offset-key="2012:0" data-first-offset="true"><span data-slate-string="true">.exports = </span></span></span><span data-slate-object="text" data-key="2013"><span data-slate-leaf="true" data-offset-key="2013:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">function</span></span></span></span></span><span data-slate-object="text" data-key="2014"><span data-slate-leaf="true" data-offset-key="2014:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">(</span></span></span></span><span data-slate-object="text" data-key="2015"><span data-slate-leaf="true" data-offset-key="2015:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">source</span></span></span></span></span><span data-slate-object="text" data-key="2016"><span data-slate-leaf="true" data-offset-key="2016:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">)</span></span></span></span><span data-slate-object="text" data-key="2017"><span data-slate-leaf="true" data-offset-key="2017:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2018"><span data-slate-object="text" data-key="2019"><span data-slate-leaf="true" data-offset-key="2019:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="2020"><span data-slate-leaf="true" data-offset-key="2020:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="2021"><span data-slate-leaf="true" data-offset-key="2021:0" data-first-offset="true"><span data-slate-string="true"> json = </span></span></span><span data-slate-object="text" data-key="2022"><span data-slate-leaf="true" data-offset-key="2022:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">JSON</span></span></span></span><span data-slate-object="text" data-key="2023"><span data-slate-leaf="true" data-offset-key="2023:0" data-first-offset="true"><span data-slate-string="true">.stringify(source)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2024"><span data-slate-object="text" data-key="2025"><span data-slate-leaf="true" data-offset-key="2025:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="2026"><span data-slate-leaf="true" data-offset-key="2026:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 为了安全，处理ES6模板字符串问题</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2027"><span data-slate-object="text" data-key="2028"><span data-slate-leaf="true" data-offset-key="2028:0" data-first-offset="true"><span data-slate-string="true">  .replace(</span></span></span><span data-slate-object="text" data-key="2029"><span data-slate-leaf="true" data-offset-key="2029:0" data-first-offset="true"><span class="hljs-regexp" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/\u2028/g</span></span></span></span><span data-slate-object="text" data-key="2030"><span data-slate-leaf="true" data-offset-key="2030:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span><span data-slate-object="text" data-key="2031"><span data-slate-leaf="true" data-offset-key="2031:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'\\u2028'</span></span></span></span><span data-slate-object="text" data-key="2032"><span data-slate-leaf="true" data-offset-key="2032:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2033"><span data-slate-object="text" data-key="2034"><span data-slate-leaf="true" data-offset-key="2034:0" data-first-offset="true"><span data-slate-string="true">  .replace(</span></span></span><span data-slate-object="text" data-key="2035"><span data-slate-leaf="true" data-offset-key="2035:0" data-first-offset="true"><span class="hljs-regexp" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/\u2029/g</span></span></span></span><span data-slate-object="text" data-key="2036"><span data-slate-leaf="true" data-offset-key="2036:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span><span data-slate-object="text" data-key="2037"><span data-slate-leaf="true" data-offset-key="2037:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'\\u2029'</span></span></span></span><span data-slate-object="text" data-key="2038"><span data-slate-leaf="true" data-offset-key="2038:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2039"><span data-slate-object="text" data-key="2040"><span data-slate-leaf="true" data-offset-key="2040:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="2041"><span data-slate-leaf="true" data-offset-key="2041:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="2042"><span data-slate-leaf="true" data-offset-key="2042:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="2043"><span data-slate-leaf="true" data-offset-key="2043:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">`export default </span></span></span></span><span data-slate-object="text" data-key="2044"><span data-slate-leaf="true" data-offset-key="2044:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-subst" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">${json}</span></span></span></span></span><span data-slate-object="text" data-key="2045"><span data-slate-leaf="true" data-offset-key="2045:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">`</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2046"><span data-slate-object="text" data-key="2047"><span data-slate-leaf="true" data-offset-key="2047:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 170px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><h5 data-id-heading17="" data-slate-type="pm_heading" data-slate-object="block" data-key="2048"><span data-slate-object="text" data-key="2049"><span data-slate-leaf="true" data-offset-key="2049:0" data-first-offset="true"><span data-slate-string="true">3、loader-runner调试工具</span></span></span></h5><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="2050"><span data-slate-object="text" data-key="2051"><span data-slate-leaf="true" data-offset-key="2051:0" data-first-offset="true"><span data-slate-string="true">loader不同于plugin，可以独立于webpack进行开发调试。</span></span></span></p><ol data-slate-type="pm_ol" data-slate-object="block" data-key="2052"><li data-slate-type="pm_li" data-slate-object="block" data-key="2053"><p data-number="1" data-slate-type="pm_paragraph" data-slate-object="block" data-key="2054"><span data-slate-object="text" data-key="2055"><span data-slate-leaf="true" data-offset-key="2055:0" data-first-offset="true"><span data-slate-string="true">安装</span></span></span></p></li></ol><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="2056"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2057"><span data-slate-object="text" data-key="2058"><span data-slate-leaf="true" data-offset-key="2058:0" data-first-offset="true"><span data-slate-string="true">npm install loader-runner --save-dev</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 30px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><ol data-slate-type="pm_ol" data-slate-object="block" data-key="2059"><li data-slate-type="pm_li" data-slate-object="block" data-key="2060"><p data-number="2" data-slate-type="pm_paragraph" data-slate-object="block" data-key="2061"><span data-slate-object="text" data-key="2062"><span data-slate-leaf="true" data-offset-key="2062:0" data-first-offset="true"><span data-slate-string="true">使用例子</span></span></span></p></li></ol><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="2063"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div><div data-class-line="" data-line-number="9"></div><div data-class-line="" data-line-number="10"></div><div data-class-line="" data-line-number="11"></div><div data-class-line="" data-line-number="12"></div><div data-class-line="" data-line-number="13"></div><div data-class-line="" data-line-number="14"></div><div data-class-line="" data-line-number="15"></div><div data-class-line="" data-line-number="16"></div><div data-class-line="" data-line-number="17"></div><div data-class-line="" data-line-number="18"></div><div data-class-line="" data-line-number="19"></div><div data-class-line="" data-line-number="20"></div><div data-class-line="" data-line-number="21"></div><div data-class-line="" data-line-number="22"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2064"><span data-slate-object="text" data-key="2065"><span data-slate-leaf="true" data-offset-key="2065:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// test-loader.js 调试 raw-loader.js</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2066"><span data-slate-object="text" data-key="2067"><span data-slate-leaf="true" data-offset-key="2067:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">import</span></span></span></span><span data-slate-object="text" data-key="2068"><span data-slate-leaf="true" data-offset-key="2068:0" data-first-offset="true"><span data-slate-string="true"> { runLoaders } </span></span></span><span data-slate-object="text" data-key="2069"><span data-slate-leaf="true" data-offset-key="2069:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">from</span></span></span></span><span data-slate-object="text" data-key="2070"><span data-slate-leaf="true" data-offset-key="2070:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="2071"><span data-slate-leaf="true" data-offset-key="2071:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">"loader-runner"</span></span></span></span><span data-slate-object="text" data-key="2072"><span data-slate-leaf="true" data-offset-key="2072:0" data-first-offset="true"><span data-slate-string="true">;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2073"><span data-slate-object="text" data-key="2074"><span data-slate-leaf="true" data-offset-key="2074:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="2075"><span data-slate-leaf="true" data-offset-key="2075:0" data-first-offset="true"><span data-slate-string="true"> fs = </span></span></span><span data-slate-object="text" data-key="2076"><span data-slate-leaf="true" data-offset-key="2076:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">require</span></span></span></span><span data-slate-object="text" data-key="2077"><span data-slate-leaf="true" data-offset-key="2077:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="2078"><span data-slate-leaf="true" data-offset-key="2078:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'fs'</span></span></span></span><span data-slate-object="text" data-key="2079"><span data-slate-leaf="true" data-offset-key="2079:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2080"><span data-slate-object="text" data-key="2081"><span data-slate-leaf="true" data-offset-key="2081:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="2082"><span data-slate-leaf="true" data-offset-key="2082:0" data-first-offset="true"><span data-slate-string="true"> path = </span></span></span><span data-slate-object="text" data-key="2083"><span data-slate-leaf="true" data-offset-key="2083:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">require</span></span></span></span><span data-slate-object="text" data-key="2084"><span data-slate-leaf="true" data-offset-key="2084:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="2085"><span data-slate-leaf="true" data-offset-key="2085:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'path'</span></span></span></span><span data-slate-object="text" data-key="2086"><span data-slate-leaf="true" data-offset-key="2086:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2087"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2088"><span data-slate-object="text" data-key="2089"><span data-slate-leaf="true" data-offset-key="2089:0" data-first-offset="true"><span data-slate-string="true">runLoaders({</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2090"><span data-slate-object="text" data-key="2091"><span data-slate-leaf="true" data-offset-key="2091:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="2092"><span data-slate-leaf="true" data-offset-key="2092:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 资源的绝对路径（可以增加查询字符串，如?query）</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2093"><span data-slate-object="text" data-key="2094"><span data-slate-leaf="true" data-offset-key="2094:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="2095"><span data-slate-leaf="true" data-offset-key="2095:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">resource</span></span></span></span><span data-slate-object="text" data-key="2096"><span data-slate-leaf="true" data-offset-key="2096:0" data-first-offset="true"><span data-slate-string="true">:</span></span></span><span data-slate-object="text" data-key="2097"><span data-slate-leaf="true" data-offset-key="2097:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'./test.txt'</span></span></span></span><span data-slate-object="text" data-key="2098"><span data-slate-leaf="true" data-offset-key="2098:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2099"><span data-slate-object="text" data-key="2100"><span data-slate-leaf="true" data-offset-key="2100:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="2101"><span data-slate-leaf="true" data-offset-key="2101:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// loader的绝对路径可以增加查询字符串）</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2102"><span data-slate-object="text" data-key="2103"><span data-slate-leaf="true" data-offset-key="2103:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="2104"><span data-slate-leaf="true" data-offset-key="2104:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">loaders</span></span></span></span><span data-slate-object="text" data-key="2105"><span data-slate-leaf="true" data-offset-key="2105:0" data-first-offset="true"><span data-slate-string="true">:[path.resolve(__dirname,</span></span></span><span data-slate-object="text" data-key="2106"><span data-slate-leaf="true" data-offset-key="2106:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'./loader/raw-loader.js'</span></span></span></span><span data-slate-object="text" data-key="2107"><span data-slate-leaf="true" data-offset-key="2107:0" data-first-offset="true"><span data-slate-string="true">)],   </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2108"><span data-slate-object="text" data-key="2109"><span data-slate-leaf="true" data-offset-key="2109:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="2110"><span data-slate-leaf="true" data-offset-key="2110:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 基础上下文之外的额外loader上下文</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2111"><span data-slate-object="text" data-key="2112"><span data-slate-leaf="true" data-offset-key="2112:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="2113"><span data-slate-leaf="true" data-offset-key="2113:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">context</span></span></span></span><span data-slate-object="text" data-key="2114"><span data-slate-leaf="true" data-offset-key="2114:0" data-first-offset="true"><span data-slate-string="true">:{     </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2115"><span data-slate-object="text" data-key="2116"><span data-slate-leaf="true" data-offset-key="2116:0" data-first-offset="true"><span data-slate-string="true">  	</span></span></span><span data-slate-object="text" data-key="2117"><span data-slate-leaf="true" data-offset-key="2117:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">minimize</span></span></span></span><span data-slate-object="text" data-key="2118"><span data-slate-leaf="true" data-offset-key="2118:0" data-first-offset="true"><span data-slate-string="true">:</span></span></span><span data-slate-object="text" data-key="2119"><span data-slate-leaf="true" data-offset-key="2119:0" data-first-offset="true"><span class="hljs-literal" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">true</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2120"><span data-slate-object="text" data-key="2121"><span data-slate-leaf="true" data-offset-key="2121:0" data-first-offset="true"><span data-slate-string="true">  },</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2122"><span data-slate-object="text" data-key="2123"><span data-slate-leaf="true" data-offset-key="2123:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="2124"><span data-slate-leaf="true" data-offset-key="2124:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 读取资源函数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2125"><span data-slate-object="text" data-key="2126"><span data-slate-leaf="true" data-offset-key="2126:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="2127"><span data-slate-leaf="true" data-offset-key="2127:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">readResource</span></span></span></span><span data-slate-object="text" data-key="2128"><span data-slate-leaf="true" data-offset-key="2128:0" data-first-offset="true"><span data-slate-string="true">:fs.readFile.bind(fs) </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2129"><span data-slate-object="text" data-key="2130"><span data-slate-leaf="true" data-offset-key="2130:0" data-first-offset="true"><span data-slate-string="true">}，</span></span></span><span data-slate-object="text" data-key="2131"><span data-slate-leaf="true" data-offset-key="2131:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">function</span></span></span></span></span><span data-slate-object="text" data-key="2132"><span data-slate-leaf="true" data-offset-key="2132:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">(</span></span></span></span><span data-slate-object="text" data-key="2133"><span data-slate-leaf="true" data-offset-key="2133:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">err,result</span></span></span></span></span><span data-slate-object="text" data-key="2134"><span data-slate-leaf="true" data-offset-key="2134:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">)</span></span></span></span><span data-slate-object="text" data-key="2135"><span data-slate-leaf="true" data-offset-key="2135:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2136"><span data-slate-object="text" data-key="2137"><span data-slate-leaf="true" data-offset-key="2137:0" data-first-offset="true"><span data-slate-string="true">  err?</span></span></span><span data-slate-object="text" data-key="2138"><span data-slate-leaf="true" data-offset-key="2138:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">console</span></span></span></span><span data-slate-object="text" data-key="2139"><span data-slate-leaf="true" data-offset-key="2139:0" data-first-offset="true"><span data-slate-string="true">.log(err):</span></span></span><span data-slate-object="text" data-key="2140"><span data-slate-leaf="true" data-offset-key="2140:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">console</span></span></span></span><span data-slate-object="text" data-key="2141"><span data-slate-leaf="true" data-offset-key="2141:0" data-first-offset="true"><span data-slate-string="true">.log(result)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2142"><span data-slate-object="text" data-key="2143"><span data-slate-leaf="true" data-offset-key="2143:0" data-first-offset="true"><span data-slate-string="true">})</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2144"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2145"><span data-slate-object="text" data-key="2146"><span data-slate-leaf="true" data-offset-key="2146:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 运行测试</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2147"><span data-slate-object="text" data-key="2148"><span data-slate-leaf="true" data-offset-key="2148:0" data-first-offset="true"><span data-slate-string="true">node test-loader.js</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 450px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="2149"><span data-slate-object="text" data-key="2150"><span data-slate-leaf="true" data-offset-key="2150:0" data-first-offset="true"><span data-slate-string="true">loader中如何进行异常处理，使用缓存，产生一个文件，详细可以查看：</span></span></span><a data-slate-type="pm_link" data-slate-object="inline" data-key="2151" href="https://www.webpackjs.com/api/loaders/"><span data-slate-object="text" data-key="2152"><span data-slate-leaf="true" data-offset-key="2152:0" data-first-offset="true"><span data-slate-string="true">loader api 官方文档</span></span></span></a></p><h3 data-id-heading18="" data-slate-type="pm_heading" data-slate-object="block" data-key="2153"><span data-slate-object="text" data-key="2154"><span data-slate-leaf="true" data-offset-key="2154:0" data-first-offset="true"><span data-slate-string="true">五、plugin</span></span></span></h3><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="2155"><span data-slate-object="text" data-key="2156"><span data-slate-leaf="true" data-offset-key="2156:0" data-first-offset="true"><span data-slate-string="true">插件没有像loader那样的独立运行环境，只能在webpack里面运行。</span></span></span></p><h5 data-id-heading19="" data-slate-type="pm_heading" data-slate-object="block" data-key="2157"><span data-slate-object="text" data-key="2158"><span data-slate-leaf="true" data-offset-key="2158:0" data-first-offset="true"><span data-slate-string="true">1、基本结构</span></span></span></h5><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="2159"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div><div data-class-line="" data-line-number="9"></div><div data-class-line="" data-line-number="10"></div><div data-class-line="" data-line-number="11"></div><div data-class-line="" data-line-number="12"></div><div data-class-line="" data-line-number="13"></div><div data-class-line="" data-line-number="14"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2160"><span data-slate-object="text" data-key="2161"><span data-slate-leaf="true" data-offset-key="2161:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">class</span></span></span></span></span><span data-slate-object="text" data-key="2162"><span data-slate-leaf="true" data-offset-key="2162:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="2163"><span data-slate-leaf="true" data-offset-key="2163:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">Plugin</span></span></span></span></span><span data-slate-object="text" data-key="2164"><span data-slate-leaf="true" data-offset-key="2164:0" data-first-offset="true"><span data-slate-string="true">{    </span></span></span><span data-slate-object="text" data-key="2165"><span data-slate-leaf="true" data-offset-key="2165:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 插件名称</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2166"><span data-slate-object="text" data-key="2167"><span data-slate-leaf="true" data-offset-key="2167:0" data-first-offset="true"><span data-slate-string="true">	</span></span></span><span data-slate-object="text" data-key="2168"><span data-slate-leaf="true" data-offset-key="2168:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">constructor</span></span></span></span><span data-slate-object="text" data-key="2169"><span data-slate-leaf="true" data-offset-key="2169:0" data-first-offset="true"><span data-slate-string="true">(options){</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2170"><span data-slate-object="text" data-key="2171"><span data-slate-leaf="true" data-offset-key="2171:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="2172"><span data-slate-leaf="true" data-offset-key="2172:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 通过构造函数获取传递参数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2173"><span data-slate-object="text" data-key="2174"><span data-slate-leaf="true" data-offset-key="2174:0" data-first-offset="true"><span data-slate-string="true">  	</span></span></span><span data-slate-object="text" data-key="2175"><span data-slate-leaf="true" data-offset-key="2175:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="2176"><span data-slate-leaf="true" data-offset-key="2176:0" data-first-offset="true"><span data-slate-string="true">.options = options;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2177"><span data-slate-object="text" data-key="2178"><span data-slate-leaf="true" data-offset-key="2178:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2179"><span data-slate-object="text" data-key="2180"><span data-slate-leaf="true" data-offset-key="2180:0" data-first-offset="true"><span data-slate-string="true">  apply(compiler){    </span></span></span><span data-slate-object="text" data-key="2181"><span data-slate-leaf="true" data-offset-key="2181:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 插件上的apply方法</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2182"><span data-slate-object="text" data-key="2183"><span data-slate-leaf="true" data-offset-key="2183:0" data-first-offset="true"><span data-slate-string="true">  	</span></span></span><span data-slate-object="text" data-key="2184"><span data-slate-leaf="true" data-offset-key="2184:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 监听钩子触发事件</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2185"><span data-slate-object="text" data-key="2186"><span data-slate-leaf="true" data-offset-key="2186:0" data-first-offset="true"><span data-slate-string="true">    compiler.hooks.done.tap(</span></span></span><span data-slate-object="text" data-key="2187"><span data-slate-leaf="true" data-offset-key="2187:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'Plugin'</span></span></span></span><span data-slate-object="text" data-key="2188"><span data-slate-leaf="true" data-offset-key="2188:0" data-first-offset="true"><span data-slate-string="true">,(stats)=&gt;{ </span></span></span><span data-slate-object="text" data-key="2189"><span data-slate-leaf="true" data-offset-key="2189:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// done钩子触发，stats作为参数</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2190"><span data-slate-object="text" data-key="2191"><span data-slate-leaf="true" data-offset-key="2191:0" data-first-offset="true"><span data-slate-string="true">    	</span></span></span><span data-slate-object="text" data-key="2192"><span data-slate-leaf="true" data-offset-key="2192:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 插件处理逻辑</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2193"><span data-slate-object="text" data-key="2194"><span data-slate-leaf="true" data-offset-key="2194:0" data-first-offset="true"><span data-slate-string="true">    })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2195"><span data-slate-object="text" data-key="2196"><span data-slate-leaf="true" data-offset-key="2196:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2197"><span data-slate-object="text" data-key="2198"><span data-slate-leaf="true" data-offset-key="2198:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2199"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2200"><span data-slate-object="text" data-key="2201"><span data-slate-leaf="true" data-offset-key="2201:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">module</span></span></span></span><span data-slate-object="text" data-key="2202"><span data-slate-leaf="true" data-offset-key="2202:0" data-first-offset="true"><span data-slate-string="true">.exports = Plugin;</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 290px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><h5 data-id-heading20="" data-slate-type="pm_heading" data-slate-object="block" data-key="2203"><span data-slate-object="text" data-key="2204"><span data-slate-leaf="true" data-offset-key="2204:0" data-first-offset="true"><span data-slate-string="true">2、插件的使用</span></span></span></h5><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="2205"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div><div data-class-line="" data-line-number="9"></div><div data-class-line="" data-line-number="10"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2206"><span data-slate-object="text" data-key="2207"><span data-slate-leaf="true" data-offset-key="2207:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">module</span></span></span></span><span data-slate-object="text" data-key="2208"><span data-slate-leaf="true" data-offset-key="2208:0" data-first-offset="true"><span data-slate-string="true">.exports = {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2209"><span data-slate-object="text" data-key="2210"><span data-slate-leaf="true" data-offset-key="2210:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="2211"><span data-slate-leaf="true" data-offset-key="2211:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">entry</span></span></span></span><span data-slate-object="text" data-key="2212"><span data-slate-leaf="true" data-offset-key="2212:0" data-first-offset="true"><span data-slate-string="true">:</span></span></span><span data-slate-object="text" data-key="2213"><span data-slate-leaf="true" data-offset-key="2213:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'./index.js'</span></span></span></span><span data-slate-object="text" data-key="2214"><span data-slate-leaf="true" data-offset-key="2214:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2215"><span data-slate-object="text" data-key="2216"><span data-slate-leaf="true" data-offset-key="2216:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="2217"><span data-slate-leaf="true" data-offset-key="2217:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">output</span></span></span></span><span data-slate-object="text" data-key="2218"><span data-slate-leaf="true" data-offset-key="2218:0" data-first-offset="true"><span data-slate-string="true">:{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2219"><span data-slate-object="text" data-key="2220"><span data-slate-leaf="true" data-offset-key="2220:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="2221"><span data-slate-leaf="true" data-offset-key="2221:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">path</span></span></span></span><span data-slate-object="text" data-key="2222"><span data-slate-leaf="true" data-offset-key="2222:0" data-first-offset="true"><span data-slate-string="true">:</span></span></span><span data-slate-object="text" data-key="2223"><span data-slate-leaf="true" data-offset-key="2223:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'./dist'</span></span></span></span><span data-slate-object="text" data-key="2224"><span data-slate-leaf="true" data-offset-key="2224:0" data-first-offset="true"><span data-slate-string="true">,</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2225"><span data-slate-object="text" data-key="2226"><span data-slate-leaf="true" data-offset-key="2226:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="2227"><span data-slate-leaf="true" data-offset-key="2227:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">filename</span></span></span></span><span data-slate-object="text" data-key="2228"><span data-slate-leaf="true" data-offset-key="2228:0" data-first-offset="true"><span data-slate-string="true">:</span></span></span><span data-slate-object="text" data-key="2229"><span data-slate-leaf="true" data-offset-key="2229:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'[name].js'</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2230"><span data-slate-object="text" data-key="2231"><span data-slate-leaf="true" data-offset-key="2231:0" data-first-offset="true"><span data-slate-string="true">  },</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2232"><span data-slate-object="text" data-key="2233"><span data-slate-leaf="true" data-offset-key="2233:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="2234"><span data-slate-leaf="true" data-offset-key="2234:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">plugins</span></span></span></span><span data-slate-object="text" data-key="2235"><span data-slate-leaf="true" data-offset-key="2235:0" data-first-offset="true"><span data-slate-string="true">:[</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2236"><span data-slate-object="text" data-key="2237"><span data-slate-leaf="true" data-offset-key="2237:0" data-first-offset="true"><span data-slate-string="true">  	</span></span></span><span data-slate-object="text" data-key="2238"><span data-slate-leaf="true" data-offset-key="2238:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">new</span></span></span></span><span data-slate-object="text" data-key="2239"><span data-slate-leaf="true" data-offset-key="2239:0" data-first-offset="true"><span data-slate-string="true"> Plugin({配置参数})</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2240"><span data-slate-object="text" data-key="2241"><span data-slate-leaf="true" data-offset-key="2241:0" data-first-offset="true"><span data-slate-string="true">  ]</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2242"><span data-slate-object="text" data-key="2243"><span data-slate-leaf="true" data-offset-key="2243:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 210px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><h5 data-id-heading21="" data-slate-type="pm_heading" data-slate-object="block" data-key="2244"><span data-slate-object="text" data-key="2245"><span data-slate-leaf="true" data-offset-key="2245:0" data-first-offset="true"><span data-slate-string="true">3、CorsPlugin跨域插件</span></span></span></h5><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="2246"><span data-slate-object="text" data-key="2247"><span data-slate-leaf="true" data-offset-key="2247:0" data-first-offset="true"><span data-slate-string="true">用于处理网页域名和要载入的静态文件存放的站点域名不一致时候的跨域问题。</span></span></span></p><div data-lang="javascript" data-slate-type="pm_blockcode" data-slate-object="block" data-key="2248"><div data-class-copy=""><span></span></div><div data-class-index=""><div data-class-line="" data-line-number="1"></div><div data-class-line="" data-line-number="2"></div><div data-class-line="" data-line-number="3"></div><div data-class-line="" data-line-number="4"></div><div data-class-line="" data-line-number="5"></div><div data-class-line="" data-line-number="6"></div><div data-class-line="" data-line-number="7"></div><div data-class-line="" data-line-number="8"></div><div data-class-line="" data-line-number="9"></div><div data-class-line="" data-line-number="10"></div><div data-class-line="" data-line-number="11"></div><div data-class-line="" data-line-number="12"></div><div data-class-line="" data-line-number="13"></div><div data-class-line="" data-line-number="14"></div><div data-class-line="" data-line-number="15"></div><div data-class-line="" data-line-number="16"></div><div data-class-line="" data-line-number="17"></div><div data-class-line="" data-line-number="18"></div><div data-class-line="" data-line-number="19"></div><div data-class-line="" data-line-number="20"></div><div data-class-line="" data-line-number="21"></div><div data-class-line="" data-line-number="22"></div><div data-class-line="" data-line-number="23"></div><div data-class-line="" data-line-number="24"></div><div data-class-line="" data-line-number="25"></div><div data-class-line="" data-line-number="26"></div><div data-class-line="" data-line-number="27"></div><div data-class-line="" data-line-number="28"></div><div data-class-line="" data-line-number="29"></div><div data-class-line="" data-line-number="30"></div><div data-class-line="" data-line-number="31"></div><div data-class-line="" data-line-number="32"></div><div data-class-line="" data-line-number="33"></div><div data-class-line="" data-line-number="34"></div><div data-class-line="" data-line-number="35"></div><div data-class-line="" data-line-number="36"></div><div data-class-line="" data-line-number="37"></div><div data-class-line="" data-line-number="38"></div><div data-class-line="" data-line-number="39"></div><div data-class-line="" data-line-number="40"></div><div data-class-line="" data-line-number="41"></div><div data-class-line="" data-line-number="42"></div><div data-class-line="" data-line-number="43"></div><div data-class-line="" data-line-number="44"></div><div data-class-line="" data-line-number="45"></div><div data-class-line="" data-line-number="46"></div><div data-class-line="" data-line-number="47"></div><div data-class-line="" data-line-number="48"></div><div data-class-line="" data-line-number="49"></div><div data-class-line="" data-line-number="50"></div><div data-class-line="" data-line-number="51"></div><div data-class-line="" data-line-number="52"></div><div data-class-line="" data-line-number="53"></div><div data-class-line="" data-line-number="54"></div><div data-class-line="" data-line-number="55"></div><div data-class-line="" data-line-number="56"></div><div data-class-line="" data-line-number="57"></div><div data-class-line="" data-line-number="58"></div><div data-class-line="" data-line-number="59"></div><div data-class-line="" data-line-number="60"></div><div data-class-line="" data-line-number="61"></div><div data-class-line="" data-line-number="62"></div><div data-class-line="" data-line-number="63"></div><div data-class-line="" data-line-number="64"></div><div data-class-line="" data-line-number="65"></div><div data-class-line="" data-line-number="66"></div><div data-class-line="" data-line-number="67"></div><div data-class-line="" data-line-number="68"></div><div data-class-line="" data-line-number="69"></div><div data-class-line="" data-line-number="70"></div><div data-class-line="" data-line-number="71"></div><div data-class-line="" data-line-number="72"></div><div data-class-line="" data-line-number="73"></div><div data-class-line="" data-line-number="74"></div><div data-class-line="" data-line-number="75"></div><div data-class-line="" data-line-number="76"></div><div data-class-line="" data-line-number="77"></div><div data-class-line="" data-line-number="78"></div><div data-class-line="" data-line-number="79"></div><div data-class-line="" data-line-number="80"></div></div><div data-class-list=""><div data-simplebar="init"><div class="simplebar-wrapper" style="margin: 0px;"><div class="simplebar-height-auto-observer-wrapper"><div class="simplebar-height-auto-observer"></div></div><div class="simplebar-mask"><div class="simplebar-offset" style="right: 0px; bottom: 0px;"><div class="simplebar-content-wrapper" style="height: auto; overflow: hidden;"><div class="simplebar-content" style="padding: 0px;"><pre lang="javascript" data-origin="pm_code_preview"><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2249"><span data-slate-object="text" data-key="2250"><span data-slate-leaf="true" data-offset-key="2250:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">module</span></span></span></span><span data-slate-object="text" data-key="2251"><span data-slate-leaf="true" data-offset-key="2251:0" data-first-offset="true"><span data-slate-string="true">.exports = </span></span></span><span data-slate-object="text" data-key="2252"><span data-slate-leaf="true" data-offset-key="2252:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">class</span></span></span></span></span><span data-slate-object="text" data-key="2253"><span data-slate-leaf="true" data-offset-key="2253:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="2254"><span data-slate-leaf="true" data-offset-key="2254:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-title" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">CorsPlugin</span></span></span></span></span><span data-slate-object="text" data-key="2255"><span data-slate-leaf="true" data-offset-key="2255:0" data-first-offset="true"><span class="hljs-class" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> </span></span></span></span><span data-slate-object="text" data-key="2256"><span data-slate-leaf="true" data-offset-key="2256:0" data-first-offset="true"><span data-slate-string="true">{</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2257"><span data-slate-object="text" data-key="2258"><span data-slate-leaf="true" data-offset-key="2258:0" data-first-offset="true"><span data-slate-string="true">  </span></span></span><span data-slate-object="text" data-key="2259"><span data-slate-leaf="true" data-offset-key="2259:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">constructor</span></span></span></span><span data-slate-object="text" data-key="2260"><span data-slate-leaf="true" data-offset-key="2260:0" data-first-offset="true"><span data-slate-string="true"> ({ publicPath, crossorigin, integrity }) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2261"><span data-slate-object="text" data-key="2262"><span data-slate-leaf="true" data-offset-key="2262:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="2263"><span data-slate-leaf="true" data-offset-key="2263:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/*</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2264"><span data-slate-object="text" data-key="2265"><span data-slate-leaf="true" data-offset-key="2265:0" data-first-offset="true"><span data-slate-string="true">     * crossorigin:跨域属性</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2266"><span data-slate-object="text" data-key="2267"><span data-slate-leaf="true" data-offset-key="2267:0" data-first-offset="true"><span data-slate-string="true">     * 值：anonymous || '' ：对此元素的CORS请求将不设置凭据标志</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2268"><span data-slate-object="text" data-key="2269"><span data-slate-leaf="true" data-offset-key="2269:0" data-first-offset="true"><span data-slate-string="true">     * 值：use-credentials ：对此元素的CORS请求将设置凭证标志；这意味着请求将提供凭据</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2270"><span data-slate-object="text" data-key="2271"><span data-slate-leaf="true" data-offset-key="2271:0" data-first-offset="true"><span data-slate-string="true">     */</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2272"><span data-slate-object="text" data-key="2273"><span data-slate-leaf="true" data-offset-key="2273:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="2274"><span data-slate-leaf="true" data-offset-key="2274:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="2275"><span data-slate-leaf="true" data-offset-key="2275:0" data-first-offset="true"><span data-slate-string="true">.crossorigin = crossorigin</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2276"><span data-slate-object="text" data-key="2277"><span data-slate-leaf="true" data-offset-key="2277:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="2278"><span data-slate-leaf="true" data-offset-key="2278:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 请求完整性，供CDN 的静态文件使用，检查文身否为原版，防止使用的CDN资源被劫持篡改</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2279"><span data-slate-object="text" data-key="2280"><span data-slate-leaf="true" data-offset-key="2280:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="2281"><span data-slate-leaf="true" data-offset-key="2281:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="2282"><span data-slate-leaf="true" data-offset-key="2282:0" data-first-offset="true"><span data-slate-string="true">.integrity = integrity</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2283"><span data-slate-object="text" data-key="2284"><span data-slate-leaf="true" data-offset-key="2284:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="2285"><span data-slate-leaf="true" data-offset-key="2285:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="2286"><span data-slate-leaf="true" data-offset-key="2286:0" data-first-offset="true"><span data-slate-string="true">.publicPath = publicPath</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2287"><span data-slate-object="text" data-key="2288"><span data-slate-leaf="true" data-offset-key="2288:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2289"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2290"><span data-slate-object="text" data-key="2291"><span data-slate-leaf="true" data-offset-key="2291:0" data-first-offset="true"><span data-slate-string="true">  apply (compiler) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2292"><span data-slate-object="text" data-key="2293"><span data-slate-leaf="true" data-offset-key="2293:0" data-first-offset="true"><span data-slate-string="true">    </span></span></span><span data-slate-object="text" data-key="2294"><span data-slate-leaf="true" data-offset-key="2294:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="2295"><span data-slate-leaf="true" data-offset-key="2295:0" data-first-offset="true"><span data-slate-string="true"> ID = </span></span></span><span data-slate-object="text" data-key="2296"><span data-slate-leaf="true" data-offset-key="2296:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">`vue-cli-cors-plugin`</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2297"><span data-slate-object="text" data-key="2298"><span data-slate-leaf="true" data-offset-key="2298:0" data-first-offset="true"><span data-slate-string="true">    compiler.hooks.compilation.tap(ID, compilation =&gt; {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2299"><span data-slate-object="text" data-key="2300"><span data-slate-leaf="true" data-offset-key="2300:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="2301"><span data-slate-leaf="true" data-offset-key="2301:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/*</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2302"><span data-slate-object="text" data-key="2303"><span data-slate-leaf="true" data-offset-key="2303:0" data-first-offset="true"><span data-slate-string="true">       * Standard Subresource Integrity缩写</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2304"><span data-slate-object="text" data-key="2305"><span data-slate-leaf="true" data-offset-key="2305:0" data-first-offset="true"><span data-slate-string="true">       * 用于解析，操作，序列化，生成和验证Subresource Integrity哈希值。</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2306"><span data-slate-object="text" data-key="2307"><span data-slate-leaf="true" data-offset-key="2307:0" data-first-offset="true"><span data-slate-string="true">       */ </span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2308"><span data-slate-object="text" data-key="2309"><span data-slate-leaf="true" data-offset-key="2309:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="2310"><span data-slate-leaf="true" data-offset-key="2310:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="2311"><span data-slate-leaf="true" data-offset-key="2311:0" data-first-offset="true"><span data-slate-string="true"> ssri = </span></span></span><span data-slate-object="text" data-key="2312"><span data-slate-leaf="true" data-offset-key="2312:0" data-first-offset="true"><span class="hljs-built_in" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">require</span></span></span></span><span data-slate-object="text" data-key="2313"><span data-slate-leaf="true" data-offset-key="2313:0" data-first-offset="true"><span data-slate-string="true">(</span></span></span><span data-slate-object="text" data-key="2314"><span data-slate-leaf="true" data-offset-key="2314:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'ssri'</span></span></span></span><span data-slate-object="text" data-key="2315"><span data-slate-leaf="true" data-offset-key="2315:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2316"><span data-slate-object="text" data-key="2317"><span data-slate-leaf="true" data-offset-key="2317:0" data-first-offset="true"><span data-slate-string="true">			</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2318"><span data-slate-object="text" data-key="2319"><span data-slate-leaf="true" data-offset-key="2319:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="2320"><span data-slate-leaf="true" data-offset-key="2320:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 计算文件的integrity值</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2321"><span data-slate-object="text" data-key="2322"><span data-slate-leaf="true" data-offset-key="2322:0" data-first-offset="true"><span data-slate-string="true">      </span></span></span><span data-slate-object="text" data-key="2323"><span data-slate-leaf="true" data-offset-key="2323:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="2324"><span data-slate-leaf="true" data-offset-key="2324:0" data-first-offset="true"><span data-slate-string="true"> computeHash = </span></span></span><span data-slate-object="text" data-key="2325"><span data-slate-leaf="true" data-offset-key="2325:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">url</span></span></span></span></span><span data-slate-object="text" data-key="2326"><span data-slate-leaf="true" data-offset-key="2326:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> =&gt;</span></span></span></span><span data-slate-object="text" data-key="2327"><span data-slate-leaf="true" data-offset-key="2327:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2328"><span data-slate-object="text" data-key="2329"><span data-slate-leaf="true" data-offset-key="2329:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="2330"><span data-slate-leaf="true" data-offset-key="2330:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="2331"><span data-slate-leaf="true" data-offset-key="2331:0" data-first-offset="true"><span data-slate-string="true"> filename = url.replace(</span></span></span><span data-slate-object="text" data-key="2332"><span data-slate-leaf="true" data-offset-key="2332:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="2333"><span data-slate-leaf="true" data-offset-key="2333:0" data-first-offset="true"><span data-slate-string="true">.publicPath, </span></span></span><span data-slate-object="text" data-key="2334"><span data-slate-leaf="true" data-offset-key="2334:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">''</span></span></span></span><span data-slate-object="text" data-key="2335"><span data-slate-leaf="true" data-offset-key="2335:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2336"><span data-slate-object="text" data-key="2337"><span data-slate-leaf="true" data-offset-key="2337:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="2338"><span data-slate-leaf="true" data-offset-key="2338:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="2339"><span data-slate-leaf="true" data-offset-key="2339:0" data-first-offset="true"><span data-slate-string="true"> asset = compilation.assets[filename]</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2340"><span data-slate-object="text" data-key="2341"><span data-slate-leaf="true" data-offset-key="2341:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="2342"><span data-slate-leaf="true" data-offset-key="2342:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="2343"><span data-slate-leaf="true" data-offset-key="2343:0" data-first-offset="true"><span data-slate-string="true"> (asset) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2344"><span data-slate-object="text" data-key="2345"><span data-slate-leaf="true" data-offset-key="2345:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="2346"><span data-slate-leaf="true" data-offset-key="2346:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="2347"><span data-slate-leaf="true" data-offset-key="2347:0" data-first-offset="true"><span data-slate-string="true"> src = asset.source()</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2348"><span data-slate-object="text" data-key="2349"><span data-slate-leaf="true" data-offset-key="2349:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="2350"><span data-slate-leaf="true" data-offset-key="2350:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="2351"><span data-slate-leaf="true" data-offset-key="2351:0" data-first-offset="true"><span data-slate-string="true"> integrity = ssri.fromData(src, {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2352"><span data-slate-object="text" data-key="2353"><span data-slate-leaf="true" data-offset-key="2353:0" data-first-offset="true"><span data-slate-string="true">            </span></span></span><span data-slate-object="text" data-key="2354"><span data-slate-leaf="true" data-offset-key="2354:0" data-first-offset="true"><span class="hljs-attr" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">algorithms</span></span></span></span><span data-slate-object="text" data-key="2355"><span data-slate-leaf="true" data-offset-key="2355:0" data-first-offset="true"><span data-slate-string="true">: [</span></span></span><span data-slate-object="text" data-key="2356"><span data-slate-leaf="true" data-offset-key="2356:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'sha384'</span></span></span></span><span data-slate-object="text" data-key="2357"><span data-slate-leaf="true" data-offset-key="2357:0" data-first-offset="true"><span data-slate-string="true">]</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2358"><span data-slate-object="text" data-key="2359"><span data-slate-leaf="true" data-offset-key="2359:0" data-first-offset="true"><span data-slate-string="true">          })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2360"><span data-slate-object="text" data-key="2361"><span data-slate-leaf="true" data-offset-key="2361:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="2362"><span data-slate-leaf="true" data-offset-key="2362:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="2363"><span data-slate-leaf="true" data-offset-key="2363:0" data-first-offset="true"><span data-slate-string="true"> integrity.toString()</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2364"><span data-slate-object="text" data-key="2365"><span data-slate-leaf="true" data-offset-key="2365:0" data-first-offset="true"><span data-slate-string="true">        }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2366"><span data-slate-object="text" data-key="2367"><span data-slate-leaf="true" data-offset-key="2367:0" data-first-offset="true"><span data-slate-string="true">      }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2368"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2369"><span data-slate-object="text" data-key="2370"><span data-slate-leaf="true" data-offset-key="2370:0" data-first-offset="true"><span data-slate-string="true">      compilation.hooks.htmlWebpackPluginAlterAssetTags.tap(ID, data =&gt; {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2371"><span data-slate-object="text" data-key="2372"><span data-slate-leaf="true" data-offset-key="2372:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="2373"><span data-slate-leaf="true" data-offset-key="2373:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="2374"><span data-slate-leaf="true" data-offset-key="2374:0" data-first-offset="true"><span data-slate-string="true"> tags = [...data.head, ...data.body]</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2375"><span data-slate-object="text" data-key="2376"><span data-slate-leaf="true" data-offset-key="2376:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="2377"><span data-slate-leaf="true" data-offset-key="2377:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="2378"><span data-slate-leaf="true" data-offset-key="2378:0" data-first-offset="true"><span data-slate-string="true"> (</span></span></span><span data-slate-object="text" data-key="2379"><span data-slate-leaf="true" data-offset-key="2379:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="2380"><span data-slate-leaf="true" data-offset-key="2380:0" data-first-offset="true"><span data-slate-string="true">.crossorigin != </span></span></span><span data-slate-object="text" data-key="2381"><span data-slate-leaf="true" data-offset-key="2381:0" data-first-offset="true"><span class="hljs-literal" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">null</span></span></span></span><span data-slate-object="text" data-key="2382"><span data-slate-leaf="true" data-offset-key="2382:0" data-first-offset="true"><span data-slate-string="true">) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2383"><span data-slate-object="text" data-key="2384"><span data-slate-leaf="true" data-offset-key="2384:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="2385"><span data-slate-leaf="true" data-offset-key="2385:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// script || link 标签设置允许跨域</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2386"><span data-slate-object="text" data-key="2387"><span data-slate-leaf="true" data-offset-key="2387:0" data-first-offset="true"><span data-slate-string="true">          tags.forEach(</span></span></span><span data-slate-object="text" data-key="2388"><span data-slate-leaf="true" data-offset-key="2388:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">tag</span></span></span></span></span><span data-slate-object="text" data-key="2389"><span data-slate-leaf="true" data-offset-key="2389:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> =&gt;</span></span></span></span><span data-slate-object="text" data-key="2390"><span data-slate-leaf="true" data-offset-key="2390:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2391"><span data-slate-object="text" data-key="2392"><span data-slate-leaf="true" data-offset-key="2392:0" data-first-offset="true"><span data-slate-string="true">            </span></span></span><span data-slate-object="text" data-key="2393"><span data-slate-leaf="true" data-offset-key="2393:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="2394"><span data-slate-leaf="true" data-offset-key="2394:0" data-first-offset="true"><span data-slate-string="true"> (tag.tagName === </span></span></span><span data-slate-object="text" data-key="2395"><span data-slate-leaf="true" data-offset-key="2395:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'script'</span></span></span></span><span data-slate-object="text" data-key="2396"><span data-slate-leaf="true" data-offset-key="2396:0" data-first-offset="true"><span data-slate-string="true"> || tag.tagName === </span></span></span><span data-slate-object="text" data-key="2397"><span data-slate-leaf="true" data-offset-key="2397:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'link'</span></span></span></span><span data-slate-object="text" data-key="2398"><span data-slate-leaf="true" data-offset-key="2398:0" data-first-offset="true"><span data-slate-string="true">) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2399"><span data-slate-object="text" data-key="2400"><span data-slate-leaf="true" data-offset-key="2400:0" data-first-offset="true"><span data-slate-string="true">              tag.attributes.crossorigin = </span></span></span><span data-slate-object="text" data-key="2401"><span data-slate-leaf="true" data-offset-key="2401:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="2402"><span data-slate-leaf="true" data-offset-key="2402:0" data-first-offset="true"><span data-slate-string="true">.crossorigin</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2403"><span data-slate-object="text" data-key="2404"><span data-slate-leaf="true" data-offset-key="2404:0" data-first-offset="true"><span data-slate-string="true">            }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2405"><span data-slate-object="text" data-key="2406"><span data-slate-leaf="true" data-offset-key="2406:0" data-first-offset="true"><span data-slate-string="true">          })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2407"><span data-slate-object="text" data-key="2408"><span data-slate-leaf="true" data-offset-key="2408:0" data-first-offset="true"><span data-slate-string="true">        }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2409"><span data-slate-object="text" data-key="2410"><span data-slate-leaf="true" data-offset-key="2410:0" data-first-offset="true"><span data-slate-string="true">        </span></span></span><span data-slate-object="text" data-key="2411"><span data-slate-leaf="true" data-offset-key="2411:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="2412"><span data-slate-leaf="true" data-offset-key="2412:0" data-first-offset="true"><span data-slate-string="true"> (</span></span></span><span data-slate-object="text" data-key="2413"><span data-slate-leaf="true" data-offset-key="2413:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">this</span></span></span></span><span data-slate-object="text" data-key="2414"><span data-slate-leaf="true" data-offset-key="2414:0" data-first-offset="true"><span data-slate-string="true">.integrity) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2415"><span data-slate-object="text" data-key="2416"><span data-slate-leaf="true" data-offset-key="2416:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="2417"><span data-slate-leaf="true" data-offset-key="2417:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// 校验文件是否为原版</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2418"><span data-slate-object="text" data-key="2419"><span data-slate-leaf="true" data-offset-key="2419:0" data-first-offset="true"><span data-slate-string="true">          tags.forEach(</span></span></span><span data-slate-object="text" data-key="2420"><span data-slate-leaf="true" data-offset-key="2420:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">tag</span></span></span></span></span><span data-slate-object="text" data-key="2421"><span data-slate-leaf="true" data-offset-key="2421:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> =&gt;</span></span></span></span><span data-slate-object="text" data-key="2422"><span data-slate-leaf="true" data-offset-key="2422:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2423"><span data-slate-object="text" data-key="2424"><span data-slate-leaf="true" data-offset-key="2424:0" data-first-offset="true"><span data-slate-string="true">            </span></span></span><span data-slate-object="text" data-key="2425"><span data-slate-leaf="true" data-offset-key="2425:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="2426"><span data-slate-leaf="true" data-offset-key="2426:0" data-first-offset="true"><span data-slate-string="true"> (tag.tagName === </span></span></span><span data-slate-object="text" data-key="2427"><span data-slate-leaf="true" data-offset-key="2427:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'script'</span></span></span></span><span data-slate-object="text" data-key="2428"><span data-slate-leaf="true" data-offset-key="2428:0" data-first-offset="true"><span data-slate-string="true">) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2429"><span data-slate-object="text" data-key="2430"><span data-slate-leaf="true" data-offset-key="2430:0" data-first-offset="true"><span data-slate-string="true">              </span></span></span><span data-slate-object="text" data-key="2431"><span data-slate-leaf="true" data-offset-key="2431:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="2432"><span data-slate-leaf="true" data-offset-key="2432:0" data-first-offset="true"><span data-slate-string="true"> hash = computeHash(tag.attributes.src)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2433"><span data-slate-object="text" data-key="2434"><span data-slate-leaf="true" data-offset-key="2434:0" data-first-offset="true"><span data-slate-string="true">              </span></span></span><span data-slate-object="text" data-key="2435"><span data-slate-leaf="true" data-offset-key="2435:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="2436"><span data-slate-leaf="true" data-offset-key="2436:0" data-first-offset="true"><span data-slate-string="true"> (hash) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2437"><span data-slate-object="text" data-key="2438"><span data-slate-leaf="true" data-offset-key="2438:0" data-first-offset="true"><span data-slate-string="true">                tag.attributes.integrity = hash</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2439"><span data-slate-object="text" data-key="2440"><span data-slate-leaf="true" data-offset-key="2440:0" data-first-offset="true"><span data-slate-string="true">              }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2441"><span data-slate-object="text" data-key="2442"><span data-slate-leaf="true" data-offset-key="2442:0" data-first-offset="true"><span data-slate-string="true">            } </span></span></span><span data-slate-object="text" data-key="2443"><span data-slate-leaf="true" data-offset-key="2443:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">else</span></span></span></span><span data-slate-object="text" data-key="2444"><span data-slate-leaf="true" data-offset-key="2444:0" data-first-offset="true"><span data-slate-string="true"> </span></span></span><span data-slate-object="text" data-key="2445"><span data-slate-leaf="true" data-offset-key="2445:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="2446"><span data-slate-leaf="true" data-offset-key="2446:0" data-first-offset="true"><span data-slate-string="true"> (tag.tagName === </span></span></span><span data-slate-object="text" data-key="2447"><span data-slate-leaf="true" data-offset-key="2447:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'link'</span></span></span></span><span data-slate-object="text" data-key="2448"><span data-slate-leaf="true" data-offset-key="2448:0" data-first-offset="true"><span data-slate-string="true"> &amp;&amp; tag.attributes.rel === </span></span></span><span data-slate-object="text" data-key="2449"><span data-slate-leaf="true" data-offset-key="2449:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'stylesheet'</span></span></span></span><span data-slate-object="text" data-key="2450"><span data-slate-leaf="true" data-offset-key="2450:0" data-first-offset="true"><span data-slate-string="true">) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2451"><span data-slate-object="text" data-key="2452"><span data-slate-leaf="true" data-offset-key="2452:0" data-first-offset="true"><span data-slate-string="true">              </span></span></span><span data-slate-object="text" data-key="2453"><span data-slate-leaf="true" data-offset-key="2453:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">const</span></span></span></span><span data-slate-object="text" data-key="2454"><span data-slate-leaf="true" data-offset-key="2454:0" data-first-offset="true"><span data-slate-string="true"> hash = computeHash(tag.attributes.href)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2455"><span data-slate-object="text" data-key="2456"><span data-slate-leaf="true" data-offset-key="2456:0" data-first-offset="true"><span data-slate-string="true">              </span></span></span><span data-slate-object="text" data-key="2457"><span data-slate-leaf="true" data-offset-key="2457:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">if</span></span></span></span><span data-slate-object="text" data-key="2458"><span data-slate-leaf="true" data-offset-key="2458:0" data-first-offset="true"><span data-slate-string="true"> (hash) {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2459"><span data-slate-object="text" data-key="2460"><span data-slate-leaf="true" data-offset-key="2460:0" data-first-offset="true"><span data-slate-string="true">                tag.attributes.integrity = hash</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2461"><span data-slate-object="text" data-key="2462"><span data-slate-leaf="true" data-offset-key="2462:0" data-first-offset="true"><span data-slate-string="true">              }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2463"><span data-slate-object="text" data-key="2464"><span data-slate-leaf="true" data-offset-key="2464:0" data-first-offset="true"><span data-slate-string="true">            }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2465"><span data-slate-object="text" data-key="2466"><span data-slate-leaf="true" data-offset-key="2466:0" data-first-offset="true"><span data-slate-string="true">          })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2467"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2468"><span data-slate-object="text" data-key="2469"><span data-slate-leaf="true" data-offset-key="2469:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="2470"><span data-slate-leaf="true" data-offset-key="2470:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// when using SRI, Chrome somehow cannot reuse</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2471"><span data-slate-object="text" data-key="2472"><span data-slate-leaf="true" data-offset-key="2472:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="2473"><span data-slate-leaf="true" data-offset-key="2473:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// the preloaded resource, and causes the files to be downloaded twice.</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2474"><span data-slate-object="text" data-key="2475"><span data-slate-leaf="true" data-offset-key="2475:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="2476"><span data-slate-leaf="true" data-offset-key="2476:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// this is a Chrome bug (https://bugs.chromium.org/p/chromium/issues/detail?id=677022)</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2477"><span data-slate-object="text" data-key="2478"><span data-slate-leaf="true" data-offset-key="2478:0" data-first-offset="true"><span data-slate-string="true">          </span></span></span><span data-slate-object="text" data-key="2479"><span data-slate-leaf="true" data-offset-key="2479:0" data-first-offset="true"><span class="hljs-comment" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">// for now we disable preload if SRI is used.</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2480"><span data-slate-object="text" data-key="2481"><span data-slate-leaf="true" data-offset-key="2481:0" data-first-offset="true"><span data-slate-string="true">          data.head = data.head.filter(</span></span></span><span data-slate-object="text" data-key="2482"><span data-slate-leaf="true" data-offset-key="2482:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span class="hljs-params" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">tag</span></span></span></span></span><span data-slate-object="text" data-key="2483"><span data-slate-leaf="true" data-offset-key="2483:0" data-first-offset="true"><span class="hljs-function" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true"> =&gt;</span></span></span></span><span data-slate-object="text" data-key="2484"><span data-slate-leaf="true" data-offset-key="2484:0" data-first-offset="true"><span data-slate-string="true"> {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2485"><span data-slate-object="text" data-key="2486"><span data-slate-leaf="true" data-offset-key="2486:0" data-first-offset="true"><span data-slate-string="true">            </span></span></span><span data-slate-object="text" data-key="2487"><span data-slate-leaf="true" data-offset-key="2487:0" data-first-offset="true"><span class="hljs-keyword" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">return</span></span></span></span><span data-slate-object="text" data-key="2488"><span data-slate-leaf="true" data-offset-key="2488:0" data-first-offset="true"><span data-slate-string="true"> !(</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2489"><span data-slate-object="text" data-key="2490"><span data-slate-leaf="true" data-offset-key="2490:0" data-first-offset="true"><span data-slate-string="true">              tag.tagName === </span></span></span><span data-slate-object="text" data-key="2491"><span data-slate-leaf="true" data-offset-key="2491:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'link'</span></span></span></span><span data-slate-object="text" data-key="2492"><span data-slate-leaf="true" data-offset-key="2492:0" data-first-offset="true"><span data-slate-string="true"> &amp;&amp;</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2493"><span data-slate-object="text" data-key="2494"><span data-slate-leaf="true" data-offset-key="2494:0" data-first-offset="true"><span data-slate-string="true">              tag.attributes.rel === </span></span></span><span data-slate-object="text" data-key="2495"><span data-slate-leaf="true" data-offset-key="2495:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">'preload'</span></span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2496"><span data-slate-object="text" data-key="2497"><span data-slate-leaf="true" data-offset-key="2497:0" data-first-offset="true"><span data-slate-string="true">            )</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2498"><span data-slate-object="text" data-key="2499"><span data-slate-leaf="true" data-offset-key="2499:0" data-first-offset="true"><span data-slate-string="true">          })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2500"><span data-slate-object="text" data-key="2501"><span data-slate-leaf="true" data-offset-key="2501:0" data-first-offset="true"><span data-slate-string="true">        }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2502"><span data-slate-object="text" data-key="2503"><span data-slate-leaf="true" data-offset-key="2503:0" data-first-offset="true"><span data-slate-string="true">      })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2504"></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2505"><span data-slate-object="text" data-key="2506"><span data-slate-leaf="true" data-offset-key="2506:0" data-first-offset="true"><span data-slate-string="true">      compilation.hooks.htmlWebpackPluginAfterHtmlProcessing.tap(ID, data =&gt; {</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2507"><span data-slate-object="text" data-key="2508"><span data-slate-leaf="true" data-offset-key="2508:0" data-first-offset="true"><span data-slate-string="true">        data.html = data.html.replace(</span></span></span><span data-slate-object="text" data-key="2509"><span data-slate-leaf="true" data-offset-key="2509:0" data-first-offset="true"><span class="hljs-regexp" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">/\scrossorigin=""/g</span></span></span></span><span data-slate-object="text" data-key="2510"><span data-slate-leaf="true" data-offset-key="2510:0" data-first-offset="true"><span data-slate-string="true">, </span></span></span><span data-slate-object="text" data-key="2511"><span data-slate-leaf="true" data-offset-key="2511:0" data-first-offset="true"><span class="hljs-string" data-slate-type="pm_mark_class" data-slate-object="mark"><span data-slate-string="true">' crossorigin'</span></span></span></span><span data-slate-object="text" data-key="2512"><span data-slate-leaf="true" data-offset-key="2512:0" data-first-offset="true"><span data-slate-string="true">)</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2513"><span data-slate-object="text" data-key="2514"><span data-slate-leaf="true" data-offset-key="2514:0" data-first-offset="true"><span data-slate-string="true">      })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2515"><span data-slate-object="text" data-key="2516"><span data-slate-leaf="true" data-offset-key="2516:0" data-first-offset="true"><span data-slate-string="true">    })</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2517"><span data-slate-object="text" data-key="2518"><span data-slate-leaf="true" data-offset-key="2518:0" data-first-offset="true"><span data-slate-string="true">  }</span></span></span></div><div data-slate-type="pm_linecode" data-slate-object="block" data-key="2519"><span data-slate-object="text" data-key="2520"><span data-slate-leaf="true" data-offset-key="2520:0" data-first-offset="true"><span data-slate-string="true">}</span></span></span></div></pre></div></div></div></div><div class="simplebar-placeholder" style="width: 772px; height: 1610px;"></div></div><div class="simplebar-track simplebar-horizontal" style="visibility: hidden;"><div class="simplebar-scrollbar" style="width: 0px; display: none;"></div></div><div class="simplebar-track simplebar-vertical" style="visibility: hidden;"><div class="simplebar-scrollbar" style="height: 0px; display: none;"></div></div></div></div></div><h3 data-id-heading22="" data-slate-type="pm_heading" data-slate-object="block" data-key="2521"><span data-slate-object="text" data-key="2522"><span data-slate-leaf="true" data-offset-key="2522:0" data-first-offset="true"><span data-slate-string="true">六、总结</span></span></span></h3><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="2523"><span data-slate-object="text" data-key="2524"><span data-slate-leaf="true" data-offset-key="2524:0" data-first-offset="true"><span data-slate-string="true">文章有点长，梳理了webpack原理，loader，以及plugin实现。读源码过程，存在不准确的地方，欢迎留言指正。</span></span></span></p><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="2525"><span data-slate-object="text" data-key="2526"><span data-slate-leaf="true" data-offset-key="2526:0"><span data-slate-zero-width="n" data-slate-length="0">﻿</span></span></span></p><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="2527"><span data-slate-object="text" data-key="2528"><span data-slate-leaf="true" data-offset-key="2528:0" data-first-offset="true"><span data-slate-string="true">客官点个关注呗！</span></span></span></p><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="2529"><span data-slate-object="text" data-key="2530"><span data-slate-leaf="true" data-offset-key="2530:0" data-first-offset="true"><span data-slate-string="true">后续将努力推出系列文章：Low Code Development Platform（低代码平台相关实现）</span></span></span></p><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="2531"><span data-slate-object="text" data-key="2532"><span data-slate-leaf="true" data-offset-key="2532:0"><span data-slate-zero-width="n" data-slate-length="0">﻿</span></span></span></p><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="2533"><span data-slate-object="text" data-key="2534"><span data-slate-leaf="true" data-offset-key="2534:0" data-first-offset="true"><b data-slate-type="pm_bold" data-slate-object="mark"><span data-slate-string="true">--END--</span></b></span></span></p><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="2535"><span data-slate-object="text" data-key="2536"><span data-slate-leaf="true" data-offset-key="2536:0" data-first-offset="true"><span data-slate-string="true">﻿</span></span></span></p><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="2537"><span data-slate-object="text" data-key="2538"><span data-slate-leaf="true" data-offset-key="2538:0" data-first-offset="true"><b data-slate-type="pm_bold" data-slate-object="mark"><span data-slate-string="true">作者：</span></b></span></span><span data-slate-object="text" data-key="2539"><span data-slate-leaf="true" data-offset-key="2539:0" data-first-offset="true"><span data-slate-string="true">梁龙先森</span></span></span><span data-slate-object="text" data-key="2540"><span data-slate-leaf="true" data-offset-key="2540:0" data-first-offset="true"><b data-slate-type="pm_bold" data-slate-object="mark"><span data-slate-string="true">  WX：</span></b></span></span><span data-slate-object="text" data-key="2541"><span data-slate-leaf="true" data-offset-key="2541:0" data-first-offset="true"><span data-slate-string="true">newBlob</span></span></span></p><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="2542"><span data-slate-object="text" data-key="2543"><span data-slate-leaf="true" data-offset-key="2543:0" data-first-offset="true"><span data-slate-string="true">﻿</span></span></span></p><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="2544"><span data-slate-object="text" data-key="2545"><span data-slate-leaf="true" data-offset-key="2545:0" data-first-offset="true"><b data-slate-type="pm_bold" data-slate-object="mark"><span data-slate-string="true">原创作品，抄袭必究!</span></b></span></span></p><p data-slate-type="pm_paragraph" data-slate-object="block" data-key="2546"><span data-slate-object="text" data-key="2547"><span data-slate-leaf="true" data-offset-key="2547:0"><span data-slate-zero-width="n" data-slate-length="0">﻿</span></span></span></p></div></div><div data-v-a3994fa2="" data-v-8a30c550="" class="selection-operation-bar note-bar down"><div data-v-a3994fa2="" class="arrow down"></div><div data-v-a3994fa2="" class="main"><div data-v-a3994fa2="" class="menu line"><i data-v-6c722c11="" data-v-a3994fa2="" class="com-icon iconfont icon-hover" style="font-size: 20px; color: rgb(255, 255, 255);"></i><span data-v-a3994fa2="" class="text">划线</span></div><!----><div data-v-a3994fa2="" class="menu comment"><i data-v-6c722c11="" data-v-a3994fa2="" class="com-icon iconfont icon-hover" style="font-size: 20px; color: rgb(255, 255, 255);"></i><span data-v-a3994fa2="" class="text">评论</span></div><div data-v-a3994fa2="" class="menu copy"><i data-v-6c722c11="" data-v-a3994fa2="" class="com-icon iconfont icon-hover" style="font-size: 20px; color: rgb(255, 255, 255);"></i><span data-v-a3994fa2="" class="text">复制</span></div></div></div></div></div><div data-v-600d9bfb="" data-v-5dce9577="" class="author-information after-content"><div data-v-600d9bfb="" data-v-5dce9577="" class="row"><span data-v-600d9bfb="" data-v-5dce9577="" class="date">发布于: 2020 年 11 月 30 日</span><span data-v-600d9bfb="" data-v-5dce9577="" class="views">阅读数: 571</span></div></div><div data-v-600d9bfb="" data-v-5dce9577="" class="copyright"><p data-v-600d9bfb="" data-v-5dce9577="">版权声明: 本文为 InfoQ 作者【梁龙先森】的原创文章。</p><p data-v-600d9bfb="" data-v-5dce9577="">原文链接:【<a href="https://xie.infoq.cn/article/5f463d1f0ec3598973714f44a" target="_blank">https://xie.infoq.cn/article/5f463d1f0ec3598973714f44a</a>】。文章转载请联系作者。</p></div><!----><div data-v-7bc9ce3d="" data-v-600d9bfb="" class="com-label-list tag-list" data-v-5dce9577=""><a data-v-35c3c309="" data-v-7bc9ce3d="" href="https://xie.infoq.cn/tag371" com-label-title="" class="com-label-title">前端</a><a data-v-35c3c309="" data-v-7bc9ce3d="" href="https://xie.infoq.cn/tag2362" com-label-title="" class="com-label-title">前端工程化</a><a data-v-35c3c309="" data-v-7bc9ce3d="" href="https://xie.infoq.cn/tag2364" com-label-title="" class="com-label-title">webpack</a><a data-v-35c3c309="" data-v-7bc9ce3d="" href="https://xie.infoq.cn/tag3810" com-label-title="" class="com-label-title">前端进阶</a></div><div data-v-5c7b5c28="" data-v-600d9bfb="" author-card="" class="com-author-card author-info" data-v-5dce9577=""><div data-v-5c7b5c28="" class="author-card"><div data-v-5c7b5c28="" class="top"><div data-v-5c7b5c28="" class="avatar"><div data-v-954a0b28="" data-v-5c7b5c28="" class="com-avatar-wrap"><img data-v-954a0b28="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/40c33056.jpg" alt="用户头像" class="com-avatar" style="width: 55px; height: 55px;"><!----></div></div><div data-v-5c7b5c28="" class="info"><div data-v-5c7b5c28="" class="top"><h3 data-v-5c7b5c28="" class="author-name"><a data-v-3824578a="" data-v-6281d13f="" data-v-5c7b5c28="" rel="nofollow" com-author-name="" class="com-author-name">梁龙先森</a></h3><div data-v-d2847db8="" data-v-5c7b5c28="" gk-button="" gkbtn-color="unfollow" gkbtn-size="small" class="geek-foll-btn Button_button_3onsJ" follow-button="" data-follow="0"><i data-v-5c7b5c28="" class="iconfont"></i>关注</div></div><p data-v-5c7b5c28="" class="mood"> 技术交流加V：newBlob <span data-v-5c7b5c28="" class="dot"></span> 2018.03.17 加入</p></div></div><!----><p data-v-5c7b5c28="" class="intro">还未添加个人简介</p></div></div><div data-v-7fad60de="" data-v-600d9bfb="" class="widget-operation-bottom widget-operation inner" data-v-5dce9577=""><!----><div data-v-7fad60de="" class="like btn"><i data-v-7fad60de="" class="iconfont"></i><!----></div><div data-v-7fad60de="" class="favorite btn"><i data-v-7fad60de="" class="iconfont"></i></div><!----><div data-v-7fad60de="" class="weixin btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" class="weibo btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" class="horde btn"><i data-v-7fad60de="" class="iconfont"></i></div><div data-v-7fad60de="" data-self="2" data-label="举报" class="extra btn"><i data-v-7fad60de="" class="iconfont"></i></div></div><div data-v-7cc2c0f1="" data-v-600d9bfb="" class="article-comment-block comment-list-wrap" data-v-5dce9577=""><div data-v-7cc2c0f1="" class="comment-list"><h2 data-v-7cc2c0f1="">评论 <!----></h2><div data-v-7cc2c0f1="" class="comment-form"><div data-v-7cc2c0f1="" class="comment-input no-reference"><div data-v-045f148c="" data-v-7cc2c0f1="" contenteditable="plaintext-only" spellcheck="false" placeholder="快抢沙发！虚位以待" class="textarea comment-textarea empty"></div> <!----></div><div data-v-7cc2c0f1="" class="comment-operation"><div data-v-7cc2c0f1="" gk-button="" gkbtn-color="green" gkbtn-size="normal" disabled="disabled" class="comment-btn Button_button_3onsJ"> 发布 </div></div></div><div data-v-7cc2c0f1="" class="empty-comment"> 暂无评论 </div></div></div></div><!----><div data-v-bd4f10b0="" data-v-600d9bfb="" id="gk-layer" gkmodal-color="common" class="report-modal Modal_gk-modal_3ly5T" data-v-5dce9577=""><!----><!----></div><div data-v-355438c6="" data-v-600d9bfb="" id="gk-layer" gkmodal-color="base" class="share-weixin-modal Modal_gk-modal_3ly5T" data-v-5dce9577=""><!----><!----></div><div data-v-17597960="" data-v-600d9bfb="" id="gk-layer" gkmodal-color="base" class="modal-share-horde Modal_gk-modal_3ly5T" data-v-5dce9577=""><!----><!----></div><!----></div></div><div data-v-5dce9577="" layout-footer-wrap="" class="layout-footer-wrap"><div data-v-03868803="" data-v-5dce9577="" class="footer layout-footer"><ul data-v-03868803="" class="layout-content"><li data-v-03868803="" class="theme"><div data-v-03868803="" class="logo"><img data-v-03868803="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/logo.c331e7ae.png" alt="logo"><p data-v-03868803="">促进软件开发及相关领域知识与创新的传播</p></div><dl data-v-03868803=""><dt data-v-03868803="">商务专区</dt><dd data-v-03868803=""><ul data-v-03868803=""><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/huawei/cloudnativedays.html" target="_blank" rel="noopener nofollow">华为云 MeetUp</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.geekbang.org/page/aws2019.html?utm_source=infoq&amp;utm_medium=specialtopic" target="_blank" rel="noopener nofollow">AWS 技术专区</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/microsoft/?utm_source=guanwang&amp;utm_medium=0831" target="_blank" rel="noopener nofollow">微软技术专区</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/tencent/2020/cloud.html" target="_blank" rel="noopener nofollow">2020腾讯云·云开发技术峰会</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/google/cloud/" target="_blank" rel="noopener nofollow">Google Cloud</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/huawei/cloud/" target="_blank" rel="noopener nofollow">华为云5G+X联创营</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/huawei/devrun.html" target="_blank" rel="noopener nofollow">华为云 DevRun 专区</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/huawei/developer/" target="_blank" rel="noopener nofollow">鲲鹏应用创新大赛2020</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/intel/2019/ai.html?utm_campaign=2019_q4_dcg_ai&amp;utm_source=infoq&amp;utm_medium=display_banner&amp;utm_content=ai" target="_blank" rel="noopener nofollow">Intel AI</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/tengxunyun/techo/" target="_blank" rel="noopener nofollow">腾讯Techo开发者大会</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/baidu-salon/" target="_blank" rel="noopener nofollow">百度技术沙龙</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/talkingdata/2019/t11/" target="_blank" rel="noopener nofollow">T11数据智能峰会</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.geekbang.org/page/thunderchain.html" target="_blank" rel="noopener nofollow">迅雷链技术专区</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/oppo-open-day/" target="_blank" rel="noopener nofollow">OPPO技术开放日</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://cloud.tencent.com/developer/conf/2018-beijing?channel=tbzt" target="_blank" rel="noopener nofollow">云+社区开发者大会</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/baidu-ai/" target="_blank" rel="noopener nofollow">百度AI 开放平台</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/huawei/shengteng/" target="_blank" rel="noopener nofollow">华为昇腾技术沙龙</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/huawei/kunpeng/" target="_blank" rel="noopener nofollow">DevRun鲲鹏开发者沙龙2020</a></li><li data-v-03868803=""><a data-v-03868803="" href="https://www.infoq.cn/zones/Intel/2019IntelCSP.html" target="_blank" rel="noopener nofollow">Intel 精彩芯体验</a></li></ul></dd></dl></li><li data-v-03868803=""><dl data-v-03868803="" class="footer-nav"><dt data-v-03868803="">InfoQ</dt><dd data-v-03868803=""><!----><a data-v-03868803="" href="https://www.infoq.cn/about" target="_blank" rel="noopener nofollow">关于我们</a></dd><dd data-v-03868803=""><!----><a data-v-03868803="" href="https://www.infoq.cn/contribute" target="_blank" rel="noopener nofollow">我要投稿</a></dd><dd data-v-03868803=""><!----><a data-v-03868803="" href="https://www.geekbang.org/partner" target="_blank" rel="noopener nofollow">合作伙伴</a></dd><dd data-v-03868803=""><!----><a data-v-03868803="" href="https://www.lagou.com/gongsi/j43775.html" target="_blank" rel="noopener nofollow">加入我们</a></dd><dd data-v-03868803=""><!----><a data-v-03868803="" href="https://infoq.cn/official/account" target="_blank" rel="noopener nofollow">关注我们</a></dd></dl></li><li data-v-03868803=""><dl data-v-03868803="" class="footer-nav"><dt data-v-03868803="">联系我们</dt><dd data-v-03868803=""><!----><a data-v-03868803="" href="mailto:editors@geekbang.com" target="_blank" rel="noopener nofollow">内容投稿：editors@geekbang.com</a></dd><dd data-v-03868803=""><!----><a data-v-03868803="" href="mailto:hezuo@geekbang.com" target="_blank" rel="noopener nofollow">业务合作：hezuo@geekbang.com</a></dd><dd data-v-03868803=""><!----><a data-v-03868803="" href="mailto:feedback@geekbang.com" target="_blank" rel="noopener nofollow">反馈投诉：feedback@geekbang.com</a></dd><dd data-v-03868803=""><!----><a data-v-03868803="" href="mailto:zhaopin@geekbang.com" target="_blank" rel="noopener nofollow">加入我们：zhaopin@geekbang.com</a></dd><dd data-v-03868803=""><!----><span data-v-03868803="">联系电话：010-64738142</span></dd><dd data-v-03868803=""><!----><span data-v-03868803="">地址：北京市朝阳区叶青大厦北园</span></dd></dl></li><li data-v-03868803=""><dl data-v-03868803="" class="footer-nav"><dt data-v-03868803="">InfoQ 近期会议</dt><dd data-v-03868803=""><img data-v-03868803="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/e9389010abc33c8414653cdffd281a55.png" alt="会议图片"><a data-v-03868803="" href="https://archsummit.infoq.cn/2020/shenzhen/?utm_source=infoq&amp;utm_medium=footer" target="_blank" rel="noopener nofollow">全球架构师峰会  09月11-12日</a></dd><dd data-v-03868803=""><img data-v-03868803="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/682e88b72d998d472686410a05c67986.png" alt="会议图片"><a data-v-03868803="" href="https://aicon.infoq.cn/2020/shanghai/?utm_source=infoq&amp;utm_medium=footer" target="_blank" rel="noopener nofollow">全球人工智能与机器学习技术大会  09月24-25日</a></dd><dd data-v-03868803=""><img data-v-03868803="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/628b5e750e918f52cda61a19fdc186f5.png" alt="会议图片"><a data-v-03868803="" href="https://qcon.infoq.cn/2020/beijing/?utm_source=infoq&amp;utm_medium=footer" target="_blank" rel="noopener nofollow">全球软件开发大会 10月15-17日</a></dd><dd data-v-03868803=""><img data-v-03868803="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/628b5e750e918f52cda61a19fdc186f5.png" alt="会议图片"><a data-v-03868803="" href="https://gmtc.infoq.cn/2020/beijing/?utm_source=infoq&amp;utm_medium=footer" target="_blank" rel="noopener nofollow">全球大前端技术大会  11月24-25日</a></dd></dl></li><li data-v-03868803=""><dl data-v-03868803="" class="footer-nav"><dt data-v-03868803="">全球 InfoQ</dt><dd data-v-03868803=""><img data-v-03868803="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/55cd81623e36f5ab7a7db74d60b74838.png" alt="会议图片"><a data-v-03868803="" href="https://www.infoq.com/" target="_blank" rel="noopener nofollow">InfoQ  En</a></dd><dd data-v-03868803=""><img data-v-03868803="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/95fe851c02c86120e9037eada6a36d13.png" alt="会议图片"><a data-v-03868803="" href="https://www.infoq.com/jp/" target="_blank" rel="noopener nofollow">InfoQ Jp</a></dd><dd data-v-03868803=""><img data-v-03868803="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/2aa440b6d94e94f64c508f16da38933e.png" alt="会议图片"><a data-v-03868803="" href="http://www.infoq.com/fr/" target="_blank" rel="noopener nofollow">InfoQ Fr</a></dd><dd data-v-03868803=""><img data-v-03868803="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/4e737ce82bc7c8a1c2f2307bcea9a11e.png" alt="会议图片"><a data-v-03868803="" href="http://www.infoq.com/br/" target="_blank" rel="noopener nofollow">InfoQ Br</a></dd></dl></li></ul><div data-v-03868803="" class="copyright"> Copyright © 2020, Geekbang Technology Ltd. All rights reserved. 极客邦控股（北京）有限公司 | <a data-v-03868803="" target="_blank" href="http://www.beian.miit.gov.cn/" class="icp"> 京 ICP 备 16027448 号 - 5</a><a data-v-03868803="" target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502039052"><img data-v-03868803="" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/beian.d0289dc0.png" alt="京公网安备"><span data-v-03868803="">京公网安备 11010502039052号</span></a></div></div></div><div data-v-5dce9577="" id="gk-layer" gkmodal-color="common" class="offline-modal Modal_gk-modal_3ly5T"><!----><!----></div></div>
<img src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/logo-121-75.yuij86g.png" alt="源码 | 浅谈Webpack原理，以及loader和plugin实现。" style="display: none;">
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-103082599-11', 'auto');
    ga('send', 'pageview');
</script>
<script>
    var __gBaiduSiteIdConfig__ = {
        infoq: '094d2af1d9a57fd9249b3fa259428445',
        xie: 'c53c258392315152cda6662d99774537'
    };
    var _hmt = _hmt || [];
    _hmt.push(['_setAccount', __gBaiduSiteIdConfig__.infoq]);
    _hmt.push(['_setAutoPageview', true]);
    _hmt.push(['_setAccount', __gBaiduSiteIdConfig__.xie]);
    _hmt.push(['_setAutoPageview', true]);

    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?" + __gBaiduSiteIdConfig__.infoq;
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
    
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?" + __gBaiduSiteIdConfig__.xie;
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
    
</script>
<script>
    
    var isSmart = /swan\//.test(window.navigator.userAgent) || /^webswan-/.test(window.name);
    if (isSmart) {
        var smart = document.createElement("script");
        smart.src = "https://b.bdstatic.com/searchbox/icms/searchbox/js/swan-2.0.21.js";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(smart, s);
    }
</script>
<script>
    (function(para) {
        var p = para.sdk_url, n = para.name, w = window, d = document, s = 'script',x = null,y = null;
        if(typeof(w['sensorsDataAnalytic201505']) !== 'undefined') {
            return false;
        }
        w['sensorsDataAnalytic201505'] = n;
        w[n] = w[n] || function(a) {return function() {(w[n]._q = w[n]._q || []).push([a, arguments]);}};
        var ifs = ['track','quick','register','registerPage','registerOnce','trackSignup', 'trackAbtest', 'setProfile','setOnceProfile','appendProfile', 'incrementProfile', 'deleteProfile', 'unsetProfile', 'identify','login','logout','trackLink','clearAllRegister','getAppStatus'];
        for (var i = 0; i < ifs.length; i++) {
            w[n][ifs[i]] = w[n].call(null, ifs[i]);
        }
        if (!w[n]._t) {
            x = d.createElement(s), y = d.getElementsByTagName(s)[0];
            x.async = 1;
            x.src = p;
            x.setAttribute('charset','UTF-8');
            w[n].para = para;
            y.parentNode.insertBefore(x, y);
        }
    })({
        sdk_url: 'https://static.sensorsdata.cn/sdk/1.15.15/sensorsdata.min.js',
        heatmap_url: 'https://static.sensorsdata.cn/sdk/1.15.15/heatmap.min.js',
        name: 'sensors',
        server_url: 'https://sscentry.geekbang.org/sa?project=production',
        show_log: false,
        is_track_single_page: true,
        heatmap: {
            clickmap: 'default',
            scroll_notice_map: 'not_collect'
        },
        preset_properties: {
            latest_referrer_host: true,
            latest_landing_page: true,
            url: true
        }
    });
</script>

    <script type="text/javascript" src="./源码 _ 浅谈Webpack原理，以及loader和plugin实现。 - InfoQ 写作平台_files/main.js.下载"></script>



<div data-v-3710ffdc="" id="gkui-message-list" style="top: 24px;"><span data-v-3710ffdc=""></span></div><div id="gkui-modal-controller"><!----></div><div class="common-login-modal"><div data-v-a8f7a3ac="" id="gk-layer" gkmodal-color="base" class="modal-login Modal_gk-modal_3ly5T"><!----><!----></div><div data-v-5070518a="" id="gk-layer" gkmodal-color="base" class="modal-guide Modal_gk-modal_3ly5T"><!----><!----></div><div data-v-4e23a88d="" id="gk-layer" gkmodal-color="base" class="modal-receive-success Modal_gk-modal_3ly5T"><!----><!----></div><div data-v-b3d76520="" id="gk-layer" gkmodal-color="base" class="modal-rebind Modal_gk-modal_3ly5T"><!----><!----></div></div><!----><!----><img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEHAAEALAAAAAABAAEAAAICTAEAOw==" id="page-complete" style="display: none;"></body></html>